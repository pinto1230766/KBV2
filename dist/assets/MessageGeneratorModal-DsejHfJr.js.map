{"version":3,"mappings":"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","names":["Check","createLucideIcon","Send","Wand2","messageTemplates","hostRequestMessageTemplates","adaptMessageGender","message","speakerGender","hostGender","adapted","generateMessage","visit","speaker","host","congregationProfile","messageType","role","language","customTemplate","template","replaceVariables","hostName","formatFullDate","intro","getFirstTimeIntroduction","congregationName","generateHostRequestMessage","visits","visitsList","index","dateFormatted","generateWithAI","action","apiKey","temperature","GoogleGenerativeAI","__vitePreload","model","prompt","error","MessageGeneratorModal","isOpen","onClose","initialChannel","initialType","settings","useSettings","hosts","useData","addToast","useToast","setMessage","useState","channel","setChannel","type","setType","setLanguage","isGenerating","setIsGenerating","showAIOptions","setShowAIOptions","handleAIGenerate","result","useEffect","handleGenerate","h","generated","handleCopy","handleSend","encodedMessage","phone","subject","body","jsx","Modal","jsxs","Fragment","Button","Copy","Select","e","RefreshCw"],"ignoreList":[0,1,2],"sources":["../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/wand-2.js","../../src/data/messageTemplates.ts","../../src/utils/messageGenerator.ts","../../src/components/messages/MessageGeneratorModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wand2 = createLucideIcon(\"Wand2\", [\n  [\n    \"path\",\n    {\n      d: \"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z\",\n      key: \"1bcowg\"\n    }\n  ],\n  [\"path\", { d: \"m14 7 3 3\", key: \"1r5n42\" }],\n  [\"path\", { d: \"M5 6v4\", key: \"ilb8ba\" }],\n  [\"path\", { d: \"M19 14v4\", key: \"blhpug\" }],\n  [\"path\", { d: \"M10 2v2\", key: \"7u0qdc\" }],\n  [\"path\", { d: \"M7 8H3\", key: \"zfb6yr\" }],\n  [\"path\", { d: \"M21 16h-4\", key: \"1cnmox\" }],\n  [\"path\", { d: \"M11 3H9\", key: \"1obp7u\" }]\n]);\n\nexport { Wand2 as default };\n//# sourceMappingURL=wand-2.js.map\n","import { MessageTemplate, Gender } from '@/types';\r\n\r\n// ============================================================================\r\n// MOD√àLES DE MESSAGES PAR LANGUE ET TYPE\r\n// ============================================================================\r\n\r\nexport const messageTemplates: MessageTemplate = {\r\n  // ========== FRAN√áAIS ==========\r\n  fr: {\r\n    confirmation: {\r\n      speaker: `Bonjour Fr√®re *{speakerName}*,{firstTimeIntroduction}\r\n\r\nJ'esp√®re que tu vas bien. üôè\r\n\r\nC'est avec joie que nous attendons ta visite le *{visitDate} √† {visitTime}*.\r\n\r\nPourrais-tu me confirmer ta pr√©sence et me faire savoir si tu as besoin de quelque chose de sp√©cial (h√©bergement, repas, transport) ?\r\n\r\nMerci beaucoup et √† bient√¥t !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n      \r\n      host: `Bonjour Fr√®re *{hostName}*,\r\n\r\nJ'esp√®re que tu vas bien. üè†\r\n\r\nNous avons le plaisir d'accueillir *{speakerName}* de la congr√©gation de *{congregation}* le *{visitDate}*.\r\n\r\nPourrais-tu te charger de son accueil ? Merci de me confirmer.\r\n\r\nFraternellement,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n    },\r\n    \r\n    preparation: {\r\n      speaker: `Bonjour Fr√®re *{speakerName}*,\r\n\r\nMerci pour ta confirmation ! üòä\r\n\r\nVoici les d√©tails pour ta visite du *{visitDate} √† {visitTime}* :\r\n\r\nüè† *Contact d'accueil* : {hostName}\r\nüìû *T√©l√©phone* : {hostPhone}\r\nüìç *Adresse* : {hostAddress}\r\n\r\nN'h√©site pas √† contacter directement notre fr√®re {hostName} si besoin.\r\n\r\nAu plaisir de te voir bient√¥t !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bonjour Fr√®re *{hostName}*,\r\n\r\nMerci pour ta disponibilit√© ! üôè\r\n\r\nVoici les coordonn√©es de notre orateur invit√© pour le *{visitDate}* :\r\n\r\nüë§ *Orateur* : {speakerName}\r\nüèõÔ∏è *Congr√©gation* : {congregation}\r\nüìû *T√©l√©phone* : {speakerPhone}\r\n\r\nMerci de prendre contact avec lui pour coordonner l'accueil.\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-7': {\r\n      speaker: `Bonjour Fr√®re *{speakerName}*,\r\n\r\nPetit rappel amical : nous attendons ta visite avec joie dans *7 jours*, le *{visitDate} √† {visitTime}* ! üéâ\r\n\r\nüìç Adresse : {hostAddress}\r\nüìû Contact : {hostName} - {hostPhone}\r\n\r\nBon voyage et √† tr√®s bient√¥t !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bonjour Fr√®re *{hostName}*,\r\n\r\nPetit rappel : tu accueilles *{speakerName}* dans *7 jours*, le *{visitDate}* ! üè†\r\n\r\nMerci pour ton hospitalit√© !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-2': {\r\n      speaker: `Bonjour Fr√®re *{speakerName}*,\r\n\r\nDernier rappel : nous t'attendons *apr√®s-demain*, le *{visitDate} √† {visitTime}* ! üòä\r\n\r\nüìç {hostAddress}\r\nüìû {hostName} : {hostPhone}\r\n\r\nBon voyage et √† tr√®s vite !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    thanks: {\r\n      speaker: `Bonjour Fr√®re *{speakerName}*,\r\n\r\nMerci infiniment pour ta visite et ton discours √©difiant ! üôè‚ú®\r\n\r\nCe fut un r√©el plaisir de t'accueillir parmi nous. Nous esp√©rons te revoir tr√®s bient√¥t !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bonjour Fr√®re *{hostName}*,\r\n\r\nUn grand merci pour ton hospitalit√© envers notre orateur invit√©, {speakerName} ! üè†‚ù§Ô∏è\r\n\r\nTon accueil chaleureux contribue grandement √† la r√©ussite de ces visites.\r\n\r\nFraternellement,\r\n{hospitalityOverseer}`,\r\n    },\r\n  },\r\n\r\n  // ========== CAPVERDIEN ==========\r\n  cv: {\r\n    confirmation: {\r\n      speaker: `Bon dia Mon *{speakerName}*,{firstTimeIntroduction}\r\n\r\nN ta spera ma bu sta bon. üôè\r\n\r\nE ku alegria ma nu ta spera bu bizita dia *{visitDate} na {visitTime}*.\r\n\r\nBu pode confirma-m bu prezensa i txoma-m si bu ten nesesidadi di kualker koza (alojamentu, kumida, transporte)?\r\n\r\nObrigadu di more i te logu!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n      \r\n      host: `Bon dia Mon *{hostName}*,\r\n\r\nN ta spera ma bu sta bon. üè†\r\n\r\nNu ten prazer di akolhe *{speakerName}* di kongregas on di *{congregation}* dia *{visitDate}*.\r\n\r\nBu pode inkarga-u di akolhimentu? Favor konfirma-m.\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n    },\r\n    \r\n    preparation: {\r\n      speaker: `Bon dia Mon *{speakerName}*,\r\n\r\nObrigadu pa bu konfirmas on! üòä\r\n\r\nAki es detalhis pa bu bizita dia *{visitDate} na {visitTime}* :\r\n\r\nüè† *Kontaktu di akolhimentu* : {hostName}\r\nüìû *Telefone* : {hostPhone}\r\nüìç *Morada* : {hostAddress}\r\n\r\nSi bu prisize, bu pode kontakta diretamenti nu mon {hostName}.\r\n\r\nTe logu!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bon dia Mon *{hostName}*,\r\n\r\nObrigadu pa bu dizponibilidadi! üôè\r\n\r\nAki es kontaktu di nu orador kombidadu pa dia *{visitDate}* :\r\n\r\nüë§ *Orador* : {speakerName}\r\nüèõÔ∏è *Kongregas on* : {congregation}\r\nüìû *Telefone* : {speakerPhone}\r\n\r\nFavor kontakta-l pa kordina akolhimentu.\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-7': {\r\n      speaker: `Bon dia Mon *{speakerName}*,\r\n\r\nLimbrans a di amisti: nu ta spera bu bizita ku alegria dento di *7 dia*, dia *{visitDate} na {visitTime}*! üéâ\r\n\r\nüìç Morada : {hostAddress}\r\nüìû Kontaktu : {hostName} - {hostPhone}\r\n\r\nBon biaji i te logu!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bon dia Mon *{hostName}*,\r\n\r\nLimbrans a : bu ta akolhe *{speakerName}* dento di *7 dia*, dia *{visitDate}*! üè†\r\n\r\nObrigadu pa bu ospitalidadi!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-2': {\r\n      speaker: `Bon dia Mon *{speakerName}*,\r\n\r\nUltimu limbrans a : nu ta sper√°-u *dizpois di manha*, dia *{visitDate} na {visitTime}*! üòä\r\n\r\nüìç {hostAddress}\r\nüìû {hostName} : {hostPhone}\r\n\r\nBon biaji i te ja!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    thanks: {\r\n      speaker: `Bon dia Mon *{speakerName}*,\r\n\r\nObrigadu infinitamenti pa bu bizita i bu diskursu idifikanti! üôè‚ú®\r\n\r\nFoi un prazer riali di akolhe-u entre nu. Nu ta spera bo i-u logu!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Bon dia Mon *{hostName}*,\r\n\r\nUn grandi obrigadu pa bu ospitalidadi pa ku nu orador kombidadu, {speakerName}! üè†‚ù§Ô∏è\r\n\r\nBu akolhimentu kalorozi ta kontribui munti pa susesu di es bizitas.\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}`,\r\n    },\r\n  },\r\n\r\n  // ========== PORTUGAIS ==========\r\n  pt: {\r\n    confirmation: {\r\n      speaker: `Ol√° Irm√£o *{speakerName}*,{firstTimeIntroduction}\r\n\r\nEspero que estejas bem. üôè\r\n\r\nAguardamos com alegria a tua visita no dia *{visitDate} √†s {visitTime}*.\r\n\r\nPoderias confirmar a tua presen√ßa e dizer-me se precisas de algo especial (alojamento, refei√ß√µes, transporte)?\r\n\r\nMuito obrigado e at√© breve!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n      \r\n      host: `Ol√° Irm√£o *{hostName}*,\r\n\r\nEspero que estejas bem. üè†\r\n\r\nTemos o prazer de receber *{speakerName}* da congrega√ß√£o de *{congregation}* no dia *{visitDate}*.\r\n\r\nPoderias encarregar-te do seu acolhimento? Por favor, confirma-me.\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n    },\r\n    \r\n    preparation: {\r\n      speaker: `Ol√° Irm√£o *{speakerName}*,\r\n\r\nObrigado pela tua confirma√ß√£o! üòä\r\n\r\nAqui est√£o os detalhes para a tua visita de *{visitDate} √†s {visitTime}*:\r\n\r\nüè† *Contacto de acolhimento*: {hostName}\r\nüìû *Telefone*: {hostPhone}\r\nüìç *Morada*: {hostAddress}\r\n\r\nN√£o hesites em contactar diretamente o nosso irm√£o {hostName} se precisares.\r\n\r\nAt√© breve!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Ol√° Irm√£o *{hostName}*,\r\n\r\nObrigado pela tua disponibilidade! üôè\r\n\r\nAqui est√£o os contactos do nosso orador convidado para *{visitDate}*:\r\n\r\nüë§ *Orador*: {speakerName}\r\nüèõÔ∏è *Congrega√ß√£o*: {congregation}\r\nüìû *Telefone*: {speakerPhone}\r\n\r\nPor favor, contacta-o para coordenar o acolhimento.\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-7': {\r\n      speaker: `Ol√° Irm√£o *{speakerName}*,\r\n\r\nLembrete amig√°vel: aguardamos a tua visita com alegria daqui a *7 dias*, no dia *{visitDate} √†s {visitTime}*! üéâ\r\n\r\nüìç Morada: {hostAddress}\r\nüìû Contacto: {hostName} - {hostPhone}\r\n\r\nBoa viagem e at√© breve!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Ol√° Irm√£o *{hostName}*,\r\n\r\nLembrete: ir√°s acolher *{speakerName}* daqui a *7 dias*, no dia *{visitDate}*! üè†\r\n\r\nObrigado pela tua hospitalidade!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    'reminder-2': {\r\n      speaker: `Ol√° Irm√£o *{speakerName}*,\r\n\r\n√öltimo lembrete: esperamos-te *depois de amanh√£*, no dia *{visitDate} √†s {visitTime}*! üòä\r\n\r\nüìç {hostAddress}\r\nüìû {hostName}: {hostPhone}\r\n\r\nBoa viagem e at√© muito breve!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n    },\r\n    \r\n    thanks: {\r\n      speaker: `Ol√° Irm√£o *{speakerName}*,\r\n\r\nMuito obrigado pela tua visita e pelo teu discurso encorajador! üôè‚ú®\r\n\r\nFoi um verdadeiro prazer receber-te entre n√≥s. Esperamos ver-te novamente em breve!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n      \r\n      host: `Ol√° Irm√£o *{hostName}*,\r\n\r\nUm grande obrigado pela tua hospitalidade para com o nosso orador convidado, {speakerName}! üè†‚ù§Ô∏è\r\n\r\nO teu acolhimento caloroso contribui muito para o sucesso destas visitas.\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}`,\r\n    },\r\n  },\r\n};\r\n\r\n// ============================================================================\r\n// MOD√àLES DE DEMANDE D'ACCUEIL\r\n// ============================================================================\r\n\r\nexport const hostRequestMessageTemplates = {\r\n  fr: `Bonjour √† tous ! üè†\r\n\r\nNous recherchons des volontaires pour accueillir nos orateurs visiteurs aux dates suivantes :\r\n\r\n{visitsList}\r\n\r\nSi vous √™tes disponible pour accueillir un ou plusieurs de ces orateurs, merci de me contacter.\r\n\r\nQue J√©hovah vous b√©nisse !\r\n\r\nFraternellement,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n\r\n  cv: `Bon dia tudu! üè†\r\n\r\nNu ta busca voluntariuoppa akolhe nu oradorisvizitantis na es datas li :\r\n\r\n{visitsList}\r\n\r\nSi bu sta dizponivel pa akolhe un o mas di es oradaris, favor kontakta-m.\r\n\r\nMa Jeova abensoa-bu!\r\n\r\nFraternalmenti,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n\r\n  pt: `Ol√° a todos! üè†\r\n\r\nEstamos √† procura de volunt√°rios para acolher os nossos oradores visitantes nas seguintes datas:\r\n\r\n{visitsList}\r\n\r\nSe estiveres dispon√≠vel para acolher um ou mais destes oradores, por favor contacta-me.\r\n\r\nQue Jeov√° vos aben√ßoe!\r\n\r\nFraternalmente,\r\n{hospitalityOverseer}\r\nüìû {hospitalityOverseerPhone}`,\r\n};\r\n\r\n// ============================================================================\r\n// FONCTION D'ADAPTATION DU GENRE\r\n// ============================================================================\r\n\r\nexport function adaptMessageGender(\r\n  message: string,\r\n  speakerGender?: Gender,\r\n  hostGender?: Gender\r\n): string {\r\n  let adapted = message;\r\n\r\n  // Adaptation pour orateur f√©minin\r\n  if (speakerGender === 'female') {\r\n    // Fr\r\n    adapted = adapted.replace(/Bonjour Fr√®re/g, 'Bonjour S≈ìur');\r\n    adapted = adapted.replace(/Fr√®re \\*{speakerName}\\*/g, 'S≈ìur *{speakerName}*');\r\n    adapted = adapted.replace(/notre orateur invit√©/g, 'notre oratrice invit√©e');\r\n    // Pt\r\n    adapted = adapted.replace(/Ol√° Irm√£o/g, 'Ol√° Irm√£');\r\n    adapted = adapted.replace(/Irm√£o \\*{speakerName}\\*/g, 'Irm√£ *{speakerName}*');\r\n    adapted = adapted.replace(/nosso orador convidado/g, 'nossa oradora convidada');\r\n    // Cv\r\n    adapted = adapted.replace(/Bon dia Mon/g, 'Bon dia Mana');\r\n    adapted = adapted.replace(/Mon \\*{speakerName}\\*/g, 'Mana *{speakerName}*');\r\n  }\r\n\r\n  // Adaptation pour contact d'accueil f√©minin\r\n  if (hostGender === 'female') {\r\n    // Fr\r\n    adapted = adapted.replace(/Fr√®re \\*{hostName}\\*/g, 'S≈ìur *{hostName}*');\r\n    adapted = adapted.replace(/notre fr√®re/g, 'notre s≈ìur');\r\n    // Pt\r\n    adapted = adapted.replace(/Irm√£o \\*{hostName}\\*/g, 'Irm√£ *{hostName}*');\r\n    adapted = adapted.replace(/nosso irm√£o/g, 'nossa irm√£');\r\n    // Cv\r\n    adapted = adapted.replace(/Mon \\*{hostName}\\*/g, 'Mana *{hostName}*');\r\n    adapted = adapted.replace(/nu mon {hostName}/g, 'nu mana {hostName}');\r\n  }\r\n\r\n  // Adaptation pour couple\r\n  if (hostGender === 'couple') {\r\n    // Fr\r\n    adapted = adapted.replace(/Fr√®re \\*{hostName}\\*/g, '*{hostName}*');\r\n    adapted = adapted.replace(/tu vas bien/g, 'vous allez bien');\r\n    // Pt\r\n    adapted = adapted.replace(/Irm√£o \\*{hostName}\\*/g, '*{hostName}*');\r\n    adapted = adapted.replace(/estejas bem/g, 'estejam bem');\r\n    adapted = adapted.replace(/tua disponibilidade/g, 'vossa disponibilidade');\r\n    adapted = adapted.replace(/teu acolhimento/g, 'vosso acolhimento');\r\n    // Cv\r\n    adapted = adapted.replace(/Mon \\*{hostName}\\*/g, '*{hostName}*');\r\n    adapted = adapted.replace(/bu sta bon/g, 'nh√≥s sta bon');\r\n  }\r\n\r\n  return adapted;\r\n}\r\n","import { Visit, Speaker, Host, Language, MessageType, MessageRole, CongregationProfile } from '@/types';\r\nimport { messageTemplates, hostRequestMessageTemplates, adaptMessageGender } from '@/data/messageTemplates';\r\nimport { formatFullDate } from './formatters';\r\n\r\n// ============================================================================\r\n// G√âN√âRATION DE MESSAGE POUR UNE VISITE\r\n// ============================================================================\r\n\r\nexport function generateMessage(\r\n  visit: Visit,\r\n  speaker: Speaker | undefined,\r\n  host: Host | undefined,\r\n  congregationProfile: CongregationProfile,\r\n  messageType: MessageType,\r\n  role: MessageRole,\r\n  language: Language,\r\n  customTemplate?: string\r\n): string {\r\n  // Utiliser le mod√®le personnalis√© si fourni, sinon le mod√®le par d√©faut\r\n  const template = customTemplate || messageTemplates[language]?.[messageType]?.[role];\r\n\r\n  if (!template) {\r\n    return `Mod√®le non trouv√© pour: ${language}/${messageType}/${role}`;\r\n  }\r\n\r\n  // Remplacer les variables\r\n  let message = replaceVariables(template, visit, host, congregationProfile);\r\n\r\n  // Adapter selon le genre\r\n  message = adaptMessageGender(message, speaker?.gender, host?.gender);\r\n\r\n  return message;\r\n}\r\n\r\n// ============================================================================\r\n// REMPLACEMENT DES VARIABLES\r\n// ============================================================================\r\n\r\nfunction replaceVariables(\r\n  template: string,\r\n  visit: Visit,\r\n  host: Host | undefined,\r\n  congregationProfile: CongregationProfile\r\n): string {\r\n  let message = template;\r\n\r\n  // Variables de l'orateur\r\n  message = message.replace(/{speakerName}/g, visit.nom);\r\n  message = message.replace(/{congregation}/g, visit.congregation);\r\n  message = message.replace(/{speakerPhone}/g, visit.telephone || '(non renseign√©)');\r\n\r\n  // Variables du contact d'accueil\r\n  const hostName = visit.host !== '√Ä d√©finir' ? visit.host : '(non assign√©)';\r\n  message = message.replace(/{hostName}/g, hostName);\r\n  message = message.replace(/{hostPhone}/g, host?.telephone || '(non renseign√©)');\r\n  message = message.replace(/{hostAddress}/g, host?.address || '(non renseign√©e)');\r\n\r\n  // Variables de la visite\r\n  message = message.replace(/{visitDate}/g, formatFullDate(visit.visitDate));\r\n  message = message.replace(/{visitTime}/g, visit.visitTime);\r\n\r\n  // Variables du discours\r\n  if (visit.talkNoOrType && visit.talkTheme) {\r\n    message = message.replace(/{talkNo}/g, String(visit.talkNoOrType));\r\n    message = message.replace(/{talkTheme}/g, visit.talkTheme);\r\n  }\r\n\r\n  // Variables de la congr√©gation\r\n  message = message.replace(/{hospitalityOverseer}/g, congregationProfile.hospitalityOverseer);\r\n  message = message.replace(/{hospitalityOverseerPhone}/g, congregationProfile.hospitalityOverseerPhone);\r\n  message = message.replace(/{congregationName}/g, congregationProfile.name);\r\n\r\n  // Introduction pour premier contact\r\n  const isFirstContact =\r\n    !visit.communicationStatus || Object.keys(visit.communicationStatus).length === 0;\r\n\r\n  if (isFirstContact) {\r\n    const intro = getFirstTimeIntroduction(congregationProfile.name);\r\n    message = message.replace(/{firstTimeIntroduction}/g, intro);\r\n  } else {\r\n    message = message.replace(/{firstTimeIntroduction}/g, '');\r\n  }\r\n\r\n  return message;\r\n}\r\n\r\n// ============================================================================\r\n// INTRODUCTION PREMIER CONTACT\r\n// ============================================================================\r\n\r\nfunction getFirstTimeIntroduction(congregationName: string): string {\r\n  return `\\n\\nJe suis le responsable de l'accueil pour le ${congregationName}.`;\r\n}\r\n\r\n// ============================================================================\r\n// G√âN√âRATION DE DEMANDE D'ACCUEIL\r\n// ============================================================================\r\n\r\nexport function generateHostRequestMessage(\r\n  visits: Visit[],\r\n  congregationProfile: CongregationProfile,\r\n  language: Language,\r\n  customTemplate?: string\r\n): string {\r\n  // Utiliser le mod√®le personnalis√© si fourni, sinon le mod√®le par d√©faut\r\n  const template = customTemplate || hostRequestMessageTemplates[language];\r\n\r\n  if (!template) {\r\n    return `Mod√®le non trouv√© pour la langue: ${language}`;\r\n  }\r\n\r\n  // Cr√©er la liste des visites\r\n  const visitsList = visits\r\n    .map((visit, index) => {\r\n      const dateFormatted = formatFullDate(visit.visitDate, language);\r\n      return `${index + 1}. *${visit.nom}* (${visit.congregation}) - ${dateFormatted} √† ${visit.visitTime}`;\r\n    })\r\n    .join('\\n');\r\n\r\n  // Remplacer les variables\r\n  let message = template;\r\n  message = message.replace(/{visitsList}/g, visitsList);\r\n  message = message.replace(/{hospitalityOverseer}/g, congregationProfile.hospitalityOverseer);\r\n  message = message.replace(/{hospitalityOverseerPhone}/g, congregationProfile.hospitalityOverseerPhone);\r\n\r\n  return message;\r\n}\r\n\r\n// ============================================================================\r\n// G√âN√âRATION D'URL WHATSAPP\r\n// ============================================================================\r\n\r\nexport function generateWhatsAppUrl(phone: string, message: string): string {\r\n  // Nettoyer le num√©ro de t√©l√©phone\r\n  const cleanPhone = phone.replace(/[^0-9+]/g, '');\r\n\r\n  // Encoder le message\r\n  const encodedMessage = encodeURIComponent(message);\r\n\r\n  // D√©tection mobile vs desktop\r\n  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n\r\n  const baseUrl = isMobile ? 'whatsapp://send' : 'https://web.whatsapp.com/send';\r\n\r\n  return `${baseUrl}?phone=${cleanPhone}&text=${encodedMessage}`;\r\n}\r\n\r\n// ============================================================================\r\n// COPIER DANS LE PRESSE-PAPIERS\r\n// ============================================================================\r\n\r\nexport async function copyToClipboard(text: string): Promise<boolean> {\r\n  try {\r\n    // M√©thode moderne\r\n    if (navigator.clipboard && window.isSecureContext) {\r\n      await navigator.clipboard.writeText(text);\r\n      return true;\r\n    }\r\n\r\n    // Fallback pour anciens navigateurs\r\n    const textarea = document.createElement('textarea');\r\n    textarea.value = text;\r\n    textarea.style.position = 'fixed';\r\n    textarea.style.left = '-9999px';\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    \r\n    const success = document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n    \r\n    return success;\r\n  } catch (error) {\r\n    console.error('Error copying to clipboard:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// PARTAGE NATIF (MOBILE)\r\n// ============================================================================\r\n\r\nexport async function shareMessage(message: string): Promise<boolean> {\r\n  try {\r\n    if (navigator.share) {\r\n      await navigator.share({\r\n        text: message,\r\n      });\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    // L'utilisateur a annul√© le partage\r\n    return false;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// G√âN√âRATION AVEC IA (GOOGLE GEMINI)\r\n// ============================================================================\r\n\r\nexport async function generateWithAI(\r\n  message: string,\r\n  action: 'rewrite' | 'shorten' | 'expand' | 'formal' | 'friendly',\r\n  apiKey: string,\r\n  temperature: number = 0.7\r\n): Promise<string> {\r\n  try {\r\n    // Import dynamique de la biblioth√®que Gemini\r\n    const { GoogleGenerativeAI } = await import('@google/generative-ai');\r\n\r\n    const genAI = new GoogleGenerativeAI(apiKey);\r\n    const model = genAI.getGenerativeModel({\r\n      model: 'gemini-pro',\r\n      generationConfig: {\r\n        temperature,\r\n        maxOutputTokens: 1000,\r\n      },\r\n    });\r\n\r\n    // D√©finir les prompts selon l'action\r\n    const prompts = {\r\n      rewrite: 'R√©√©cris ce message de mani√®re plus claire et professionnelle tout en gardant le sens:',\r\n      shorten: 'Raccourcis ce message en gardant uniquement les informations essentielles:',\r\n      expand: 'D√©veloppe ce message en ajoutant plus de d√©tails et de chaleur:',\r\n      formal: 'R√©√©cris ce message avec un ton plus formel et respectueux:',\r\n      friendly: 'R√©√©cris ce message avec un ton plus amical et chaleureux:',\r\n    };\r\n\r\n    const prompt = `${prompts[action]}\\n\\n${message}`;\r\n\r\n    const result = await model.generateContent(prompt);\r\n    const response = await result.response;\r\n    return response.text();\r\n  } catch (error) {\r\n    console.error('Error generating with AI:', error);\r\n    throw new Error(\"Erreur lors de la g√©n√©ration avec l'IA\");\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// EXTRACTION DE VARIABLES D'UN MOD√àLE\r\n// ============================================================================\r\n\r\nexport function extractVariables(template: string): string[] {\r\n  const regex = /{([^}]+)}/g;\r\n  const matches = template.matchAll(regex);\r\n  const variables = Array.from(matches, (m) => m[1]);\r\n  return [...new Set(variables)]; // D√©dupliquer\r\n}\r\n\r\n// ============================================================================\r\n// VALIDATION DE MOD√àLE\r\n// ============================================================================\r\n\r\nexport function validateTemplate(template: string): { valid: boolean; errors: string[] } {\r\n  const errors: string[] = [];\r\n\r\n  // V√©rifier que les accolades sont √©quilibr√©es\r\n  const openBraces = (template.match(/{/g) || []).length;\r\n  const closeBraces = (template.match(/}/g) || []).length;\r\n\r\n  if (openBraces !== closeBraces) {\r\n    errors.push('Les accolades ne sont pas √©quilibr√©es');\r\n  }\r\n\r\n  // V√©rifier que le template n'est pas vide\r\n  if (template.trim() === '') {\r\n    errors.push('Le mod√®le ne peut pas √™tre vide');\r\n  }\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors,\r\n  };\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Select } from '@/components/ui/Select';\r\nimport { useSettings } from '@/contexts/SettingsContext';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { Visit, Speaker, MessageType, CommunicationChannel } from '@/types';\r\nimport { generateMessage, generateWithAI } from '@/utils/messageGenerator';\r\nimport { Copy, RefreshCw, Send, Wand2 } from 'lucide-react';\r\n\r\ninterface MessageGeneratorModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  speaker: Speaker;\r\n  visit: Visit;\r\n  initialChannel?: CommunicationChannel;\r\n  initialType?: MessageType;\r\n}\r\n\r\nexport const MessageGeneratorModal: React.FC<MessageGeneratorModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  speaker,\r\n  visit,\r\n  initialChannel = 'whatsapp',\r\n  initialType = 'reminder-7'\r\n}) => {\r\n  const { settings } = useSettings();\r\n  const { hosts, congregationProfile } = useData();\r\n  const { addToast } = useToast();\r\n\r\n  const [message, setMessage] = useState('');\r\n  const [channel, setChannel] = useState<CommunicationChannel>(initialChannel);\r\n  const [type, setType] = useState<MessageType>(initialType);\r\n  const [language, setLanguage] = useState(settings.language);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [showAIOptions, setShowAIOptions] = useState(false);\r\n\r\n  const handleAIGenerate = async (action: 'rewrite' | 'shorten' | 'expand' | 'formal' | 'friendly') => {\r\n    if (!settings.aiSettings.apiKey) {\r\n      addToast(\"Veuillez configurer la cl√© API dans les param√®tres\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    setShowAIOptions(false);\r\n    try {\r\n      const result = await generateWithAI(\r\n        message,\r\n        action,\r\n        settings.aiSettings.apiKey,\r\n        settings.aiSettings.temperature\r\n      );\r\n      setMessage(result);\r\n      addToast(\"Message am√©lior√© par l'IA\", \"success\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      addToast(\"Erreur lors de la g√©n√©ration IA\", \"error\");\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  // G√©n√©rer le message initial lors de l'ouverture ou du changement de param√®tres\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      handleGenerate();\r\n    }\r\n  }, [isOpen, type, language]);\r\n\r\n  const handleGenerate = async () => {\r\n    setIsGenerating(true);\r\n    try {\r\n      const host = hosts.find(h => h.nom === visit.host);\r\n\r\n      const generated = generateMessage(\r\n        visit,\r\n        speaker,\r\n        host,\r\n        congregationProfile,\r\n        type,\r\n        'speaker', // On √©crit √† l'orateur par d√©faut\r\n        language\r\n      );\r\n      setMessage(generated);\r\n    } catch (error) {\r\n      addToast('Erreur lors de la g√©n√©ration du message', 'error');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(message);\r\n      addToast('Message copi√© dans le presse-papier', 'success');\r\n    } catch (error) {\r\n      addToast('Erreur lors de la copie', 'error');\r\n    }\r\n  };\r\n\r\n  const handleSend = () => {\r\n    if (channel === 'whatsapp') {\r\n      const encodedMessage = encodeURIComponent(message);\r\n      const phone = speaker.telephone?.replace(/\\D/g, '') || '';\r\n      window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');\r\n    } else if (channel === 'email') {\r\n      const subject = encodeURIComponent(`Visite √† KBV Lyon - ${visit.talkTheme}`);\r\n      const body = encodeURIComponent(message);\r\n      window.open(`mailto:${speaker.email}?subject=${subject}&body=${body}`, '_blank');\r\n    } else {\r\n      // SMS\r\n      const body = encodeURIComponent(message);\r\n      window.open(`sms:${speaker.telephone}?body=${body}`, '_blank');\r\n    }\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={`Message pour ${speaker.nom}`}\r\n      size=\"lg\"\r\n      footer={\r\n        <>\r\n          <Button variant=\"ghost\" onClick={onClose}>\r\n            Annuler\r\n          </Button>\r\n          <Button variant=\"secondary\" onClick={handleCopy} leftIcon={<Copy className=\"w-4 h-4\" />}>\r\n            Copier\r\n          </Button>\r\n          <Button onClick={handleSend} leftIcon={<Send className=\"w-4 h-4\" />}>\r\n            Envoyer ({channel === 'whatsapp' ? 'WhatsApp' : channel === 'email' ? 'Email' : 'SMS'})\r\n          </Button>\r\n        </>\r\n      }\r\n    >\r\n      <div className=\"space-y-4\">\r\n        {/* Toolbar */}\r\n        <div className=\"flex flex-wrap gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          <div className=\"w-full sm:w-auto min-w-[150px]\">\r\n            <Select\r\n              label=\"Type\"\r\n              options={[\r\n                { value: 'confirmation', label: 'Confirmation' },\r\n                { value: 'reminder-7', label: 'Rappel (J-7)' },\r\n                { value: 'reminder-2', label: 'Rappel (J-2)' },\r\n                { value: 'thanks', label: 'Remerciements' },\r\n                { value: 'preparation', label: 'Pr√©paration' },\r\n                { value: 'host_request', label: \"Demande d'accueil\" },\r\n              ]}\r\n              value={type}\r\n              onChange={(e) => setType(e.target.value as MessageType)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"w-full sm:w-auto min-w-[150px]\">\r\n            <Select\r\n              label=\"Langue\"\r\n              options={[\r\n                { value: 'fr', label: 'Fran√ßais' },\r\n                { value: 'cv', label: 'Capverdien' },\r\n                { value: 'pt', label: 'Portugu√™s' },\r\n              ]}\r\n              value={language}\r\n              onChange={(e) => setLanguage(e.target.value as any)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"w-full sm:w-auto min-w-[150px]\">\r\n            <Select\r\n              label=\"Canal\"\r\n              options={[\r\n                { value: 'whatsapp', label: 'WhatsApp' },\r\n                { value: 'sms', label: 'SMS' },\r\n                { value: 'email', label: 'Email' },\r\n              ]}\r\n              value={channel}\r\n              onChange={(e) => setChannel(e.target.value as CommunicationChannel)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Message Area */}\r\n        <div className=\"relative\">\r\n          <textarea\r\n            className=\"w-full h-64 p-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none font-mono text-sm\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Le message g√©n√©r√© appara√Ætra ici...\"\r\n          />\r\n\r\n          <div className=\"absolute bottom-4 right-4 flex gap-2\">\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"secondary\"\r\n              onClick={handleGenerate}\r\n              isLoading={isGenerating}\r\n              leftIcon={<RefreshCw className=\"w-4 h-4\" />}\r\n            >\r\n              R√©g√©n√©rer\r\n            </Button>\r\n            {settings.aiSettings.enabled && (\r\n              <div className=\"relative\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"secondary\"\r\n                  className=\"bg-purple-50 text-purple-700 hover:bg-purple-100 border-purple-200\"\r\n                  leftIcon={<Wand2 className=\"w-4 h-4\" />}\r\n                  onClick={() => setShowAIOptions(!showAIOptions)}\r\n                >\r\n                  Am√©liorer avec IA\r\n                </Button>\r\n\r\n                {showAIOptions && (\r\n                  <div className=\"absolute bottom-full right-0 mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50\">\r\n                    <button onClick={() => handleAIGenerate('rewrite')} className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm\">R√©√©crire</button>\r\n                    <button onClick={() => handleAIGenerate('shorten')} className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm\">Raccourcir</button>\r\n                    <button onClick={() => handleAIGenerate('expand')} className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm\">D√©velopper</button>\r\n                    <button onClick={() => handleAIGenerate('formal')} className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm\">Plus formel</button>\r\n                    <button onClick={() => handleAIGenerate('friendly')} className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm\">Plus amical</button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n"],"file":"MessageGeneratorModal-DsejHfJr.js"}