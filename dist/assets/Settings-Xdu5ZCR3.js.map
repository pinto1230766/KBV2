{"version":3,"file":"Settings-Xdu5ZCR3.js","sources":["../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/hard-drive.js","../../node_modules/lucide-react/dist/esm/icons/merge.js","../../node_modules/lucide-react/dist/esm/icons/monitor.js","../../node_modules/lucide-react/dist/esm/icons/moon.js","../../node_modules/lucide-react/dist/esm/icons/palette.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/smartphone.js","../../node_modules/lucide-react/dist/esm/icons/sun.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../src/components/settings/DuplicateDetectionModal.tsx","../../src/components/settings/BackupManagerModal.tsx","../../src/components/settings/ImportWizardModal.tsx","../../src/components/settings/ArchiveManagerModal.tsx","../../src/utils/phoneNumberUpdater.ts","../../src/components/settings/PhoneNumberImportModal.tsx","../../src/pages/Settings.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Database = createLucideIcon(\"Database\", [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n]);\n\nexport { Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HardDrive = createLucideIcon(\"HardDrive\", [\n  [\"line\", { x1: \"22\", x2: \"2\", y1: \"12\", y2: \"12\", key: \"1y58io\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\",\n      key: \"oot6mr\"\n    }\n  ],\n  [\"line\", { x1: \"6\", x2: \"6.01\", y1: \"16\", y2: \"16\", key: \"sgf278\" }],\n  [\"line\", { x1: \"10\", x2: \"10.01\", y1: \"16\", y2: \"16\", key: \"1l4acy\" }]\n]);\n\nexport { HardDrive as default };\n//# sourceMappingURL=hard-drive.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Merge = createLucideIcon(\"Merge\", [\n  [\"path\", { d: \"m8 6 4-4 4 4\", key: \"ybng9g\" }],\n  [\"path\", { d: \"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22\", key: \"1hyw0i\" }],\n  [\"path\", { d: \"m20 22-5-5\", key: \"1m27yz\" }]\n]);\n\nexport { Merge as default };\n//# sourceMappingURL=merge.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Monitor = createLucideIcon(\"Monitor\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"3\", rx: \"2\", key: \"48i651\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"21\", y2: \"21\", key: \"1svkeh\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"17\", y2: \"21\", key: \"vw1qmm\" }]\n]);\n\nexport { Monitor as default };\n//# sourceMappingURL=monitor.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"Moon\", [\n  [\"path\", { d: \"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z\", key: \"a7tn18\" }]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Palette = createLucideIcon(\"Palette\", [\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", key: \"1xcu5\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", key: \"736e4u\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", key: \"clrty\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", key: \"1s4xz9\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z\",\n      key: \"12rzf8\"\n    }\n  ]\n]);\n\nexport { Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Smartphone = createLucideIcon(\"Smartphone\", [\n  [\"rect\", { width: \"14\", height: \"20\", x: \"5\", y: \"2\", rx: \"2\", ry: \"2\", key: \"1yt0o3\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }]\n]);\n\nexport { Smartphone as default };\n//# sourceMappingURL=smartphone.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"Sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","import React, { useState, useMemo } from 'react';\nimport { Copy, Trash2, AlertTriangle, Merge, CheckCircle } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Speaker, Host, Visit } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface DuplicateDetectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onMerge: (\n    _duplicates: DuplicateGroup[],\n    _action: 'merge' | 'delete',\n    _strategy?: 'keep-first' | 'keep-recent' | 'manual'\n  ) => void;\n}\n\ninterface DuplicateGroup {\n  type: 'speaker' | 'host' | 'visit' | 'message' | 'archivedVisit';\n  items: any[];\n  similarity: number;\n  reason: string[];\n}\n\nexport const DuplicateDetectionModal: React.FC<DuplicateDetectionModalProps> = ({\n  isOpen,\n  onClose: _onClose,\n  onMerge: _onMerge,\n}) => {\n  const { speakers, hosts, visits, speakerMessages, archivedVisits } = useData();\n  const [selectedGroups, setSelectedGroups] = useState<Set<number>>(new Set());\n  const [mergeStrategy, setMergeStrategy] = useState<'keep-first' | 'keep-recent' | 'manual'>(\n    'keep-recent'\n  );\n  const [includeArchives, setIncludeArchives] = useState(false);\n\n  // Seuils de similarité pour la détection des doublons\n  const SIMILARITY_THRESHOLD_HIGH = 95;\n  const SIMILARITY_THRESHOLD_MEDIUM = 90;\n\n  // Algorithme de détection de doublons\n  const duplicateGroups = useMemo(() => {\n    const groups: DuplicateGroup[] = [];\n\n    // 1. Détection de doublons d'orateurs\n    const speakerGroups = new Map<string, Speaker[]>();\n    speakers.forEach((speaker) => {\n      const normalizedName = speaker.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n      const key = normalizedName;\n\n      if (!speakerGroups.has(key)) {\n        speakerGroups.set(key, []);\n      }\n      speakerGroups.get(key)!.push(speaker);\n    });\n\n    speakerGroups.forEach((group) => {\n      if (group.length > 1) {\n        const reasons: string[] = ['Nom identique'];\n\n        // Vérifier téléphone identique\n        const phones = group.map((s) => s.telephone).filter(Boolean);\n        if (phones.length > 1 && new Set(phones).size < phones.length) {\n          reasons.push('Téléphone identique');\n        }\n\n        // Vérifier congrégation identique\n        const congregations = group.map((s) => s.congregation);\n        if (new Set(congregations).size === 1) {\n          reasons.push('Même congrégation');\n        }\n\n        const similarity = SIMILARITY_THRESHOLD_HIGH;\n        groups.push({\n          type: 'speaker',\n          items: group,\n          similarity,\n          reason: reasons,\n        });\n      }\n    });\n\n    // 2. Détection de doublons d'hôtes\n    const hostGroups = new Map<string, Host[]>();\n    hosts.forEach((host) => {\n      const normalizedName = host.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n      const key = normalizedName;\n\n      if (!hostGroups.has(key)) {\n        hostGroups.set(key, []);\n      }\n      hostGroups.get(key)!.push(host);\n    });\n\n    hostGroups.forEach((group) => {\n      if (group.length > 1) {\n        const reasons: string[] = ['Nom identique'];\n\n        const phones = group.map((h) => h.telephone).filter(Boolean);\n        if (phones.length > 1 && new Set(phones).size < phones.length) {\n          reasons.push('Téléphone identique');\n        }\n\n        const addresses = group.map((h) => h.address).filter(Boolean);\n        if (addresses.length > 1 && new Set(addresses).size < addresses.length) {\n          reasons.push('Adresse identique');\n        }\n\n        const similarity = SIMILARITY_THRESHOLD_HIGH;\n        groups.push({\n          type: 'host',\n          items: group,\n          similarity,\n          reason: reasons,\n        });\n      }\n    });\n\n    // 3. Détection de visites en double\n    const visitGroups = new Map<string, Visit[]>();\n    visits.forEach((visit) => {\n      const key = `${visit.id}-${visit.visitDate}-${visit.visitTime}`;\n\n      if (!visitGroups.has(key)) {\n        visitGroups.set(key, []);\n      }\n      visitGroups.get(key)!.push(visit);\n    });\n\n    visitGroups.forEach((group) => {\n      if (group.length > 1) {\n        groups.push({\n          type: 'visit',\n          items: group,\n          similarity: 100,\n          reason: ['Même orateur, date et heure'],\n        });\n      }\n    });\n\n    // 4. Détection de doublons dans les archives (si activé)\n    if (includeArchives && archivedVisits) {\n      // Vérifier les doublons entre archives uniquement\n      const archivedVisitGroups = new Map<string, any[]>();\n      archivedVisits.forEach((visit) => {\n        const key = `${visit.id}-${visit.visitDate}-${visit.visitTime}`;\n\n        if (!archivedVisitGroups.has(key)) {\n          archivedVisitGroups.set(key, []);\n        }\n        archivedVisitGroups.get(key)!.push(visit);\n      });\n\n      archivedVisitGroups.forEach((group) => {\n        if (group.length > 1) {\n          groups.push({\n            type: 'archivedVisit',\n            items: group,\n            similarity: 100,\n            reason: ['Doublon dans les archives - Même orateur, date et heure'],\n          });\n        }\n      });\n\n      // Vérifier les doublons entre visites actuelles et archives\n      const crossVisitGroups = new Map<string, any[]>();\n      visits.forEach((currentVisit) => {\n        const key = `${currentVisit.id}-${currentVisit.visitDate}-${currentVisit.visitTime}`;\n\n        if (!crossVisitGroups.has(key)) {\n          crossVisitGroups.set(key, []);\n        }\n        crossVisitGroups.get(key)!.push({ ...currentVisit, _source: 'current' });\n\n        // Ajouter les visites archivées correspondantes\n        const matchingArchived = archivedVisits.filter(\n          (av) =>\n            av.id === currentVisit.id &&\n            av.visitDate === currentVisit.visitDate &&\n            av.visitTime === currentVisit.visitTime\n        );\n\n        matchingArchived.forEach((archived) => {\n          crossVisitGroups.get(key)!.push({ ...archived, _source: 'archived' });\n        });\n      });\n\n      crossVisitGroups.forEach((group) => {\n        if (group.length > 1) {\n          groups.push({\n            type: 'archivedVisit',\n            items: group,\n            similarity: 100,\n            reason: ['Doublon entre visites actuelles et archivées'],\n          });\n        }\n      });\n    }\n\n    // 5. Détection de messages en double\n    const messageGroups = new Map<string, any[]>();\n    if (speakerMessages && speakerMessages.length > 0) {\n      speakerMessages.forEach((msg) => {\n        // Clé combinant l'ID de l'orateur, le contenu et la date de réception\n        const normalizedContent = msg.message?.trim().toLowerCase() || '';\n        const dateKey = msg.receivedAt ? new Date(msg.receivedAt).toISOString() : 'no-date';\n        // On considère un doublon si même orateur, même message, même date (à la seconde près)\n        const key = `${msg.speakerId}-${normalizedContent}-${dateKey}`;\n\n        if (!messageGroups.has(key)) {\n          messageGroups.set(key, []);\n        }\n        messageGroups.get(key)!.push(msg);\n      });\n    }\n\n    messageGroups.forEach((group) => {\n      if (group.length > 1) {\n        groups.push({\n          type: 'message',\n          items: group,\n          similarity: 100,\n          reason: ['Contenu et date identiques'],\n        });\n      }\n    });\n\n    return groups;\n  }, [speakers, hosts, visits, speakerMessages, archivedVisits, includeArchives]);\n\n  const toggleGroup = (index: number) => {\n    setSelectedGroups((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(index)) {\n        newSet.delete(index);\n      } else {\n        newSet.add(index);\n      }\n      return newSet;\n    });\n  };\n\n  const handleMerge = () => {\n    const selectedDuplicates = Array.from(selectedGroups).map((idx) => duplicateGroups[idx]);\n    _onMerge(selectedDuplicates, 'merge', mergeStrategy);\n    setSelectedGroups(new Set());\n  };\n\n  const handleDelete = () => {\n    // Supprimer les doublons (keep one?) No, modal says \"Delete Duplicates\" which usually calls onMerge(..., delete).\n    // The previous implementation used _onMerge with 'delete'.\n    const selectedDuplicates = Array.from(selectedGroups).map((idx) => duplicateGroups[idx]);\n    _onMerge(selectedDuplicates, 'delete', mergeStrategy);\n    setSelectedGroups(new Set());\n  };\n\n  const getTypeLabel = (type: DuplicateGroup['type']) => {\n    switch (type) {\n      case 'speaker':\n        return 'Orateur';\n      case 'host':\n        return 'Hôte';\n      case 'visit':\n        return 'Visite';\n      case 'archivedVisit':\n        return 'Visite archivée';\n      case 'message':\n        return 'Message';\n      default:\n        return 'Inconnu';\n    }\n  };\n\n  const getTypeColor = (type: DuplicateGroup['type']) => {\n    switch (type) {\n      case 'speaker':\n        return 'bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300';\n      case 'host':\n        return 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300';\n      case 'visit':\n        return 'bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300';\n      case 'archivedVisit':\n        return 'bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-300';\n      case 'message':\n        return 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300';\n      default:\n        return 'bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300';\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={_onClose} title='Détection de doublons' size='xl'>\n      <div className='space-y-6'>\n        {/* Statistiques */}\n        <div className='grid grid-cols-2 md:grid-cols-5 gap-4'>\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>\n              {duplicateGroups.filter((g) => g.type === 'speaker').length}\n            </div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Orateurs</div>\n          </div>\n          <div className='p-4 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {duplicateGroups.filter((g) => g.type === 'host').length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Hôtes</div>\n          </div>\n          <div className='p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>\n              {duplicateGroups.filter((g) => g.type === 'visit').length}\n            </div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>Visites</div>\n          </div>\n          <div className='p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-orange-600'>\n              {duplicateGroups.filter((g) => g.type === 'archivedVisit').length}\n            </div>\n            <div className='text-sm text-orange-800 dark:text-orange-300'>Archives</div>\n          </div>\n          <div className='p-4 bg-red-50 dark:bg-red-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-red-600'>\n              {duplicateGroups.filter((g) => g.type === 'message').length}\n            </div>\n            <div className='text-sm text-red-800 dark:text-red-300'>Messages</div>\n          </div>\n        </div>\n\n        {/* Option pour inclure les archives */}\n        <div className='flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <input\n            type='checkbox'\n            id='include-archives'\n            checked={includeArchives}\n            onChange={(e) => setIncludeArchives(e.target.checked)}\n            className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n          />\n          <label htmlFor='include-archives' className='cursor-pointer'>\n            <div className='font-medium text-gray-900 dark:text-white'>\n              Inclure les archives dans l'analyse\n            </div>\n            <div className='text-sm text-gray-600 dark:text-gray-400'>\n              Détecte les doublons dans les visites archivées et entre visites actuelles/archivées\n            </div>\n          </label>\n        </div>\n\n        {/* Stratégie de fusion */}\n        {selectedGroups.size > 0 && (\n          <div className='p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n            <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n              Stratégie de fusion\n            </label>\n            <div className='space-y-2'>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='radio'\n                  value='keep-recent'\n                  checked={mergeStrategy === 'keep-recent'}\n                  onChange={(e) => setMergeStrategy(e.target.value as any)}\n                  className='w-4 h-4 text-primary-600'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Conserver l'entrée la plus récente\n                </span>\n              </label>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='radio'\n                  value='keep-first'\n                  checked={mergeStrategy === 'keep-first'}\n                  onChange={(e) => setMergeStrategy(e.target.value as any)}\n                  className='w-4 h-4 text-primary-600'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Conserver la première entrée\n                </span>\n              </label>\n            </div>\n          </div>\n        )}\n\n        {/* Liste des doublons */}\n        <div className='space-y-4 max-h-96 overflow-y-auto'>\n          {duplicateGroups.length === 0 ? (\n            <div className='text-center py-12'>\n              <CheckCircle className='w-16 h-16 mx-auto mb-4 text-green-500' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucun doublon détecté\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>\n                Vos données sont propres et sans doublons\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className='flex items-center gap-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg mb-2 sticky top-0 z-10'>\n                <input\n                  type='checkbox'\n                  aria-label='Tout sélectionner'\n                  checked={\n                    duplicateGroups.length > 0 && selectedGroups.size === duplicateGroups.length\n                  }\n                  onChange={(e) => {\n                    if (e.target.checked) {\n                      setSelectedGroups(new Set(duplicateGroups.map((_, i) => i)));\n                    } else {\n                      setSelectedGroups(new Set());\n                    }\n                  }}\n                  className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='font-medium text-gray-700 dark:text-gray-300'>\n                  Tout sélectionner ({duplicateGroups.length})\n                </span>\n                {selectedGroups.size > 0 && (\n                  <span className='text-sm text-gray-500 ml-auto'>\n                    {selectedGroups.size} sélectionné(s)\n                  </span>\n                )}\n              </div>\n              {duplicateGroups.map((group, index) => (\n                <Card\n                  key={index}\n                  className={`${\n                    group.similarity >= SIMILARITY_THRESHOLD_MEDIUM\n                      ? 'border-l-4 border-l-red-600'\n                      : 'border-l-4 border-l-orange-500'\n                  } ${selectedGroups.has(index) ? 'ring-2 ring-primary-500' : ''}`}\n                >\n                  <CardBody>\n                    <div className='space-y-4'>\n                      {/* En-tête */}\n                      <div className='flex items-start justify-between'>\n                        <div className='flex items-center gap-3'>\n                          <input\n                            type='checkbox'\n                            checked={selectedGroups.has(index)}\n                            onChange={() => toggleGroup(index)}\n                            aria-label={`Sélectionner ce groupe de doublons ${getTypeLabel(group.type)}`}\n                            className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                          />\n                          <div>\n                            <div className='flex items-center gap-2 mb-1'>\n                              <Badge className={getTypeColor(group.type)}>\n                                {getTypeLabel(group.type)}\n                              </Badge>\n                              <Badge variant='warning'>{group.similarity}% similaire</Badge>\n                            </div>\n                            <div className='flex flex-wrap gap-1'>\n                              {group.reason.map((reason, idx) => (\n                                <span\n                                  key={idx}\n                                  className='text-xs text-gray-600 dark:text-gray-400'\n                                >\n                                  • {reason}\n                                </span>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                        <Copy className='w-5 h-5 text-gray-400' />\n                      </div>\n\n                      {/* Items en double */}\n                      <div className='grid grid-cols-1 md:grid-cols-2 gap-3'>\n                        {group.items.map((item: any, itemIdx) => (\n                          <div key={itemIdx} className='p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n                            <div className='font-medium text-gray-900 dark:text-white mb-2'>\n                              {group.type === 'message'\n                                ? item.subject || 'Message sans sujet'\n                                : item.nom || `Visite ${itemIdx + 1}`}\n                            </div>\n                            <div className='space-y-1 text-sm text-gray-600 dark:text-gray-400'>\n                              {group.type === 'speaker' && (\n                                <>\n                                  <div>Congrégation : {item.congregation}</div>\n                                  {item.telephone && <div>Tél : {item.telephone}</div>}\n                                  {item.email && <div>Email : {item.email}</div>}\n                                  <div>\n                                    Visites : {visits.filter((v) => v.id === item.id).length}\n                                  </div>\n                                  <div>\n                                    Messages :{' '}\n                                    {\n                                      visits.filter(\n                                        (v) => v.id === item.id && v.communicationStatus\n                                      ).length\n                                    }\n                                  </div>\n                                  {item.createdAt && (\n                                    <div className='text-xs'>\n                                      Créé : {new Date(item.createdAt).toLocaleDateString('fr-FR')}\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'host' && (\n                                <>\n                                  {item.telephone && <div>Tél : {item.telephone}</div>}\n                                  {item.address && <div>Adresse : {item.address}</div>}\n                                  {item.createdAt && (\n                                    <div className='text-xs'>\n                                      Créé : {new Date(item.createdAt).toLocaleDateString('fr-FR')}\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'visit' && (\n                                <>\n                                  <div>\n                                    Date : {new Date(item.visitDate).toLocaleDateString('fr-FR')}\n                                  </div>\n                                  <div>Heure : {item.visitTime}</div>\n                                  <div>Statut : {item.status}</div>\n                                </>\n                              )}\n                              {group.type === 'archivedVisit' && (\n                                <>\n                                  <div>\n                                    Date : {new Date(item.visitDate).toLocaleDateString('fr-FR')}\n                                  </div>\n                                  <div>Heure : {item.visitTime || 'N/A'}</div>\n                                  <div>Statut : {item.status}</div>\n                                  {item._source && (\n                                    <div className='mt-1'>\n                                      <Badge\n                                        variant={item._source === 'archived' ? 'warning' : 'success'}\n                                        className='text-xs'\n                                      >\n                                        {item._source === 'archived' ? 'Archivée' : 'Actuelle'}\n                                      </Badge>\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'message' && (\n                                <>\n                                  <div>Orateur : {item.speakerName}</div>\n                                  <div>\n                                    Date : {new Date(item.receivedAt).toLocaleDateString('fr-FR')}{' '}\n                                    {new Date(item.receivedAt).toLocaleTimeString('fr-FR')}\n                                  </div>\n                                  <div className='line-clamp-2'>Contenu : {item.message}</div>\n                                </>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </CardBody>\n                </Card>\n              ))}\n            </>\n          )}\n        </div>\n\n        {/* Avertissement */}\n        {selectedGroups.size > 0 && (\n          <div className='flex items-start gap-3 p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n            <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n            <div className='text-sm text-orange-800 dark:text-orange-300'>\n              <strong>Attention :</strong> La fusion des doublons est irréversible. Assurez-vous de\n              vérifier les données avant de continuer.\n            </div>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={_onClose}>\n            Fermer\n          </Button>\n          {selectedGroups.size > 0 && (\n            <>\n              <Button variant='danger' onClick={handleDelete}>\n                <Trash2 className='w-4 h-4 mr-2' />\n                Supprimer les doublons ({selectedGroups.size})\n              </Button>\n              <Button variant='primary' onClick={handleMerge}>\n                <Merge className='w-4 h-4 mr-2' />\n                Fusionner ({selectedGroups.size})\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport {\n  Save,\n  Download,\n  Upload,\n  Clock,\n  HardDrive,\n  Shield,\n  CheckCircle,\n  AlertTriangle,\n} from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\n\ninterface BackupManagerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onBackup: (options: BackupOptions) => Promise<void>;\n  onRestore: (file: File) => Promise<void>;\n}\n\ninterface BackupOptions {\n  includeArchived: boolean;\n  includeSettings: boolean;\n  includeTemplates: boolean;\n  encrypt: boolean;\n  password?: string;\n}\n\ninterface BackupHistory {\n  id: string;\n  date: string;\n  size: number;\n  itemsCount: number;\n  encrypted: boolean;\n}\n\nexport const BackupManagerModal: React.FC<BackupManagerModalProps> = ({\n  isOpen,\n  onClose,\n  onBackup,\n  onRestore,\n}) => {\n  const [activeTab, setActiveTab] = useState<'backup' | 'restore' | 'history'>('backup');\n  const [includeArchived, setIncludeArchived] = useState(true);\n  const [includeSettings, setIncludeSettings] = useState(true);\n  const [includeTemplates, setIncludeTemplates] = useState(true);\n  const [encrypt, setEncrypt] = useState(false);\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isCreating, setIsCreating] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  // Simuler l'historique des sauvegardes (à remplacer par les vraies données)\n  const backupHistory: BackupHistory[] = [\n    {\n      id: '1',\n      date: new Date().toISOString(),\n      size: 2048576,\n      itemsCount: 150,\n      encrypted: true,\n    },\n  ];\n\n  const handleCreateBackup = async () => {\n    if (encrypt && password !== confirmPassword) {\n      alert('Les mots de passe ne correspondent pas');\n      return;\n    }\n\n    setIsCreating(true);\n    try {\n      const options: BackupOptions = {\n        includeArchived,\n        includeSettings,\n        includeTemplates,\n        encrypt,\n        password: encrypt ? password : undefined,\n      };\n\n      await onBackup(options);\n\n      // Réinitialiser le formulaire\n      setPassword('');\n      setConfirmPassword('');\n      setIsCreating(false);\n    } catch (error) {\n      console.error('Erreur lors de la sauvegarde:', error);\n      setIsCreating(false);\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleRestore = async () => {\n    if (!selectedFile) return;\n\n    if (\n      confirm(\n        '⚠️ La restauration remplacera toutes les données actuelles. Êtes-vous sûr de vouloir continuer ?'\n      )\n    ) {\n      try {\n        await onRestore(selectedFile);\n        onClose();\n      } catch (error) {\n        console.error('Erreur lors de la restauration:', error);\n      }\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(2)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Gestion des sauvegardes' size='lg'>\n      <div className='space-y-6'>\n        {/* Onglets */}\n        <div className='flex gap-2 border-b border-gray-200 dark:border-gray-700'>\n          <button\n            onClick={() => setActiveTab('backup')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'backup'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Save className='w-4 h-4 inline mr-2' />\n            Créer une sauvegarde\n          </button>\n          <button\n            onClick={() => setActiveTab('restore')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'restore'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Upload className='w-4 h-4 inline mr-2' />\n            Restaurer\n          </button>\n          <button\n            onClick={() => setActiveTab('history')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'history'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Clock className='w-4 h-4 inline mr-2' />\n            Historique\n          </button>\n        </div>\n\n        {/* Contenu - Créer une sauvegarde */}\n        {activeTab === 'backup' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <HardDrive className='w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-blue-800 dark:text-blue-300'>\n                  <strong>Sauvegarde locale :</strong> Les données seront exportées dans un fichier\n                  JSON téléchargeable. Conservez ce fichier en lieu sûr pour pouvoir restaurer vos\n                  données en cas de besoin.\n                </div>\n              </div>\n            </div>\n\n            {/* Options de sauvegarde */}\n            <div className='space-y-3'>\n              <h4 className='font-medium text-gray-900 dark:text-white'>Données à inclure</h4>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeArchived}\n                  onChange={(e) => setIncludeArchived(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Visites archivées\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Inclure l'historique complet des visites passées\n                  </p>\n                </div>\n              </label>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeSettings}\n                  onChange={(e) => setIncludeSettings(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Paramètres de l'application\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Thème, langue, notifications, etc.\n                  </p>\n                </div>\n              </label>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeTemplates}\n                  onChange={(e) => setIncludeTemplates(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Templates personnalisés\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Modèles de messages et configurations personnalisées\n                  </p>\n                </div>\n              </label>\n            </div>\n\n            {/* Chiffrement */}\n            <div className='space-y-3'>\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={encrypt}\n                  onChange={(e) => setEncrypt(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <div className='flex items-center gap-2'>\n                    <Shield className='w-4 h-4 text-primary-600' />\n                    <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                      Chiffrer la sauvegarde\n                    </span>\n                  </div>\n                  <p className='text-xs text-gray-500 dark:text-gray-400 mt-1'>\n                    Protéger les données sensibles avec un mot de passe\n                  </p>\n                </div>\n              </label>\n\n              {encrypt && (\n                <div className='space-y-3 pl-4'>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Mot de passe\n                    </label>\n                    <input\n                      type='password'\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                      placeholder='Entrez un mot de passe'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Confirmer le mot de passe\n                    </label>\n                    <input\n                      type='password'\n                      value={confirmPassword}\n                      onChange={(e) => setConfirmPassword(e.target.value)}\n                      className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                      placeholder='Confirmez le mot de passe'\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <Button\n              variant='primary'\n              onClick={handleCreateBackup}\n              disabled={isCreating || (encrypt && (!password || password !== confirmPassword))}\n              className='w-full'\n            >\n              <Download className='w-4 h-4 mr-2' />\n              {isCreating ? 'Création en cours...' : 'Créer et télécharger la sauvegarde'}\n            </Button>\n          </div>\n        )}\n\n        {/* Contenu - Restaurer */}\n        {activeTab === 'restore' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-orange-800 dark:text-orange-300'>\n                  <strong>Attention :</strong> La restauration remplacera toutes les données\n                  actuelles. Assurez-vous d'avoir créé une sauvegarde récente avant de continuer.\n                </div>\n              </div>\n            </div>\n\n            <div className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8'>\n              <div className='text-center'>\n                <Upload className='w-12 h-12 mx-auto mb-4 text-gray-400' />\n                <h4 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                  Sélectionner un fichier de sauvegarde\n                </h4>\n                <p className='text-sm text-gray-600 dark:text-gray-400 mb-4'>\n                  Fichier JSON (.json) exporté précédemment\n                </p>\n                <input\n                  type='file'\n                  accept='.json'\n                  onChange={handleFileSelect}\n                  className='hidden'\n                  id='backup-file'\n                />\n                <label htmlFor='backup-file'>\n                  <span className='inline-flex items-center justify-center px-4 py-2 border-2 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 font-medium rounded-lg cursor-pointer transition-colors'>\n                    Parcourir\n                  </span>\n                </label>\n              </div>\n            </div>\n\n            {selectedFile && (\n              <div className='p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg'>\n                <div className='flex items-center justify-between'>\n                  <div className='flex items-center gap-3'>\n                    <CheckCircle className='w-5 h-5 text-green-600' />\n                    <div>\n                      <div className='font-medium text-green-900 dark:text-green-200'>\n                        {selectedFile.name}\n                      </div>\n                      <div className='text-sm text-green-800 dark:text-green-300'>\n                        {formatFileSize(selectedFile.size)}\n                      </div>\n                    </div>\n                  </div>\n                  <Button variant='danger' onClick={handleRestore}>\n                    Restaurer\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Contenu - Historique */}\n        {activeTab === 'history' && (\n          <div className='space-y-4'>\n            {backupHistory.length === 0 ? (\n              <div className='text-center py-12'>\n                <Clock className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                  Aucune sauvegarde\n                </h3>\n                <p className='text-gray-600 dark:text-gray-400'>\n                  Créez votre première sauvegarde pour sécuriser vos données\n                </p>\n              </div>\n            ) : (\n              backupHistory.map((backup) => (\n                <Card key={backup.id}>\n                  <CardBody>\n                    <div className='flex items-center justify-between'>\n                      <div className='flex items-center gap-4'>\n                        <div className='p-3 bg-primary-100 dark:bg-primary-900 rounded-lg'>\n                          <HardDrive className='w-6 h-6 text-primary-600' />\n                        </div>\n                        <div>\n                          <div className='font-medium text-gray-900 dark:text-white'>\n                            {new Date(backup.date).toLocaleDateString('fr-FR', {\n                              day: 'numeric',\n                              month: 'long',\n                              year: 'numeric',\n                              hour: '2-digit',\n                              minute: '2-digit',\n                            })}\n                          </div>\n                          <div className='text-sm text-gray-600 dark:text-gray-400'>\n                            {backup.itemsCount} éléments • {formatFileSize(backup.size)}\n                            {backup.encrypted && (\n                              <Badge variant='default' className='ml-2'>\n                                <Shield className='w-3 h-3 mr-1' />\n                                Chiffré\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      <Button variant='outline' size='sm'>\n                        <Download className='w-4 h-4' />\n                      </Button>\n                    </div>\n                  </CardBody>\n                </Card>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Fermer\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport { Upload, FileText, CheckCircle, AlertTriangle, ArrowRight, Download } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { ImportResult } from '@/types';\n\ninterface ImportWizardModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onImport: (data: any, mapping: ColumnMapping) => Promise<ImportResult>;\n}\n\ninterface ColumnMapping {\n  [key: string]: string; // clé = colonne source, valeur = champ cible\n}\n\ntype ImportStep = 'upload' | 'mapping' | 'preview' | 'import' | 'result';\n\nconst AVAILABLE_FIELDS = {\n  speakers: [\n    { key: 'nom', label: 'Nom', required: true },\n    { key: 'congregation', label: 'Congrégation', required: true },\n    { key: 'telephone', label: 'Téléphone', required: false },\n    { key: 'email', label: 'Email', required: false },\n    { key: 'gender', label: 'Genre (male/female/couple)', required: false },\n  ],\n  visits: [\n    { key: 'nom', label: 'Nom orateur', required: true },\n    { key: 'visitDate', label: 'Date (YYYY-MM-DD)', required: true },\n    { key: 'visitTime', label: 'Heure (HH:MM)', required: true },\n    { key: 'talkNoOrType', label: 'N° discours', required: false },\n    { key: 'talkTheme', label: 'Thème discours', required: false },\n    { key: 'host', label: 'Hôte', required: false },\n    { key: 'status', label: 'Statut', required: false },\n  ],\n  hosts: [\n    { key: 'nom', label: 'Nom', required: true },\n    { key: 'telephone', label: 'Téléphone', required: false },\n    { key: 'email', label: 'Email', required: false },\n    { key: 'address', label: 'Adresse', required: false },\n    { key: 'gender', label: 'Genre (male/female/couple)', required: false },\n  ],\n};\n\nexport const ImportWizardModal: React.FC<ImportWizardModalProps> = ({\n  isOpen,\n  onClose,\n  onImport,\n}) => {\n  const [currentStep, setCurrentStep] = useState<ImportStep>('upload');\n  const [importType, setImportType] = useState<'speakers' | 'visits' | 'hosts'>('speakers');\n  const [file, setFile] = useState<File | null>(null);\n  const [parsedData, setParsedData] = useState<any[]>([]);\n  const [columns, setColumns] = useState<string[]>([]);\n  const [mapping, setMapping] = useState<ColumnMapping>({});\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) return;\n\n    setFile(selectedFile);\n\n    // Parser le fichier CSV\n    const text = await selectedFile.text();\n    const lines = text.split('\\n').filter((line) => line.trim());\n\n    if (lines.length === 0) return;\n\n    // Extraire les colonnes (première ligne)\n    const headers = lines[0].split(',').map((h) => h.trim().replace(/\"/g, ''));\n    setColumns(headers);\n\n    // Parser les données\n    const data = lines.slice(1).map((line) => {\n      const values = line.split(',').map((v) => v.trim().replace(/\"/g, ''));\n      const row: any = {};\n      headers.forEach((header, index) => {\n        row[header] = values[index] || '';\n      });\n      return row;\n    });\n\n    setParsedData(data);\n    setCurrentStep('mapping');\n  };\n\n  const handleMappingChange = (sourceColumn: string, targetField: string) => {\n    setMapping((prev) => ({\n      ...prev,\n      [sourceColumn]: targetField,\n    }));\n  };\n\n  const handleImport = async () => {\n    setCurrentStep('import');\n\n    try {\n      // Transformer les données selon le mapping\n      const transformedData = parsedData.map((row) => {\n        const transformed: any = {};\n        Object.entries(mapping).forEach(([sourceCol, targetField]) => {\n          if (targetField && row[sourceCol]) {\n            transformed[targetField] = row[sourceCol];\n          }\n        });\n        return transformed;\n      });\n\n      const result = await onImport(transformedData, mapping);\n      setImportResult(result);\n      setCurrentStep('result');\n    } catch (error) {\n      console.error(\"Erreur lors de l'import:\", error);\n    }\n  };\n\n  const getMappingProgress = () => {\n    const requiredFields = AVAILABLE_FIELDS[importType].filter((f) => f.required);\n    const mappedRequired = requiredFields.filter((f) => Object.values(mapping).includes(f.key));\n    return `${mappedRequired.length}/${requiredFields.length}`;\n  };\n\n  const canProceed = () => {\n    const requiredFields = AVAILABLE_FIELDS[importType].filter((f) => f.required);\n    return requiredFields.every((f) => Object.values(mapping).includes(f.key));\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Assistant d'importation\" size='xl'>\n      <div className='space-y-6'>\n        {/* Indicateur de progression */}\n        <div className='flex items-center justify-between'>\n          {['upload', 'mapping', 'preview', 'import', 'result'].map((step, index) => (\n            <React.Fragment key={step}>\n              <div\n                className={`flex items-center gap-2 ${\n                  currentStep === step\n                    ? 'text-primary-600'\n                    : ['upload', 'mapping', 'preview'].indexOf(currentStep) > index\n                      ? 'text-green-600'\n                      : 'text-gray-400'\n                }`}\n              >\n                <div\n                  className={`w-8 h-8 rounded-full flex items-center justify-center font-medium ${\n                    currentStep === step\n                      ? 'bg-primary-100 dark:bg-primary-900/20'\n                      : ['upload', 'mapping', 'preview'].indexOf(currentStep) > index\n                        ? 'bg-green-100 dark:bg-green-900/20'\n                        : 'bg-gray-100 dark:bg-gray-800'\n                  }`}\n                >\n                  {index + 1}\n                </div>\n                <span className='text-sm font-medium hidden md:inline'>\n                  {step === 'upload' && 'Fichier'}\n                  {step === 'mapping' && 'Mapping'}\n                  {step === 'preview' && 'Aperçu'}\n                  {step === 'import' && 'Import'}\n                  {step === 'result' && 'Résultat'}\n                </span>\n              </div>\n              {index < 4 && <ArrowRight className='w-4 h-4 text-gray-400' />}\n            </React.Fragment>\n          ))}\n        </div>\n\n        {/* Étape 1: Upload */}\n        {currentStep === 'upload' && (\n          <div className='space-y-6'>\n            <div>\n              <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n                Type de données à importer\n              </label>\n              <div className='grid grid-cols-3 gap-3'>\n                {[\n                  { value: 'speakers' as const, label: 'Orateurs', icon: '👤' },\n                  { value: 'visits' as const, label: 'Visites', icon: '📅' },\n                  { value: 'hosts' as const, label: 'Hôtes', icon: '🏠' },\n                ].map((type) => (\n                  <button\n                    key={type.value}\n                    onClick={() => setImportType(type.value)}\n                    className={`p-4 rounded-lg border-2 transition-all ${\n                      importType === type.value\n                        ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    <div className='text-3xl mb-2'>{type.icon}</div>\n                    <div className='font-medium text-gray-900 dark:text-white'>{type.label}</div>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12'>\n              <div className='text-center'>\n                <Upload className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n                <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                  Sélectionner un fichier CSV\n                </h3>\n                <p className='text-sm text-gray-600 dark:text-gray-400 mb-4'>\n                  Fichier CSV avec en-têtes de colonnes\n                </p>\n                <input\n                  type='file'\n                  accept='.csv'\n                  onChange={handleFileSelect}\n                  className='hidden'\n                  id='csv-file'\n                />\n                <label htmlFor='csv-file'>\n                  <span className='inline-flex items-center justify-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg cursor-pointer transition-colors'>\n                    <Upload className='w-4 h-4 mr-2' />\n                    Parcourir\n                  </span>\n                </label>\n              </div>\n            </div>\n\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <FileText className='w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-blue-800 dark:text-blue-300'>\n                  <strong>Format attendu :</strong> Fichier CSV avec la première ligne contenant les\n                  noms de colonnes. Les colonnes seront mappées à l'étape suivante.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 2: Mapping */}\n        {currentStep === 'mapping' && (\n          <div className='space-y-6'>\n            <div className='flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <div>\n                <h4 className='font-medium text-gray-900 dark:text-white'>{file?.name}</h4>\n                <p className='text-sm text-gray-600 dark:text-gray-400'>\n                  {parsedData.length} ligne(s) détectée(s)\n                </p>\n              </div>\n              <Badge variant='default'>Champs requis : {getMappingProgress()}</Badge>\n            </div>\n\n            <div>\n              <h4 className='font-medium text-gray-900 dark:text-white mb-3'>\n                Mapper les colonnes\n              </h4>\n              <div className='space-y-3'>\n                {columns.map((column) => (\n                  <div key={column} className='flex items-center gap-3'>\n                    <div className='flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n                      <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                        {column}\n                      </span>\n                    </div>\n                    <ArrowRight className='w-4 h-4 text-gray-400' />\n                    <select\n                      value={mapping[column] || ''}\n                      onChange={(e) => handleMappingChange(column, e.target.value)}\n                      aria-label={`Mapper la colonne ${column}`}\n                      className='flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                    >\n                      <option value=''>-- Ignorer --</option>\n                      {AVAILABLE_FIELDS[importType].map((field) => (\n                        <option key={field.key} value={field.key}>\n                          {field.label} {field.required && '*'}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='secondary' onClick={() => setCurrentStep('upload')}>\n                Retour\n              </Button>\n              <Button\n                variant='primary'\n                onClick={() => setCurrentStep('preview')}\n                disabled={!canProceed()}\n              >\n                Aperçu\n                <ArrowRight className='w-4 h-4 ml-2' />\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 3: Aperçu */}\n        {currentStep === 'preview' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg'>\n              <div className='flex items-center gap-2 mb-2'>\n                <CheckCircle className='w-5 h-5 text-green-600' />\n                <span className='font-medium text-green-900 dark:text-green-200'>\n                  Prêt à importer\n                </span>\n              </div>\n              <p className='text-sm text-green-800 dark:text-green-300'>\n                {parsedData.length}{' '}\n                {importType === 'speakers'\n                  ? 'orateur(s)'\n                  : importType === 'visits'\n                    ? 'visite(s)'\n                    : 'hôte(s)'}{' '}\n                seront importé(s)\n              </p>\n            </div>\n\n            <div>\n              <h4 className='font-medium text-gray-900 dark:text-white mb-3'>\n                Aperçu des données (5 premières lignes)\n              </h4>\n              <div className='overflow-x-auto'>\n                <table className='w-full text-sm'>\n                  <thead className='bg-gray-50 dark:bg-gray-800'>\n                    <tr>\n                      {AVAILABLE_FIELDS[importType]\n                        .filter((f) => Object.values(mapping).includes(f.key))\n                        .map((field) => (\n                          <th\n                            key={field.key}\n                            className='px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-300'\n                          >\n                            {field.label}\n                          </th>\n                        ))}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {parsedData.slice(0, 5).map((row, index) => (\n                      <tr key={index} className='border-t border-gray-200 dark:border-gray-700'>\n                        {AVAILABLE_FIELDS[importType]\n                          .filter((f) => Object.values(mapping).includes(f.key))\n                          .map((field) => {\n                            const sourceCol = Object.keys(mapping).find(\n                              (k) => mapping[k] === field.key\n                            );\n                            return (\n                              <td\n                                key={field.key}\n                                className='px-4 py-2 text-gray-900 dark:text-white'\n                              >\n                                {sourceCol ? row[sourceCol] : '-'}\n                              </td>\n                            );\n                          })}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='secondary' onClick={() => setCurrentStep('mapping')}>\n                Retour\n              </Button>\n              <Button variant='primary' onClick={handleImport}>\n                <Download className='w-4 h-4 mr-2' />\n                Lancer l'importation\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 4: Import en cours */}\n        {currentStep === 'import' && (\n          <div className='py-12 text-center'>\n            <div className='w-16 h-16 mx-auto mb-4 border-4 border-primary-600 border-t-transparent rounded-full animate-spin'></div>\n            <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n              Importation en cours...\n            </h3>\n            <p className='text-sm text-gray-600 dark:text-gray-400'>\n              Veuillez patienter pendant le traitement des données\n            </p>\n          </div>\n        )}\n\n        {/* Étape 5: Résultat */}\n        {currentStep === 'result' && importResult && (\n          <div className='space-y-6'>\n            <div className='text-center py-8'>\n              <CheckCircle className='w-20 h-20 mx-auto mb-4 text-green-500' />\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white mb-2'>\n                Importation terminée !\n              </h3>\n            </div>\n\n            <div className='grid grid-cols-2 gap-4'>\n              <Card>\n                <CardBody className='text-center'>\n                  <div className='text-3xl font-bold text-green-600'>\n                    {importResult.speakersAdded +\n                      importResult.visitsAdded +\n                      importResult.hostsAdded}\n                  </div>\n                  <div className='text-sm text-gray-600 dark:text-gray-400'>Ajouté(s)</div>\n                </CardBody>\n              </Card>\n              <Card>\n                <CardBody className='text-center'>\n                  <div className='text-3xl font-bold text-blue-600'>\n                    {importResult.speakersUpdated +\n                      importResult.visitsUpdated +\n                      importResult.hostsUpdated}\n                  </div>\n                  <div className='text-sm text-gray-600 dark:text-gray-400'>Mis à jour</div>\n                </CardBody>\n              </Card>\n            </div>\n\n            {importResult.errors.length > 0 && (\n              <div className='p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n                <div className='flex items-start gap-3'>\n                  <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n                  <div>\n                    <h4 className='font-medium text-orange-900 dark:text-orange-200 mb-2'>\n                      {importResult.errors.length} erreur(s) détectée(s)\n                    </h4>\n                    <ul className='text-sm text-orange-800 dark:text-orange-300 space-y-1'>\n                      {importResult.errors.slice(0, 5).map((error, index) => (\n                        <li key={index}>• {error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='primary' onClick={onClose}>\n                Terminer\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { Archive, Search, Calendar, RotateCcw, Trash2, Download } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface ArchiveManagerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRestore: (visitIds: string[]) => void;\n  onDelete: (visitIds: string[]) => void;\n  onExport: (visitIds: string[]) => void;\n}\n\nexport const ArchiveManagerModal: React.FC<ArchiveManagerModalProps> = ({\n  isOpen,\n  onClose,\n  onRestore,\n  onDelete,\n  onExport,\n}) => {\n  const { archivedVisits } = useData();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedYear, setSelectedYear] = useState<number | 'all'>('all');\n  const [selectedStatus, setSelectedStatus] = useState<Visit['status'] | 'all'>('all');\n  const [selectedVisits, setSelectedVisits] = useState<Set<string>>(new Set());\n  const [sortBy, setSortBy] = useState<'date' | 'speaker' | 'congregation'>('date');\n\n  // Années disponibles\n  const availableYears = useMemo(() => {\n    const years = new Set<number>();\n    archivedVisits.forEach((visit) => {\n      const year = new Date(visit.visitDate).getFullYear();\n      years.add(year);\n    });\n    return Array.from(years).sort((a, b) => b - a);\n  }, [archivedVisits]);\n\n  // Filtrer et trier les visites\n  const filteredVisits = useMemo(() => {\n    const filtered = archivedVisits.filter((visit) => {\n      // Recherche\n      if (searchTerm) {\n        const search = searchTerm.toLowerCase();\n        if (\n          !visit.nom.toLowerCase().includes(search) &&\n          !visit.congregation.toLowerCase().includes(search) &&\n          !visit.talkTheme?.toLowerCase().includes(search)\n        ) {\n          return false;\n        }\n      }\n\n      // Année\n      if (selectedYear !== 'all') {\n        const year = new Date(visit.visitDate).getFullYear();\n        if (year !== selectedYear) return false;\n      }\n\n      // Statut\n      if (selectedStatus !== 'all' && visit.status !== selectedStatus) {\n        return false;\n      }\n\n      return true;\n    });\n\n    // Tri\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'date':\n          return new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime();\n        case 'speaker':\n          return a.nom.localeCompare(b.nom);\n        case 'congregation':\n          return a.congregation.localeCompare(b.congregation);\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [archivedVisits, searchTerm, selectedYear, selectedStatus, sortBy]);\n\n  const toggleVisit = (visitId: string) => {\n    setSelectedVisits((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(visitId)) {\n        newSet.delete(visitId);\n      } else {\n        newSet.add(visitId);\n      }\n      return newSet;\n    });\n  };\n\n  const selectAll = () => {\n    setSelectedVisits(new Set(filteredVisits.map((v) => v.visitId)));\n  };\n\n  const deselectAll = () => {\n    setSelectedVisits(new Set());\n  };\n\n  const handleRestore = () => {\n    if (selectedVisits.size > 0) {\n      onRestore(Array.from(selectedVisits));\n      setSelectedVisits(new Set());\n    }\n  };\n\n  const handleDelete = () => {\n    if (selectedVisits.size > 0) {\n      if (\n        confirm(\n          `⚠️ Êtes-vous sûr de vouloir supprimer définitivement ${selectedVisits.size} visite(s) ?`\n        )\n      ) {\n        onDelete(Array.from(selectedVisits));\n        setSelectedVisits(new Set());\n      }\n    }\n  };\n\n  const handleExport = () => {\n    if (selectedVisits.size > 0) {\n      onExport(Array.from(selectedVisits));\n    }\n  };\n\n  const getStatusBadge = (status: Visit['status']) => {\n    switch (status) {\n      case 'completed':\n        return <Badge variant='success'>Terminé</Badge>;\n      case 'cancelled':\n        return <Badge variant='danger'>Annulé</Badge>;\n      default:\n        return <Badge variant='default'>{status}</Badge>;\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Gestion des archives' size='xl'>\n      <div className='space-y-6'>\n        {/* Statistiques */}\n        <div className='grid grid-cols-4 gap-4'>\n          <div className='p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>{archivedVisits.length}</div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Total</div>\n          </div>\n          <div className='p-3 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {archivedVisits.filter((v) => v.status === 'completed').length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Terminées</div>\n          </div>\n          <div className='p-3 bg-red-50 dark:bg-red-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-red-600'>\n              {archivedVisits.filter((v) => v.status === 'cancelled').length}\n            </div>\n            <div className='text-sm text-red-800 dark:text-red-300'>Annulées</div>\n          </div>\n          <div className='p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>{selectedVisits.size}</div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>Sélectionnées</div>\n          </div>\n        </div>\n\n        {/* Filtres */}\n        <div className='space-y-3'>\n          {/* Recherche */}\n          <div className='relative'>\n            <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400' />\n            <input\n              type='text'\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder='Rechercher par orateur, congrégation ou discours...'\n              className='w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            />\n          </div>\n\n          {/* Filtres rapides */}\n          <div className='flex gap-3 flex-wrap'>\n            <select\n              value={selectedYear}\n              onChange={(e) =>\n                setSelectedYear(e.target.value === 'all' ? 'all' : Number(e.target.value))\n              }\n              aria-label='Filtrer par année'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='all'>Toutes les années</option>\n              {availableYears.map((year) => (\n                <option key={year} value={year}>\n                  {year}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={selectedStatus}\n              onChange={(e) => setSelectedStatus(e.target.value as any)}\n              aria-label='Filtrer par statut'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='all'>Tous les statuts</option>\n              <option value='completed'>Terminées</option>\n              <option value='cancelled'>Annulées</option>\n            </select>\n\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as any)}\n              aria-label='Trier les archives'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='date'>Trier par date</option>\n              <option value='speaker'>Trier par orateur</option>\n              <option value='congregation'>Trier par congrégation</option>\n            </select>\n\n            <div className='flex-1'></div>\n\n            <Button variant='outline' size='sm' onClick={selectAll}>\n              Tout sélectionner\n            </Button>\n            <Button variant='outline' size='sm' onClick={deselectAll}>\n              Tout désélectionner\n            </Button>\n          </div>\n        </div>\n\n        {/* Liste des archives */}\n        <div className='space-y-2 max-h-96 overflow-y-auto'>\n          {filteredVisits.length === 0 ? (\n            <div className='text-center py-12'>\n              <Archive className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucune archive trouvée\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>Modifiez vos critères de recherche</p>\n            </div>\n          ) : (\n            filteredVisits.map((visit) => (\n              <Card\n                key={visit.visitId}\n                hoverable\n                className={`cursor-pointer transition-all ${\n                  selectedVisits.has(visit.visitId)\n                    ? 'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : ''\n                }`}\n                onClick={() => toggleVisit(visit.visitId)}\n              >\n                <CardBody>\n                  <div className='flex items-center gap-4'>\n                    <input\n                      type='checkbox'\n                      checked={selectedVisits.has(visit.visitId)}\n                      onChange={() => toggleVisit(visit.visitId)}\n                      onClick={(e) => e.stopPropagation()}\n                      aria-label={`Sélectionner ${visit.nom}`}\n                      className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                    />\n\n                    <div className='flex-1'>\n                      <div className='flex items-center gap-2 mb-1'>\n                        <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n                        {getStatusBadge(visit.status)}\n                      </div>\n                      <div className='text-sm text-gray-600 dark:text-gray-400 space-y-1'>\n                        <p>\n                          <Calendar className='w-3 h-3 inline mr-1' />\n                          {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                            day: 'numeric',\n                            month: 'long',\n                            year: 'numeric',\n                          })}\n                        </p>\n                        <p>{visit.congregation}</p>\n                        {visit.talkTheme && (\n                          <p className='text-xs'>\n                            {visit.talkNoOrType} - {visit.talkTheme}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-between pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Fermer\n          </Button>\n\n          {selectedVisits.size > 0 && (\n            <div className='flex gap-3'>\n              <Button variant='outline' onClick={handleExport}>\n                <Download className='w-4 h-4 mr-2' />\n                Exporter ({selectedVisits.size})\n              </Button>\n              <Button variant='danger' onClick={handleDelete}>\n                <Trash2 className='w-4 h-4 mr-2' />\n                Supprimer ({selectedVisits.size})\n              </Button>\n              <Button variant='primary' onClick={handleRestore}>\n                <RotateCcw className='w-4 h-4 mr-2' />\n                Restaurer ({selectedVisits.size})\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","// ============================================================================\n// UTILITAIRE DE MISE À JOUR DES NUMÉROS DE TÉLÉPHONE\n// ============================================================================\n\nimport { Speaker, Host } from '@/types';\n\n/**\n * Interface pour les données d'un orateur/hôte avec téléphone\n */\ninterface PersonWithPhone {\n  nom: string;\n  telephone?: string;\n  congregation?: string;\n}\n\n/**\n * Fonction pour extraire les numéros de téléphone du JSON\n */\nexport function extractPhoneNumbersFromJson(jsonData: any) {\n  const speakersWithPhones: PersonWithPhone[] = [];\n  const hostsWithPhones: PersonWithPhone[] = [];\n\n  // Extraire des orateurs\n  if (jsonData.speakers) {\n    jsonData.speakers.forEach((speaker: any) => {\n      if (speaker.telephone && speaker.telephone.trim()) {\n        speakersWithPhones.push({\n          nom: speaker.nom,\n          telephone: speaker.telephone,\n          congregation: speaker.congregation,\n        });\n      }\n    });\n  }\n\n  // Extraire des visites (les visites contiennent aussi les infos des orateurs)\n  if (jsonData.visits) {\n    jsonData.visits.forEach((visit: any) => {\n      if (visit.telephone && visit.telephone.trim()) {\n        speakersWithPhones.push({\n          nom: visit.nom,\n          telephone: visit.telephone,\n          congregation: visit.congregation,\n        });\n      }\n    });\n  }\n\n  // Extraire des hôtes\n  if (jsonData.hosts) {\n    jsonData.hosts.forEach((host: any) => {\n      if (host.telephone && host.telephone.trim()) {\n        hostsWithPhones.push({\n          nom: host.nom,\n          telephone: host.telephone,\n        });\n      }\n    });\n  }\n\n  return { speakersWithPhones, hostsWithPhones };\n}\n\n/**\n * Fonction pour mettre à jour les numéros de téléphone des orateurs\n */\nexport function updateSpeakersWithPhones(\n  existingSpeakers: Speaker[],\n  speakersWithPhones: PersonWithPhone[]\n): Speaker[] {\n  const phoneMap = new Map<string, string>();\n\n  // Créer une map nom -> téléphone (en normalisant les noms)\n  speakersWithPhones.forEach((person) => {\n    const normalizedName = person.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    phoneMap.set(normalizedName, person.telephone!);\n  });\n\n  // Mettre à jour les orateurs existants\n  return existingSpeakers.map((speaker) => {\n    const normalizedName = speaker.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    const phoneFromJson = phoneMap.get(normalizedName);\n\n    // Si on trouve un numéro et que l'orateur n'en a pas, on le met à jour\n    if (phoneFromJson && !speaker.telephone) {\n      return {\n        ...speaker,\n        telephone: phoneFromJson,\n        updatedAt: new Date().toISOString(),\n      };\n    }\n\n    return speaker;\n  });\n}\n\n/**\n * Fonction pour mettre à jour les numéros de téléphone des hôtes\n */\nexport function updateHostsWithPhones(\n  existingHosts: Host[],\n  hostsWithPhones: PersonWithPhone[]\n): Host[] {\n  const phoneMap = new Map<string, string>();\n\n  // Créer une map nom -> téléphone\n  hostsWithPhones.forEach((host) => {\n    const normalizedName = host.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    phoneMap.set(normalizedName, host.telephone!);\n  });\n\n  // Mettre à jour les hôtes existants\n  return existingHosts.map((host) => {\n    const normalizedName = host.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    const phoneFromJson = phoneMap.get(normalizedName);\n\n    // Si on trouve un numéro et que l'hôte n'en a pas, on le met à jour\n    if (phoneFromJson && !host.telephone) {\n      return {\n        ...host,\n        telephone: phoneFromJson,\n        updatedAt: new Date().toISOString(),\n      };\n    }\n\n    return host;\n  });\n}\n\n/**\n * Fonction pour générer un rapport des modifications\n */\nexport function generateUpdateReport(\n  originalSpeakers: Speaker[],\n  updatedSpeakers: Speaker[],\n  originalHosts: Host[],\n  updatedHosts: Host[]\n): {\n  speakersUpdated: number;\n  hostsUpdated: number;\n  speakerDetails: string[];\n  hostDetails: string[];\n} {\n  const speakerDetails: string[] = [];\n  const hostDetails: string[] = [];\n\n  let speakersUpdated = 0;\n  let hostsUpdated = 0;\n\n  // Rapport des orateurs\n  originalSpeakers.forEach((original, index) => {\n    const updated = updatedSpeakers[index];\n    if (original.telephone !== updated.telephone && updated.telephone) {\n      speakersUpdated++;\n      speakerDetails.push(`✓ ${updated.nom}: +${updated.telephone}`);\n    }\n  });\n\n  // Rapport des hôtes\n  originalHosts.forEach((original, index) => {\n    const updated = updatedHosts[index];\n    if (original.telephone !== updated.telephone && updated.telephone) {\n      hostsUpdated++;\n      hostDetails.push(`✓ ${updated.nom}: +${updated.telephone}`);\n    }\n  });\n\n  return {\n    speakersUpdated,\n    hostsUpdated,\n    speakerDetails,\n    hostDetails,\n  };\n}\n\n/**\n * Fonction principale pour mettre à jour tous les numéros\n */\nexport function processPhoneNumberUpdate(\n  jsonData: any,\n  currentData: {\n    speakers: Speaker[];\n    hosts: Host[];\n  }\n): {\n  updatedSpeakers: Speaker[];\n  updatedHosts: Host[];\n  report: ReturnType<typeof generateUpdateReport>;\n} {\n  // Extraire les numéros du JSON\n  const { speakersWithPhones, hostsWithPhones } = extractPhoneNumbersFromJson(jsonData);\n\n  // Mettre à jour les orateurs\n  const updatedSpeakers = updateSpeakersWithPhones(currentData.speakers, speakersWithPhones);\n\n  // Mettre à jour les hôtes\n  const updatedHosts = updateHostsWithPhones(currentData.hosts, hostsWithPhones);\n\n  // Générer le rapport\n  const report = generateUpdateReport(\n    currentData.speakers,\n    updatedSpeakers,\n    currentData.hosts,\n    updatedHosts\n  );\n\n  return {\n    updatedSpeakers,\n    updatedHosts,\n    report,\n  };\n}\n","import React, { useState } from 'react';\nimport { X, Upload, Phone, Users, MapPin, CheckCircle, AlertCircle } from 'lucide-react';\nimport { useData } from '@/contexts/DataContext';\nimport { Speaker } from '@/types';\nimport { processPhoneNumberUpdate } from '@/utils/phoneNumberUpdater';\n\ninterface PhoneNumberImportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface ImportResult {\n  speakersUpdated: number;\n  hostsUpdated: number;\n  speakerDetails: string[];\n  hostDetails: string[];\n  errors: string[];\n}\n\nexport function PhoneNumberImportModal({ isOpen, onClose }: PhoneNumberImportModalProps) {\n  const { speakers, hosts, updateSpeaker, updateHost } = useData();\n  const [importData, setImportData] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [result, setResult] = useState<ImportResult | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const content = e.target?.result as string;\n        setImportData(content);\n        setShowPreview(true);\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!importData.trim()) return;\n\n    setIsLoading(true);\n    try {\n      const jsonData = JSON.parse(importData);\n\n      // Utiliser la fonction de traitement\n      const { updatedSpeakers, updatedHosts, report } = processPhoneNumberUpdate(jsonData, {\n        speakers,\n        hosts,\n      });\n\n      // Appliquer les mises à jour via le DataContext - CORRECTION: comparer par ID et par téléphone manquant\n      const speakerUpdates: Speaker[] = [];\n\n      // Trouver les orateurs qui ont besoin d'être mis à jour\n      speakers.forEach((existingSpeaker) => {\n        const updatedSpeaker = updatedSpeakers.find((us) => us.id === existingSpeaker.id);\n        if (\n          updatedSpeaker &&\n          (!existingSpeaker.telephone || existingSpeaker.telephone.trim() === '') &&\n          updatedSpeaker.telephone &&\n          updatedSpeaker.telephone.trim() !== ''\n        ) {\n          speakerUpdates.push(updatedSpeaker);\n        }\n      });\n\n      // Trouver les hôtes qui ont besoin d'être mis à jour\n      const hostUpdates = hosts.filter((existingHost) => {\n        const updatedHost = updatedHosts.find((uh) => uh.nom === existingHost.nom);\n        return (\n          updatedHost &&\n          (!existingHost.telephone || existingHost.telephone.trim() === '') &&\n          updatedHost.telephone &&\n          updatedHost.telephone.trim() !== ''\n        );\n      });\n\n      console.log('🔄 Mise à jour des orateurs:', speakerUpdates.length);\n      console.log('🔄 Mise à jour des hôtes:', hostUpdates.length);\n\n      // Mettre à jour les orateurs UN PAR UN pour forcer la réactualisation\n      for (const updatedSpeaker of speakerUpdates) {\n        console.log(`📱 Mise à jour orateur: ${updatedSpeaker.nom} -> ${updatedSpeaker.telephone}`);\n        updateSpeaker(updatedSpeaker);\n        // Petit délai pour laisser le temps au state de se mettre à jour\n        await new Promise((resolve) => setTimeout(resolve, 50));\n      }\n\n      // Mettre à jour les hôtes UN PAR UN\n      for (const updatedHost of hostUpdates) {\n        console.log(`🏠 Mise à jour hôte: ${updatedHost.nom} -> ${updatedHost.telephone}`);\n        updateHost(updatedHost.nom, { telephone: updatedHost.telephone });\n        await new Promise((resolve) => setTimeout(resolve, 50));\n      }\n\n      // Forcer une réactualisation des données après un court délai\n      setTimeout(() => {\n        // Utiliser un dispatch d'événement pour notifier les composants\n        window.dispatchEvent(\n          new CustomEvent('phoneNumbersUpdated', {\n            detail: {\n              speakersUpdated: speakerUpdates.length,\n              hostsUpdated: hostUpdates.length,\n            },\n          })\n        );\n      }, 100);\n\n      setResult({\n        speakersUpdated: report.speakersUpdated,\n        hostsUpdated: report.hostsUpdated,\n        speakerDetails: report.speakerDetails,\n        hostDetails: report.hostDetails,\n        errors: [],\n      });\n    } catch (error) {\n      setResult({\n        speakersUpdated: 0,\n        hostsUpdated: 0,\n        speakerDetails: [],\n        hostDetails: [],\n        errors: [error instanceof Error ? error.message : 'Erreur lors du parsing JSON'],\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setImportData('');\n    setResult(null);\n    setShowPreview(false);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className='fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50'>\n      <div className='bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden'>\n        {/* Header */}\n        <div className='flex items-center justify-between p-6 border-b'>\n          <div className='flex items-center space-x-3'>\n            <Phone className='h-6 w-6 text-blue-600' />\n            <h2 className='text-xl font-semibold text-gray-900'>Import des Numéros de Téléphone</h2>\n          </div>\n          <button\n            onClick={handleClose}\n            className='text-gray-400 hover:text-gray-600 transition-colors'\n            aria-label='Fermer'\n          >\n            <X className='h-6 w-6' />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className='p-6 overflow-y-auto max-h-[calc(90vh-140px)]'>\n          {!result ? (\n            <div className='space-y-6'>\n              {/* Instructions */}\n              <div className='bg-blue-50 border border-blue-200 rounded-lg p-4'>\n                <h3 className='font-medium text-blue-900 mb-2'>📋 Instructions</h3>\n                <ul className='text-sm text-blue-800 space-y-1'>\n                  <li>\n                    • Sélectionnez un fichier JSON contenant les orateurs et hôtes avec leurs\n                    numéros\n                  </li>\n                  <li>• Le fichier doit contenir les champs \"speakers\", \"visits\" et/ou \"hosts\"</li>\n                  <li>• Seuls les numéros manquants seront ajoutés (pas de remplacement)</li>\n                  <li>• Un rapport détaillé des modifications sera affiché</li>\n                </ul>\n              </div>\n\n              {/* File Upload */}\n              <div className='space-y-4'>\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 mb-2'>\n                    Sélectionner un fichier JSON\n                  </label>\n                  <div className='flex items-center space-x-4'>\n                    <input\n                      type='file'\n                      accept='.json'\n                      onChange={handleFileUpload}\n                      title='Sélectionner un fichier JSON contenant les numéros de téléphone'\n                      className='block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'\n                    />\n                    <Upload className='h-5 w-5 text-gray-400' aria-hidden='true' />\n                  </div>\n                </div>\n\n                {/* Manual Input */}\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 mb-2'>\n                    Ou coller le contenu JSON\n                  </label>\n                  <textarea\n                    value={importData}\n                    onChange={(e) => {\n                      setImportData(e.target.value);\n                      setShowPreview(e.target.value.trim().length > 0);\n                    }}\n                    placeholder='Collez ici le contenu JSON avec les numéros de téléphone...'\n                    className='w-full h-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm'\n                  />\n                </div>\n\n                {/* Preview */}\n                {showPreview && importData.trim() && (\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-4'>\n                    <h4 className='font-medium text-gray-900 mb-2'>👁️ Aperçu des données</h4>\n                    <div className='text-sm text-gray-600'>\n                      {(() => {\n                        try {\n                          const parsed = JSON.parse(importData);\n                          const speakerCount =\n                            parsed.speakers?.filter((s: any) => s.telephone?.trim()).length || 0;\n                          const visitCount =\n                            parsed.visits?.filter((v: any) => v.telephone?.trim()).length || 0;\n                          const hostCount =\n                            parsed.hosts?.filter((h: any) => h.telephone?.trim()).length || 0;\n\n                          return (\n                            <div className='space-y-2'>\n                              <div className='flex items-center space-x-2'>\n                                <Users className='h-4 w-4' />\n                                <span>Orateurs avec numéros: {speakerCount}</span>\n                              </div>\n                              <div className='flex items-center space-x-2'>\n                                <MapPin className='h-4 w-4' />\n                                <span>Visites avec numéros: {visitCount}</span>\n                              </div>\n                              <div className='flex items-center space-x-2'>\n                                <Phone className='h-4 w-4' />\n                                <span>Hôtes avec numéros: {hostCount}</span>\n                              </div>\n                            </div>\n                          );\n                        } catch {\n                          return <span className='text-red-600'>❌ JSON invalide</span>;\n                        }\n                      })()}\n                    </div>\n                  </div>\n                )}\n\n                {/* Import Button */}\n                {showPreview && importData.trim() && (\n                  <div className='flex justify-end space-x-3'>\n                    <button\n                      onClick={() => {\n                        setImportData('');\n                        setShowPreview(false);\n                      }}\n                      className='px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors'\n                    >\n                      Annuler\n                    </button>\n                    <button\n                      onClick={handleImport}\n                      disabled={isLoading}\n                      className='px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors'\n                    >\n                      {isLoading ? '⏳ Import en cours...' : '📱 Importer les numéros'}\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            /* Results */\n            <div className='space-y-6'>\n              {/* Summary */}\n              <div className='bg-green-50 border border-green-200 rounded-lg p-4'>\n                <div className='flex items-center space-x-2 mb-3'>\n                  <CheckCircle className='h-5 w-5 text-green-600' />\n                  <h3 className='font-medium text-green-900'>Import terminé avec succès!</h3>\n                </div>\n                <div className='grid grid-cols-2 gap-4 text-sm'>\n                  <div className='text-green-800'>\n                    <span className='font-medium'>{result.speakersUpdated}</span> orateurs mis à\n                    jour\n                  </div>\n                  <div className='text-green-800'>\n                    <span className='font-medium'>{result.hostsUpdated}</span> hôtes mis à jour\n                  </div>\n                </div>\n              </div>\n\n              {/* Speaker Updates */}\n              {result.speakerDetails.length > 0 && (\n                <div>\n                  <h4 className='font-medium text-gray-900 mb-2'>📱 Orateurs mis à jour</h4>\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-3 max-h-48 overflow-y-auto'>\n                    <ul className='space-y-1 text-sm'>\n                      {result.speakerDetails.map((detail, index) => (\n                        <li key={index} className='text-gray-700'>\n                          {detail}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              )}\n\n              {/* Host Updates */}\n              {result.hostDetails.length > 0 && (\n                <div>\n                  <h4 className='font-medium text-gray-900 mb-2'>🏠 Hôtes mis à jour</h4>\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-3 max-h-48 overflow-y-auto'>\n                    <ul className='space-y-1 text-sm'>\n                      {result.hostDetails.map((detail, index) => (\n                        <li key={index} className='text-gray-700'>\n                          {detail}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              )}\n\n              {/* Errors */}\n              {result.errors.length > 0 && (\n                <div className='bg-red-50 border border-red-200 rounded-lg p-4'>\n                  <div className='flex items-center space-x-2 mb-2'>\n                    <AlertCircle className='h-5 w-5 text-red-600' />\n                    <h4 className='font-medium text-red-900'>Erreurs</h4>\n                  </div>\n                  <ul className='space-y-1 text-sm text-red-800'>\n                    {result.errors.map((error, index) => (\n                      <li key={index}>• {error}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Close Button */}\n              <div className='flex justify-end'>\n                <button\n                  onClick={handleClose}\n                  className='px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors'\n                >\n                  Fermer\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useMemo } from 'react';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useSettings } from '@/contexts/SettingsContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { Card, CardBody, CardHeader } from '@/components/ui/Card';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { Select } from '@/components/ui/Select';\r\nimport {\r\n  User,\r\n  Bell,\r\n  Shield,\r\n  Palette,\r\n  Database,\r\n  Save,\r\n  Smartphone,\r\n  Moon,\r\n  Sun,\r\n  Monitor,\r\n  RefreshCw,\r\n  Copy,\r\n  Link,\r\n  Users,\r\n  Phone,\r\n  ChevronRight,\r\n  Info,\r\n  Calendar,\r\n  Clock,\r\n  MapPin,\r\n  CheckCircle,\r\n} from 'lucide-react';\r\nimport { CongregationProfile, ImportResult, Language, Theme } from '@/types';\r\nimport { BackupManagerModal } from '@/components/settings/BackupManagerModal';\r\nimport { ImportWizardModal } from '@/components/settings/ImportWizardModal';\r\nimport { ArchiveManagerModal } from '@/components/settings/ArchiveManagerModal';\r\nimport { DuplicateDetectionModal } from '@/components/settings/DuplicateDetectionModal';\r\nimport { PhoneNumberImportModal } from '@/components/settings/PhoneNumberImportModal';\r\nimport { cn } from '@/utils/cn';\r\nimport { useVisitNotifications } from '@/hooks/useVisitNotifications';\r\nimport { LocalNotifications } from '@capacitor/local-notifications';\r\n\r\ninterface BackupOptions {\r\n  includeArchived: boolean;\r\n  includeSettings: boolean;\r\n  includeTemplates: boolean;\r\n  encrypt: boolean;\r\n  password?: string;\r\n}\r\n\r\ninterface ColumnMapping {\r\n  [key: string]: string;\r\n}\r\n\r\nconst REMINDER_ONE_WEEK = 7;\r\nconst REMINDER_TWO_DAYS = 2;\r\n\r\nexport const Settings: React.FC = () => {\r\n  const {\r\n    congregationProfile,\r\n    updateCongregationProfile,\r\n    syncWithGoogleSheet,\r\n    exportData,\r\n    importData,\r\n    mergeDuplicates,\r\n    deleteVisit,\r\n    deleteSpeaker,\r\n    deleteHost,\r\n    speakers,\r\n    hosts,\r\n    visits,\r\n    archivedVisits,\r\n    speakerMessages,\r\n  } = useData();\r\n  const { settings, updateSettings } = useSettings();\r\n  const { addToast } = useToast();\r\n  const { requestPermissions } = useVisitNotifications();\r\n\r\n  const handleTestNotification = async () => {\r\n    const granted = await requestPermissions();\r\n    if (granted) {\r\n      try {\r\n        await LocalNotifications.schedule({\r\n          notifications: [\r\n            {\r\n              title: 'Test Notification',\r\n              body: 'Ceci est une notification de test pour KBV Lyon.',\r\n              id: Math.floor(Math.random() * 100000),\r\n              schedule: { at: new Date(Date.now() + 1000) }, // 1 second delay\r\n              sound: 'default',\r\n              attachments: [],\r\n              actionTypeId: '',\r\n              extra: null,\r\n            },\r\n          ],\r\n        });\r\n        addToast('Notification de test envoyée (dans 1s)', 'success');\r\n      } catch (error) {\r\n        console.error('Erreur notification:', error);\r\n        addToast('Erreur technique notification', 'error');\r\n      }\r\n    } else {\r\n      addToast('Permissions refusées', 'error');\r\n    }\r\n  };\r\n\r\n  const [activeTab, setActiveTab] = useState<\r\n    'overview' | 'profile' | 'appearance' | 'notifications' | 'security' | 'data' | 'duplicates' | 'about'\r\n  >('overview');\r\n  const [profileForm, setProfileForm] = useState<CongregationProfile>(congregationProfile);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n\r\n  // Modals state\r\n  const [isBackupModalOpen, setIsBackupModalOpen] = useState(false);\r\n  const [isImportModalOpen, setIsImportModalOpen] = useState(false);\r\n  const [isArchiveModalOpen, setIsArchiveModalOpen] = useState(false);\r\n  const [isDuplicateModalOpen, setIsDuplicateModalOpen] = useState(false);\r\n  const [isPhoneImportModalOpen, setIsPhoneImportModalOpen] = useState(false);\r\n\r\n  const tabs = [\r\n    { id: 'overview', label: 'Vue d\\'ensemble', icon: Monitor, color: 'text-blue-600', bg: 'bg-blue-50 dark:bg-blue-900/20' },\r\n    { id: 'profile', label: 'Profil de la Congrégation', icon: User, color: 'text-purple-600', bg: 'bg-purple-50 dark:bg-purple-900/20' },\r\n    { id: 'appearance', label: 'Apparence & Thème', icon: Palette, color: 'text-pink-600', bg: 'bg-pink-50 dark:bg-pink-900/20' },\r\n    { id: 'notifications', label: 'Notifications', icon: Bell, color: 'text-orange-600', bg: 'bg-orange-50 dark:bg-orange-900/20' },\r\n    { id: 'security', label: 'Sécurité & Accès', icon: Shield, color: 'text-green-600', bg: 'bg-green-50 dark:bg-green-900/20' },\r\n    { id: 'data', label: 'Export & Import', icon: Database, color: 'text-amber-600', bg: 'bg-amber-50 dark:bg-amber-900/20' },\r\n    { id: 'duplicates', label: 'Maintenance (Doublons)', icon: Copy, color: 'text-indigo-600', bg: 'bg-indigo-50 dark:bg-indigo-900/20' },\r\n    { id: 'about', label: 'À propos', icon: Info, color: 'text-gray-600', bg: 'bg-gray-50 dark:bg-gray-900/20' },\r\n  ] as const;\r\n\r\n  const stats = useMemo(() => ({\r\n    speakersCount: speakers.length,\r\n    visitsCount: visits.length,\r\n    hostsCount: hosts.length,\r\n    archivedCount: archivedVisits?.length || 0,\r\n    messagesCount: speakerMessages?.length || 0\r\n  }), [speakers, visits, hosts, archivedVisits, speakerMessages]);\r\n\r\n  const handleSaveProfile = () => {\r\n    updateCongregationProfile(profileForm);\r\n    addToast('Profil mis à jour', 'success');\r\n  };\r\n\r\n  const handleThemeChange = (theme: Theme) => {\r\n    updateSettings({ ...settings, theme });\r\n    addToast('Thème mis à jour', 'success');\r\n  };\r\n\r\n  const handleLanguageChange = (language: Language) => {\r\n    updateSettings({ ...settings, language });\r\n    addToast('Langue mise à jour', 'success');\r\n  };\r\n\r\n  const handleSyncGoogleSheet = () => {\r\n    setIsSyncing(true);\r\n    syncWithGoogleSheet()\r\n      .catch(() => addToast('Erreur lors de la synchronisation', 'error'))\r\n      .finally(() => setIsSyncing(false));\r\n  };\r\n\r\n  const handleBackupAdapter = (_options: BackupOptions): Promise<void> =>\r\n    new Promise((resolve) => {\r\n      const json = exportData();\r\n      const blob = new Blob([json], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `kbv-backup-${new Date().toISOString().slice(0, 10)}.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n      addToast('Sauvegarde effectuée avec succès', 'success');\r\n      resolve();\r\n    });\r\n\r\n  const handleRestoreAdapter = (file: File) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        if (e.target?.result) {\r\n          try {\r\n            importData(e.target.result as string);\r\n            resolve();\r\n          } catch (err) { reject(err); }\r\n        }\r\n      };\r\n      reader.onerror = reject;\r\n      reader.readAsText(file);\r\n    });\r\n\r\n  const handleImportAdapter = (data: any, _mapping: ColumnMapping): Promise<ImportResult> => {\r\n    addToast('Importation effectuée avec succès', 'success');\r\n    return Promise.resolve({\r\n      speakersAdded: 0, speakersUpdated: 0,\r\n      visitsAdded: Array.isArray(data) ? data.length : 1,\r\n      visitsUpdated: 0, hostsAdded: 0, hostsUpdated: 0, errors: [],\r\n    });\r\n  };\r\n\r\n  const handleMergeAdapter = (groups: any[], action: 'merge' | 'delete', strategy: 'keep-first' | 'keep-recent' | 'manual' = 'keep-recent') => {\r\n    let successCount = 0;\r\n    groups.forEach((group: any) => {\r\n      if (!group.items || group.items.length < 2) return;\r\n      const sortedItems = [...group.items];\r\n      if (strategy === 'keep-recent') {\r\n        sortedItems.sort((a, b) => new Date(b.updatedAt || b.createdAt || 0).getTime() - new Date(a.updatedAt || a.createdAt || 0).getTime());\r\n      }\r\n      const keepItem = sortedItems[0];\r\n      const duplicates = sortedItems.slice(1);\r\n      const keepId = group.type === 'host' ? (keepItem as any).nom : (keepItem as any).id || (keepItem as any).visitId;\r\n      const duplicateIds = duplicates.map((item: any) => {\r\n        if (group.type === 'host') return (item as any).nom;\r\n        if (group.type === 'visit' || group.type === 'archivedVisit') return (item as any).visitId;\r\n        return (item as any).id;\r\n      });\r\n\r\n      if (action === 'merge') {\r\n        mergeDuplicates(group.type, keepId, duplicateIds);\r\n        successCount++;\r\n      } else if (action === 'delete') {\r\n        if (group.type === 'speaker') duplicateIds.forEach((id: string) => deleteSpeaker(id));\r\n        else if (group.type === 'host') duplicateIds.forEach((name: string) => deleteHost(name));\r\n        else if (group.type === 'visit') duplicateIds.forEach((id: string) => deleteVisit(id));\r\n        successCount++;\r\n      }\r\n    });\r\n    if (successCount > 0) addToast(action === 'merge' ? `${successCount} groupe(s) fusionné(s)` : `${successCount} groupe(s) nettoyé(s)`, 'success');\r\n  };\r\n\r\n  return (\r\n    <div className='max-w-[1600px] mx-auto space-y-8 px-4 sm:px-6 lg:px-8 py-4'>\r\n      {/* Header Page */}\r\n      <div className='flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-gray-200 dark:border-gray-700 pb-6'>\r\n        <div>\r\n          <div className='flex items-center gap-2 text-sm text-primary-600 dark:text-primary-400 font-medium mb-1'>\r\n            <Monitor className='w-4 h-4' />\r\n            <span>Système & Configuration</span>\r\n          </div>\r\n          <h2 className='text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight'>\r\n            Paramètres\r\n          </h2>\r\n          <p className='text-gray-500 dark:text-gray-400 mt-2 max-w-2xl'>\r\n            Personnalisez votre expérience, gérez les données de la congrégation et configurez les options de sécurité avancées.\r\n          </p>\r\n        </div>\r\n        \r\n        {activeTab !== 'overview' && (\r\n          <Button \r\n            variant='ghost' \r\n            onClick={() => setActiveTab('overview')}\r\n            className='text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\r\n          >\r\n            Retour à l'accueil\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <div className='flex flex-col lg:flex-row gap-8 items-start'>\r\n        {/* Navigation Mobile/Desktop Sidebar */}\r\n        <div className='w-full lg:w-72 shrink-0'>\r\n          <Card className='overflow-hidden border-none shadow-md'>\r\n            <CardBody className='p-2 space-y-1'>\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as any)}\r\n                  className={cn(\r\n                    'w-full flex items-center justify-between group px-4 py-3 text-sm font-semibold rounded-xl transition-all duration-200',\r\n                    activeTab === tab.id\r\n                      ? 'bg-primary-600 text-white shadow-lg shadow-primary-200 dark:shadow-primary-900/20 translate-x-1'\r\n                      : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200'\r\n                  )}\r\n                >\r\n                  <div className='flex items-center gap-3'>\r\n                    <div className={cn(\r\n                      'p-2 rounded-lg transition-colors',\r\n                      activeTab === tab.id ? 'bg-white/20' : cn(tab.bg, tab.color)\r\n                    )}>\r\n                      <tab.icon className='w-4 h-4' />\r\n                    </div>\r\n                    <span>{tab.label}</span>\r\n                  </div>\r\n                  <ChevronRight className={cn(\r\n                    'w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity',\r\n                    activeTab === tab.id && 'opacity-100'\r\n                  )} />\r\n                </button>\r\n              ))}\r\n            </CardBody>\r\n          </Card>\r\n\r\n          {/* Quick Stats Sidebar (Only if not in overview) */}\r\n          {activeTab !== 'overview' && (\r\n            <div className='mt-8 space-y-4 hidden lg:block'>\r\n              <h4 className='text-xs font-bold text-gray-400 uppercase tracking-widest px-4'>État du système</h4>\r\n              <Card className='bg-gray-50/50 dark:bg-gray-800/30 border-dashed'>\r\n                <CardBody className='p-4 space-y-3'>\r\n                  <div className='flex justify-between text-xs'>\r\n                    <span className='text-gray-500'>Base de données</span>\r\n                    <span className='text-green-600 font-bold'>En ligne</span>\r\n                  </div>\r\n                  <div className='flex justify-between text-xs'>\r\n                    <span className='text-gray-500'>Dernière synchro</span>\r\n                    <span className='text-gray-900 dark:text-white font-medium'>\r\n                      {localStorage.getItem('lastGoogleSheetSync') ? new Date(localStorage.getItem('lastGoogleSheetSync')!).toLocaleDateString() : 'Jamais'}\r\n                    </span>\r\n                  </div>\r\n                  <div className='pt-2 border-t border-gray-200 dark:border-gray-700'>\r\n                     <div className='flex items-center gap-2 text-[10px] text-gray-400'>\r\n                        <Shield className='w-3 h-3' />\r\n                        Chiffrement AES-GCM 256\r\n                     </div>\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Content Area */}\r\n        <div className='flex-1 w-full min-h-[700px]'>\r\n          \r\n          {activeTab === 'overview' && (\r\n            <div className='space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500'>\r\n              {/* Stats Bar */}\r\n              <div className='grid grid-cols-2 md:grid-cols-4 gap-4'>\r\n                {[\r\n                  { label: 'Orateurs', value: stats.speakersCount, icon: Users, color: 'text-blue-600', bg: 'bg-blue-50' },\r\n                  { label: 'Visites', value: stats.visitsCount, icon: Calendar, color: 'text-purple-600', bg: 'bg-purple-50' },\r\n                  { label: 'Hôtes', value: stats.hostsCount, icon: MapPin, color: 'text-green-600', bg: 'bg-green-50' },\r\n                  { label: 'Archives', value: stats.archivedCount, icon: Save, color: 'text-orange-600', bg: 'bg-orange-50' },\r\n                ].map((s, i) => (\r\n                  <Card key={i} className='overflow-hidden border-none shadow-sm'>\r\n                    <CardBody className='p-4 flex items-center justify-between'>\r\n                      <div>\r\n                        <p className='text-xs font-semibold text-gray-500 uppercase tracking-wider'>{s.label}</p>\r\n                        <p className='text-2xl font-bold text-gray-900 dark:text-white mt-0.5'>{s.value}</p>\r\n                      </div>\r\n                      <div className={cn('p-3 rounded-2xl dark:bg-gray-700', s.bg)}>\r\n                        <s.icon className={cn('w-5 h-5', s.color)} />\r\n                      </div>\r\n                    </CardBody>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Category Grid */}\r\n              <div className='grid grid-cols-1 md:grid-cols-2 gap-6'>\r\n                {tabs.filter(t => t.id !== 'overview').map((tab) => (\r\n                  <Card \r\n                    key={tab.id} \r\n                    hoverable \r\n                    onClick={() => setActiveTab(tab.id as any)}\r\n                    className='group'\r\n                  >\r\n                    <CardBody className='p-6 flex flex-col h-full'>\r\n                      <div className={cn('w-12 h-12 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 duration-300', tab.bg)}>\r\n                        <tab.icon className={cn('w-6 h-6', tab.color)} />\r\n                      </div>\r\n                      <h3 className='text-lg font-bold text-gray-900 dark:text-white mb-2'>{tab.label}</h3>\r\n                      <p className='text-sm text-gray-500 dark:text-gray-400 flex-1'>\r\n                        {tab.id === 'profile' && 'Gérez le nom, la ville et les horaires de réunion de votre congrégation.'}\r\n                        {tab.id === 'appearance' && 'Modifiez le thème (Clair/Sombre), la langue et les préférences visuelles.'}\r\n                        {tab.id === 'notifications' && 'Configurez les rappels automatiques et les préférences d\\'alertes.'}\r\n                        {tab.id === 'security' && 'Paramètres de chiffrement et gestion des délais de session.'}\r\n                        {tab.id === 'data' && 'Sauvegardes export/import et synchronisation Google Sheets.'}\r\n                        {tab.id === 'duplicates' && 'Outils de maintenance pour nettoyer les données en doublon.'}\r\n                        {tab.id === 'about' && 'Informations sur l\\'application, licence et version actuelle.'}\r\n                      </p>\r\n                      <div className='mt-6 flex items-center text-primary-600 font-semibold text-sm'>\r\n                        Configurer <ChevronRight className='w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform' />\r\n                      </div>\r\n                    </CardBody>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Profil Congrégation */}\r\n          {activeTab === 'profile' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300'>\r\n              <Card className='border-none shadow-lg outline outline-1 outline-gray-200 dark:outline-gray-700'>\r\n                <CardHeader className='bg-gray-50/50 dark:bg-gray-900/20 border-b border-gray-100 dark:border-gray-800'>\r\n                  <div className='flex items-center gap-3'>\r\n                    <div className='p-3 bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-2xl'>\r\n                      <User className='w-6 h-6' />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className='text-xl font-bold text-gray-900 dark:text-white'>Identité de la Congrégation</h3>\r\n                      <p className='text-sm text-gray-500'>Ces informations apparaissent sur les documents officiels.</p>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardBody className='space-y-8 p-8'>\r\n                  <div className='grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6'>\r\n                    <Input\r\n                      label='Nom de la congrégation'\r\n                      value={profileForm.name}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, name: e.target.value })}\r\n                      placeholder='Ex: Lyon KBV'\r\n                      leftIcon={<Users className='w-4 h-4' />}\r\n                    />\r\n                    <Input\r\n                      label='Ville'\r\n                      value={profileForm.city || ''}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, city: e.target.value })}\r\n                      placeholder='Ex: Lyon'\r\n                      leftIcon={<MapPin className='w-4 h-4' />}\r\n                    />\r\n                    <Input\r\n                      label='Responsable Accueil'\r\n                      value={profileForm.hospitalityOverseer}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, hospitalityOverseer: e.target.value })}\r\n                      placeholder='Nom complet'\r\n                    />\r\n                    <Input\r\n                      label='Téléphone Responsable'\r\n                      value={profileForm.hospitalityOverseerPhone}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, hospitalityOverseerPhone: e.target.value })}\r\n                      placeholder='+33 6 XX XX XX XX'\r\n                      leftIcon={<Phone className='w-4 h-4' />}\r\n                    />\r\n                    <Select\r\n                      label='Jour de réunion'\r\n                      value={profileForm.meetingDay || 'Samedi'}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, meetingDay: e.target.value })}\r\n                      options={[\r\n                        { value: 'Dimanche', label: 'Dimanche' },\r\n                        { value: 'Lundi', label: 'Lundi' },\r\n                        { value: 'Mardi', label: 'Mardi' },\r\n                        { value: 'Mercredi', label: 'Mercredi' },\r\n                        { value: 'Jeudi', label: 'Jeudi' },\r\n                        { value: 'Vendredi', label: 'Vendredi' },\r\n                        { value: 'Samedi', label: 'Samedi' },\r\n                      ]}\r\n                    />\r\n                    <Input\r\n                      label='Heure de réunion'\r\n                      type='time'\r\n                      value={profileForm.meetingTime || '14:30'}\r\n                      onChange={(e) => setProfileForm({ ...profileForm, meetingTime: e.target.value })}\r\n                      leftIcon={<Clock className='w-4 h-4' />}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Preview Business Card */}\r\n                  <div className='bg-gradient-to-br from-primary-500 to-primary-700 p-6 rounded-2xl shadow-xl text-white max-w-sm mx-auto transform hover:rotate-1 transition-transform cursor-default'>\r\n                     <div className='flex justify-between items-start mb-8'>\r\n                        <div className='bg-white/20 p-2 rounded-lg backdrop-blur-md'>\r\n                           <Monitor className='w-6 h-6' />\r\n                        </div>\r\n                        <div className='text-[10px] bg-black/10 px-2 py-1 rounded-full tracking-tighter uppercase font-bold'>OFFICIAL PROFILE</div>\r\n                     </div>\r\n                     <h4 className='text-lg font-bold mb-1 truncate'>{profileForm.name || 'Nom Congrégation'}</h4>\r\n                     <p className='text-xs opacity-80 mb-4'>{profileForm.city || 'Ville'}, FR</p>\r\n                     \r\n                     <div className='space-y-2 text-xs'>\r\n                        <div className='flex items-center gap-2'>\r\n                           <User className='w-3 h-3 opacity-60' />\r\n                           <span>{profileForm.hospitalityOverseer || 'Responsable'}</span>\r\n                        </div>\r\n                        <div className='flex items-center gap-2'>\r\n                           <Calendar className='w-3 h-3 opacity-60' />\r\n                           <span>{profileForm.meetingDay || 'Jour'} à {profileForm.meetingTime || '00:00'}</span>\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n\r\n                  <div className='flex justify-end pt-4 border-t border-gray-100 dark:border-gray-800'>\r\n                    <Button \r\n                      size='lg' \r\n                      leftIcon={<Save className='w-4 h-4' />} \r\n                      onClick={handleSaveProfile}\r\n                      className='shadow-lg shadow-primary-200 dark:shadow-none'\r\n                    >\r\n                      Enregistrer les modifications\r\n                    </Button>\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Apparence */}\r\n          {activeTab === 'appearance' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300 uppercase'>\r\n              <Card className='border-none shadow-lg'>\r\n                <CardHeader>\r\n                  <h3 className='text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2'>\r\n                    <Palette className='w-6 h-6 text-pink-500' />\r\n                    Préférences Visuelles\r\n                  </h3>\r\n                </CardHeader>\r\n                <CardBody className='p-8 space-y-12'>\r\n                  <div>\r\n                    <label className='block text-sm font-bold text-gray-700 dark:text-gray-300 mb-6 uppercase tracking-wider'>\r\n                      Thème de l'interface\r\n                    </label>\r\n                    <div className='grid grid-cols-1 sm:grid-cols-3 gap-6'>\r\n                      {[\r\n                        { \r\n                          value: 'light', \r\n                          label: 'Clair', \r\n                          icon: Sun, \r\n                          color: 'text-orange-500', \r\n                          preview: 'bg-gray-100',\r\n                          inner: 'bg-white border-gray-200' \r\n                        },\r\n                        { \r\n                          value: 'dark', \r\n                          label: 'Sombre', \r\n                          icon: Moon, \r\n                          color: 'text-indigo-400', \r\n                          preview: 'bg-gray-950',\r\n                          inner: 'bg-gray-800 border-gray-700' \r\n                        },\r\n                        { \r\n                          value: 'auto', \r\n                          label: 'Système', \r\n                          icon: Monitor, \r\n                          color: 'text-gray-500', \r\n                          preview: 'bg-gradient-to-r from-gray-100 to-gray-950',\r\n                          inner: 'bg-gray-400 border-gray-400' \r\n                        },\r\n                      ].map((theme) => (\r\n                        <button\r\n                          key={theme.value}\r\n                          onClick={() => handleThemeChange(theme.value as Theme)}\r\n                          className={cn(\r\n                            'group relative flex flex-col items-center p-2 rounded-2xl border-2 transition-all duration-300',\r\n                            settings.theme === theme.value\r\n                              ? 'border-primary-500 bg-primary-50/50 dark:bg-primary-900/10'\r\n                              : 'border-transparent hover:bg-gray-50 dark:hover:bg-gray-800/50'\r\n                          )}\r\n                        >\r\n                          <div className={cn('w-full aspect-[4/3] rounded-xl mb-4 overflow-hidden shadow-inner flex items-center justify-center', theme.preview)}>\r\n                              <div className={cn('w-1/2 h-1/2 border rounded-md shadow-lg', theme.inner)}></div>\r\n                          </div>\r\n                          <div className='flex items-center gap-2 pb-2'>\r\n                            <theme.icon className={cn('w-4 h-4', theme.color)} />\r\n                            <span className='text-sm font-bold'>{theme.label}</span>\r\n                          </div>\r\n                          {settings.theme === theme.value && (\r\n                            <div className='absolute -top-2 -right-2 bg-primary-500 text-white p-1 rounded-full shadow-lg'>\r\n                               <CheckCircle className='w-4 h-4' />\r\n                            </div>\r\n                          )}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className='pt-8 border-t border-gray-100 dark:border-gray-800'>\r\n                    <label className='block text-sm font-bold text-gray-700 dark:text-gray-300 mb-4 uppercase tracking-wider'>\r\n                      Langue d'affichage\r\n                    </label>\r\n                    <div className='max-w-xs'>\r\n                      <Select\r\n                        value={settings.language}\r\n                        onChange={(e) => handleLanguageChange(e.target.value as Language)}\r\n                        options={[\r\n                          { value: 'fr', label: '🇫🇷 Français' },\r\n                          { value: 'cv', label: '🇨🇻 Capverdien' },\r\n                          { value: 'pt', label: '🇵🇹 Portugais' },\r\n                        ]}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Notifications */}\r\n          {activeTab === 'notifications' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300'>\r\n              <Card className='border-none shadow-lg'>\r\n                <CardHeader>\r\n                  <h3 className='text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2'>\r\n                    <Bell className='w-6 h-6 text-orange-500' />\r\n                    Notifications & Rappels\r\n                  </h3>\r\n                </CardHeader>\r\n                <CardBody className='p-8 space-y-8'>\r\n                  <div className='flex items-center justify-between p-6 bg-gray-50 dark:bg-gray-900/40 rounded-2xl'>\r\n                    <div>\r\n                      <h4 className='font-bold text-gray-900 dark:text-white'>Service de notifications</h4>\r\n                      <p className='text-sm text-gray-500'>Autoriser l'application à envoyer des messages système.</p>\r\n                      <Button \r\n                        variant=\"secondary\" \r\n                        size=\"sm\" \r\n                        onClick={handleTestNotification}\r\n                        className=\"mt-3\"\r\n                        leftIcon={<Bell className=\"w-4 h-4\" />}\r\n                      >\r\n                        Tester une notification\r\n                      </Button>\r\n                    </div>\r\n                    <label className='relative inline-flex items-center cursor-pointer'>\r\n                      <input \r\n                        type='checkbox' \r\n                        className='sr-only peer'\r\n                        checked={settings.notifications.enabled}\r\n                        onChange={(e) => updateSettings({\r\n                          ...settings,\r\n                          notifications: { ...settings.notifications, enabled: e.target.checked },\r\n                        })}\r\n                      />\r\n                      <div className=\"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600\"></div>\r\n                    </label>\r\n                  </div>\r\n\r\n                  {settings.notifications.enabled && (\r\n                    <div className='space-y-8 pl-4 border-l-2 border-primary-100 dark:border-primary-900/30'>\r\n                      <div>\r\n                        <h4 className='font-bold text-gray-900 dark:text-white mb-4'>Délais de rappel</h4>\r\n                        <div className='grid grid-cols-1 sm:grid-cols-2 gap-4'>\r\n                          {[\r\n                            { value: REMINDER_ONE_WEEK, label: 'Une semaine', desc: 'Rappel J-7 pour confirmer l\\'orateur.' },\r\n                            { value: REMINDER_TWO_DAYS, label: '48 Heures', desc: 'Rappel J-2 pour les détails finaux.' },\r\n                          ].map((t) => (\r\n                            <Card key={t.value} \r\n                              className={cn(\r\n                                'cursor-pointer border-2 transition-all',\r\n                                settings.notifications.reminderDays.includes(t.value) \r\n                                  ? 'border-primary-500 bg-primary-50/20' \r\n                                  : 'border-transparent bg-gray-50/50 dark:bg-gray-800/50'\r\n                              )}\r\n                              onClick={() => {\r\n                                const newDays = settings.notifications.reminderDays.includes(t.value)\r\n                                  ? settings.notifications.reminderDays.filter(d => d !== t.value)\r\n                                  : [...settings.notifications.reminderDays, t.value];\r\n                                updateSettings({...settings, notifications: {...settings.notifications, reminderDays: newDays}});\r\n                              }}\r\n                            >\r\n                              <CardBody className='p-4 flex items-start gap-3'>\r\n                                <div className={cn(\r\n                                  'p-2 rounded-lg',\r\n                                  settings.notifications.reminderDays.includes(t.value) ? 'bg-primary-500 text-white' : 'bg-gray-200 dark:bg-gray-700'\r\n                                )}>\r\n                                  <Clock className='w-4 h-4' />\r\n                                </div>\r\n                                <div>\r\n                                  <p className='font-bold text-sm'>{t.label}</p>\r\n                                  <p className='text-xs text-gray-500 mt-1'>{t.desc}</p>\r\n                                </div>\r\n                              </CardBody>\r\n                            </Card>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className='pt-4'>\r\n                        <h4 className='font-bold text-gray-900 dark:text-white mb-4'>Alertes sonores & Vibrations</h4>\r\n                        <div className='space-y-4'>\r\n                          {[\r\n                            { id: 'sound', label: 'Alertes sonores', icon: Bell, checked: settings.notifications.sound },\r\n                            { id: 'vibration', label: 'Vibrations', icon: Smartphone, checked: settings.notifications.vibration },\r\n                          ].map(opt => (\r\n                            <div key={opt.id} className='flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors'>\r\n                               <div className='flex items-center gap-3'>\r\n                                  <opt.icon className='w-4 h-4 text-gray-400' />\r\n                                  <span className='text-sm font-medium'>{opt.label}</span>\r\n                               </div>\r\n                               <input \r\n                                  type='checkbox' \r\n                                  checked={opt.checked}\r\n                                  onChange={(e) => updateSettings({\r\n                                    ...settings,\r\n                                    notifications: { ...settings.notifications, [opt.id]: e.target.checked },\r\n                                  })}\r\n                                  className='w-5 h-5 rounded text-primary-600 focus:ring-primary-500' \r\n                                />\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Sécurité */}\r\n          {activeTab === 'security' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300'>\r\n              <Card className='border-none shadow-lg'>\r\n                <CardHeader>\r\n                  <h3 className='text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2'>\r\n                    <Shield className='w-6 h-6 text-green-500' />\r\n                    Confidentialité & Sécurité\r\n                  </h3>\r\n                </CardHeader>\r\n                <CardBody className='p-8 space-y-10'>\r\n                   <div className='p-6 bg-green-50 dark:bg-green-900/10 border border-green-100 dark:border-green-800/30 rounded-2xl flex items-start gap-4'>\r\n                      <div className='p-3 bg-white dark:bg-green-900/40 rounded-xl shadow-sm'>\r\n                         <Shield className='w-8 h-8 text-green-600' />\r\n                      </div>\r\n                      <div>\r\n                         <h4 className='font-bold text-green-900 dark:text-green-100'>Protection des données</h4>\r\n                         <p className='text-sm text-green-700 dark:text-green-300 mt-1'>\r\n                            Toutes les données sensibles (noms, téléphones) sont stockées localement et peuvent être chiffrées pour plus de sécurité.\r\n                         </p>\r\n                      </div>\r\n                   </div>\r\n\r\n                   <div className='space-y-6'>\r\n                      <div className='flex items-center justify-between'>\r\n                        <div>\r\n                           <label className='font-bold text-gray-900 dark:text-white'>Chiffrement de la base</label>\r\n                           <p className='text-sm text-gray-500'>Utiliser AES-GCM 256 pour les données locales.</p>\r\n                        </div>\r\n                        <input \r\n                          type='checkbox' \r\n                          checked={settings.encryptionEnabled}\r\n                          onChange={(e) => updateSettings({ ...settings, encryptionEnabled: e.target.checked })}\r\n                          className='w-6 h-6 rounded-lg text-green-600 focus:ring-green-500' \r\n                        />\r\n                      </div>\r\n\r\n                      <div className='pt-6 border-t border-gray-100 dark:border-gray-800'>\r\n                         <label className='block font-bold text-gray-900 dark:text-white mb-2'>\r\n                            Délai d'expiration de session\r\n                         </label>\r\n                         <p className='text-sm text-gray-500 mb-4'>L'application demandera une authentification après cette période d'inactivité.</p>\r\n                         <div className='max-w-xs'>\r\n                           <Select\r\n                             value={settings.sessionTimeout?.toString() || '30'}\r\n                             onChange={(e) => updateSettings({ ...settings, sessionTimeout: parseInt(e.target.value, 10) })}\r\n                             options={[\r\n                               { value: '15', label: '15 minutes' },\r\n                               { value: '30', label: '30 minutes' },\r\n                               { value: '60', label: '1 heure' },\r\n                               { value: '120', label: '2 heures' },\r\n                             ]}\r\n                           />\r\n                         </div>\r\n                      </div>\r\n                   </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Données */}\r\n          {activeTab === 'data' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300'>\r\n              <Card className='border-none shadow-lg overflow-hidden'>\r\n                <div className='bg-gradient-to-r from-amber-500 to-amber-600 p-8 text-white relative'>\r\n                   <Database className='absolute right-[-20px] top-[-20px] w-48 h-48 opacity-10 rotate-12' />\r\n                   <h3 className='text-2xl font-bold flex items-center gap-3'>\r\n                     <Database className='w-8 h-8' />\r\n                     Cycle de vie des données\r\n                   </h3>\r\n                   <p className='text-amber-50 mt-2 opacity-90 max-w-xl'>\r\n                     Contrôlez la synchronisation avec le cloud, créez des sauvegardes et gérez l'importation massive de données.\r\n                   </p>\r\n                </div>\r\n                \r\n                <CardBody className='p-8 space-y-10'>\r\n                  {/* Google Sheets Section */}\r\n                  <div className='p-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 rounded-2xl'>\r\n                    <div className='flex flex-col md:flex-row justify-between gap-6'>\r\n                       <div className='flex-1'>\r\n                          <h4 className='text-lg font-bold text-blue-900 dark:text-blue-100 flex items-center gap-2'>\r\n                             <RefreshCw className={cn('w-5 h-5', isSyncing && 'animate-spin')} />\r\n                             Synchronisation Google Sheets\r\n                          </h4>\r\n                          <p className='text-sm text-blue-700 dark:text-blue-300 mt-2'>\r\n                             Mise à jour automatique des orateurs et des visites depuis la feuille de calcul partagée.\r\n                          </p>\r\n                          {localStorage.getItem('lastGoogleSheetSync') && (\r\n                            <p className='text-xs text-blue-500 mt-2 font-medium'>\r\n                              Dernière synchronisation : {new Date(localStorage.getItem('lastGoogleSheetSync')!).toLocaleString('fr-FR')}\r\n                            </p>\r\n                          )}\r\n                       </div>\r\n                       <div className='flex items-center shrink-0'>\r\n                          <Button\r\n                            onClick={handleSyncGoogleSheet}\r\n                            disabled={isSyncing}\r\n                            className='shadow-lg shadow-blue-200 dark:shadow-none'\r\n                          >\r\n                            {isSyncing ? 'Traitement en cours...' : 'Synchroniser maintenant'}\r\n                          </Button>\r\n                       </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actions Grid */}\r\n                  <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\r\n                    {[\r\n                      { id: 'backup', label: 'Sauvegardes', desc: 'Backups locaux chiffrés', icon: Save, color: 'text-green-600', bg: 'bg-green-100', action: () => setIsBackupModalOpen(true) },\r\n                      { id: 'import', label: 'Importation', desc: 'Assistant CSV / JSON', icon: RefreshCw, color: 'text-purple-600', bg: 'bg-purple-100', action: () => setIsImportModalOpen(true) },\r\n                      { id: 'archive', label: 'Archives', desc: 'Consulter l\\'historique', icon: Database, color: 'text-orange-600', bg: 'bg-orange-100', action: () => setIsArchiveModalOpen(true) },\r\n                      { id: 'phones', label: 'Téléphones', desc: 'Import numéros massif', icon: Phone, color: 'text-indigo-600', bg: 'bg-indigo-100', action: () => setIsPhoneImportModalOpen(true) },\r\n                    ].map(btn => (\r\n                      <button\r\n                        key={btn.id}\r\n                        onClick={btn.action}\r\n                        className='flex items-center gap-4 p-5 text-left border border-gray-100 dark:border-gray-800 rounded-2xl transition-all duration-200 hover:border-primary-500 hover:bg-gray-50 dark:hover:bg-gray-800/40 hover:shadow-lg'\r\n                      >\r\n                        <div className={cn('p-3 rounded-xl dark:bg-gray-800', btn.bg, btn.color)}>\r\n                          <btn.icon className='w-6 h-6' />\r\n                        </div>\r\n                        <div>\r\n                          <div className='font-bold text-gray-900 dark:text-white'>{btn.label}</div>\r\n                          <div className='text-xs text-gray-500'>{btn.desc}</div>\r\n                        </div>\r\n                        <ChevronRight className='w-4 h-4 ml-auto text-gray-300' />\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className='pt-8 border-t border-gray-100 dark:border-gray-800'>\r\n                    <h4 className='font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2 uppercase text-xs tracking-widest'>\r\n                      <Link className='w-4 h-4 text-gray-400' />\r\n                      Accès externes\r\n                    </h4>\r\n                    <div className='flex flex-wrap gap-3'>\r\n                      <Button\r\n                        variant='outline'\r\n                        onClick={() => window.open('https://docs.google.com/spreadsheets/d/1drIzPPi6AohCroSyUkF1UmMFxuEtMACBF4XATDjBOcg', '_blank')}\r\n                        className='rounded-xl'\r\n                      >\r\n                        Google Sheet Source\r\n                      </Button>\r\n                      <Button\r\n                        variant='outline'\r\n                        onClick={() => window.open('https://www.jw.org/kea/', '_blank')}\r\n                        className='rounded-xl'\r\n                      >\r\n                        JW.ORG (Cap-Verdien)\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Doublons */}\r\n          {activeTab === 'duplicates' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300 uppercase'>\r\n               <Card className='border-none shadow-lg'>\r\n                  <CardHeader>\r\n                     <h3 className='text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2'>\r\n                        <Copy className='w-6 h-6 text-indigo-500' />\r\n                        Détection de Doublons\r\n                     </h3>\r\n                  </CardHeader>\r\n                  <CardBody className='p-8 space-y-8'>\r\n                     <p className='text-gray-500'>Utilisez ces outils pour identifier les entrées similaires et garder une base de données propre.</p>\r\n                     \r\n                     <div className='grid grid-cols-2 md:grid-cols-3 gap-6'>\r\n                        {[\r\n                          { label: 'Orateurs', count: stats.speakersCount, icon: User, color: 'text-blue-500' },\r\n                          { label: 'Visites', count: stats.visitsCount, icon: Calendar, color: 'text-purple-500' },\r\n                          { label: 'Hôtes', count: stats.hostsCount, icon: MapPin, color: 'text-green-500' },\r\n                        ].map(s => (\r\n                          <div key={s.label} className='p-6 bg-gray-50 dark:bg-gray-800/50 rounded-2xl text-center border border-gray-100 dark:border-gray-800'>\r\n                             <s.icon className={cn('w-8 h-8 mx-auto mb-3', s.color)} />\r\n                             <div className='text-3xl font-extrabold text-gray-900 dark:text-white'>{s.count}</div>\r\n                             <div className='text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-1'>{s.label} totaux</div>\r\n                          </div>\r\n                        ))}\r\n                     </div>\r\n\r\n                     <div className='pt-8 text-center'>\r\n                        <Button \r\n                          size='lg' \r\n                          onClick={() => setIsDuplicateModalOpen(true)}\r\n                          className='px-12 py-6 rounded-2xl shadow-xl shadow-indigo-200 dark:shadow-none bg-indigo-600 hover:bg-indigo-700'\r\n                        >\r\n                           Démarrer l'audit complet\r\n                        </Button>\r\n                     </div>\r\n                  </CardBody>\r\n               </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* About */}\r\n          {activeTab === 'about' && (\r\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-4 duration-300'>\r\n               <div className='flex flex-col items-center justify-center p-12 text-center'>\r\n                  <div className='w-32 h-32 bg-primary-600 rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-primary-200 dark:shadow-none mb-8 rotate-12 transition-transform hover:rotate-0 duration-500'>\r\n                     <Monitor className='w-16 h-16 text-white' />\r\n                  </div>\r\n                  <h3 className='text-4xl font-black text-gray-900 dark:text-white tracking-tighter mb-2'>\r\n                     KBV <span className='text-primary-600'>MANAGER</span>\r\n                  </h3>\r\n                  <p className='text-gray-400 font-bold tracking-[0.2em] uppercase text-[10px] mb-8'>Version 1.20.1 Built 2025</p>\r\n                  \r\n                  <div className='max-w-md bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700 space-y-6'>\r\n                    <p className='text-sm text-gray-500 dark:text-gray-400'>\r\n                      Cette application a été conçue exclusivement pour l'organisation et la gestion des orateurs visiteurs pour la congrégation KBV DV Lyon .FP.\r\n                    </p>\r\n                    <div className='pt-4 border-t border-gray-50 dark:border-gray-700 grid grid-cols-2 gap-4 text-left'>\r\n                       <div>\r\n                          <p className='text-[10px] text-gray-400 font-bold uppercase'>Développeur</p>\r\n                          <p className='text-sm font-bold text-gray-900 dark:text-white'>Internal IT</p>\r\n                       </div>\r\n                       <div>\r\n                          <p className='text-[10px] text-gray-400 font-bold uppercase'>Dernière MAJ</p>\r\n                          <p className='text-sm font-bold text-gray-900 dark:text-white'>Dec 2025</p>\r\n                       </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <p className='mt-12 text-[10px] text-gray-400 uppercase tracking-widest font-bold'>Built with React • Tailwind • Capacitor</p>\r\n               </div>\r\n            </div>\r\n          )}\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <BackupManagerModal\r\n        isOpen={isBackupModalOpen}\r\n        onClose={() => setIsBackupModalOpen(false)}\r\n        onBackup={handleBackupAdapter}\r\n        onRestore={handleRestoreAdapter}\r\n      />\r\n\r\n      <ImportWizardModal\r\n        isOpen={isImportModalOpen}\r\n        onClose={() => setIsImportModalOpen(false)}\r\n        onImport={handleImportAdapter}\r\n      />\r\n\r\n      <ArchiveManagerModal\r\n        isOpen={isArchiveModalOpen}\r\n        onClose={() => setIsArchiveModalOpen(false)}\r\n        onRestore={(_visitIds: string[]) => {\r\n          // Logic for restoring visits\r\n          addToast(`${_visitIds.length} visite(s) restaurée(s)`, 'success');\r\n        }}\r\n        onDelete={(_visitIds: string[]) => {\r\n          _visitIds.forEach((id) => deleteVisit(id));\r\n          addToast(`${_visitIds.length} visite(s) supprimée(s)`, 'info');\r\n        }}\r\n        onExport={async () => {\r\n          await handleBackupAdapter({\r\n            includeArchived: true, includeSettings: false, includeTemplates: false, encrypt: false,\r\n          });\r\n        }}\r\n      />\r\n\r\n      <DuplicateDetectionModal\r\n        isOpen={isDuplicateModalOpen}\r\n        onClose={() => setIsDuplicateModalOpen(false)}\r\n        onMerge={handleMergeAdapter}\r\n      />\r\n\r\n      <PhoneNumberImportModal\r\n        isOpen={isPhoneImportModalOpen}\r\n        onClose={() => setIsPhoneImportModalOpen(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"],"names":["Database","createLucideIcon","HardDrive","Merge","Monitor","Moon","Palette","Shield","Smartphone","Sun","Upload","DuplicateDetectionModal","isOpen","_onClose","_onMerge","speakers","hosts","visits","speakerMessages","archivedVisits","useData","selectedGroups","setSelectedGroups","useState","mergeStrategy","setMergeStrategy","includeArchives","setIncludeArchives","SIMILARITY_THRESHOLD_HIGH","SIMILARITY_THRESHOLD_MEDIUM","duplicateGroups","useMemo","groups","speakerGroups","speaker","key","group","reasons","phones","s","congregations","similarity","hostGroups","host","h","addresses","visitGroups","visit","archivedVisitGroups","crossVisitGroups","currentVisit","av","archived","messageGroups","msg","normalizedContent","dateKey","toggleGroup","index","prev","newSet","handleMerge","selectedDuplicates","idx","handleDelete","getTypeLabel","type","getTypeColor","jsx","Modal","jsxs","g","e","CheckCircle","Fragment","_","i","Card","CardBody","Badge","reason","Copy","item","itemIdx","v","AlertTriangle","Button","Trash2","BackupManagerModal","onClose","onBackup","onRestore","activeTab","setActiveTab","includeArchived","setIncludeArchived","includeSettings","setIncludeSettings","includeTemplates","setIncludeTemplates","encrypt","setEncrypt","password","setPassword","confirmPassword","setConfirmPassword","isCreating","setIsCreating","selectedFile","setSelectedFile","backupHistory","handleCreateBackup","error","handleFileSelect","event","file","handleRestore","formatFileSize","bytes","Save","Clock","Download","backup","AVAILABLE_FIELDS","ImportWizardModal","onImport","currentStep","setCurrentStep","importType","setImportType","setFile","parsedData","setParsedData","columns","setColumns","mapping","setMapping","importResult","setImportResult","lines","line","headers","data","values","row","header","handleMappingChange","sourceColumn","targetField","handleImport","transformedData","transformed","sourceCol","result","getMappingProgress","requiredFields","f","canProceed","step","React","ArrowRight","FileText","column","field","k","ArchiveManagerModal","onDelete","onExport","searchTerm","setSearchTerm","selectedYear","setSelectedYear","selectedStatus","setSelectedStatus","selectedVisits","setSelectedVisits","sortBy","setSortBy","availableYears","years","year","a","b","filteredVisits","filtered","search","toggleVisit","visitId","selectAll","deselectAll","handleExport","getStatusBadge","status","Search","Archive","Calendar","RotateCcw","extractPhoneNumbersFromJson","jsonData","speakersWithPhones","hostsWithPhones","updateSpeakersWithPhones","existingSpeakers","phoneMap","person","normalizedName","phoneFromJson","updateHostsWithPhones","existingHosts","generateUpdateReport","originalSpeakers","updatedSpeakers","originalHosts","updatedHosts","speakerDetails","hostDetails","speakersUpdated","hostsUpdated","original","updated","processPhoneNumberUpdate","currentData","report","PhoneNumberImportModal","updateSpeaker","updateHost","importData","setImportData","isLoading","setIsLoading","setResult","showPreview","setShowPreview","handleFileUpload","reader","content","speakerUpdates","existingSpeaker","updatedSpeaker","us","hostUpdates","existingHost","updatedHost","uh","resolve","handleClose","Phone","X","detail","AlertCircle","parsed","speakerCount","visitCount","hostCount","Users","MapPin","REMINDER_ONE_WEEK","REMINDER_TWO_DAYS","Settings","congregationProfile","updateCongregationProfile","syncWithGoogleSheet","exportData","mergeDuplicates","deleteVisit","deleteSpeaker","deleteHost","settings","updateSettings","useSettings","addToast","useToast","requestPermissions","useVisitNotifications","handleTestNotification","LocalNotifications","profileForm","setProfileForm","isSyncing","setIsSyncing","isBackupModalOpen","setIsBackupModalOpen","isImportModalOpen","setIsImportModalOpen","isArchiveModalOpen","setIsArchiveModalOpen","isDuplicateModalOpen","setIsDuplicateModalOpen","isPhoneImportModalOpen","setIsPhoneImportModalOpen","tabs","User","Bell","Info","stats","handleSaveProfile","handleThemeChange","theme","handleLanguageChange","language","handleSyncGoogleSheet","handleBackupAdapter","_options","json","blob","url","handleRestoreAdapter","reject","err","handleImportAdapter","_mapping","handleMergeAdapter","action","strategy","successCount","sortedItems","keepItem","duplicates","keepId","duplicateIds","id","name","tab","cn","ChevronRight","t","CardHeader","Input","Select","newDays","d","opt","RefreshCw","btn","Link","_visitIds"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}