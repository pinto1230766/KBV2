import{c as M,u as z,a as I,b as G,j as e,S as v,B as d,Z as w,C as N,U as C,A as P,d as x,e as u,f as m,T as A,g as B,M as U,F as Y,h as Q,Q as q,R as H,i as K}from"./index-DUGiewVN.js";import{r as i,b as J,A as W,C as X,X as Z,Y as $,T as _,d as ee}from"./charts-Cazb4rp-.js";import{B as D}from"./Badge-CJlJWsEP.js";import{A as se,L as ae,V as te}from"./VisitActionModal-Dc5KfJKS.js";import"./react-vendor-B9D_A6Vq.js";import"./utils-FTT-aY8U.js";import"./useVisitNotifications-GjzDnhd0.js";import"./Input-Bv2jujL6.js";import"./FeedbackFormModal-LLYp3kI7.js";import"./MessageGeneratorModal-CCDKsVZ2.js";import"./Select-BYN4Ivgq.js";const re=M("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);const b=M("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ie=i.memo(({visit:r,onClick:o})=>{const c=r.status==="pending";return e.jsxs("div",{onClick:o,className:"group flex items-center gap-4 p-4 rounded-2xl bg-white/50 dark:bg-gray-800/40 border border-transparent hover:border-primary-500/30 hover:bg-white dark:hover:bg-gray-800 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:m("w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg shrink-0 transition-transform group-hover:scale-110",c?"bg-orange-100 text-orange-600 dark:bg-orange-900/30":"bg-primary-100 text-primary-600 dark:bg-primary-900/30"),children:r.nom.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white truncate uppercase tracking-tight",children:r.nom}),e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:r.visitTime})]}),e.jsx("p",{className:"text-[11px] text-gray-500 font-medium lowercase",children:new Date(r.visitDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"short"})})]}),e.jsx(K,{className:"w-4 h-4 text-gray-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})}),be=()=>{const{visits:r,speakers:o,hosts:c}=z(),a=I(),{addToast:T}=G(),[S,f]=i.useState(!1),[R,p]=i.useState(!1),[j,V]=i.useState(null),[O,h]=i.useState(!1),[k,E]=i.useState(new Date);i.useEffect(()=>{const s=setInterval(()=>E(new Date),6e4);return()=>clearInterval(s)},[]);const l=i.useMemo(()=>{const s=r.filter(t=>t.status==="pending").length;return{speakers:o.length,hosts:c.length,visitsThisMonth:r.filter(t=>{const n=new Date(t.visitDate),y=new Date;return n.getMonth()===y.getMonth()&&n.getFullYear()===y.getFullYear()}).length,pending:s}},[r,o,c]),g=i.useMemo(()=>r.filter(s=>new Date(s.visitDate).getTime()>=new Date().setHours(0,0,0,0)&&s.status!=="cancelled").sort((s,t)=>new Date(s.visitDate).getTime()-new Date(t.visitDate).getTime()).slice(0,5),[r]),F=i.useMemo(()=>["Jan","Fév","Mar","Avr","Mai","Juin"].map((t,n)=>({name:t,value:n%2===0?12+n:15-n})),[]),L=s=>{V(s),h(!0)};return e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-8 px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-blue-600 to-indigo-700 p-4 sm:p-6 text-white shadow-2xl shadow-blue-500/20",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(v,{className:"w-64 h-64 rotate-12"})}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"bg-white/20 hover:bg-white/30 text-white border-none py-1.5 px-4 backdrop-blur-md font-bold text-[10px] tracking-[0.2em] uppercase",children:"GROUPE DE LYON"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-200",children:[e.jsx(b,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px] font-bold tracking-widest uppercase opacity-80",children:"Système Sécurisé"})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tighter leading-[0.9] text-white",children:"Bonjour,"}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tighter text-blue-100",children:"Command Center."})]}),e.jsxs("p",{className:"text-blue-100/90 text-sm font-medium leading-relaxed max-w-md",children:["Tout est prêt pour la gestion de vos orateurs. Vous avez ",e.jsxs("span",{className:"text-white font-bold",children:[l.pending," validations"]})," en attente d'action."]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-4",children:[e.jsxs("div",{className:"text-right hidden lg:block",children:[e.jsx("div",{className:"text-5xl font-black tracking-tighter leading-none mb-1",children:k.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-blue-200 text-xs font-bold uppercase tracking-widest",children:k.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{className:"h-12 bg-blue-600 hover:bg-blue-700 text-white border-none font-bold shadow-lg",leftIcon:e.jsx(re,{className:"w-4 h-4"}),onClick:()=>h(!0),children:"Nouvelle Visite"}),e.jsx(d,{className:"h-12 bg-blue-500/30 hover:bg-blue-500/40 text-white border-none backdrop-blur-md font-bold",leftIcon:e.jsx(w,{className:"w-4 h-4 text-amber-300 fill-amber-300"}),onClick:()=>f(!0),children:"Actions"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 animate-in fade-in slide-in-from-top-4 duration-500",children:[{label:"Visites ce mois",value:l.visitsThisMonth,icon:N,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{label:"Orateurs actifs",value:l.speakers,icon:C,color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20"},{label:"Validation Req.",value:l.pending,icon:P,color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-900/20"},{label:"Hôtes dispos",value:l.hosts,icon:b,color:"text-green-500",bg:"bg-green-50 dark:bg-green-900/20"}].map((s,t)=>e.jsx(x,{className:"border-none shadow-sm group hover:translate-y-[-4px] transition-all duration-300",children:e.jsxs(u,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:s.label}),e.jsx("p",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tighter",children:s.value})]}),e.jsx("div",{className:m("p-4 rounded-2xl transition-transform group-hover:scale-110 shadow-sm",s.bg),children:e.jsx(s.icon,{className:m("w-6 h-6",s.color)})})]})},t))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"xl:col-span-8 space-y-8 animate-in fade-in slide-in-from-left-4 duration-700",children:[e.jsxs(x,{className:"border-none shadow-sm overflow-hidden bg-white dark:bg-gray-800/80 backdrop-blur-md rounded-[2.5rem]",children:[e.jsxs("div",{className:"p-8 border-b border-gray-100 dark:border-gray-700/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tighter uppercase mb-1",children:"Analyse de l'activité"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Fréquence des visites sur les 6 derniers mois"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{variant:"success",className:"bg-green-50 text-green-700 dark:bg-green-900/20 border-none px-3 font-bold",children:"+18% vs 2024"}),e.jsx(d,{variant:"ghost",size:"sm",className:"rounded-full",children:e.jsx(A,{className:"w-4 h-4"})})]})]}),e.jsxs(u,{className:"p-8",children:[e.jsx("div",{className:"h-64 sm:h-80 w-full pr-4",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsxs(W,{data:F,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),e.jsx(X,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",className:"dark:stroke-gray-700"}),e.jsx(Z,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:"bold",fill:"#9CA3AF"},dy:10}),e.jsx($,{hide:!0}),e.jsx(_,{contentStyle:{borderRadius:"1.5rem",border:"none",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)",padding:"12px"}}),e.jsx(ee,{type:"monotone",dataKey:"value",stroke:"#4F46E5",strokeWidth:4,fillOpacity:1,fill:"url(#colorValue)"})]})})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-8",children:[{label:"Moyenne/mois",value:"14.2",icon:B},{label:"Pic observé",value:"18",icon:A},{label:"Taux Conf.",value:"94%",icon:v},{label:"Récupération",value:"Auto",icon:b}].map((s,t)=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/40 rounded-2xl border border-gray-100 dark:border-gray-800",children:[e.jsx(s.icon,{className:"w-4 h-4 text-primary-500 mb-2"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tight",children:s.label}),e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white",children:s.value})]},t))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Messagerie",desc:"Envoyer des rappels",icon:U,path:"/messages",color:"bg-blue-600"},{title:"Orateurs",desc:"Gérer les contacts",icon:C,path:"/speakers",color:"bg-green-600"},{title:"Rapports",desc:"Extractions PDF/Excel",icon:Y,action:()=>p(!0),color:"bg-orange-600"}].map((s,t)=>e.jsxs("button",{onClick:s.action||(()=>a(s.path)),className:"group p-6 bg-white dark:bg-gray-800 rounded-[2rem] shadow-sm hover:shadow-xl hover:translate-y-[-6px] transition-all duration-300 text-left border border-transparent hover:border-primary-500/20",children:[e.jsx("div",{className:m("w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white shadow-lg transition-transform group-hover:scale-110",s.color),children:e.jsx(s.icon,{className:"w-7 h-7"})}),e.jsx("h4",{className:"font-black text-sm uppercase tracking-tighter text-gray-900 dark:text-white mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:s.desc}),e.jsx(se,{className:"w-5 h-5 ml-auto text-gray-300 group-hover:text-primary-500 transition-colors"})]},t))})]}),e.jsxs("div",{className:"xl:col-span-4 space-y-8 animate-in fade-in slide-in-from-right-4 duration-700",children:[e.jsxs(x,{className:"border-none shadow-sm bg-white dark:bg-gray-800/80 backdrop-blur-md rounded-[2.5rem] overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-gray-100 dark:border-gray-700/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tighter uppercase mb-1",children:"Pulse Prochain"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Les prochaines visites à surveiller"})]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:()=>a("/planning"),className:"rounded-full font-bold",children:"Voir tout"})]}),e.jsx(u,{className:"p-6",children:g.length>0?e.jsxs("div",{className:"space-y-4",children:[g.map(s=>e.jsx(ie,{visit:s,onClick:()=>L(s)},s.id)),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsxs("button",{className:"text-[10px] font-black text-primary-500 uppercase tracking-widest hover:underline",children:["+ ",r.length-g.length," autres dans le futur"]})})]}):e.jsxs("div",{className:"py-20 text-center opacity-40",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Aucun planning programmé"})]})})]}),e.jsxs(x,{className:"border-none shadow-sm bg-gradient-to-br from-indigo-900 to-primary-900 p-8 rounded-[2.5rem] text-white overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-[-20%] right-[-10%] opacity-20",children:e.jsx(ae,{className:"w-48 h-48"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h4",{className:"text-lg font-black uppercase tracking-tighter mb-4",children:"Recherche instantanée"}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(Q,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-300"}),e.jsx("input",{className:"w-full pl-10 pr-4 py-3 bg-white/10 dark:bg-black/20 border border-white/10 rounded-2xl text-xs backdrop-blur-md focus:ring-2 focus:ring-primary-500 transition-all placeholder:text-primary-300/50",placeholder:"Trouver un orateur, une date...",onClick:()=>a("/planning"),readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-bold text-primary-300 uppercase tracking-widest",children:[e.jsx(w,{className:"w-3 h-3 text-amber-400"}),"Appuyez sur CTRL + K partout"]})]})]})]})]}),j&&e.jsx(te,{isOpen:O,onClose:()=>h(!1),visit:j,action:"edit"}),e.jsx(q,{isOpen:S,onClose:()=>f(!1),onAction:s=>{switch(s){case"schedule-visit":a("/planning");break;case"add-speaker":a("/speakers");break;case"add-host":a("/speakers");break;case"send-message":a("/messages");break;case"generate-report":p(!0);break;case"check-conflicts":a("/planning");break;case"backup-data":a("/settings");break;case"import-data":a("/settings");break;case"sync-sheets":a("/settings");break;case"export-all-data":a("/settings");break;case"search-entities":a("/planning");break}}}),e.jsx(H,{isOpen:R,onClose:()=>p(!1),onGenerate:s=>{T(`Génération du rapport ${s.format.toUpperCase()} lancée...`,"info")}})]})};export{be as Dashboard,be as default};
//# sourceMappingURL=Dashboard-BlzB57vd.js.map
