{"version":3,"file":"Messages-BEBPn9nm.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/shield-alert.js","../../src/components/messages/MessageThread.tsx","../../src/components/messages/HostRequestModal.tsx","../../src/pages/Messages.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldAlert = createLucideIcon(\"ShieldAlert\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }],\n  [\"path\", { d: \"M12 8v4\", key: \"1got3b\" }],\n  [\"path\", { d: \"M12 16h.01\", key: \"1drbdi\" }]\n]);\n\nexport { ShieldAlert as default };\n//# sourceMappingURL=shield-alert.js.map\n","import React from 'react';\nimport { Speaker, Visit } from '@/types';\nimport { format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { Button } from '@/components/ui/Button';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { CommunicationProgress } from '@/components/messages/CommunicationProgress';\nimport { Phone, Mail, MessageSquare, Calendar, MapPin, User, Clock } from 'lucide-react';\nimport { getTalkTitle } from '@/data/talkTitles';\n\ninterface MessageThreadProps {\n  speaker: Speaker;\n  visits: Visit[];\n  onAction: (action: string, visit?: Visit) => void;\n}\n\nexport const MessageThread: React.FC<MessageThreadProps> = ({ speaker, visits, onAction }) => {\n  // Deduplicate visits based on ID\n  const uniqueVisits = visits.filter(\n    (visit, index, self) => index === self.findIndex((t) => t.id === visit.id)\n  );\n\n  // Trier les visites par date d√©croissante\n  const sortedVisits = [...uniqueVisits].sort(\n    (a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime()\n  );\n\n  return (\n    <div className='flex flex-col h-full bg-gray-50 dark:bg-gray-900'>\n      {/* Header */}\n      <div className='bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between shadow-sm'>\n        <div className='flex items-center gap-4'>\n          <div className='w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-lg'>\n            {speaker.nom.charAt(0)}\n          </div>\n          <div>\n            <h2 className='font-bold text-gray-900 dark:text-white'>{speaker.nom}</h2>\n            <p className='text-sm text-gray-500 dark:text-gray-400'>{speaker.congregation}</p>\n          </div>\n        </div>\n        <div className='flex gap-2'>\n          {speaker.telephone && (\n            <Button\n              variant='ghost'\n              size='sm'\n              onClick={() => window.open(`tel:${speaker.telephone}`)}\n            >\n              <Phone className='w-4 h-4' />\n            </Button>\n          )}\n          {speaker.email && (\n            <Button\n              variant='ghost'\n              size='sm'\n              onClick={() => window.open(`mailto:${speaker.email}`)}\n            >\n              <Mail className='w-4 h-4' />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className='flex-1 overflow-y-auto p-4 space-y-6'>\n        {sortedVisits.length > 0 ? (\n          sortedVisits.map((visit) => (\n            <div key={visit.id} className='space-y-2'>\n              <div className='flex items-center gap-2 text-xs text-gray-400 font-medium uppercase tracking-wider justify-center my-4'>\n                <span className='bg-gray-200 dark:bg-gray-700 h-px w-12'></span>\n                {format(new Date(visit.visitDate), 'd MMMM yyyy', { locale: fr })}\n                <span className='bg-gray-200 dark:bg-gray-700 h-px w-12'></span>\n              </div>\n\n              <Card>\n                <CardBody className='p-4'>\n                  <div className='flex justify-between items-start mb-4'>\n                    <div>\n                      <h3 className='font-semibold text-gray-900 dark:text-white'>\n                        Discours n¬∞{visit.talkNoOrType}\n                      </h3>\n                      <p className='text-sm text-gray-500 dark:text-gray-400'>\n                        {visit.talkTheme || getTalkTitle(visit.talkNoOrType)}\n                      </p>\n                    </div>\n                    <span\n                      className={`\n                      px-2 py-1 rounded-full text-xs font-medium\n                      ${\n                        visit.status === 'confirmed'\n                          ? 'bg-green-100 text-green-800'\n                          : visit.status === 'pending'\n                            ? 'bg-orange-100 text-orange-800'\n                            : 'bg-gray-100 text-gray-800'\n                      }\n                    `}\n                    >\n                      {visit.status === 'confirmed'\n                        ? 'Confirm√©'\n                        : visit.status === 'pending'\n                          ? 'En attente'\n                          : visit.status}\n                    </span>\n                  </div>\n\n                  <div className='grid grid-cols-2 gap-4 mb-4 text-sm text-gray-600 dark:text-gray-300'>\n                    <div className='flex items-center gap-2'>\n                      <Clock className='w-4 h-4 text-gray-400' />\n                      {visit.visitTime}\n                    </div>\n                    <div className='flex items-center gap-2'>\n                      <MapPin className='w-4 h-4 text-gray-400' />\n                      {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Zoom'}\n                    </div>\n                    {visit.host && (\n                      <div className='flex items-center gap-2 col-span-2'>\n                        <User className='w-4 h-4 text-gray-400' />\n                        H√©berg√© par {visit.host}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Barre de progression communication */}\n                  <div className='mb-4'>\n                    <CommunicationProgress visit={visit} showLabels={true} size='md' />\n                  </div>\n\n                  <div className='flex flex-wrap gap-2 pt-4 border-t border-gray-100 dark:border-gray-700'>\n                    <Button\n                      size='sm'\n                      variant='primary'\n                      leftIcon={<MessageSquare className='w-4 h-4' />}\n                      onClick={() => onAction('whatsapp', visit)}\n                    >\n                      G√©n√©rer un message\n                    </Button>\n                    {visit.status === 'pending' && (\n                      <Button\n                        size='sm'\n                        variant='primary'\n                        onClick={() => onAction('confirm', visit)}\n                      >\n                        Confirmer\n                      </Button>\n                    )}\n                  </div>\n                </CardBody>\n              </Card>\n            </div>\n          ))\n        ) : (\n          <div className='text-center py-12 text-gray-500 dark:text-gray-400'>\n            <Calendar className='w-12 h-12 mx-auto mb-3 opacity-20' />\n            <p>Aucune visite programm√©e avec cet orateur</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Visit } from '@/types';\nimport { useData } from '@/contexts/DataContext';\nimport { useSettings } from '@/contexts/SettingsContext';\nimport { useToast } from '@/contexts/ToastContext';\nimport { generateHostRequestMessage } from '@/utils/messageGenerator';\nimport { Send, Copy, Check } from 'lucide-react';\nimport { formatFullDate } from '@/utils/formatters';\nimport { getTalkTitle } from '@/data/talkTitles';\n\ninterface HostRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visitsNeedingHost: Visit[];\n}\n\nexport const HostRequestModal: React.FC<HostRequestModalProps> = ({\n  isOpen,\n  onClose,\n  visitsNeedingHost,\n}) => {\n  const { congregationProfile } = useData();\n  const { settings } = useSettings();\n  const { addToast } = useToast();\n\n  const [selectedVisits, setSelectedVisits] = useState<Set<string>>(\n    new Set(visitsNeedingHost.map((v) => v.visitId))\n  );\n  const [message, setMessage] = useState('');\n\n  // G√©n√©rer le message quand les visites s√©lectionn√©es changent\n  React.useEffect(() => {\n    if (selectedVisits.size > 0) {\n      generateMessage();\n    }\n  }, [selectedVisits]);\n\n  const generateMessage = () => {\n    const visits = visitsNeedingHost.filter((v) => selectedVisits.has(v.visitId));\n    const generated = generateHostRequestMessage(visits, congregationProfile, settings.language);\n    setMessage(generated);\n  };\n\n  const toggleVisit = (visitId: string) => {\n    const newSelected = new Set(selectedVisits);\n    if (newSelected.has(visitId)) {\n      newSelected.delete(visitId);\n    } else {\n      newSelected.add(visitId);\n    }\n    setSelectedVisits(newSelected);\n  };\n\n  const toggleAll = () => {\n    if (selectedVisits.size === visitsNeedingHost.length) {\n      setSelectedVisits(new Set());\n    } else {\n      setSelectedVisits(new Set(visitsNeedingHost.map((v) => v.visitId)));\n    }\n  };\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(message);\n      addToast('Message copi√© dans le presse-papier', 'success');\n    } catch (error) {\n      addToast('Erreur lors de la copie', 'error');\n    }\n  };\n\n  const handleSendWhatsApp = () => {\n    const encodedMessage = encodeURIComponent(message);\n    // Envoyer au groupe KBV Lyon (vous pouvez configurer le num√©ro de groupe)\n    window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');\n    onClose();\n  };\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Demande d'accueil group√©e\"\n      size='lg'\n      footer={\n        <>\n          <Button variant='ghost' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button\n            variant='secondary'\n            onClick={handleCopy}\n            leftIcon={<Copy className='w-4 h-4' />}\n            disabled={selectedVisits.size === 0}\n          >\n            Copier\n          </Button>\n          <Button\n            onClick={handleSendWhatsApp}\n            leftIcon={<Send className='w-4 h-4' />}\n            disabled={selectedVisits.size === 0}\n          >\n            Envoyer (WhatsApp)\n          </Button>\n        </>\n      }\n    >\n      <div className='space-y-6'>\n        {/* Header avec compteur */}\n        <div className='flex items-center justify-between p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n          <div>\n            <h3 className='font-semibold text-orange-900 dark:text-orange-300'>\n              {visitsNeedingHost.length} visite{visitsNeedingHost.length > 1 ? 's' : ''} sans\n              contact d'accueil\n            </h3>\n            <p className='text-sm text-orange-700 dark:text-orange-400 mt-1'>\n              S√©lectionnez les visites pour lesquelles demander un contact\n            </p>\n          </div>\n          <Badge variant='warning' size='md'>\n            {selectedVisits.size} s√©lectionn√©e{selectedVisits.size > 1 ? 's' : ''}\n          </Badge>\n        </div>\n\n        {/* Liste des visites avec checkboxes */}\n        <div className='space-y-2'>\n          <div className='flex items-center justify-between mb-3'>\n            <h4 className='font-medium text-gray-900 dark:text-white'>Visites</h4>\n            <button\n              onClick={toggleAll}\n              className='text-sm text-primary-600 dark:text-primary-400 hover:underline'\n            >\n              {selectedVisits.size === visitsNeedingHost.length\n                ? 'Tout d√©s√©lectionner'\n                : 'Tout s√©lectionner'}\n            </button>\n          </div>\n\n          <div className='max-h-64 overflow-y-auto space-y-2 border border-gray-200 dark:border-gray-700 rounded-lg p-3'>\n            {visitsNeedingHost.map((visit) => (\n              <label\n                key={visit.visitId}\n                className='flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors'\n              >\n                <input\n                  type='checkbox'\n                  checked={selectedVisits.has(visit.visitId)}\n                  onChange={() => toggleVisit(visit.visitId)}\n                  className='mt-1 w-4 h-4 text-primary-600 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <div className='flex items-center justify-between'>\n                    <p className='font-medium text-gray-900 dark:text-white'>{visit.nom}</p>\n                    <Badge variant='default' size='sm'>\n                      {formatFullDate(visit.visitDate, settings.language)}\n                    </Badge>\n                  </div>\n                  <p className='text-sm text-gray-600 dark:text-gray-400'>\n                    {visit.congregation} ‚Ä¢ {visit.visitTime}\n                  </p>\n                  {(visit.talkTheme || getTalkTitle(visit.talkNoOrType)) && (\n                    <p className='text-xs text-gray-500 dark:text-gray-500 mt-1'>\n                      N¬∞{visit.talkNoOrType} - {visit.talkTheme || getTalkTitle(visit.talkNoOrType)}\n                    </p>\n                  )}\n                </div>\n              </label>\n            ))}\n          </div>\n        </div>\n\n        {/* Aper√ßu du message */}\n        <div>\n          <h4 className='font-medium text-gray-900 dark:text-white mb-2'>Aper√ßu du message</h4>\n          <div className='relative'>\n            <textarea\n              className='w-full h-64 p-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none font-mono text-sm'\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder={\n                selectedVisits.size === 0\n                  ? 'S√©lectionnez au moins une visite pour g√©n√©rer le message...'\n                  : 'G√©n√©ration du message...'\n              }\n              disabled={selectedVisits.size === 0}\n            />\n            {selectedVisits.size > 0 && (\n              <div className='absolute top-2 right-2'>\n                <Badge variant='success' size='sm'>\n                  <Check className='w-3 h-3 mr-1' />\n                  Message pr√™t\n                </Badge>\n              </div>\n            )}\n          </div>\n          <p className='text-xs text-gray-500 dark:text-gray-400 mt-2'>\n            üí° Vous pouvez modifier le message avant de l'envoyer\n          </p>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo } from 'react';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { usePlatformContext } from '@/contexts/PlatformContext';\r\nimport { MessageThread } from '@/components/messages/MessageThread';\r\nimport { MessageGeneratorModal } from '@/components/messages/MessageGeneratorModal';\r\nimport { HostRequestModal } from '@/components/messages/HostRequestModal';\r\nimport { Button } from '@/components/ui/Button';\r\n\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { Card, CardBody } from '@/components/ui/Card';\r\nimport { cn } from '@/utils/cn';\r\nimport { \r\n  MessageSquare, \r\n  Search, \r\n  Plus, \r\n  CheckCircle, \r\n  Clock, \r\n  Users, \r\n  ArrowLeft, \r\n  ChevronRight,\r\n  Send,\r\n  Mail,\r\n  UserCheck,\r\n  ShieldAlert,\r\n  Info\r\n} from 'lucide-react';\r\nimport { Speaker, Visit } from '@/types';\r\n\r\nexport const Messages: React.FC = () => {\r\n  const { visits, speakers, updateVisit, refreshData } = useData();\r\n  const { deviceType } = usePlatformContext();\r\n  const isTablet = deviceType === 'tablet';\r\n  const isSamsungTablet = isTablet && window.innerWidth >= 1200;\r\n\r\n  React.useEffect(() => {\r\n    if (refreshData) refreshData();\r\n  }, []);\r\n\r\n  const [selectedSpeaker, setSelectedSpeaker] = useState<Speaker | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activeFilter, setActiveFilter] = useState<'all' | 'pending' | 'needs_host'>('all');\r\n  const [isGeneratorModalOpen, setIsGeneratorModalOpen] = useState(false);\r\n  const [isHostRequestModalOpen, setIsHostRequestModalOpen] = useState(false);\r\n  const [generatorVisit, setGeneratorVisit] = useState<Visit | null>(null);\r\n\r\n  // Group visits by speaker\r\n  const conversations = useMemo(() => {\r\n    const convos: { speaker: Speaker; visits: Visit[]; nextVisitDate: string }[] = [];\r\n    const seenSpeakers = new Set<string>();\r\n\r\n    speakers.forEach((speaker) => {\r\n      if (!seenSpeakers.has(speaker.id)) {\r\n        seenSpeakers.add(speaker.id);\r\n        const speakerVisits = visits.filter(v => {\r\n          const type = (v.talkNoOrType || '').toLowerCase();\r\n          const isSpecialEvent = type.includes('assembl') || type.includes('congr') || type.includes('especial') || type.includes('circun');\r\n          return v.id === speaker.id && !isSpecialEvent && v.status !== 'cancelled';\r\n        });\r\n\r\n        if (speakerVisits.length > 0) {\r\n          const sortedVisits = [...speakerVisits].sort((a, b) => new Date(a.visitDate).getTime() - new Date(b.visitDate).getTime());\r\n          const upcomingVisits = sortedVisits.filter(v => new Date(v.visitDate) >= new Date(new Date().setHours(0, 0, 0, 0)));\r\n\r\n          if (upcomingVisits.length > 0) {\r\n            convos.push({\r\n              speaker,\r\n              visits: sortedVisits,\r\n              nextVisitDate: upcomingVisits[0].visitDate,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    return convos.sort((a, b) => new Date(a.nextVisitDate).getTime() - new Date(b.nextVisitDate).getTime());\r\n  }, [visits, speakers]);\r\n\r\n  // Filtered conversations\r\n  const filteredConversations = useMemo(() => {\r\n    return conversations.filter((convo) => {\r\n      const matchesSearch = \r\n        convo.speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        convo.speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase());\r\n      \r\n      const matchesFilter = activeFilter === 'all' || \r\n        (activeFilter === 'pending' && convo.visits.some(v => v.status === 'pending')) ||\r\n        (activeFilter === 'needs_host' && convo.visits.some(v => !v.host || v.host === '√Ä d√©finir'));\r\n\r\n      return matchesSearch && matchesFilter;\r\n    });\r\n  }, [conversations, searchTerm, activeFilter]);\r\n\r\n  const stats = useMemo(() => {\r\n    const pendingTotal = visits.filter(v => v.status === 'pending').length;\r\n    const confirmedTotal = visits.filter(v => v.status === 'confirmed').length;\r\n    const needingHostTotal = visits.filter(v => (!v.host || v.host === '√Ä d√©finir') && v.locationType === 'physical').length;\r\n    return { pendingTotal, confirmedTotal, needingHostTotal, totalConversations: conversations.length };\r\n  }, [visits, conversations]);\r\n\r\n  const handleMessageAction = (action: string, visit?: Visit) => {\r\n    if ((action === 'whatsapp' || action === 'email') && visit && selectedSpeaker) {\r\n      setGeneratorVisit(visit);\r\n      setIsGeneratorModalOpen(true);\r\n    } else if (action === 'confirm' && visit) {\r\n      updateVisit({ ...visit, status: 'confirmed', updatedAt: new Date().toISOString() });\r\n    } else if (action === 'host_request' && visit) {\r\n      setGeneratorVisit(visit);\r\n      setIsHostRequestModalOpen(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='max-w-[1600px] mx-auto space-y-8 px-4 sm:px-6 lg:px-8 py-4'>\r\n      {/* Header Section */}\r\n      <div className='flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-gray-200 dark:border-gray-700 pb-6'>\r\n        <div>\r\n          <div className='flex items-center gap-2 text-sm text-primary-600 dark:text-primary-400 font-medium mb-1'>\r\n            <MessageSquare className='w-4 h-4' />\r\n            <span>Communications Hub</span>\r\n          </div>\r\n          <h2 className='text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight'>\r\n            Messages & Suivi\r\n          </h2>\r\n          <p className='text-gray-500 dark:text-gray-400 mt-2 max-w-2xl text-sm'>\r\n            G√©rez vos √©changes avec les orateurs, confirmez les visites et organisez l'accueil en un seul endroit.\r\n          </p>\r\n        </div>\r\n\r\n        <div className='flex items-center gap-3'>\r\n          {deviceType === 'phone' && selectedSpeaker && (\r\n             <Button variant='ghost' onClick={() => setSelectedSpeaker(null)} leftIcon={<ArrowLeft className='w-4 h-4' />}>\r\n               Retour\r\n             </Button>\r\n          )}\r\n          <Button \r\n            className='shadow-lg shadow-primary-200 dark:shadow-none'\r\n            leftIcon={<Plus className='w-4 h-4' />}\r\n            onClick={() => {\r\n              setGeneratorVisit(null);\r\n              setIsGeneratorModalOpen(true);\r\n            }}\r\n          >\r\n            Nouveau Message\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Landing / Stats Layer */}\r\n      {(!selectedSpeaker || !isTablet) && (\r\n        <div className='grid grid-cols-2 md:grid-cols-4 gap-4 animate-in fade-in duration-500'>\r\n          {[\r\n            { label: 'Conversations', value: stats.totalConversations, icon: MessageSquare, color: 'text-blue-600', bg: 'bg-blue-50 dark:bg-blue-900/20' },\r\n            { label: 'En attente', value: stats.pendingTotal, icon: Clock, color: 'text-orange-600', bg: 'bg-orange-50 dark:bg-orange-900/20' },\r\n            { label: '√Ä confirmer', value: stats.needingHostTotal, icon: Users, color: 'text-red-600', bg: 'bg-red-50 dark:bg-red-900/20' },\r\n            { label: 'Confirm√©es', value: stats.confirmedTotal, icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50 dark:bg-green-900/20' },\r\n          ].map((s, i) => (\r\n            <Card key={i} className='border-none shadow-sm hover:translate-y-[-2px] transition-transform'>\r\n              <CardBody className='p-4 flex items-center justify-between'>\r\n                <div>\r\n                  <p className='text-[10px] font-bold text-gray-400 uppercase tracking-widest'>{s.label}</p>\r\n                  <p className='text-xl font-black text-gray-900 dark:text-white mt-1'>{s.value}</p>\r\n                </div>\r\n                <div className={cn('p-2.5 rounded-xl', s.bg)}>\r\n                  <s.icon className={cn('w-4 h-4', s.color)} />\r\n                </div>\r\n              </CardBody>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Content Area */}\r\n      <div className='flex flex-col lg:flex-row gap-8 items-start min-h-[600px]'>\r\n        \r\n        {/* Left Pane: Conversations List */}\r\n        {(!selectedSpeaker || deviceType !== 'phone') && (\r\n          <div className={cn(\r\n            'flex flex-col w-full shrink-0',\r\n            isSamsungTablet ? 'lg:w-[450px]' : 'lg:w-96'\r\n          )}>\r\n            <div className='space-y-4 sticky top-4'>\r\n              {/* Filter & Search Card */}\r\n              <Card className='border-none shadow-md overflow-hidden'>\r\n                <CardBody className='p-4 space-y-4'>\r\n                   <div className='relative'>\r\n                      <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400' />\r\n                      <input \r\n                        className='w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm focus:ring-2 focus:ring-primary-500 transition-all'\r\n                        placeholder='Rechercher un orateur...'\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                      />\r\n                   </div>\r\n                   \r\n                   <div className='flex gap-1 overflow-x-auto pb-1 scrollbar-none'>\r\n                      {[\r\n                        { id: 'all', label: 'Tout' },\r\n                        { id: 'pending', label: 'En attente' },\r\n                        { id: 'needs_host', label: 'Sans accueil' },\r\n                      ].map(f => (\r\n                        <button\r\n                          key={f.id}\r\n                          onClick={() => setActiveFilter(f.id as any)}\r\n                          className={cn(\r\n                            'px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap transition-all uppercase tracking-tighter',\r\n                            activeFilter === f.id \r\n                              ? 'bg-primary-600 text-white shadow-md' \r\n                              : 'bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200'\r\n                          )}\r\n                        >\r\n                          {f.label}\r\n                        </button>\r\n                      ))}\r\n                   </div>\r\n                </CardBody>\r\n              </Card>\r\n\r\n              {/* Conversations Scroller */}\r\n              <div className='space-y-2 max-h-[calc(100vh-250px)] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-700'>\r\n                 {filteredConversations.length > 0 ? (\r\n                   filteredConversations.map(({ speaker, visits: speakerVisits, nextVisitDate }) => {\r\n                     const isSelected = selectedSpeaker?.id === speaker.id;\r\n                     const hasPending = speakerVisits.some(v => v.status === 'pending');\r\n                     const needsHost = speakerVisits.some(v => (!v.host || v.host === '√Ä d√©finir') && v.locationType === 'physical');\r\n                     \r\n                     return (\r\n                       <button\r\n                         key={speaker.id}\r\n                         onClick={() => setSelectedSpeaker(speaker)}\r\n                         className={cn(\r\n                           'w-full flex items-start gap-3 p-4 rounded-2xl text-left transition-all duration-200 group relative',\r\n                           isSelected \r\n                             ? 'bg-white dark:bg-gray-800 shadow-xl border-l-[6px] border-primary-500 translate-x-1' \r\n                             : 'hover:bg-white/50 dark:hover:bg-white/5'\r\n                         )}\r\n                       >\r\n                         <div className={cn(\r\n                           'relative w-12 h-12 rounded-2xl flex items-center justify-center font-bold text-lg shrink-0 transition-transform group-hover:scale-105',\r\n                           isSelected ? 'bg-primary-600 text-white shadow-lg' : 'bg-gray-100 dark:bg-gray-800 text-gray-400'\r\n                         )}>\r\n                            {speaker.nom.charAt(0).toUpperCase()}\r\n                            {(hasPending || needsHost) && (\r\n                               <div className='absolute -top-1 -right-1 w-3.5 h-3.5 bg-red-500 border-2 border-white dark:border-gray-900 rounded-full animate-pulse' />\r\n                            )}\r\n                         </div>\r\n\r\n                         <div className='flex-1 min-w-0'>\r\n                            <div className='flex items-center justify-between mb-1'>\r\n                               <h4 className={cn('font-bold truncate text-sm uppercase tracking-tight', isSelected ? 'text-gray-900 dark:text-white' : 'text-gray-600 dark:text-gray-400')}>\r\n                                 {speaker.nom}\r\n                               </h4>\r\n                               <span className='text-[10px] text-gray-400 font-bold uppercase'>\r\n                                 {new Date(nextVisitDate).toLocaleDateString('fr-FR', { day: '2-digit', month: 'short' })}\r\n                               </span>\r\n                            </div>\r\n                            <p className='text-[11px] text-gray-500 truncate mb-2'>{speaker.congregation}</p>\r\n                            \r\n                            <div className='flex gap-1.5'>\r\n                               {hasPending && <Badge variant='danger' className='text-[9px] px-1.5 py-0'>√Ä CONFIRMER</Badge>}\r\n                               {needsHost && <Badge variant='warning' className='text-[9px] px-1.5 py-0'>SANS ACCUEIL</Badge>}\r\n                               {!hasPending && !needsHost && <Badge variant='success' className='text-[9px] px-1.5 py-0'>OK</Badge>}\r\n                            </div>\r\n                         </div>\r\n                         \r\n                         <ChevronRight className={cn(\r\n                           'w-4 h-4 mt-1 transition-all',\r\n                           isSelected ? 'opacity-100 text-primary-500' : 'opacity-0 group-hover:opacity-100 text-gray-300'\r\n                         )} />\r\n                       </button>\r\n                     );\r\n                   })\r\n                 ) : (\r\n                   <div className='py-20 text-center opacity-40'>\r\n                      <Info className='w-8 h-8 mx-auto mb-3' />\r\n                      <p className='text-xs font-bold uppercase tracking-widest'>Aucun r√©sultat</p>\r\n                   </div>\r\n                 )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Right Pane: Message Thread / Dashboard Overview */}\r\n        {(selectedSpeaker || isTablet) && (\r\n          <div className='flex-1 w-full min-h-[600px]'>\r\n            {selectedSpeaker ? (\r\n              <div className='animate-in fade-in slide-in-from-right-4 duration-300 h-full'>\r\n                 <Card className='border-none shadow-xl h-full flex flex-col bg-gray-50 dark:bg-gray-900/40 rounded-3xl overflow-hidden'>\r\n                    <MessageThread \r\n                      speaker={selectedSpeaker}\r\n                      visits={visits.filter(v => v.id === selectedSpeaker.id)}\r\n                      onAction={handleMessageAction}\r\n                    />\r\n                 </Card>\r\n              </div>\r\n            ) : (\r\n              <div className='h-full flex flex-col items-center justify-center p-12 text-center animate-in zoom-in-95 duration-500'>\r\n                 <div className='relative mb-10'>\r\n                    <div className='absolute -inset-4 bg-primary-100 dark:bg-primary-900/30 rounded-full blur-2xl animate-pulse' />\r\n                    <div className='relative w-24 h-24 bg-white dark:bg-gray-800 rounded-3xl shadow-xl flex items-center justify-center'>\r\n                       <Send className='w-12 h-12 text-primary-500 rotate-[-15deg]' />\r\n                    </div>\r\n                 </div>\r\n                 \r\n                 <h3 className='text-2xl font-black text-gray-900 dark:text-white tracking-tighter mb-4'>\r\n                    Pr√™t √† communiquer ?\r\n                 </h3>\r\n                 <p className='text-gray-500 max-w-sm mb-12 text-sm leading-relaxed'>\r\n                    S√©lectionnez un orateur dans la liste de gauche pour pr√©parer son arriv√©e, g√©rer l'accueil ou simplement lui envoyer un message de confirmation.\r\n                 </p>\r\n                 \r\n                 <div className='grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-2xl'>\r\n                    {[\r\n                      { icon: Mail, label: 'Mod√®les SMS', desc: 'Gagnez du temps' },\r\n                      { icon: UserCheck, label: 'Suivi Pr√©cis', desc: 'Statut en direct' },\r\n                      { icon: ShieldAlert, label: 'Gestion Hosting', desc: 'Alertes accueil' },\r\n                    ].map((feat, i) => (\r\n                      <div key={i} className='p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 hover:shadow-md transition-all'>\r\n                         <feat.icon className='w-6 h-6 text-primary-500 mx-auto mb-3' />\r\n                         <p className='font-bold text-xs uppercase tracking-tighter mb-1'>{feat.label}</p>\r\n                         <p className='text-[10px] text-gray-400'>{feat.desc}</p>\r\n                      </div>\r\n                    ))}\r\n                 </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {isGeneratorModalOpen && (\r\n        <MessageGeneratorModal\r\n          isOpen={isGeneratorModalOpen}\r\n          onClose={() => {\r\n            setIsGeneratorModalOpen(false);\r\n            setGeneratorVisit(null);\r\n          }}\r\n          speaker={selectedSpeaker || speakers[0]}\r\n          visit={generatorVisit || visits.find(v => v.id === (selectedSpeaker?.id)) || visits[0]}\r\n        />\r\n      )}\r\n\r\n      {isHostRequestModalOpen && (\r\n        <HostRequestModal\r\n          isOpen={isHostRequestModalOpen}\r\n          onClose={() => setIsHostRequestModalOpen(false)}\r\n          visitsNeedingHost={visits.filter(v => (!v.host || v.host === '√Ä d√©finir') && v.locationType === 'physical')}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n"],"names":["ArrowLeft","createLucideIcon","ShieldAlert","MessageThread","speaker","visits","onAction","sortedVisits","visit","index","self","t","a","b","jsxs","jsx","Button","Phone","Mail","format","fr","Card","CardBody","getTalkTitle","Clock","MapPin","User","CommunicationProgress","MessageSquare","Calendar","HostRequestModal","isOpen","onClose","visitsNeedingHost","congregationProfile","useData","settings","useSettings","addToast","useToast","selectedVisits","setSelectedVisits","useState","v","message","setMessage","React","generateMessage","generated","generateHostRequestMessage","toggleVisit","visitId","newSelected","toggleAll","handleCopy","handleSendWhatsApp","encodedMessage","Modal","Fragment","Copy","Send","Badge","formatFullDate","e","Check","Messages","speakers","updateVisit","refreshData","deviceType","usePlatformContext","isTablet","isSamsungTablet","selectedSpeaker","setSelectedSpeaker","searchTerm","setSearchTerm","activeFilter","setActiveFilter","isGeneratorModalOpen","setIsGeneratorModalOpen","isHostRequestModalOpen","setIsHostRequestModalOpen","generatorVisit","setGeneratorVisit","conversations","useMemo","convos","seenSpeakers","speakerVisits","type","isSpecialEvent","upcomingVisits","filteredConversations","convo","matchesSearch","matchesFilter","stats","pendingTotal","confirmedTotal","needingHostTotal","handleMessageAction","action","Plus","Users","CheckCircle","cn","Search","f","nextVisitDate","isSelected","hasPending","needsHost","ChevronRight","Info","UserCheck","feat","MessageGeneratorModal"],"mappings":"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","x_google_ignoreList":[0,1]}