{"version":3,"file":"VisitActionModal-BGIvcVq8.js","sources":["../../node_modules/lucide-react/dist/esm/icons/building.js","../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../node_modules/lucide-react/dist/esm/icons/credit-card.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/euro.js","../../node_modules/lucide-react/dist/esm/icons/hotel.js","../../node_modules/lucide-react/dist/esm/icons/map.js","../../node_modules/lucide-react/dist/esm/icons/navigation.js","../../node_modules/lucide-react/dist/esm/icons/pen.js","../../node_modules/lucide-react/dist/esm/icons/plane.js","../../node_modules/lucide-react/dist/esm/icons/printer.js","../../node_modules/lucide-react/dist/esm/icons/share-2.js","../../node_modules/lucide-react/dist/esm/icons/tag.js","../../node_modules/lucide-react/dist/esm/icons/tram-front.js","../../node_modules/lucide-react/dist/esm/icons/truck.js","../../node_modules/lucide-react/dist/esm/icons/utensils.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../src/components/expenses/ExpenseForm.tsx","../../src/components/expenses/ExpenseList.tsx","../../src/components/logistics/ItineraryView.tsx","../../src/components/logistics/AccommodationView.tsx","../../src/components/logistics/Checklist.tsx","../../src/components/logistics/LogisticsManager.tsx","../../src/components/logistics/TravelCoordinationModal.tsx","../../src/components/logistics/MealPlanningModal.tsx","../../src/components/hosts/AccommodationMatchingModal.tsx","../../node_modules/react-to-print/lib/index.js","../../src/components/reports/RoadmapView.tsx","../../src/components/planning/VisitActionModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Building = createLucideIcon(\"Building\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"path\", { d: \"M9 22v-4h6v4\", key: \"r93iot\" }],\n  [\"path\", { d: \"M8 6h.01\", key: \"1dz90k\" }],\n  [\"path\", { d: \"M16 6h.01\", key: \"1x0f13\" }],\n  [\"path\", { d: \"M12 6h.01\", key: \"1vi96p\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }]\n]);\n\nexport { Building as default };\n//# sourceMappingURL=building.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CreditCard = createLucideIcon(\"CreditCard\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"5\", rx: \"2\", key: \"ynyp8z\" }],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"10\", y2: \"10\", key: \"1b3vmo\" }]\n]);\n\nexport { CreditCard as default };\n//# sourceMappingURL=credit-card.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DollarSign = createLucideIcon(\"DollarSign\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n]);\n\nexport { DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Euro = createLucideIcon(\"Euro\", [\n  [\"path\", { d: \"M4 10h12\", key: \"1y6xl8\" }],\n  [\"path\", { d: \"M4 14h9\", key: \"1loblj\" }],\n  [\n    \"path\",\n    {\n      d: \"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2\",\n      key: \"1j6lzo\"\n    }\n  ]\n]);\n\nexport { Euro as default };\n//# sourceMappingURL=euro.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hotel = createLucideIcon(\"Hotel\", [\n  [\n    \"path\",\n    {\n      d: \"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z\",\n      key: \"p9z69c\"\n    }\n  ],\n  [\"path\", { d: \"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16\", key: \"1bvcvh\" }],\n  [\"path\", { d: \"M8 7h.01\", key: \"1vti4s\" }],\n  [\"path\", { d: \"M16 7h.01\", key: \"1kdx03\" }],\n  [\"path\", { d: \"M12 7h.01\", key: \"1ivr5q\" }],\n  [\"path\", { d: \"M12 11h.01\", key: \"z322tv\" }],\n  [\"path\", { d: \"M16 11h.01\", key: \"xkw8gn\" }],\n  [\"path\", { d: \"M8 11h.01\", key: \"1dfujw\" }],\n  [\"path\", { d: \"M10 22v-6.5m4 0V22\", key: \"16gs4s\" }]\n]);\n\nexport { Hotel as default };\n//# sourceMappingURL=hotel.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"Map\", [\n  [\"polygon\", { points: \"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21\", key: \"ok2ie8\" }],\n  [\"line\", { x1: \"9\", x2: \"9\", y1: \"3\", y2: \"18\", key: \"w34qz5\" }],\n  [\"line\", { x1: \"15\", x2: \"15\", y1: \"6\", y2: \"21\", key: \"volv9a\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Navigation = createLucideIcon(\"Navigation\", [\n  [\"polygon\", { points: \"3 11 22 2 13 21 11 13 3 11\", key: \"1ltx0t\" }]\n]);\n\nexport { Navigation as default };\n//# sourceMappingURL=navigation.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pen = createLucideIcon(\"Pen\", [\n  [\"path\", { d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\", key: \"5qss01\" }]\n]);\n\nexport { Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plane = createLucideIcon(\"Plane\", [\n  [\n    \"path\",\n    {\n      d: \"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z\",\n      key: \"1v9wt8\"\n    }\n  ]\n]);\n\nexport { Plane as default };\n//# sourceMappingURL=plane.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Printer = createLucideIcon(\"Printer\", [\n  [\"polyline\", { points: \"6 9 6 2 18 2 18 9\", key: \"1306q4\" }],\n  [\n    \"path\",\n    {\n      d: \"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\",\n      key: \"143wyd\"\n    }\n  ],\n  [\"rect\", { width: \"12\", height: \"8\", x: \"6\", y: \"14\", key: \"5ipwut\" }]\n]);\n\nexport { Printer as default };\n//# sourceMappingURL=printer.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share2 = createLucideIcon(\"Share2\", [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\"line\", { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n]);\n\nexport { Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Tag = createLucideIcon(\"Tag\", [\n  [\n    \"path\",\n    {\n      d: \"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z\",\n      key: \"14b2ls\"\n    }\n  ],\n  [\"path\", { d: \"M7 7h.01\", key: \"7u93v4\" }]\n]);\n\nexport { Tag as default };\n//# sourceMappingURL=tag.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TramFront = createLucideIcon(\"TramFront\", [\n  [\"rect\", { width: \"16\", height: \"16\", x: \"4\", y: \"3\", rx: \"2\", key: \"1wxw4b\" }],\n  [\"path\", { d: \"M4 11h16\", key: \"mpoxn0\" }],\n  [\"path\", { d: \"M12 3v8\", key: \"1h2ygw\" }],\n  [\"path\", { d: \"m8 19-2 3\", key: \"13i0xs\" }],\n  [\"path\", { d: \"m18 22-2-3\", key: \"1p0ohu\" }],\n  [\"path\", { d: \"M8 15h0\", key: \"q9eq1f\" }],\n  [\"path\", { d: \"M16 15h0\", key: \"pzrbjg\" }]\n]);\n\nexport { TramFront as default };\n//# sourceMappingURL=tram-front.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Truck = createLucideIcon(\"Truck\", [\n  [\"path\", { d: \"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11\", key: \"hs4xqm\" }],\n  [\"path\", { d: \"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2\", key: \"11fp61\" }],\n  [\"circle\", { cx: \"7\", cy: \"18\", r: \"2\", key: \"19iecd\" }],\n  [\"path\", { d: \"M15 18H9\", key: \"1lyqi6\" }],\n  [\"circle\", { cx: \"17\", cy: \"18\", r: \"2\", key: \"332jqn\" }]\n]);\n\nexport { Truck as default };\n//# sourceMappingURL=truck.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Utensils = createLucideIcon(\"Utensils\", [\n  [\"path\", { d: \"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2\", key: \"cjf0a3\" }],\n  [\"path\", { d: \"M7 2v20\", key: \"1473qp\" }],\n  [\"path\", { d: \"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7\", key: \"1ogz0v\" }]\n]);\n\nexport { Utensils as default };\n//# sourceMappingURL=utensils.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","import React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Expense } from '@/types';\r\nimport { Save } from 'lucide-react';\r\n\r\ninterface ExpenseFormProps {\r\n  onSubmit: (expenseData: Omit<Expense, 'id'>) => void;\r\n  onCancel: () => void;\r\n  initialData?: Expense;\r\n  currency?: string;\r\n}\r\n\r\nconst CATEGORIES = [\r\n  'Transport',\r\n  'Hébergement',\r\n  'Repas',\r\n  'Matériel',\r\n  'Autre'\r\n];\r\n\r\nexport const ExpenseForm: React.FC<ExpenseFormProps> = ({ \r\n  onSubmit, \r\n  onCancel, \r\n  initialData,\r\n  currency = '€' \r\n}) => {\r\n  const [description, setDescription] = useState(initialData?.description || '');\r\n  const [amount, setAmount] = useState<string>(initialData?.amount?.toString() || '');\r\n  const [date, setDate] = useState(initialData?.date || new Date().toISOString().split('T')[0]);\r\n  const [category, setCategory] = useState(initialData?.category || CATEGORIES[0]);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!description || !amount || !date) return;\r\n\r\n    onSubmit({\r\n      description,\r\n      amount: parseFloat(amount),\r\n      date,\r\n      category\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Description *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm\"\r\n            placeholder=\"Ex: Billet de train...\"\r\n            required\r\n            autoFocus\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n           <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Catégorie\r\n          </label>\r\n          <select\r\n            value={category}\r\n            onChange={(e) => setCategory(e.target.value)}\r\n            className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm\"\r\n            title=\"Catégorie de la dépense\"\r\n          >\r\n            {CATEGORIES.map(cat => (\r\n              <option key={cat} value={cat}>{cat}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Montant ({currency}) *\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            min=\"0\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm\"\r\n            required\r\n            title=\"Montant de la dépense\"\r\n            placeholder=\"0.00\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Date *\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm\"\r\n            required\r\n            title=\"Date de la dépense\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end gap-2 pt-2\">\r\n        <Button variant=\"ghost\" onClick={onCancel} type=\"button\">\r\n          Annuler\r\n        </Button>\r\n        <Button variant=\"primary\" type=\"submit\" leftIcon={<Save className=\"w-4 h-4\" />}>\r\n          Enregistrer\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useMemo, memo } from 'react';\r\nimport { Expense } from '@/types';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Plus, Edit2, Trash2, Tag, Calendar, Euro } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\n\r\ninterface ExpenseListProps {\r\n  expenses: Expense[];\r\n  onAdd: () => void;\r\n  onEdit: (expense: Expense) => void;\r\n  onDelete: (id: string) => void;\r\n  currency?: string;\r\n  readOnly?: boolean;\r\n}\r\n\r\nconst ExpenseListInner: React.FC<ExpenseListProps> = ({ \r\n  expenses = [], \r\n  onAdd, \r\n  onEdit, \r\n  onDelete,\r\n  currency = '€',\r\n  readOnly = false\r\n}) => {\r\n  const totalAmount = useMemo(() => expenses.reduce((sum, expense) => sum + expense.amount, 0), [expenses]);\r\n\r\n  if (expenses.length === 0 && readOnly) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n        Aucune dépense enregistrée.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header with Total */}\r\n      <div className=\"flex items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\r\n        <div>\r\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">Total des dépenses</p>\r\n          <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n            {totalAmount.toFixed(2)} {currency}\r\n          </p>\r\n        </div>\r\n        {!readOnly && (\r\n          <Button onClick={onAdd} variant=\"primary\" leftIcon={<Plus className=\"w-4 h-4\" />}>\r\n            Ajouter une dépense\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Expenses List */}\r\n      <div className=\"space-y-2\">\r\n        {expenses.length === 0 ? (\r\n          <div className=\"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700\">\r\n            <Euro className=\"w-10 h-10 mx-auto text-gray-400 mb-2\" />\r\n            <p className=\"text-gray-500 dark:text-gray-400\">Aucune dépense pour le moment</p>\r\n            {!readOnly && (\r\n               <Button onClick={onAdd} variant=\"ghost\" className=\"mt-2 text-primary-600\">\r\n                 Commencer à ajouter\r\n               </Button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          expenses.map((expense) => (\r\n            <div \r\n              key={expense.id} \r\n              className=\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 hover:shadow-sm transition-shadow\"\r\n            >\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  <span className=\"font-medium text-gray-900 dark:text-white truncate\">\r\n                    {expense.description}\r\n                  </span>\r\n                  {expense.category && (\r\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200\">\r\n                      <Tag className=\"w-3 h-3 mr-1\" />\r\n                      {expense.category}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex items-center text-xs text-gray-500 dark:text-gray-400\">\r\n                  <Calendar className=\"w-3 h-3 mr-1\" />\r\n                  {format(new Date(expense.date), 'dd MMMM yyyy', { locale: fr })}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-4\">\r\n                <span className=\"font-semibold text-gray-900 dark:text-white\">\r\n                  {expense.amount.toFixed(2)} {currency}\r\n                </span>\r\n                {!readOnly && (\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <button \r\n                      onClick={() => onEdit(expense)}\r\n                      className=\"p-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors\"\r\n                      title=\"Modifier\"\r\n                    >\r\n                      <Edit2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button \r\n                      onClick={() => onDelete(expense.id)}\r\n                      className=\"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                      title=\"Supprimer\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Memoization for performance optimization\r\nexport const ExpenseList = memo(ExpenseListInner);\r\nExpenseList.displayName = 'ExpenseList';\r\n","import React from 'react';\r\nimport { Itinerary } from '@/types';\r\nimport { Car, MapPin, Navigation, Plane, Train, Clock, Map as MapIcon } from 'lucide-react';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { Button } from '@/components/ui/Button';\r\n\r\ninterface ItineraryViewProps {\r\n  itinerary: Itinerary;\r\n  onUpdate: (itinerary: Itinerary) => void;\r\n  readOnly?: boolean;\r\n}\r\n\r\nexport const ItineraryView: React.FC<ItineraryViewProps> = ({ itinerary, onUpdate, readOnly = false }) => {\r\n  const handleChange = (field: keyof Itinerary, value: any) => {\r\n    onUpdate({ ...itinerary, [field]: value });\r\n  };\r\n\r\n  const openApp = (app: 'waze' | 'google') => {\r\n    const query = encodeURIComponent(itinerary.meetingPoint || '');\r\n    if (!query) return;\r\n    \r\n    const url = app === 'waze' \r\n      ? `https://waze.com/ul?q=${query}&navigate=yes`\r\n      : `https://www.google.com/maps/search/?api=1&query=${query}`;\r\n    \r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex gap-4\">\r\n        {[\r\n          { mode: 'car', icon: Car, label: 'Voiture' },\r\n          { mode: 'train', icon: Train, label: 'Train' },\r\n          { mode: 'plane', icon: Plane, label: 'Avion' },\r\n        ].map(({ mode, icon: Icon, label }) => (\r\n          <button\r\n            key={mode}\r\n            type=\"button\"\r\n            onClick={() => handleChange('transportMode', mode)}\r\n            className={`flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${\r\n              itinerary.transportMode === mode\r\n                ? 'border-primary bg-primary/5 text-primary'\r\n                : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-500'\r\n            }`}\r\n            disabled={readOnly}\r\n          >\r\n            <Icon className=\"w-6 h-6 mb-2\" />\r\n            <span className=\"text-sm font-medium\">{label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <Input\r\n          label=\"Distance (km)\"\r\n          type=\"number\"\r\n          value={itinerary.distance?.toString() || ''}\r\n          onChange={(e) => handleChange('distance', e.target.value ? parseFloat(e.target.value) : undefined)}\r\n          disabled={readOnly}\r\n          leftIcon={<Navigation className=\"w-4 h-4\" />}\r\n        />\r\n        <Input\r\n          label=\"Durée estimée\"\r\n          placeholder=\"ex: 1h 30m\"\r\n          value={itinerary.duration?.toString() || ''}\r\n          onChange={(e) => handleChange('duration', e.target.value)}\r\n          disabled={readOnly}\r\n          leftIcon={<Clock className=\"w-4 h-4\" />}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <Input\r\n          label=\"Point de rendez-vous / Adresse\"\r\n          value={itinerary.meetingPoint || ''}\r\n          onChange={(e) => handleChange('meetingPoint', e.target.value)}\r\n          disabled={readOnly}\r\n          leftIcon={<MapPin className=\"w-4 h-4\" />}\r\n        />\r\n\r\n        {itinerary.meetingPoint && (\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex-1\"\r\n              onClick={() => openApp('google')}\r\n              leftIcon={<MapIcon className=\"w-4 h-4\" />}\r\n            >\r\n              Google Maps\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex-1\"\r\n              onClick={() => openApp('waze')}\r\n              leftIcon={<Navigation className=\"w-4 h-4\" />}\r\n            >\r\n              Waze\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          Notes de voyage\r\n        </label>\r\n        <textarea\r\n          value={itinerary.notes || ''}\r\n          onChange={(e) => handleChange('notes', e.target.value)}\r\n          disabled={readOnly}\r\n          className=\"w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-primary focus:border-primary p-3 min-h-[100px]\"\r\n          placeholder=\"Informations supplémentaires...\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Accommodation } from '@/types';\r\nimport { Home, Building, MapPin, Link } from 'lucide-react';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { Button } from '@/components/ui/Button';\r\n\r\ninterface AccommodationViewProps {\r\n  accommodation: Accommodation;\r\n  onUpdate: (accommodation: Accommodation) => void;\r\n  readOnly?: boolean;\r\n  hosts?: Array<{ nom: string; address?: string; }>;\r\n}\r\n\r\n// Helper to format ISO date for datetime-local input\r\nconst formatDateForInput = (isoString?: string) => {\r\n  if (!isoString) return '';\r\n  return isoString.slice(0, 16); // \"YYYY-MM-DDThh:mm\"\r\n};\r\n\r\nexport const AccommodationView: React.FC<AccommodationViewProps> = ({ accommodation, onUpdate, readOnly = false, hosts = [] }) => {\r\n  const handleChange = (field: keyof Accommodation, value: any) => {\r\n    onUpdate({ ...accommodation, [field]: value });\r\n  };\r\n\r\n  const openMap = () => {\r\n    const query = encodeURIComponent(accommodation.address || accommodation.name || '');\r\n    if (!query) return;\r\n    window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex gap-4\">\r\n        {[\r\n          { type: 'host', icon: Home, label: 'Chez l\\'habitant' },\r\n          { type: 'hotel', icon: Building, label: 'Hôtel' },\r\n        ].map(({ type, icon: Icon, label }) => (\r\n          <button\r\n            key={type}\r\n            onClick={() => !readOnly && handleChange('type', type)}\r\n            className={`flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${\r\n              accommodation.type === type\r\n                ? 'border-primary bg-primary/5 text-primary'\r\n                : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-500'\r\n            }`}\r\n            disabled={readOnly}\r\n          >\r\n            <Icon className=\"w-6 h-6 mb-2\" />\r\n            <span className=\"text-sm font-medium\">{label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {accommodation.type === 'hotel' ? (\r\n          <Input\r\n            label=\"Nom de l'hôtel\"\r\n            value={accommodation.name || ''}\r\n            onChange={(e) => handleChange('name', e.target.value)}\r\n            disabled={readOnly}\r\n            placeholder=\"Ex: Hôtel de la Gare\"\r\n          />\r\n        ) : (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Nom de l'hôte\r\n            </label>\r\n            <select\r\n              value={accommodation.name || ''}\r\n              onChange={(e) => {\r\n                const selectedHost = hosts.find(h => h.nom === e.target.value);\r\n                onUpdate({\r\n                  ...accommodation,\r\n                  name: e.target.value,\r\n                  address: selectedHost?.address || accommodation.address || ''\r\n                });\r\n              }}\r\n              disabled={readOnly}\r\n              title=\"Sélectionner un hôte\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">Sélectionner un hôte...</option>\r\n              {hosts.map(host => (\r\n                <option key={host.nom} value={host.nom}>{host.nom}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex gap-2 items-end\">\r\n          <div className=\"flex-1\">\r\n            <Input\r\n              label=\"Adresse\"\r\n              value={accommodation.address || ''}\r\n              onChange={(e) => handleChange('address', e.target.value)}\r\n              disabled={readOnly}\r\n              leftIcon={<MapPin className=\"w-4 h-4\" />}\r\n            />\r\n          </div>\r\n          {accommodation.address && (\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"mb-[2px]\"\r\n              onClick={openMap}\r\n              leftIcon={<MapPin className=\"w-4 h-4\" />}\r\n            >\r\n              Voir\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <Input\r\n            label=\"Arrivée (Check-in)\"\r\n            type=\"datetime-local\"\r\n            value={formatDateForInput(accommodation.checkIn)}\r\n            onChange={(e) => handleChange('checkIn', e.target.value)}\r\n            disabled={readOnly}\r\n          />\r\n          <Input\r\n            label=\"Départ (Check-out)\"\r\n            type=\"datetime-local\"\r\n            value={formatDateForInput(accommodation.checkOut)}\r\n            onChange={(e) => handleChange('checkOut', e.target.value)}\r\n            disabled={readOnly}\r\n          />\r\n        </div>\r\n\r\n        {accommodation.type === 'hotel' && (\r\n          <Input\r\n            label=\"Référence réservation\"\r\n            value={accommodation.bookingReference || ''}\r\n            onChange={(e) => handleChange('bookingReference', e.target.value)}\r\n            disabled={readOnly}\r\n            leftIcon={<Link className=\"w-4 h-4\" />}\r\n          />\r\n        )}\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n            Notes / Instructions\r\n          </label>\r\n          <textarea\r\n            value={accommodation.notes || ''}\r\n            onChange={(e) => handleChange('notes', e.target.value)}\r\n            disabled={readOnly}\r\n            className=\"w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-primary focus:border-primary p-3 min-h-[100px]\"\r\n            placeholder=\"Codes d'accès, petit-déjeuner, etc.\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { ChecklistItem } from '@/types';\r\nimport { Check, Plus, Trash2, X } from 'lucide-react';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { generateUUID } from '@/utils/uuid';\r\n\r\ninterface ChecklistProps {\r\n  items: ChecklistItem[];\r\n  onUpdate: (items: ChecklistItem[]) => void;\r\n}\r\n\r\nexport const Checklist: React.FC<ChecklistProps> = ({ items = [], onUpdate }) => {\r\n  const [newItemLabel, setNewItemLabel] = useState('');\r\n  const [isAdding, setIsAdding] = useState(false);\r\n\r\n  const handleToggle = (id: string) => {\r\n    const updatedItems = items.map(item => \r\n      item.id === id ? { ...item, isCompleted: !item.isCompleted } : item\r\n    );\r\n    onUpdate(updatedItems);\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    const updatedItems = items.filter(item => item.id !== id);\r\n    onUpdate(updatedItems);\r\n  };\r\n\r\n  const handleAddItem = (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    if (!newItemLabel.trim()) return;\r\n\r\n    const newItem: ChecklistItem = {\r\n      id: generateUUID(),\r\n      label: newItemLabel.trim(),\r\n      isCompleted: false\r\n    };\r\n\r\n    onUpdate([...items, newItem]);\r\n    setNewItemLabel('');\r\n    setIsAdding(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n          Liste des tâches ({items.filter(i => i.isCompleted).length}/{items.length})\r\n        </h4>\r\n        <Button \r\n          size=\"sm\" \r\n          variant=\"ghost\" \r\n          onClick={() => setIsAdding(!isAdding)}\r\n          className=\"text-primary hover:text-primary/80 p-0 h-auto\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-1\" />\r\n          Ajouter\r\n        </Button>\r\n      </div>\r\n\r\n      {isAdding && (\r\n        <form onSubmit={handleAddItem} className=\"flex gap-2 items-center mb-4 animate-in fade-in slide-in-from-top-2 duration-200\">\r\n          <Input\r\n            autoFocus\r\n            value={newItemLabel}\r\n            onChange={(e) => setNewItemLabel(e.target.value)}\r\n            placeholder=\"Nouvelle tâche...\"\r\n            className=\"flex-1 h-9 text-sm\"\r\n          />\r\n          <Button type=\"submit\" size=\"sm\" disabled={!newItemLabel.trim()}>\r\n            Ajouter\r\n          </Button>\r\n          <Button \r\n            type=\"button\" \r\n            variant=\"ghost\" \r\n            size=\"sm\" \r\n            onClick={() => setIsAdding(false)}\r\n            leftIcon={<X className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      )}\r\n\r\n      <div className=\"space-y-2\">\r\n        {items.length === 0 && !isAdding ? (\r\n          <div className=\"text-center py-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg\">\r\n            <p className=\"text-sm text-gray-500\">Aucune tâche pour le moment</p>\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsAdding(true)}>\r\n              Commencer une liste\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          items.map(item => (\r\n            <div \r\n              key={item.id} \r\n              className={`flex items-center group p-2 rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50 ${item.isCompleted ? 'opacity-75' : ''}`}\r\n            >\r\n              <button\r\n                onClick={() => handleToggle(item.id)}\r\n                className={`flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center mr-3 transition-colors ${\r\n                  item.isCompleted \r\n                    ? 'bg-green-500 border-green-500 text-white' \r\n                    : 'border-gray-300 dark:border-gray-600 hover:border-green-500'\r\n                }`}\r\n              >\r\n                {item.isCompleted && <Check className=\"w-3.5 h-3.5\" />}\r\n              </button>\r\n              \r\n              <span \r\n                className={`flex-1 text-sm transition-all ${\r\n                  item.isCompleted ? 'text-gray-400 line-through' : 'text-gray-700 dark:text-gray-200'\r\n                }`}\r\n              >\r\n                {item.label}\r\n              </span>\r\n\r\n              <button\r\n                onClick={() => handleDelete(item.id)}\r\n                className=\"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-500 transition-opacity\"\r\n                title=\"Supprimer\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Logistics, Itinerary, Accommodation, ChecklistItem } from '@/types';\r\nimport { ItineraryView } from './ItineraryView';\r\nimport { AccommodationView } from './AccommodationView';\r\nimport { Checklist } from './Checklist';\r\nimport { Map, Home, CheckSquare } from 'lucide-react';\r\n\r\ninterface LogisticsManagerProps {\r\n  logistics: Logistics | undefined;\r\n  onUpdate: (logistics: Logistics) => void;\r\n  readOnly?: boolean;\r\n  hosts?: Array<{ nom: string; address?: string; }>;\r\n}\r\n\r\ntype Tab = 'itinerary' | 'accommodation' | 'checklist';\r\n\r\nexport const LogisticsManager: React.FC<LogisticsManagerProps> = ({ logistics = {}, onUpdate, readOnly = false, hosts = [] }) => {\r\n  const [activeTab, setActiveTab] = useState<Tab>('itinerary');\r\n\r\n  const updateItinerary = (itinerary: Itinerary) => {\r\n    onUpdate({ ...logistics, itinerary });\r\n  };\r\n\r\n  const updateAccommodation = (accommodation: Accommodation) => {\r\n    onUpdate({ ...logistics, accommodation });\r\n  };\r\n\r\n  const updateChecklist = (checklist: ChecklistItem[]) => {\r\n    onUpdate({ ...logistics, checklist });\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'itinerary', label: 'Trajet', icon: Map },\r\n    { id: 'accommodation', label: 'Hébergement', icon: Home },\r\n    { id: 'checklist', label: 'Tâches', icon: CheckSquare },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"flex border-b border-gray-200 dark:border-gray-700 mb-6\">\r\n        {tabs.map(({ id, label, icon: Icon }) => (\r\n          <button\r\n            key={id}\r\n            onClick={() => setActiveTab(id as Tab)}\r\n            className={`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === id\r\n                ? 'border-primary text-primary'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\r\n            }`}\r\n          >\r\n            <Icon className=\"w-4 h-4\" />\r\n            {label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto min-h-[400px]\">\r\n        {activeTab === 'itinerary' && (\r\n          <ItineraryView \r\n            itinerary={logistics.itinerary || { transportMode: 'car' }} \r\n            onUpdate={updateItinerary}\r\n            readOnly={readOnly}\r\n          />\r\n        )}\r\n\r\n        {activeTab === 'accommodation' && (\r\n          <AccommodationView \r\n            accommodation={logistics.accommodation || { type: 'host', name: '' }} \r\n            onUpdate={updateAccommodation}\r\n            readOnly={readOnly}\r\n            hosts={hosts}\r\n          />\r\n        )}\r\n\r\n        {activeTab === 'checklist' && (\r\n          <Checklist \r\n            items={logistics.checklist || []} \r\n            onUpdate={updateChecklist}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from 'react';\r\nimport { Car, Train, Plane, MapPin, Clock, Users, DollarSign, Share2 } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { Card, CardBody } from '@/components/ui/Card';\r\nimport { Visit } from '@/types';\r\nimport { useData } from '@/contexts/DataContext';\r\n\r\ninterface TravelCoordinationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  visit: Visit;\r\n  onSave: (travelPlan: TravelPlan) => void;\r\n}\r\n\r\nexport interface TravelPlan {\r\n  visitId: string;\r\n  transportMode: 'car' | 'train' | 'plane' | 'carpool' | 'other';\r\n  departureTime?: string;\r\n  arrivalTime?: string;\r\n  departureLocation?: string;\r\n  arrivalLocation?: string;\r\n  distance?: number;\r\n  duration?: string;\r\n  estimatedCost?: number;\r\n  carpoolPartners?: string[]; // IDs des autres orateurs\r\n  notes?: string;\r\n  mapLink?: string;\r\n  bookingReference?: string;\r\n}\r\n\r\nconst TRANSPORT_MODES = [\r\n  { value: 'car' as const, label: 'Voiture personnelle', icon: Car, color: 'blue' },\r\n  { value: 'carpool' as const, label: 'Covoiturage', icon: Users, color: 'green' },\r\n  { value: 'train' as const, label: 'Train', icon: Train, color: 'purple' },\r\n  { value: 'plane' as const, label: 'Avion', icon: Plane, color: 'orange' },\r\n  { value: 'other' as const, label: 'Autre', icon: MapPin, color: 'gray' },\r\n];\r\n\r\nexport const TravelCoordinationModal: React.FC<TravelCoordinationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  visit,\r\n  onSave\r\n}) => {\r\n  const { visits } = useData();\r\n  const [transportMode, setTransportMode] = useState<TravelPlan['transportMode']>('car');\r\n  const [departureTime, setDepartureTime] = useState('');\r\n  const [arrivalTime, setArrivalTime] = useState('');\r\n  const [departureLocation, setDepartureLocation] = useState('');\r\n  const [arrivalLocation, setArrivalLocation] = useState('');\r\n  const [distance, setDistance] = useState<number | undefined>();\r\n  const [duration, setDuration] = useState('');\r\n  const [estimatedCost, setEstimatedCost] = useState<number | undefined>();\r\n  const [selectedCarpoolPartners, setSelectedCarpoolPartners] = useState<string[]>([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [mapLink, setMapLink] = useState('');\r\n  const [bookingReference, setBookingReference] = useState('');\r\n\r\n  // Trouver les orateurs potentiels pour le covoiturage (même date, même région)\r\n  const potentialCarpoolPartners = useMemo(() => visits\r\n      .filter(v => \r\n        v.visitDate === visit.visitDate &&\r\n        v.visitId !== visit.visitId &&\r\n        v.status !== 'cancelled'\r\n      )\r\n      .map(v => ({\r\n        visitId: v.visitId,\r\n        speakerId: v.id,\r\n        speakerName: v.nom,\r\n        congregation: v.congregation,\r\n        time: v.visitTime\r\n      })), [visits, visit]);\r\n\r\n  const toggleCarpoolPartner = (visitId: string) => {\r\n    setSelectedCarpoolPartners(prev =>\r\n      prev.includes(visitId)\r\n        ? prev.filter(id => id !== visitId)\r\n        : [...prev, visitId]\r\n    );\r\n  };\r\n\r\n  const calculateCostPerPerson = () => {\r\n    if (!estimatedCost) return 0;\r\n    const totalPeople = 1 + selectedCarpoolPartners.length;\r\n    return (estimatedCost / totalPeople).toFixed(2);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const travelPlan: TravelPlan = {\r\n      visitId: visit.visitId,\r\n      transportMode,\r\n      departureTime: departureTime || undefined,\r\n      arrivalTime: arrivalTime || undefined,\r\n      departureLocation: departureLocation || undefined,\r\n      arrivalLocation: arrivalLocation || undefined,\r\n      distance: distance || undefined,\r\n      duration: duration || undefined,\r\n      estimatedCost: estimatedCost || undefined,\r\n      carpoolPartners: transportMode === 'carpool' ? selectedCarpoolPartners : undefined,\r\n      notes: notes || undefined,\r\n      mapLink: mapLink || undefined,\r\n      bookingReference: bookingReference || undefined\r\n    };\r\n\r\n    onSave(travelPlan);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Coordination du voyage\"\r\n      size=\"lg\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Informations de la visite */}\r\n        <div className=\"p-4 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 rounded-lg\">\r\n          <h4 className=\"font-semibold text-gray-900 dark:text-white mb-1\">\r\n            {visit.nom}\r\n          </h4>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\r\n              weekday: 'long',\r\n              day: 'numeric',\r\n              month: 'long'\r\n            })} à {visit.visitTime}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Mode de transport */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n            Mode de transport\r\n          </label>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n            {TRANSPORT_MODES.map((mode) => (\r\n              <button\r\n                key={mode.value}\r\n                onClick={() => setTransportMode(mode.value)}\r\n                className={`p-4 rounded-lg border-2 transition-all ${\r\n                  transportMode === mode.value\r\n                    ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\r\n                    : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                }`}\r\n              >\r\n                <mode.icon className={`w-6 h-6 mx-auto mb-2 ${\r\n                  transportMode === mode.value ? 'text-primary-600' : 'text-gray-400'\r\n                }`} />\r\n                <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                  {mode.label}\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Horaires */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              <Clock className=\"w-4 h-4 inline mr-1\" />\r\n              Heure de départ\r\n            </label>\r\n            <input\r\n              type=\"time\"\r\n              value={departureTime}\r\n              onChange={(e) => setDepartureTime(e.target.value)}\r\n              aria-label=\"Heure de départ\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              <Clock className=\"w-4 h-4 inline mr-1\" />\r\n              Heure d'arrivée\r\n            </label>\r\n            <input\r\n              type=\"time\"\r\n              value={arrivalTime}\r\n              onChange={(e) => setArrivalTime(e.target.value)}\r\n              aria-label=\"Heure d'arrivée\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Lieux */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              <MapPin className=\"w-4 h-4 inline mr-1\" />\r\n              Lieu de départ\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={departureLocation}\r\n              onChange={(e) => setDepartureLocation(e.target.value)}\r\n              placeholder=\"Adresse de départ\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              <MapPin className=\"w-4 h-4 inline mr-1\" />\r\n              Lieu d'arrivée\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={arrivalLocation}\r\n              onChange={(e) => setArrivalLocation(e.target.value)}\r\n              placeholder=\"Adresse d'arrivée\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Distance et durée */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Distance (km)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={distance || ''}\r\n              onChange={(e) => setDistance(e.target.value ? Number(e.target.value) : undefined)}\r\n              placeholder=\"150\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Durée estimée\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={duration}\r\n              onChange={(e) => setDuration(e.target.value)}\r\n              placeholder=\"2h 30min\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Coût */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            <DollarSign className=\"w-4 h-4 inline mr-1\" />\r\n            Coût estimé (€)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={estimatedCost || ''}\r\n            onChange={(e) => setEstimatedCost(e.target.value ? Number(e.target.value) : undefined)}\r\n            placeholder=\"50\"\r\n            step=\"0.01\"\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n\r\n        {/* Covoiturage */}\r\n        {transportMode === 'carpool' && (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                <Share2 className=\"w-4 h-4 inline mr-1\" />\r\n                Partenaires de covoiturage\r\n              </label>\r\n              {selectedCarpoolPartners.length > 0 && estimatedCost && (\r\n                <Badge variant=\"success\">\r\n                  {calculateCostPerPerson()}€ / personne\r\n                </Badge>\r\n              )}\r\n            </div>\r\n\r\n            {potentialCarpoolPartners.length === 0 ? (\r\n              <div className=\"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg text-center text-sm text-gray-600 dark:text-gray-400\">\r\n                Aucun orateur disponible pour le covoiturage ce jour-là\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {potentialCarpoolPartners.map((partner) => (\r\n                  <label\r\n                    key={partner.visitId}\r\n                    className=\"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedCarpoolPartners.includes(partner.visitId)}\r\n                      onChange={() => toggleCarpoolPartner(partner.visitId)}\r\n                      className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {partner.speakerName}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                        {partner.congregation} • {partner.time}\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Lien carte */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Lien Google Maps (optionnel)\r\n          </label>\r\n          <input\r\n            type=\"url\"\r\n            value={mapLink}\r\n            onChange={(e) => setMapLink(e.target.value)}\r\n            placeholder=\"https://maps.google.com/...\"\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n\r\n        {/* Référence de réservation */}\r\n        {(transportMode === 'train' || transportMode === 'plane') && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Référence de réservation\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={bookingReference}\r\n              onChange={(e) => setBookingReference(e.target.value)}\r\n              placeholder=\"ABC123456\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Notes supplémentaires\r\n          </label>\r\n          <textarea\r\n            value={notes}\r\n            onChange={(e) => setNotes(e.target.value)}\r\n            rows={3}\r\n            placeholder=\"Informations complémentaires sur le voyage...\"\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n\r\n        {/* Résumé */}\r\n        {(distance || duration || estimatedCost) && (\r\n          <Card className=\"bg-blue-50 dark:bg-blue-900/20\">\r\n            <CardBody>\r\n              <h4 className=\"font-medium text-blue-900 dark:text-blue-200 mb-2\">\r\n                Résumé du voyage\r\n              </h4>\r\n              <div className=\"space-y-1 text-sm text-blue-800 dark:text-blue-300\">\r\n                {distance && <p>• Distance : {distance} km</p>}\r\n                {duration && <p>• Durée : {duration}</p>}\r\n                {estimatedCost && (\r\n                  <p>\r\n                    • Coût : {estimatedCost}€\r\n                    {transportMode === 'carpool' && selectedCarpoolPartners.length > 0 && (\r\n                      <span> ({calculateCostPerPerson()}€ / personne)</span>\r\n                    )}\r\n                  </p>\r\n                )}\r\n                {transportMode === 'carpool' && selectedCarpoolPartners.length > 0 && (\r\n                  <p>• {selectedCarpoolPartners.length + 1} personne(s) dans le covoiturage</p>\r\n                )}\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <Button variant=\"secondary\" onClick={onClose}>\r\n            Annuler\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleSave}>\r\n            <Car className=\"w-4 h-4 mr-2\" />\r\n            Enregistrer le plan de voyage\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Utensils, AlertCircle, Plus, X } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Card, CardBody } from '@/components/ui/Card';\r\nimport { Visit } from '@/types';\r\n\r\ninterface MealPlanningModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  visit: Visit;\r\n  onSave: (mealPlan: MealPlan) => void;\r\n  hosts?: Array<{ nom: string; }>;\r\n}\r\n\r\nexport interface MealPlan {\r\n  visitId: string;\r\n  meals: Meal[];\r\n  dietaryRestrictions: string[];\r\n  allergies: string[];\r\n  preferences: string[];\r\n  notes?: string;\r\n}\r\n\r\ninterface Meal {\r\n  id: string;\r\n  type: 'breakfast' | 'lunch' | 'dinner' | 'snack';\r\n  time: string;\r\n  location: string;\r\n  host?: string;\r\n  attendees: number;\r\n  menu?: string;\r\n  cost?: number;\r\n}\r\n\r\nconst MEAL_TYPES = [\r\n  { value: 'breakfast' as const, label: 'Petit-déjeuner', icon: '🌅', defaultTime: '08:00' },\r\n  { value: 'lunch' as const, label: 'Déjeuner', icon: '🍽️', defaultTime: '12:30' },\r\n  { value: 'dinner' as const, label: 'Dîner', icon: '🌙', defaultTime: '19:00' },\r\n  { value: 'snack' as const, label: 'Collation', icon: '☕', defaultTime: '15:00' },\r\n];\r\n\r\nconst COMMON_RESTRICTIONS = [\r\n  'Végétarien',\r\n  'Végétalien',\r\n  'Sans gluten',\r\n  'Sans lactose',\r\n  'Halal',\r\n  'Casher',\r\n  'Sans porc',\r\n  'Sans fruits de mer',\r\n];\r\n\r\nconst COMMON_ALLERGIES = [\r\n  'Arachides',\r\n  'Fruits à coque',\r\n  'Lait',\r\n  'Œufs',\r\n  'Poisson',\r\n  'Crustacés',\r\n  'Soja',\r\n  'Blé',\r\n];\r\n\r\nexport const MealPlanningModal: React.FC<MealPlanningModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  visit,\r\n  onSave,\r\n  hosts = []\r\n}) => {\r\n  const [meals, setMeals] = useState<Meal[]>([]);\r\n  const [dietaryRestrictions, setDietaryRestrictions] = useState<string[]>([]);\r\n  const [allergies, setAllergies] = useState<string[]>([]);\r\n  const [preferences] = useState<string[]>([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [customRestriction, setCustomRestriction] = useState('');\r\n  const [customAllergy, setCustomAllergy] = useState('');\r\n\r\n  const addMeal = (type: Meal['type']) => {\r\n    const mealType = MEAL_TYPES.find(m => m.value === type);\r\n    const newMeal: Meal = {\r\n      id: `meal-${Date.now()}`,\r\n      type,\r\n      time: mealType?.defaultTime || '12:00',\r\n      location: '',\r\n      attendees: 1,\r\n    };\r\n    setMeals([...meals, newMeal]);\r\n  };\r\n\r\n  const updateMeal = (id: string, updates: Partial<Meal>) => {\r\n    setMeals(meals.map(meal => \r\n      meal.id === id ? { ...meal, ...updates } : meal\r\n    ));\r\n  };\r\n\r\n  const removeMeal = (id: string) => {\r\n    setMeals(meals.filter(meal => meal.id !== id));\r\n  };\r\n\r\n  const toggleRestriction = (restriction: string) => {\r\n    setDietaryRestrictions(prev =>\r\n      prev.includes(restriction)\r\n        ? prev.filter(r => r !== restriction)\r\n        : [...prev, restriction]\r\n    );\r\n  };\r\n\r\n  const toggleAllergy = (allergy: string) => {\r\n    setAllergies(prev =>\r\n      prev.includes(allergy)\r\n        ? prev.filter(a => a !== allergy)\r\n        : [...prev, allergy]\r\n    );\r\n  };\r\n\r\n  const addCustomRestriction = () => {\r\n    if (customRestriction.trim()) {\r\n      setDietaryRestrictions([...dietaryRestrictions, customRestriction.trim()]);\r\n      setCustomRestriction('');\r\n    }\r\n  };\r\n\r\n  const addCustomAllergy = () => {\r\n    if (customAllergy.trim()) {\r\n      setAllergies([...allergies, customAllergy.trim()]);\r\n      setCustomAllergy('');\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const mealPlan: MealPlan = {\r\n      visitId: visit.visitId,\r\n      meals,\r\n      dietaryRestrictions,\r\n      allergies,\r\n      preferences,\r\n      notes: notes || undefined\r\n    };\r\n\r\n    onSave(mealPlan);\r\n    onClose();\r\n  };\r\n\r\n  const getTotalCost = () => meals.reduce((sum, meal) => sum + (meal.cost || 0), 0);\r\n\r\n  const getMealIcon = (type: Meal['type']) => MEAL_TYPES.find(m => m.value === type)?.icon || '🍽️';\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Planification des repas\"\r\n      size=\"xl\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* En-tête */}\r\n        <div className=\"p-4 bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-lg\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <Utensils className=\"w-5 h-5 text-orange-600\" />\r\n            <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n              {visit.nom}\r\n            </h4>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\r\n              weekday: 'long',\r\n              day: 'numeric',\r\n              month: 'long'\r\n            })}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Restrictions alimentaires */}\r\n        <div className=\"space-y-3\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n            Restrictions alimentaires\r\n          </label>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {COMMON_RESTRICTIONS.map((restriction) => (\r\n              <button\r\n                key={restriction}\r\n                onClick={() => toggleRestriction(restriction)}\r\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\r\n                  dietaryRestrictions.includes(restriction)\r\n                    ? 'bg-orange-500 text-white'\r\n                    : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\r\n                }`}\r\n              >\r\n                {restriction}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              value={customRestriction}\r\n              onChange={(e) => setCustomRestriction(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && addCustomRestriction()}\r\n              placeholder=\"Autre restriction...\"\r\n              className=\"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={addCustomRestriction}>\r\n              <Plus className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Allergies */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <AlertCircle className=\"w-4 h-4 text-red-600\" />\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              Allergies (important !)\r\n            </label>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {COMMON_ALLERGIES.map((allergy) => (\r\n              <button\r\n                key={allergy}\r\n                onClick={() => toggleAllergy(allergy)}\r\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\r\n                  allergies.includes(allergy)\r\n                    ? 'bg-red-500 text-white'\r\n                    : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\r\n                }`}\r\n              >\r\n                {allergy}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              value={customAllergy}\r\n              onChange={(e) => setCustomAllergy(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && addCustomAllergy()}\r\n              placeholder=\"Autre allergie...\"\r\n              className=\"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={addCustomAllergy}>\r\n              <Plus className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Repas planifiés */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              Repas planifiés\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              {MEAL_TYPES.map((type) => (\r\n                <Button\r\n                  key={type.value}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => addMeal(type.value)}\r\n                  title={`Ajouter ${type.label}`}\r\n                >\r\n                  <span className=\"text-lg\">{type.icon}</span>\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {meals.length === 0 ? (\r\n            <div className=\"p-8 text-center bg-gray-50 dark:bg-gray-800 rounded-lg\">\r\n              <Utensils className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Aucun repas planifié. Cliquez sur les icônes ci-dessus pour ajouter un repas.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {meals.map((meal) => (\r\n                <Card key={meal.id}>\r\n                  <CardBody>\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-2xl\">{getMealIcon(meal.type)}</span>\r\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\r\n                            {MEAL_TYPES.find(t => t.value === meal.type)?.label}\r\n                          </span>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => removeMeal(meal.id)}\r\n                          aria-label=\"Supprimer ce repas\"\r\n                          className=\"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded\"\r\n                        >\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-3\">\r\n                        <div>\r\n                          <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                            Heure\r\n                          </label>\r\n                          <input\r\n                            type=\"time\"\r\n                            value={meal.time}\r\n                            onChange={(e) => updateMeal(meal.id, { time: e.target.value })}\r\n                            aria-label=\"Heure du repas\"\r\n                            className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                            Nombre de personnes\r\n                          </label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={meal.attendees}\r\n                            onChange={(e) => updateMeal(meal.id, { attendees: Number(e.target.value) })}\r\n                            min=\"1\"\r\n                            aria-label=\"Nombre de personnes\"\r\n                            className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                          Lieu\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.location}\r\n                          onChange={(e) => updateMeal(meal.id, { location: e.target.value })}\r\n                          placeholder=\"Restaurant, domicile, etc.\"\r\n                          className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                          Hôte / Responsable\r\n                        </label>\r\n                        <select\r\n                          value={meal.host || ''}\r\n                          onChange={(e) => updateMeal(meal.id, { host: e.target.value })}\r\n                          className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                        >\r\n                          <option value=\"\">Sélectionner un hôte...</option>\r\n                          {hosts.map(host => (\r\n                            <option key={host.nom} value={host.nom}>{host.nom}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-3\">\r\n                        <div>\r\n                          <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                            Menu (optionnel)\r\n                          </label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.menu || ''}\r\n                            onChange={(e) => updateMeal(meal.id, { menu: e.target.value })}\r\n                            placeholder=\"Description du menu\"\r\n                            className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n                            Coût estimé (€)\r\n                          </label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={meal.cost || ''}\r\n                            onChange={(e) => updateMeal(meal.id, { cost: e.target.value ? Number(e.target.value) : undefined })}\r\n                            placeholder=\"0.00\"\r\n                            step=\"0.01\"\r\n                            className=\"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardBody>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Notes */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Notes supplémentaires\r\n          </label>\r\n          <textarea\r\n            value={notes}\r\n            onChange={(e) => setNotes(e.target.value)}\r\n            rows={3}\r\n            placeholder=\"Préférences culinaires, informations complémentaires...\"\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n\r\n        {/* Résumé */}\r\n        {(meals.length > 0 || dietaryRestrictions.length > 0 || allergies.length > 0) && (\r\n          <Card className=\"bg-blue-50 dark:bg-blue-900/20\">\r\n            <CardBody>\r\n              <h4 className=\"font-medium text-blue-900 dark:text-blue-200 mb-2\">\r\n                Résumé\r\n              </h4>\r\n              <div className=\"space-y-1 text-sm text-blue-800 dark:text-blue-300\">\r\n                <p>• {meals.length} repas planifié(s)</p>\r\n                {dietaryRestrictions.length > 0 && (\r\n                  <p>• {dietaryRestrictions.length} restriction(s) alimentaire(s)</p>\r\n                )}\r\n                {allergies.length > 0 && (\r\n                  <p className=\"text-red-600 dark:text-red-400 font-medium\">\r\n                    ⚠️ {allergies.length} allergie(s) à prendre en compte\r\n                  </p>\r\n                )}\r\n                {getTotalCost() > 0 && (\r\n                  <p>• Coût total estimé : {getTotalCost().toFixed(2)}€</p>\r\n                )}\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <Button variant=\"secondary\" onClick={onClose}>\r\n            Annuler\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleSave}>\r\n            <Utensils className=\"w-4 h-4 mr-2\" />\r\n            Enregistrer le plan de repas\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from 'react';\r\nimport { Home, User, CheckCircle, XCircle, AlertTriangle, Star, MapPin } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { Card, CardBody } from '@/components/ui/Card';\r\nimport { Visit, Host, Speaker } from '@/types';\r\nimport { useData } from '@/contexts/DataContext';\r\n\r\ninterface AccommodationMatchingModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  visit: Visit;\r\n  speaker?: Speaker;\r\n  onSelectHost: (_host: Host) => void;\r\n}\r\n\r\ninterface HostMatch {\r\n  host: Host;\r\n  score: number;\r\n  compatibility: CompatibilityFactor[];\r\n  warnings: string[];\r\n}\r\n\r\ninterface CompatibilityFactor {\r\n  factor: string;\r\n  score: number;\r\n  positive: boolean;\r\n}\r\n\r\n// Constants for scoring\r\n/* eslint-disable no-magic-numbers */\r\nconst SCORE_WEIGHTS = {\r\n  AVAILABILITY: 40,\r\n  GENDER_COUPLE_COUPLE: 20,\r\n  GENDER_SAME: 15,\r\n  GENDER_PARTIAL: 10,\r\n  CAPACITY_GOOD: 15,\r\n  CAPACITY_LIMITED: 5,\r\n  EQUIPMENT_PARKING: 10,\r\n  EQUIPMENT_ELEVATOR: 5,\r\n  PREFERENCE_PENALTY: 10,\r\n  EXPERIENCE_PER_HOST: 5,\r\n  MAX_EXPERIENCE: 20,\r\n  RECENT_HOST_PENALTY: 10,\r\n  LONG_TIME_AVAILABLE: 10,\r\n  DAYS_RECENT: 30,\r\n  DAYS_LONG_TIME: 180,\r\n  DAYS_IN_MS: 86400000, // 24 * 60 * 60 * 1000\r\n  SCORE_EXCELLENT: 80,\r\n  SCORE_GOOD: 60,\r\n  SCORE_ACCEPTABLE: 40,\r\n  CAPACITY_MATCH: 40,\r\n  PREVIOUS_HOST: 20,\r\n  DISTANCE: 15,\r\n  PETS: 10,\r\n  EXPERIENCE: 5,\r\n  MIN_CAPACITY: 2,\r\n  HOST_CATEGORY: {\r\n    GOLD: 80,\r\n    SILVER: 60,\r\n    BRONZE: 40,\r\n  },\r\n  UI: {\r\n    MIN_HEIGHT: 60,\r\n    MAX_HEIGHT: 180,\r\n    AVATAR_SIZE: 30,\r\n    ITEM_SPACING: 10,\r\n  },\r\n};\r\n/* eslint-enable no-magic-numbers */\r\n\r\nexport const AccommodationMatchingModal: React.FC<AccommodationMatchingModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  visit,\r\n  speaker,\r\n  onSelectHost\r\n}) => {\r\n  const { hosts, visits } = useData();\r\n  const [selectedHost, setSelectedHost] = useState<Host | null>(null);\r\n  const [showOnlyAvailable, setShowOnlyAvailable] = useState(true);\r\n\r\n  // Algorithme de matching intelligent\r\n  const matchedHosts = useMemo(() => {\r\n    const matches: HostMatch[] = [];\r\n\r\n    hosts.forEach(host => {\r\n      let score = 0;\r\n      const compatibility: CompatibilityFactor[] = [];\r\n      const warnings: string[] = [];\r\n      \r\n      // Utilisation des constantes de score\r\n      const { AVAILABILITY } = SCORE_WEIGHTS;\r\n\r\n      // 1. Vérifier la disponibilité\r\n      const isAvailable = !host.unavailableDates?.includes(visit.visitDate);\r\n      if (isAvailable) {\r\n        score += AVAILABILITY; // Utilisation de la constante\r\n        compatibility.push({\r\n          factor: 'Disponible à cette date',\r\n          score: AVAILABILITY,\r\n          positive: true\r\n        });\r\n      } else {\r\n        warnings.push('Indisponible à cette date');\r\n        if (showOnlyAvailable) return; // Exclure si filtre activé\r\n      }\r\n\r\n      // 2. Vérifier le genre (compatibilité)\r\n      if (speaker) {\r\n        if (speaker.gender === 'couple' && host.gender === 'couple') {\r\n          score += SCORE_WEIGHTS.GENDER_COUPLE_COUPLE;\r\n          compatibility.push({\r\n            factor: 'Couple accueille couple',\r\n            score: SCORE_WEIGHTS.GENDER_COUPLE_COUPLE,\r\n            positive: true\r\n          });\r\n        } else if (speaker.gender === host.gender) {\r\n          score += SCORE_WEIGHTS.GENDER_SAME;\r\n          compatibility.push({\r\n            factor: 'Genre compatible',\r\n            score: SCORE_WEIGHTS.GENDER_SAME,\r\n            positive: true\r\n          });\r\n        } else if (speaker.gender === 'couple' || host.gender === 'couple') {\r\n          score += SCORE_WEIGHTS.GENDER_PARTIAL;\r\n          compatibility.push({\r\n            factor: 'Genre partiellement compatible',\r\n            score: SCORE_WEIGHTS.GENDER_PARTIAL,\r\n            positive: true\r\n          });\r\n        }\r\n      }\r\n\r\n      // 3. Capacité d'accueil\r\n      if (host.capacity) {\r\n        if (host.capacity >= SCORE_WEIGHTS.MIN_CAPACITY) {\r\n          score += SCORE_WEIGHTS.CAPACITY_GOOD;\r\n          compatibility.push({\r\n            factor: `Capacité: ${host.capacity} personne(s)`,\r\n            score: SCORE_WEIGHTS.CAPACITY_GOOD,\r\n            positive: true\r\n          });\r\n        } else {\r\n          compatibility.push({\r\n            factor: 'Capacité limitée (1 personne)',\r\n            score: SCORE_WEIGHTS.CAPACITY_LIMITED,\r\n            positive: false\r\n          });\r\n        }\r\n      }\r\n\r\n      // 4. Équipements\r\n      if (host.hasParking) {\r\n        score += SCORE_WEIGHTS.EQUIPMENT_PARKING;\r\n        compatibility.push({\r\n          factor: 'Parking disponible',\r\n          score: SCORE_WEIGHTS.EQUIPMENT_PARKING,\r\n          positive: true\r\n        });\r\n      }\r\n\r\n      if (host.hasElevator) {\r\n        score += SCORE_WEIGHTS.EQUIPMENT_ELEVATOR;\r\n        compatibility.push({\r\n          factor: 'Ascenseur disponible',\r\n          score: SCORE_WEIGHTS.EQUIPMENT_ELEVATOR,\r\n          positive: true\r\n        });\r\n      }\r\n\r\n      // 5. Préférences spéciales\r\n      if (speaker?.isVehiculed && !host.hasParking) {\r\n        warnings.push('Orateur véhiculé mais pas de parking');\r\n        score -= SCORE_WEIGHTS.PREFERENCE_PENALTY;\r\n      }\r\n\r\n      // 6. Animaux\r\n      if (host.hasPets) {\r\n        compatibility.push({\r\n          factor: 'Animaux de compagnie',\r\n          score: 0,\r\n          positive: false\r\n        });\r\n        warnings.push('Présence d\\'animaux');\r\n      }\r\n\r\n\r\n      // 8. Historique d'accueil\r\n      const previousAccommodations = visits.filter(v =>\r\n        v.host === host.nom &&\r\n        v.status === 'completed'\r\n      );\r\n\r\n      if (previousAccommodations.length > 0) {\r\n        const experienceScore = Math.min(previousAccommodations.length * SCORE_WEIGHTS.EXPERIENCE_PER_HOST, SCORE_WEIGHTS.MAX_EXPERIENCE);\r\n        score += experienceScore;\r\n        compatibility.push({\r\n          factor: `${previousAccommodations.length} accueil(s) réussi(s)`,\r\n          score: experienceScore,\r\n          positive: true\r\n        });\r\n      }\r\n\r\n      // 9. Dernière fois qu'il a accueilli\r\n      const lastAccommodation = previousAccommodations\r\n        .sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime())[0];\r\n\r\n      if (lastAccommodation) {\r\n        const daysSince = Math.floor(\r\n          (new Date(visit.visitDate).getTime() - new Date(lastAccommodation.visitDate).getTime()) /\r\n          SCORE_WEIGHTS.DAYS_IN_MS\r\n        );\r\n\r\n        if (daysSince < SCORE_WEIGHTS.DAYS_RECENT) {\r\n          warnings.push('A accueilli récemment');\r\n          score -= SCORE_WEIGHTS.RECENT_HOST_PENALTY;\r\n        } else if (daysSince > SCORE_WEIGHTS.DAYS_LONG_TIME) {\r\n          score += SCORE_WEIGHTS.LONG_TIME_AVAILABLE;\r\n          compatibility.push({\r\n            factor: 'Disponible depuis longtemps',\r\n            score: SCORE_WEIGHTS.LONG_TIME_AVAILABLE,\r\n            positive: true\r\n          });\r\n        }\r\n      }\r\n\r\n      matches.push({\r\n        host,\r\n        score: Math.max(0, score),\r\n        compatibility,\r\n        warnings\r\n      });\r\n    });\r\n\r\n    return matches.sort((a, b) => b.score - a.score);\r\n  }, [hosts, visits, visit, speaker, showOnlyAvailable]);\r\n\r\n  const handleSelectHost = () => {\r\n    if (selectedHost) {\r\n      onSelectHost(selectedHost);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= SCORE_WEIGHTS.SCORE_EXCELLENT) return 'text-green-600 bg-green-100 dark:bg-green-900/20';\r\n    if (score >= SCORE_WEIGHTS.SCORE_GOOD) return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20';\r\n    if (score >= SCORE_WEIGHTS.SCORE_ACCEPTABLE) return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20';\r\n    return 'text-red-600 bg-red-100 dark:bg-red-900/20';\r\n  };\r\n\r\n  const getScoreLabel = (score: number) => {\r\n    if (score >= SCORE_WEIGHTS.SCORE_EXCELLENT) return 'Excellent match';\r\n    if (score >= SCORE_WEIGHTS.SCORE_GOOD) return 'Bon match';\r\n    if (score >= SCORE_WEIGHTS.SCORE_ACCEPTABLE) return 'Match acceptable';\r\n    return 'Match faible';\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Matching intelligent hôte/orateur\"\r\n      size=\"xl\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Informations de la visite */}\r\n        <div className=\"p-4 bg-gradient-to-r from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20 rounded-lg\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <User className=\"w-5 h-5 text-primary-600\" />\r\n            <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n              {visit.nom}\r\n            </h4>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\r\n              weekday: 'long',\r\n              day: 'numeric',\r\n              month: 'long'\r\n            })}\r\n          </p>\r\n          {speaker && (\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <Badge variant=\"default\">{speaker.gender === 'male' ? 'Homme' : speaker.gender === 'female' ? 'Femme' : 'Couple'}</Badge>\r\n              {speaker.isVehiculed && <Badge variant=\"default\">Véhiculé</Badge>}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Filtre */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={showOnlyAvailable}\r\n              onChange={(e) => setShowOnlyAvailable(e.target.checked)}\r\n              className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\r\n            />\r\n            <span className=\"text-sm text-gray-700 dark:text-gray-300\">\r\n              Afficher uniquement les hôtes disponibles\r\n            </span>\r\n          </label>\r\n          <Badge variant=\"default\">\r\n            {matchedHosts.length} hôte(s) trouvé(s)\r\n          </Badge>\r\n        </div>\r\n\r\n        {/* Liste des hôtes */}\r\n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n          {matchedHosts.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <Home className=\"w-16 h-16 mx-auto mb-4 text-gray-400\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                Aucun hôte trouvé\r\n              </h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                Essayez de désactiver le filtre de disponibilité\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            matchedHosts.map((match) => (\r\n              <Card\r\n                key={match.host.nom}\r\n                hoverable\r\n                className={`cursor-pointer transition-all ${\r\n                  selectedHost?.nom === match.host.nom\r\n                    ? 'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20'\r\n                    : ''\r\n                }`}\r\n                onClick={() => setSelectedHost(match.host)}\r\n              >\r\n                <CardBody>\r\n                  <div className=\"space-y-3\">\r\n                    {/* En-tête */}\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center text-purple-700 dark:text-purple-300 font-bold text-lg\">\r\n                          {match.host.nom.charAt(0).toUpperCase()}\r\n                        </div>\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                            {match.host.nom}\r\n                          </h4>\r\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                            {match.host.address && (\r\n                              <>\r\n                                <MapPin className=\"w-3 h-3\" />\r\n                                {match.host.address}\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className={`inline-flex items-center gap-2 px-3 py-1 rounded-full ${getScoreColor(match.score)}`}>\r\n                          <Star className=\"w-4 h-4\" />\r\n                          <span className=\"text-lg font-bold\">{match.score}</span>\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                          {getScoreLabel(match.score)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Facteurs de compatibilité */}\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {match.compatibility.map((factor, idx) => (\r\n                        <div\r\n                          key={idx}\r\n                          className={`flex items-center gap-1 px-2 py-1 rounded text-xs ${\r\n                            factor.positive\r\n                              ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300'\r\n                              : 'bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300'\r\n                          }`}\r\n                        >\r\n                          {factor.positive ? (\r\n                            <CheckCircle className=\"w-3 h-3\" />\r\n                          ) : (\r\n                            <AlertTriangle className=\"w-3 h-3\" />\r\n                          )}\r\n                          {factor.factor}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Avertissements */}\r\n                    {match.warnings.length > 0 && (\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        {match.warnings.map((warning, idx) => (\r\n                          <div\r\n                            key={idx}\r\n                            className=\"flex items-center gap-1 px-2 py-1 rounded text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-300\"\r\n                          >\r\n                            <XCircle className=\"w-3 h-3\" />\r\n                            {warning}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Informations supplémentaires */}\r\n                    {match.host.notes && (\r\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400 italic\">\r\n                        \"{match.host.notes}\"\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Informations sur l'hôte sélectionné */}\r\n        {selectedHost && (\r\n          <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <Home className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\r\n              <div className=\"text-sm text-blue-800 dark:text-blue-300\">\r\n                <strong>Hôte sélectionné :</strong> {selectedHost.nom}\r\n                {selectedHost.telephone && (\r\n                  <div className=\"mt-1\">Téléphone : {selectedHost.telephone}</div>\r\n                )}\r\n                {selectedHost.email && (\r\n                  <div className=\"mt-1\">Email : {selectedHost.email}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <Button variant=\"secondary\" onClick={onClose}>\r\n            Annuler\r\n          </Button>\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={handleSelectHost}\r\n            disabled={!selectedHost}\r\n          >\r\n            <Home className=\"w-4 h-4 mr-2\" />\r\n            Sélectionner cet hôte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"react\")):\"function\"==typeof define&&define.amd?define(\"lib\",[\"react\"],t):\"object\"==typeof exports?exports.lib=t(require(\"react\")):e.lib=t(e.react)}(\"undefined\"!=typeof self?self:this,function(e){return function(){\"use strict\";var t={155:function(t){t.exports=e}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};n.r(r),n.d(r,{useReactToPrint:function(){return g}});var s=n(155);const i=\"printWindow\";function l({level:e=\"error\",messages:t,suppressErrors:o=!1}){o||(\"error\"===e?console.error(t):\"warning\"===e?console.warn(t):console.debug(t))}function a(e,t){if(t||!e){const e=document.getElementById(i);e&&document.body.removeChild(e)}}function c(e){return e instanceof Error?e:new Error(\"Unknown Error\")}function d(e,t){const{documentTitle:o,onAfterPrint:n,onPrintError:r,preserveAfterPrint:s,print:i,suppressErrors:d}=t;setTimeout(()=>{var t,u;if(e.contentWindow){function p(){null==n||n(),a(s)}if(e.contentWindow.focus(),i)i(e).then(p).catch(e=>{r?r(\"print\",c(e)):l({messages:[\"An error was thrown by the specified `print` function\"],suppressErrors:d})});else{if(e.contentWindow.print){const f=null!==(u=null===(t=e.contentDocument)||void 0===t?void 0:t.title)&&void 0!==u?u:\"\",h=e.ownerDocument.title;o&&(e.ownerDocument.title=o,e.contentDocument&&(e.contentDocument.title=o)),e.contentWindow.print(),o&&(e.ownerDocument.title=h,e.contentDocument&&(e.contentDocument.title=f))}else l({messages:[\"Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes.\"],suppressErrors:d});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{var t,o;return(null!==(o=null!==(t=navigator.userAgent)&&void 0!==t?t:navigator.vendor)&&void 0!==o?o:\"opera\"in window&&window.opera).match(e)})?setTimeout(p,500):p()}}else l({messages:[\"Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/\"],suppressErrors:d})},500)}function u(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let n=o.nextNode();for(;n;)t.push(n),n=o.nextNode();return t}function p(e,t,o){const n=u(e),r=u(t);if(n.length===r.length)for(let e=0;e<n.length;e++){const t=n[e],s=r[e],i=t.shadowRoot;if(null!==i){const e=s.attachShadow({mode:i.mode});e.innerHTML=i.innerHTML,p(i,e,o)}}else l({messages:[\"When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.\",e,t],suppressErrors:o})}const f='\\n    @page {\\n        /* Remove browser default header (title) and footer (url) */\\n        margin: 0;\\n    }\\n    @media print {\\n        body {\\n            /* Tell browsers to print background colors */\\n            color-adjust: exact; /* Firefox. This is an older version of \"print-color-adjust\" */\\n            print-color-adjust: exact; /* Firefox/Safari */\\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\\n        }\\n    }\\n';function h(e,t,o,n){var r,s,i,a,u;const{contentNode:h,clonedContentNode:g,clonedImgNodes:m,clonedVideoNodes:b,numResourcesToLoad:y,originalCanvasNodes:v}=o,{bodyClass:w,fonts:E,ignoreGlobalStyles:A,pageStyle:P,nonce:T,suppressErrors:S,copyShadowRoots:x}=n;e.onload=null;const k=null!==(r=e.contentDocument)&&void 0!==r?r:null===(s=e.contentWindow)||void 0===s?void 0:s.document;if(k){const o=k.body.appendChild(g);x&&p(h,o,!!S),E&&((null===(i=e.contentDocument)||void 0===i?void 0:i.fonts)&&(null===(a=e.contentWindow)||void 0===a?void 0:a.FontFace)?E.forEach(o=>{const n=new FontFace(o.family,o.source,{weight:o.weight,style:o.style});e.contentDocument.fonts.add(n),n.loaded.then(()=>{t(n)}).catch(e=>{t(n,[\"Failed loading the font:\",n,\"Load error:\",c(e)])})}):(E.forEach(e=>{t(e)}),l({messages:['\"react-to-print\" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:S})));const n=null!=P?P:f,r=k.createElement(\"style\");T&&(r.setAttribute(\"nonce\",T),k.head.setAttribute(\"nonce\",T)),r.appendChild(k.createTextNode(n)),k.head.appendChild(r),w&&k.body.classList.add(...w.split(\" \"));const s=k.querySelectorAll(\"canvas\");for(let e=0;e<v.length;++e){const t=v[e],o=s[e];if(void 0===o){l({messages:[\"A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.\",t],suppressErrors:S});continue}const n=o.getContext(\"2d\");n&&n.drawImage(t,0,0)}for(let e=0;e<m.length;e++){const o=m[e],n=o.getAttribute(\"src\");if(n){const e=new Image;e.onload=()=>{t(o)},e.onerror=(e,n,r,s,i)=>{t(o,[\"Error loading <img>\",o,\"Error\",i])},e.src=n}else t(o,['Found an <img> tag with an empty \"src\" attribute. This prevents pre-loading it.',o])}for(let e=0;e<b.length;e++){const o=b[e];o.preload=\"auto\";const n=o.getAttribute(\"poster\");if(n){const e=new Image;e.onload=()=>{t(o)},e.onerror=(e,r,s,i,l)=>{t(o,[\"Error loading video poster\",n,\"for video\",o,\"Error:\",l])},e.src=n}else o.readyState>=2?t(o):o.src?(o.onloadeddata=()=>{t(o)},o.onerror=(e,n,r,s,i)=>{t(o,[\"Error loading video\",o,\"Error\",i])},o.onstalled=()=>{t(o,[\"Loading video stalled, skipping\",o])}):t(o,[\"Error loading video, `src` is empty\",o])}const d=\"select\",y=h.querySelectorAll(d),C=k.querySelectorAll(d);for(let e=0;e<y.length;e++)C[e].value=y[e].value;if(!A){const e=document.querySelectorAll(\"style, link[rel~='stylesheet'], link[as='style']\");for(let o=0,n=e.length;o<n;++o){const n=e[o];if(\"style\"===n.tagName.toLowerCase()){const e=k.createElement(n.tagName),t=n.sheet;if(t){let r=\"\";try{const e=t.cssRules.length;for(let o=0;o<e;++o)\"string\"==typeof t.cssRules[o].cssText&&(r+=`${t.cssRules[o].cssText}\\r\\n`)}catch(e){l({messages:[\"A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.\",n,`Original error: ${c(e).message}`],level:\"warning\"})}e.setAttribute(\"id\",`react-to-print-${o}`),T&&e.setAttribute(\"nonce\",T),e.appendChild(k.createTextNode(r)),k.head.appendChild(e)}}else if(n.getAttribute(\"href\"))if(n.hasAttribute(\"disabled\"))l({messages:[\"`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:\",n],level:\"warning\"}),t(n);else{const e=k.createElement(n.tagName);for(let t=0,o=n.attributes.length;t<o;++t){const o=n.attributes[t];o&&e.setAttribute(o.nodeName,null!==(u=o.nodeValue)&&void 0!==u?u:\"\")}e.onload=()=>{t(e)},e.onerror=(o,n,r,s,i)=>{t(e,[\"Failed to load\",e,\"Error:\",i])},T&&e.setAttribute(\"nonce\",T),k.head.appendChild(e)}else l({messages:[\"`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:\",n],level:\"warning\"}),t(n)}}}0===y&&d(e,n)}function g({bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:n,fonts:r,ignoreGlobalStyles:u,nonce:p,onAfterPrint:f,onBeforePrint:g,onPrintError:m,pageStyle:b,preserveAfterPrint:y,print:v,printIframeProps:w,suppressErrors:E}){const A=(0,s.useCallback)(s=>{function A(){const a={bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:n,fonts:r,ignoreGlobalStyles:u,nonce:p,onAfterPrint:f,onBeforePrint:g,onPrintError:m,pageStyle:b,preserveAfterPrint:y,print:v,printIframeProps:w,suppressErrors:E},c=function(e){const t=document.createElement(\"iframe\");return t.width=`${document.documentElement.clientWidth}px`,t.height=`${document.documentElement.clientHeight}px`,t.style.position=\"absolute\",t.style.top=`-${document.documentElement.clientHeight+100}px`,t.style.left=`-${document.documentElement.clientWidth+100}px`,t.id=i,t.srcdoc=\"<!DOCTYPE html>\",e&&(e.allow&&(t.allow=e.allow),void 0!==e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),void 0!==e.sandbox&&(t.sandbox=e.sandbox)),t}(w),A=function(e,t){const{contentRef:o,fonts:n,ignoreGlobalStyles:r,suppressErrors:s}=t,i=function({contentRef:e,optionalContent:t,suppressErrors:o}){return t&&\"function\"==typeof t?(e&&l({level:\"warning\",messages:['\"react-to-print\" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),t()):e?e.current:void l({messages:['\"react-to-print\" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:o})}({contentRef:o,optionalContent:e,suppressErrors:s});if(!i)return;const a=i.cloneNode(!0),c=document.querySelectorAll(\"link[rel~='stylesheet'], link[as='style']\"),d=a.querySelectorAll(\"img\"),u=a.querySelectorAll(\"video\"),p=n?n.length:0;return{contentNode:i,clonedContentNode:a,clonedImgNodes:d,clonedVideoNodes:u,numResourcesToLoad:(r?0:c.length)+d.length+u.length+p,originalCanvasNodes:i.querySelectorAll(\"canvas\")}}(s,a);if(!A)return void l({messages:[\"There is nothing to print\"],suppressErrors:E});const P=function(e,t,o){const{suppressErrors:n}=e,r=[],s=[];return function(i,a){r.includes(i)?l({level:\"debug\",messages:[\"Tried to mark a resource that has already been handled\",i],suppressErrors:n}):(a?(l({messages:['\"react-to-print\" was unable to load a resource but will continue attempting to print the page',...a],suppressErrors:n}),s.push(i)):r.push(i),r.length+s.length===t&&d(o,e))}}(a,A.numResourcesToLoad,c);!function(e,t,o,n){e.onload=()=>{h(e,t,o,n)},document.body.appendChild(e)}(c,P,A,a)}a(y,!0),g?g().then(()=>{A()}).catch(e=>{null==m||m(\"onBeforePrint\",c(e))}):A()},[e,t,o,n,r,u,p,f,g,m,b,y,v,E]);return A}return r}()});","import React, { useRef } from 'react';\r\nimport { Visit, Speaker, Host } from '@/types';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\nimport { MapPin, Phone, User, Calendar, Truck, Hotel, CheckSquare, Printer } from 'lucide-react';\r\nimport { Button } from '@/components/ui/Button';\r\n\r\nimport { useReactToPrint } from 'react-to-print';\r\n\r\ninterface RoadmapViewProps {\r\n  visit: Visit;\r\n  speaker?: Speaker;\r\n  host?: Host;\r\n}\r\n\r\nexport const RoadmapView: React.FC<RoadmapViewProps> = ({ visit, speaker, host }) => {\r\n  const componentRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handlePrint = useReactToPrint({\r\n    content: () => componentRef.current,\r\n    documentTitle: `Feuille_de_route_${visit.nom}_${visit.visitDate}`,\r\n  } as any);\r\n\r\n  const formatDate = (dateString: string) => {\r\n    try {\r\n      return format(parseISO(dateString), 'EEEE d MMMM yyyy', { locale: fr });\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-end no-print\">\r\n        <Button onClick={handlePrint} leftIcon={<Printer className=\"w-4 h-4\" />}>\r\n          Imprimer la feuille de route\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Printable Content */}\r\n      <div ref={componentRef} className=\"bg-white p-8 max-w-[210mm] mx-auto min-h-[297mm] shadow-sm print:shadow-none print:w-full print:max-w-none\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"border-b-2 border-gray-800 pb-6 mb-8 text-center\">\r\n          <h1 className=\"text-3xl font-bold uppercase tracking-wider mb-2 text-gray-900\">Feuille de Route</h1>\r\n          <p className=\"text-xl text-gray-600\">{visit.congregation}</p>\r\n          <div className=\"mt-4 inline-flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-lg\">\r\n            <Calendar className=\"w-5 h-5\" />\r\n            <span className=\"font-semibold text-lg\">{formatDate(visit.visitDate)}</span>\r\n            <span className=\"text-gray-400 mx-2\">|</span>\r\n            <span className=\"font-semibold\">{visit.visitTime}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 print:grid-cols-2 print:gap-8\">\r\n          \r\n          {/* Section 1: Orateur & Discours */}\r\n          <section className=\"space-y-4\">\r\n            <h2 className=\"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black\">\r\n              <User className=\"w-5 h-5\" /> Orateur & Discours\r\n            </h2>\r\n            <div className=\"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200\">\r\n               <div className=\"font-semibold text-lg mb-1\">{visit.nom}</div>\r\n               <div className=\"text-gray-600 mb-2\">{speaker?.email || 'Email non renseigné'}</div>\r\n               <div className=\"text-gray-600 mb-4\">{speaker?.telephone || 'Tel non renseigné'}</div>\r\n               \r\n               <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                  <div className=\"text-sm text-gray-500 uppercase font-semibold\">Discours</div>\r\n                  <div className=\"font-medium\">N°{visit.talkNoOrType || 'Non défini'}</div>\r\n                  {visit.talkTheme && <div className=\"text-sm text-gray-600 mt-1\">{visit.talkTheme}</div>}\r\n               </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Section 2: Repas */}\r\n          {visit.meals && (\r\n            <section className=\"space-y-4\">\r\n              <h2 className=\"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black\">\r\n                <Hotel className=\"w-5 h-5\" /> Repas\r\n              </h2>\r\n              <div className=\"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200\">\r\n                <div className=\"text-gray-700\">{visit.meals}</div>\r\n              </div>\r\n            </section>\r\n          )}\r\n\r\n          {/* Section 3: Hébergement */}\r\n          {(host || visit.logistics?.accommodation?.name) && (\r\n            <section className=\"space-y-4\">\r\n              <h2 className=\"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black\">\r\n                <Hotel className=\"w-5 h-5\" /> Hébergement\r\n              </h2>\r\n              <div className=\"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200\">\r\n                {(host && visit.logistics?.accommodation?.type !== 'hotel') ? (\r\n                  <>\r\n                    <div className=\"font-semibold text-lg mb-1\">{host.nom}</div>\r\n                    <div className=\"flex items-start gap-2 text-gray-600 mb-2\">\r\n                      <MapPin className=\"w-4 h-4 mt-1 flex-shrink-0\" />\r\n                      <span>{host.address}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-gray-600 mb-2\">\r\n                      <Phone className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <span>{host.telephone}</span>\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-500 mt-2\">\r\n                      {host.notes && <p className=\"italic\">\"{host.notes}\"</p>}\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"font-semibold text-lg mb-1\">{visit.logistics?.accommodation?.name}</div>\r\n                    <div className=\"flex items-start gap-2 text-gray-600 mb-2\">\r\n                      <MapPin className=\"w-4 h-4 mt-1 flex-shrink-0\" />\r\n                      <span>{visit.logistics?.accommodation?.address || 'Adresse non renseignée'}</span>\r\n                    </div>\r\n                    {visit.logistics?.accommodation?.bookingReference && (\r\n                      <div className=\"text-sm text-gray-600 mb-2\">\r\n                        <strong>Référence:</strong> {visit.logistics.accommodation.bookingReference}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-sm text-gray-500 mt-2\">\r\n                      {visit.logistics?.accommodation?.notes && <p className=\"italic\">\"{visit.logistics.accommodation.notes}\"</p>}\r\n                    </div>\r\n                  </>\r\n                )}\r\n                \r\n                {visit.logistics?.accommodation && (\r\n                   <div className=\"mt-4 pt-4 border-t border-gray-200 text-sm grid grid-cols-2 gap-2\">\r\n                      <div>\r\n                        <span className=\"text-gray-500 block\">Check-in</span>\r\n                        <span className=\"font-medium\">\r\n                          {visit.logistics.accommodation.checkIn ? format(parseISO(visit.logistics.accommodation.checkIn), 'dd/MM HH:mm') : '-'}\r\n                        </span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-500 block\">Check-out</span>\r\n                        <span className=\"font-medium\">\r\n                          {visit.logistics.accommodation.checkOut ? format(parseISO(visit.logistics.accommodation.checkOut), 'dd/MM HH:mm') : '-'}\r\n                        </span>\r\n                      </div>\r\n                   </div>\r\n                )}\r\n              </div>\r\n            </section>\r\n          )}\r\n\r\n          {/* Section 4: Itinéraire */}\r\n          {visit.logistics?.itinerary && (\r\n             <section className=\"space-y-4\">\r\n              <h2 className=\"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black\">\r\n                <Truck className=\"w-5 h-5\" /> Trajet\r\n              </h2>\r\n              <div className=\"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200\">\r\n                 <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n                    <div>\r\n                       <div className=\"text-sm text-gray-500\">Mode</div>\r\n                       <div className=\"font-medium capitalize\">{visit.logistics.itinerary.transportMode}</div>\r\n                    </div>\r\n                    <div>\r\n                       <div className=\"text-sm text-gray-500\">Durée estimée</div>\r\n                       <div className=\"font-medium\">{visit.logistics.itinerary.duration || '-'}</div>\r\n                    </div>\r\n                 </div>\r\n                 {visit.logistics.itinerary.meetingPoint && (\r\n                    <div className=\"mb-2\">\r\n                       <div className=\"text-sm text-gray-500\">Point de RDV</div>\r\n                       <div className=\"font-medium\">{visit.logistics.itinerary.meetingPoint}</div>\r\n                    </div>\r\n                 )}\r\n              </div>\r\n             </section>\r\n          )}\r\n\r\n          {/* Section 5: Checklist Importante */}\r\n          {visit.logistics?.checklist && visit.logistics.checklist.length > 0 && (\r\n             <section className=\"space-y-4\">\r\n              <h2 className=\"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black\">\r\n                <CheckSquare className=\"w-5 h-5\" /> À ne pas oublier\r\n              </h2>\r\n              <div className=\"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200\">\r\n                <ul className=\"space-y-2\">\r\n                   {visit.logistics.checklist\r\n                      .filter(item => !item.isCompleted) // Only show what is LEFT to do, or remove filter to show all\r\n                      .map(item => (\r\n                      <li key={item.id} className=\"flex items-center gap-3\">\r\n                         <div className=\"w-4 h-4 border-2 border-black rounded-sm print:block\" />\r\n                         <span>{item.label}</span>\r\n                      </li>\r\n                   ))}\r\n                   {visit.logistics.checklist.every(i => i.isCompleted) && (\r\n                      <li className=\"text-green-600 italic\">Toutes les tâches logistiques sont complétées.</li>\r\n                   )}\r\n                </ul>\r\n              </div>\r\n             </section>\r\n          )}\r\n\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-16 text-center text-sm text-gray-400 border-t pt-8 print:mt-auto print:absolute print:bottom-8 print:left-0 print:right-0\">\r\n           <p>Généré par KBV2 Manager - {new Date().toLocaleDateString()}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { useConfirm } from '@/contexts/ConfirmContext';\r\nimport { Visit, Expense, MessageType, Accommodation } from '@/types';\r\nimport { Edit2, Trash2, MessageSquare, CheckCircle, XCircle, Star, CreditCard, Truck, Utensils, Home } from 'lucide-react';\r\nimport { ExpenseForm } from '@/components/expenses/ExpenseForm';\r\nimport { ExpenseList } from '@/components/expenses/ExpenseList';\r\nimport { LogisticsManager } from '@/components/logistics/LogisticsManager';\r\nimport { TravelCoordinationModal, MealPlanningModal, AccommodationMatchingModal } from '@/components/modals';\r\nimport { RoadmapView } from '@/components/reports/RoadmapView';\r\nimport { MessageGeneratorModal } from '@/components/messages/MessageGeneratorModal';\r\nimport { FeedbackFormModal } from '@/components/feedback/FeedbackFormModal';\r\nimport { generateUUID } from '@/utils/uuid';\r\n\r\ninterface VisitActionModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  visit: Visit | null;\r\n  action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics';\r\n}\r\n\r\nexport const VisitActionModal: React.FC<VisitActionModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  visit,\r\n  action\r\n}) => {\r\n  const { updateVisit, deleteVisit, completeVisit, speakers, hosts } = useData();\r\n  const { addToast } = useToast();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [formData, setFormData] = useState<Partial<Visit>>({});\r\n\r\n  // Expenses Logic\r\n  const [isAddingExpense, setIsAddingExpense] = useState(false);\r\n  const [editingExpense, setEditingExpense] = useState<Expense | undefined>(undefined);\r\n\r\n  // Logistics Logic\r\n  const [_activeTab, _setActiveTab] = useState('accommodation');\r\n  const [_isTravelModalOpen, _setIsTravelModalOpen] = useState(false);\r\n  const [_isMealModalOpen, _setIsMealModalOpen] = useState(false);\r\n  const [_isAccommodationModalOpen, _setIsAccommodationModalOpen] = useState(false);\r\n\r\n  // Message Generator Logic\r\n  const [generatorParams, setGeneratorParams] = useState<{ isOpen: boolean; type: MessageType }>({\r\n    isOpen: false,\r\n    type: 'confirmation'\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (visit) {\r\n      setFormData(visit);\r\n    }\r\n  }, [visit]);\r\n\r\n  if (!visit) return null;\r\n\r\n  const handleSave = async () => {\r\n    if (!formData) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await updateVisit({ ...visit, ...formData });\r\n      addToast('Visite mise à jour', 'success');\r\n      onClose();\r\n    } catch (error) {\r\n      addToast('Erreur lors de la mise à jour', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const { confirm } = useConfirm();\r\n\r\n  const handleDelete = async () => {\r\n    const userConfirmed = await confirm({\r\n      title: 'Supprimer la visite',\r\n      message: 'Êtes-vous sûr de vouloir supprimer cette visite ?',\r\n      confirmText: 'Supprimer',\r\n      confirmVariant: 'danger',\r\n      cancelText: 'Annuler'\r\n    });\r\n\r\n    if (!userConfirmed) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await deleteVisit(visit.visitId);\r\n      addToast('Visite supprimée', 'success');\r\n      onClose();\r\n    } catch (error) {\r\n      addToast('Erreur lors de la suppression', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (newStatus: string) => {\r\n    setIsLoading(true);\r\n    try {\r\n      if (newStatus === 'completed') {\r\n        // Utiliser completeVisit pour marquer comme terminé et archiver\r\n        await completeVisit(visit);\r\n        addToast('Visite terminée et archivée', 'success');\r\n      } else {\r\n        // Pour les autres statuts, utiliser updateVisit normalement\r\n        await updateVisit({ ...visit, status: newStatus as any });\r\n        addToast('Statut mis à jour', 'success');\r\n      }\r\n      onClose();\r\n    } catch (error) {\r\n      addToast('Erreur lors de la mise à jour', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Message Generator Logic\r\n\r\n\r\n  const handleFeedbackSubmit = async (feedbackData: any) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const newFeedback = {\r\n        ...feedbackData,\r\n        id: generateUUID(),\r\n        visitId: visit.visitId,\r\n        submittedBy: 'currentUser',\r\n        submittedAt: new Date().toISOString()\r\n      };\r\n      await updateVisit({ ...visit, visitFeedback: newFeedback });\r\n      addToast('Bilan enregistré avec succès', 'success');\r\n      onClose();\r\n    } catch (error) {\r\n      addToast('Erreur lors de l\\'enregistrement du bilan', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveExpense = async (expenseData: Omit<Expense, 'id'>) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const currentExpenses = visit.expenses || [];\r\n      let newExpenses: Expense[];\r\n\r\n      if (editingExpense) {\r\n        newExpenses = currentExpenses.map(e =>\r\n          e.id === editingExpense.id ? { ...expenseData, id: editingExpense.id } : e\r\n        );\r\n      } else {\r\n        newExpenses = [...currentExpenses, { ...expenseData, id: generateUUID() }];\r\n      }\r\n\r\n      const updatedVisit = { ...visit, expenses: newExpenses };\r\n      await updateVisit(updatedVisit);\r\n      setFormData(updatedVisit);\r\n      addToast(editingExpense ? 'Dépense modifiée' : 'Dépense ajoutée', 'success');\r\n      setIsAddingExpense(false);\r\n      setEditingExpense(undefined);\r\n    } catch (error) {\r\n      addToast('Erreur lors de la sauvegarde de la dépense', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteExpense = async (expenseId: string) => {\r\n    const { confirm: confirmDelete } = useConfirm();\r\n    const userConfirmed = await confirmDelete({\r\n      title: 'Supprimer la dépense',\r\n      message: 'Voulez-vous vraiment supprimer cette dépense ?',\r\n      confirmText: 'Supprimer',\r\n      confirmVariant: 'danger',\r\n      cancelText: 'Annuler'\r\n    });\r\n\r\n    if (!userConfirmed) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const newExpenses = (visit.expenses || []).filter(e => e.id !== expenseId);\r\n      const updatedVisit = { ...visit, expenses: newExpenses };\r\n      await updateVisit(updatedVisit);\r\n      setFormData(updatedVisit);\r\n      addToast('Dépense supprimée', 'success');\r\n    } catch (error) {\r\n      addToast('Erreur lors de la suppression', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getModalContent = () => {\r\n    switch (action) {\r\n      case 'edit':\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <Edit2 className=\"w-5 h-5\" />\r\n              Modifier la visite\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <Input\r\n                label=\"Date\"\r\n                type=\"date\"\r\n                value={formData.visitDate || ''}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, visitDate: e.target.value }))}\r\n              />\r\n              <Input\r\n                label=\"Heure\"\r\n                type=\"time\"\r\n                value={formData.visitTime || ''}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, visitTime: e.target.value }))}\r\n              />\r\n              <Input\r\n                label=\"N° Discours\"\r\n                value={formData.talkNoOrType || ''}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, talkNoOrType: e.target.value }))}\r\n                placeholder=\"Ex: 185\"\r\n              />\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Contact d'accueil\r\n                </label>\r\n                <select\r\n                  value={formData.host || ''}\r\n                  onChange={(e) => {\r\n                    const { value } = e.target;\r\n                    const selectedHost = hosts.find(h => h.nom === value);\r\n\r\n                    setFormData(prev => {\r\n                      const currentLogistics = prev.logistics || {};\r\n                      const currentAccommodation = currentLogistics.accommodation || {};\r\n\r\n                      const newAccommodation = { ...currentAccommodation } as Partial<Accommodation>;\r\n                      let newAddress = prev.accommodation;\r\n\r\n                      if (value === 'Hôtel') {\r\n                        newAccommodation.type = 'hotel';\r\n                        // Keep existing booking ref etc, but maybe clear name if it was a host's name\r\n                        if (newAccommodation.type !== 'hotel') {\r\n                          // If switching TO hotel, maybe clear name/address?\r\n                          // Actually, let's just set type. User can fill details in Logistics.\r\n                        }\r\n                        newAddress = ''; // Clear main address field as it's likely a host address\r\n                      } else if (selectedHost) {\r\n                        newAccommodation.type = 'host';\r\n                        newAccommodation.name = selectedHost.nom;\r\n                        newAccommodation.address = selectedHost.address;\r\n                        newAddress = selectedHost.address || '';\r\n                      } else if (value === 'Pas besoin') {\r\n                        // Reset accommodation when no host is needed\r\n                        newAccommodation.type = 'other';\r\n                        newAccommodation.name = '';\r\n                        newAccommodation.address = '';\r\n                        newAddress = '';\r\n                      }\r\n\r\n                      return {\r\n                        ...prev,\r\n                        host: value,\r\n                        accommodation: newAddress,\r\n                        logistics: {\r\n                          ...currentLogistics,\r\n                          accommodation: newAccommodation as Accommodation\r\n                        }\r\n                      };\r\n                    });\r\n                  }}\r\n                  title=\"Sélectionner un hôte\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"\">Sélectionner un hôte...</option>\r\n                  <option value=\"Pas besoin\">Pas besoin</option>\r\n                  <option value=\"Hôtel\">Hôtel</option>\r\n                  {hosts.map(host => (\r\n                    <option key={host.nom} value={host.nom}>{host.nom}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <Input\r\n                label=\"Nombre d'accompagnateurs\"\r\n                type=\"number\"\r\n                min={0}\r\n                max={10}\r\n                value={formData.accompanyingPersons || 0}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, accompanyingPersons: parseInt(e.target.value, 10) || 0 }))}\r\n                placeholder=\"0\"\r\n              />\r\n            </div>\r\n            <Input\r\n              label=\"Titre du discours\"\r\n              value={formData.talkTheme || ''}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, talkTheme: e.target.value }))}\r\n              placeholder=\"Ex: Nega iluzon di mundu...\"\r\n            />\r\n\r\n            {/* Section Statut */}\r\n            <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n                Statut de la visite\r\n              </label>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Button\r\n                  variant={visit.status === 'pending' ? 'primary' : 'secondary'}\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusChange('pending')}\r\n                  disabled={isLoading}\r\n                  leftIcon={<XCircle className=\"w-3 h-3\" />}\r\n                >\r\n                  En attente\r\n                </Button>\r\n                <Button\r\n                  variant={visit.status === 'confirmed' ? 'primary' : 'secondary'}\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusChange('confirmed')}\r\n                  disabled={isLoading}\r\n                  leftIcon={<CheckCircle className=\"w-3 h-3\" />}\r\n                >\r\n                  Confirmé\r\n                </Button>\r\n                <Button\r\n                  variant={visit.status === 'completed' ? 'primary' : 'secondary'}\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusChange('completed')}\r\n                  disabled={isLoading}\r\n                  leftIcon={<CheckCircle className=\"w-3 h-3\" />}\r\n                >\r\n                  Terminé\r\n                </Button>\r\n                <Button\r\n                  variant={visit.status === 'cancelled' ? 'danger' : 'secondary'}\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusChange('cancelled')}\r\n                  disabled={isLoading}\r\n                  leftIcon={<XCircle className=\"w-3 h-3\" />}\r\n                >\r\n                  Annulé\r\n                </Button>\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                Statut actuel: <span className=\"font-medium capitalize\">{visit.status}</span>\r\n              </p>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Notes\"\r\n              value={formData.notes || ''}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, notes: e.target.value }))}\r\n            />\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg text-sm text-gray-600 dark:text-gray-400\">\r\n              💡 Pour gérer le logement et les repas, utilisez l'onglet \"Logistique\" du menu\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'delete':\r\n        return (\r\n          <div className=\"text-center py-6\">\r\n            <Trash2 className=\"w-16 h-16 text-red-500 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n              Supprimer la visite\r\n            </h3>\r\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\r\n              Êtes-vous sûr de vouloir supprimer la visite de <strong>{visit.nom}</strong>\r\n              du {new Date(visit.visitDate).toLocaleDateString('fr-FR')} ?\r\n            </p>\r\n            <p className=\"text-sm text-red-600 dark:text-red-400\">\r\n              Cette action est irréversible.\r\n            </p>\r\n          </div>\r\n        );\r\n\r\n      case 'status':\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <CheckCircle className=\"w-5 h-5\" />\r\n              Changer le statut\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                Statut actuel: <span className=\"font-medium\">{visit.status}</span>\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  onClick={() => handleStatusChange('pending')}\r\n                  className=\"w-full justify-start\"\r\n                  leftIcon={<XCircle className=\"w-4 h-4\" />}\r\n                >\r\n                  Marquer en attente\r\n                </Button>\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  onClick={() => handleStatusChange('confirmed')}\r\n                  className=\"w-full justify-start\"\r\n                  leftIcon={<CheckCircle className=\"w-4 h-4\" />}\r\n                >\r\n                  Confirmer\r\n                </Button>\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  onClick={() => handleStatusChange('completed')}\r\n                  className=\"w-full justify-start\"\r\n                  leftIcon={<CheckCircle className=\"w-4 h-4\" />}\r\n                >\r\n                  Marquer comme terminé\r\n                </Button>\r\n                <Button\r\n                  variant=\"danger\"\r\n                  onClick={() => handleStatusChange('cancelled')}\r\n                  className=\"w-full justify-start\"\r\n                  leftIcon={<XCircle className=\"w-4 h-4\" />}\r\n                >\r\n                  Annuler\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'message':\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <MessageSquare className=\"w-5 h-5\" />\r\n              Générer un message\r\n            </h3>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Choisissez un type de message pour ouvrir l'assistant de rédaction :\r\n            </p>\r\n            <div className=\"grid grid-cols-1 gap-2\">\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'confirmation' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Message de confirmation\r\n              </Button>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'preparation' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Message de préparation\r\n              </Button>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'reminder-7' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Rappel J-7\r\n              </Button>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'reminder-2' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Rappel J-2\r\n              </Button>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'thanks' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Message de remerciement\r\n              </Button>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setGeneratorParams({ isOpen: true, type: 'host_request' })}\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Demande d'accueil\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'feedback':\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <Star className=\"w-5 h-5 text-yellow-500\" />\r\n              Bilan de la visite\r\n            </h3>\r\n            <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Utilisez la modale de feedback pour évaluer cette visite.\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'expenses':\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <CreditCard className=\"w-5 h-5 text-green-600\" />\r\n              Gestion des coûts\r\n            </h3>\r\n\r\n            {isAddingExpense || editingExpense ? (\r\n              <ExpenseForm\r\n                initialData={editingExpense}\r\n                onSubmit={handleSaveExpense}\r\n                onCancel={() => {\r\n                  setIsAddingExpense(false);\r\n                  setEditingExpense(undefined);\r\n                }}\r\n              />\r\n            ) : (\r\n              <ExpenseList\r\n                expenses={formData.expenses || []}\r\n                onAdd={() => setIsAddingExpense(true)}\r\n                onEdit={setEditingExpense}\r\n                onDelete={handleDeleteExpense}\r\n                readOnly={isLoading}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n\r\n\r\n\r\n      case 'logistics': {\r\n        const activeVisit = { ...visit, ...formData };\r\n        const acc = (activeVisit.logistics?.accommodation || {}) as Partial<Accommodation>;\r\n        const isHostType = (acc.type || 'host') === 'host';\r\n\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <Truck className=\"w-5 h-5 text-blue-600\" />\r\n              Logistique\r\n            </h3>\r\n\r\n            <LogisticsManager\r\n              logistics={{\r\n                ...activeVisit.logistics,\r\n                accommodation: {\r\n                  ...acc,\r\n                  type: acc.type || 'host',\r\n                  name: isHostType ? (activeVisit.host || acc.name || '') : (acc.name || ''),\r\n                  address: isHostType ? (activeVisit.accommodation || acc.address || '') : (acc.address || ''),\r\n                }\r\n              }}\r\n              onUpdate={(updatedLogistics) => {\r\n                setFormData(prev => ({\r\n                  ...prev,\r\n                  logistics: updatedLogistics,\r\n                  // Sync back to top-level fields only if we are in host mode\r\n                  host: (updatedLogistics.accommodation?.type === 'host')\r\n                    ? (updatedLogistics.accommodation?.name || prev.host)\r\n                    : prev.host,\r\n                  accommodation: (updatedLogistics.accommodation?.type === 'host')\r\n                    ? (updatedLogistics.accommodation?.address || prev.accommodation)\r\n                    : prev.accommodation\r\n                }));\r\n              }}\r\n              readOnly={isLoading}\r\n              hosts={hosts}\r\n            />\r\n\r\n            <div className=\"border-t pt-4 mt-4\">\r\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Documents</h4>\r\n              <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\r\n                <RoadmapView\r\n                  visit={activeVisit}\r\n                  speaker={speakers.find(s => s.id === activeVisit.id)}\r\n                  host={hosts.find(h => h.nom === activeVisit.host)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => _setIsTravelModalOpen(true)}\r\n                leftIcon={<Truck className=\"w-4 h-4\" />}\r\n              >\r\n                Organiser le transport\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => _setIsMealModalOpen(true)}\r\n                leftIcon={<Utensils className=\"w-4 h-4\" />}\r\n              >\r\n                Planifier les repas\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => _setIsAccommodationModalOpen(true)}\r\n                leftIcon={<Home className=\"w-4 h-4\" />}\r\n              >\r\n                Gérer l'hébergement\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getFooter = () => {\r\n    switch (action) {\r\n      case 'edit':\r\n      case 'logistics':\r\n        return (\r\n          <>\r\n            <Button variant=\"ghost\" onClick={onClose} disabled={isLoading}>\r\n              Annuler\r\n            </Button>\r\n            <Button onClick={handleSave} isLoading={isLoading}>\r\n              Enregistrer\r\n            </Button>\r\n          </>\r\n        );\r\n      case 'delete':\r\n        return (\r\n          <>\r\n            <Button variant=\"ghost\" onClick={onClose} disabled={isLoading}>\r\n              Annuler\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={handleDelete} isLoading={isLoading}>\r\n              Supprimer\r\n            </Button>\r\n          </>\r\n        );\r\n      case 'feedback':\r\n      case 'expenses':\r\n        return null;\r\n      case 'message':\r\n        return (\r\n          <Button variant=\"ghost\" onClick={onClose} disabled={isLoading}>\r\n            Fermer\r\n          </Button>\r\n        );\r\n      default:\r\n        // Pour les autres actions, on rend le Modal normal\r\n        break;\r\n    }\r\n  };\r\n\r\n  // Si l'action est 'feedback', on retourne directement le FeedbackFormModal\r\n  if (action === 'feedback' && visit) {\r\n    return (\r\n      <FeedbackFormModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        visit={visit}\r\n        onSubmit={handleFeedbackSubmit}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        size={action === 'logistics' ? 'xl' : 'md'}\r\n        footer={getFooter()}\r\n      >\r\n        {getModalContent()}\r\n      </Modal>\r\n\r\n      {_isTravelModalOpen && (\r\n        <TravelCoordinationModal\r\n          isOpen={_isTravelModalOpen}\r\n          onClose={() => _setIsTravelModalOpen(false)}\r\n          visit={visit}\r\n          onSave={() => { }}\r\n        />\r\n      )}\r\n\r\n      {_isMealModalOpen && (\r\n        <MealPlanningModal\r\n          isOpen={_isMealModalOpen}\r\n          onClose={() => _setIsMealModalOpen(false)}\r\n          visit={visit}\r\n          onSave={() => { }}\r\n        />\r\n      )}\r\n\r\n      {_isAccommodationModalOpen && (\r\n        <AccommodationMatchingModal\r\n          isOpen={_isAccommodationModalOpen}\r\n          onClose={() => _setIsAccommodationModalOpen(false)}\r\n          visit={visit}\r\n          onSelectHost={() => { }}\r\n        />\r\n      )}\r\n\r\n      {generatorParams.isOpen && (\r\n        <MessageGeneratorModal\r\n          isOpen={generatorParams.isOpen}\r\n          onClose={() => setGeneratorParams(prev => ({ ...prev, isOpen: false }))}\r\n          speaker={speakers.find(s => s.id === visit.id) || { id: visit.id, nom: visit.nom, congregation: visit.congregation || '', gender: 'male', talkHistory: [] }}\r\n          visit={visit}\r\n          initialType={generatorParams.type}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"],"names":["Building","createLucideIcon","CheckSquare","CreditCard","DollarSign","Euro","Hotel","Map","Navigation","Pen","Plane","Printer","Share2","Tag","TramFront","Truck","Utensils","XCircle","CATEGORIES","ExpenseForm","onSubmit","onCancel","initialData","currency","description","setDescription","useState","amount","setAmount","date","setDate","category","setCategory","handleSubmit","e","jsxs","jsx","cat","Button","Save","ExpenseListInner","expenses","onAdd","onEdit","onDelete","readOnly","totalAmount","useMemo","sum","expense","Plus","Calendar","format","fr","Edit2","Trash2","ExpenseList","memo","ItineraryView","itinerary","onUpdate","handleChange","field","value","openApp","app","query","url","Car","Train","mode","Icon","label","Input","Clock","MapPin","MapIcon","formatDateForInput","isoString","AccommodationView","accommodation","hosts","openMap","Home","type","selectedHost","h","host","Link","Checklist","items","newItemLabel","setNewItemLabel","isAdding","setIsAdding","handleToggle","id","updatedItems","item","handleDelete","handleAddItem","newItem","generateUUID","i","X","Check","LogisticsManager","logistics","activeTab","setActiveTab","updateItinerary","updateAccommodation","updateChecklist","checklist","tabs","TRANSPORT_MODES","Users","TravelCoordinationModal","isOpen","onClose","visit","onSave","visits","useData","transportMode","setTransportMode","departureTime","setDepartureTime","arrivalTime","setArrivalTime","departureLocation","setDepartureLocation","arrivalLocation","setArrivalLocation","distance","setDistance","duration","setDuration","estimatedCost","setEstimatedCost","selectedCarpoolPartners","setSelectedCarpoolPartners","notes","setNotes","mapLink","setMapLink","bookingReference","setBookingReference","potentialCarpoolPartners","v","toggleCarpoolPartner","visitId","prev","calculateCostPerPerson","totalPeople","handleSave","travelPlan","Modal","Badge","partner","Card","CardBody","MEAL_TYPES","COMMON_RESTRICTIONS","COMMON_ALLERGIES","MealPlanningModal","meals","setMeals","dietaryRestrictions","setDietaryRestrictions","allergies","setAllergies","preferences","customRestriction","setCustomRestriction","customAllergy","setCustomAllergy","addMeal","mealType","m","newMeal","updateMeal","updates","meal","removeMeal","toggleRestriction","restriction","r","toggleAllergy","allergy","a","addCustomRestriction","addCustomAllergy","mealPlan","getTotalCost","getMealIcon","AlertCircle","t","SCORE_WEIGHTS","AccommodationMatchingModal","speaker","onSelectHost","setSelectedHost","showOnlyAvailable","setShowOnlyAvailable","matchedHosts","matches","score","compatibility","warnings","AVAILABILITY","previousAccommodations","experienceScore","lastAccommodation","b","daysSince","handleSelectHost","getScoreColor","getScoreLabel","User","match","Fragment","Star","factor","idx","CheckCircle","AlertTriangle","warning","module","require$$0","this","o","s","g","l","c","d","n","u","p","f","y","w","E","A","P","T","S","x","k","C","RoadmapView","componentRef","useRef","handlePrint","useReactToPrint","formatDate","dateString","parseISO","Phone","VisitActionModal","action","updateVisit","deleteVisit","completeVisit","speakers","addToast","useToast","isLoading","setIsLoading","formData","setFormData","isAddingExpense","setIsAddingExpense","editingExpense","setEditingExpense","_activeTab","_setActiveTab","_isTravelModalOpen","_setIsTravelModalOpen","_isMealModalOpen","_setIsMealModalOpen","_isAccommodationModalOpen","_setIsAccommodationModalOpen","generatorParams","setGeneratorParams","useEffect","confirm","useConfirm","handleStatusChange","newStatus","handleFeedbackSubmit","feedbackData","newFeedback","handleSaveExpense","expenseData","currentExpenses","newExpenses","updatedVisit","handleDeleteExpense","expenseId","confirmDelete","getModalContent","currentLogistics","newAccommodation","newAddress","MessageSquare","activeVisit","acc","isHostType","updatedLogistics","getFooter","FeedbackFormModal","MessageGeneratorModal"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,26]}