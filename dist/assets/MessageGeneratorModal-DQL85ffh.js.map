{"version":3,"file":"MessageGeneratorModal-DQL85ffh.js","sources":["../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../src/data/messageTemplates.ts","../../src/utils/messageGenerator.ts","../../src/components/messages/MessageGeneratorModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","import { MessageTemplate, Gender } from '@/types';\n\n// ============================================================================\n// MOD√àLES DE MESSAGES PAR LANGUE ET TYPE\n// ============================================================================\n\nexport const messageTemplates: MessageTemplate = {\n  // ========== FRAN√áAIS ==========\n  fr: {\n    confirmation: {\n      speaker: `Bonjour Fr√®re *{speakerName}*,{firstTimeIntroduction}\n\nJ'esp√®re que tu vas bien. üôè\n\nC'est avec joie que nous attendons ta visite le *{visitDate} √† {visitTime}*.\n\nPourrais-tu me confirmer ta pr√©sence et me faire savoir si tu as besoin de quelque chose de sp√©cial (h√©bergement, repas, transport) ?\n\nMerci beaucoup et √† bient√¥t !\n\nFraternellement,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n      host: `Bonjour Fr√®re *{hostName}*,\n\nJ'esp√®re que tu vas bien. üè†\n\nNous avons le plaisir d'accueillir *{speakerName}* de la congr√©gation de *{congregation}* le *{visitDate}*.\n\nPourrais-tu te charger de son accueil ? Merci de me confirmer.\n\nFraternellement,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n    },\n\n    preparation: {\n      speaker: `Bonjour Fr√®re *{speakerName}*,\n\nMerci pour ta confirmation ! üòä\n\nVoici les d√©tails pour ta visite du *{visitDate} √† {visitTime}* :\n\nüè† *Contact d'accueil* : {hostName}\nüìû *T√©l√©phone* : {hostPhone}\nüìç *Adresse* : {hostAddress}\n\nN'h√©site pas √† contacter directement notre fr√®re {hostName} si besoin.\n\nAu plaisir de te voir bient√¥t !\n\nFraternellement,\n{hospitalityOverseer}`,\n\n      host: `Bonjour Fr√®re *{hostName}*,\n\nMerci pour ta disponibilit√© ! üôè\n\nVoici les coordonn√©es de notre orateur invit√© pour le *{visitDate}* :\n\nüë§ *Orateur* : {speakerName}\nüèõÔ∏è *Congr√©gation* : {congregation}\nüìû *T√©l√©phone* : {speakerPhone}\n\nMerci de prendre contact avec lui pour coordonner l'accueil.\n\nFraternellement,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-7': {\n      speaker: `Bonjour Fr√®re *{speakerName}*,\n\nPetit rappel amical : nous attendons ta visite avec joie dans *7 jours*, le *{visitDate} √† {visitTime}* ! üéâ\n\nüìç Adresse : {hostAddress}\nüìû Contact : {hostName} - {hostPhone}\n\nBon voyage et √† tr√®s bient√¥t !\n\nFraternellement,\n{hospitalityOverseer}`,\n\n      host: `Bonjour Fr√®re *{hostName}*,\n\nPetit rappel : tu accueilles *{speakerName}* dans *7 jours*, le *{visitDate}* ! üè†\n\nMerci pour ton hospitalit√© !\n\nFraternellement,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-2': {\n      speaker: `Bonjour Fr√®re *{speakerName}*,\n\nDernier rappel : nous t'attendons *apr√®s-demain*, le *{visitDate} √† {visitTime}* ! üòä\n\nüìç {hostAddress}\nüìû {hostName} : {hostPhone}\n\nBon voyage et √† tr√®s vite !\n\nFraternellement,\n{hospitalityOverseer}`,\n    },\n\n    thanks: {\n      speaker: `Bonjour Fr√®re *{speakerName}*,\n\nMerci infiniment pour ta visite et ton discours √©difiant ! üôè‚ú®\n\nCe fut un r√©el plaisir de t'accueillir parmi nous. Nous esp√©rons te revoir tr√®s bient√¥t !\n\nFraternellement,\n{hospitalityOverseer}`,\n\n      host: `Bonjour Fr√®re *{hostName}*,\n\nUn grand merci pour ton hospitalit√© envers notre orateur invit√©, {speakerName} ! üè†‚ù§Ô∏è\n\nTon accueil chaleureux contribue grandement √† la r√©ussite de ces visites.\n\nFraternellement,\n{hospitalityOverseer}`,\n    },\n  },\n\n  // ========== CAPVERDIEN ==========\n  cv: {\n    confirmation: {\n      speaker: `Bon dia Mon *{speakerName}*,{firstTimeIntroduction}\n\nN ta spera ma bu sta bon. üôè\n\nE ku alegria ma nu ta spera bu bizita dia *{visitDate} na {visitTime}*.\n\nBu pode confirma-m bu prezensa i txoma-m si bu ten nesesidadi di kualker koza (alojamentu, kumida, transporte)?\n\nObrigadu di more i te logu!\n\nFraternalmenti,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n      host: `Bon dia Mon *{hostName}*,\n\nN ta spera ma bu sta bon. üè†\n\nNu ten prazer di akolhe *{speakerName}* di kongregas on di *{congregation}* dia *{visitDate}*.\n\nBu pode inkarga-u di akolhimentu? Favor konfirma-m.\n\nFraternalmenti,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n    },\n\n    preparation: {\n      speaker: `Bon dia Mon *{speakerName}*,\n\nObrigadu pa bu konfirmas on! üòä\n\nAki es detalhis pa bu bizita dia *{visitDate} na {visitTime}* :\n\nüè† *Kontaktu di akolhimentu* : {hostName}\nüìû *Telefone* : {hostPhone}\nüìç *Morada* : {hostAddress}\n\nSi bu prisize, bu pode kontakta diretamenti nu mon {hostName}.\n\nTe logu!\n\nFraternalmenti,\n{hospitalityOverseer}`,\n\n      host: `Bon dia Mon *{hostName}*,\n\nObrigadu pa bu dizponibilidadi! üôè\n\nAki es kontaktu di nu orador kombidadu pa dia *{visitDate}* :\n\nüë§ *Orador* : {speakerName}\nüèõÔ∏è *Kongregas on* : {congregation}\nüìû *Telefone* : {speakerPhone}\n\nFavor kontakta-l pa kordina akolhimentu.\n\nFraternalmenti,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-7': {\n      speaker: `Bon dia Mon *{speakerName}*,\n\nLimbrans a di amisti: nu ta spera bu bizita ku alegria dento di *7 dia*, dia *{visitDate} na {visitTime}*! üéâ\n\nüìç Morada : {hostAddress}\nüìû Kontaktu : {hostName} - {hostPhone}\n\nBon biaji i te logu!\n\nFraternalmenti,\n{hospitalityOverseer}`,\n\n      host: `Bon dia Mon *{hostName}*,\n\nLimbrans a : bu ta akolhe *{speakerName}* dento di *7 dia*, dia *{visitDate}*! üè†\n\nObrigadu pa bu ospitalidadi!\n\nFraternalmenti,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-2': {\n      speaker: `Bon dia Mon *{speakerName}*,\n\nUltimu limbrans a : nu ta sper√°-u *dizpois di manha*, dia *{visitDate} na {visitTime}*! üòä\n\nüìç {hostAddress}\nüìû {hostName} : {hostPhone}\n\nBon biaji i te ja!\n\nFraternalmenti,\n{hospitalityOverseer}`,\n    },\n\n    thanks: {\n      speaker: `Bon dia Mon *{speakerName}*,\n\nObrigadu infinitamenti pa bu bizita i bu diskursu idifikanti! üôè‚ú®\n\nFoi un prazer riali di akolhe-u entre nu. Nu ta spera bo i-u logu!\n\nFraternalmenti,\n{hospitalityOverseer}`,\n\n      host: `Bon dia Mon *{hostName}*,\n\nUn grandi obrigadu pa bu ospitalidadi pa ku nu orador kombidadu, {speakerName}! üè†‚ù§Ô∏è\n\nBu akolhimentu kalorozi ta kontribui munti pa susesu di es bizitas.\n\nFraternalmenti,\n{hospitalityOverseer}`,\n    },\n  },\n\n  // ========== PORTUGAIS ==========\n  pt: {\n    confirmation: {\n      speaker: `Ol√° Irm√£o *{speakerName}*,{firstTimeIntroduction}\n\nEspero que estejas bem. üôè\n\nAguardamos com alegria a tua visita no dia *{visitDate} √†s {visitTime}*.\n\nPoderias confirmar a tua presen√ßa e dizer-me se precisas de algo especial (alojamento, refei√ß√µes, transporte)?\n\nMuito obrigado e at√© breve!\n\nFraternalmente,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n      host: `Ol√° Irm√£o *{hostName}*,\n\nEspero que estejas bem. üè†\n\nTemos o prazer de receber *{speakerName}* da congrega√ß√£o de *{congregation}* no dia *{visitDate}*.\n\nPoderias encarregar-te do seu acolhimento? Por favor, confirma-me.\n\nFraternalmente,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n    },\n\n    preparation: {\n      speaker: `Ol√° Irm√£o *{speakerName}*,\n\nObrigado pela tua confirma√ß√£o! üòä\n\nAqui est√£o os detalhes para a tua visita de *{visitDate} √†s {visitTime}*:\n\nüè† *Contacto de acolhimento*: {hostName}\nüìû *Telefone*: {hostPhone}\nüìç *Morada*: {hostAddress}\n\nN√£o hesites em contactar diretamente o nosso irm√£o {hostName} se precisares.\n\nAt√© breve!\n\nFraternalmente,\n{hospitalityOverseer}`,\n\n      host: `Ol√° Irm√£o *{hostName}*,\n\nObrigado pela tua disponibilidade! üôè\n\nAqui est√£o os contactos do nosso orador convidado para *{visitDate}*:\n\nüë§ *Orador*: {speakerName}\nüèõÔ∏è *Congrega√ß√£o*: {congregation}\nüìû *Telefone*: {speakerPhone}\n\nPor favor, contacta-o para coordenar o acolhimento.\n\nFraternalmente,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-7': {\n      speaker: `Ol√° Irm√£o *{speakerName}*,\n\nLembrete amig√°vel: aguardamos a tua visita com alegria daqui a *7 dias*, no dia *{visitDate} √†s {visitTime}*! üéâ\n\nüìç Morada: {hostAddress}\nüìû Contacto: {hostName} - {hostPhone}\n\nBoa viagem e at√© breve!\n\nFraternalmente,\n{hospitalityOverseer}`,\n\n      host: `Ol√° Irm√£o *{hostName}*,\n\nLembrete: ir√°s acolher *{speakerName}* daqui a *7 dias*, no dia *{visitDate}*! üè†\n\nObrigado pela tua hospitalidade!\n\nFraternalmente,\n{hospitalityOverseer}`,\n    },\n\n    'reminder-2': {\n      speaker: `Ol√° Irm√£o *{speakerName}*,\n\n√öltimo lembrete: esperamos-te *depois de amanh√£*, no dia *{visitDate} √†s {visitTime}*! üòä\n\nüìç {hostAddress}\nüìû {hostName}: {hostPhone}\n\nBoa viagem e at√© muito breve!\n\nFraternalmente,\n{hospitalityOverseer}`,\n    },\n\n    thanks: {\n      speaker: `Ol√° Irm√£o *{speakerName}*,\n\nMuito obrigado pela tua visita e pelo teu discurso encorajador! üôè‚ú®\n\nFoi um verdadeiro prazer receber-te entre n√≥s. Esperamos ver-te novamente em breve!\n\nFraternalmente,\n{hospitalityOverseer}`,\n\n      host: `Ol√° Irm√£o *{hostName}*,\n\nUm grande obrigado pela tua hospitalidade para com o nosso orador convidado, {speakerName}! üè†‚ù§Ô∏è\n\nO teu acolhimento caloroso contribui muito para o sucesso destas visitas.\n\nFraternalmente,\n{hospitalityOverseer}`,\n    },\n  },\n};\n\n// ============================================================================\n// MOD√àLES DE DEMANDE D'ACCUEIL INDIVIDUELLE\n// ============================================================================\n\nexport const individualHostRequestTemplates = {\n  fr: `Bonjour {hostName}, üè†\n\nJ'esp√®re que vous allez bien.\n\nNous avons le plaisir d'accueillir *{speakerName}* de la congr√©gation de *{congregation}* pour *{talkTitle}* le *{visitDate} √† {visitTime}*.\n\nSeriez-vous disponible pour l'accueillir chez vous ? Voici les d√©tails de sa visite :\n\nüóìÔ∏è Date : {visitDate} √† {visitTime}\nüèõÔ∏è Salle : {location}\nüë§ Orateur : {speakerName}\nüìû Contact : {speakerPhone}\n\nMerci de me faire savoir si vous √™tes disponible pour ce service.\n\nFraternellement,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n  cv: `Bon dia {hostName}, üè†\n\nN ta spera ma bu sta bon.\n\nNu ten prazer di akolhe *{speakerName}* di kongregas on di *{congregation}* pa *{talkTitle}* dia *{visitDate} na {visitTime}*.\n\nBu ta disponivel pa akolhe-l na bu kaza ? Aki es detalhis di bu vizita :\n\nüóìÔ∏è Data : {visitDate} na {visitTime}\nüèõÔ∏è Sala : {location}\nüë§ Orador : {speakerName}\nüìû Kontaktu : {speakerPhone}\n\nFavor txoma-m si bu ta disponivel pa es servisu.\n\nFraternalmenti,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n  pt: `Ol√° {hostName}, üè†\n\nEspero que esteja bem.\n\nTemos o prazer de receber *{speakerName}* da congrega√ß√£o de *{congregation}* para *{talkTitle}* no dia *{visitDate} √†s {visitTime}*.\n\nEstaria dispon√≠vel para o acolher em sua casa? Aqui est√£o os detalhes da visita:\n\nüóìÔ∏è Data: {visitDate} √†s {visitTime}\nüèõÔ∏è Sala: {location}\nüë§ Orador: {speakerName}\nüìû Contacto: {speakerPhone}\n\nPor favor, diga-me se est√° dispon√≠vel para este servi√ßo.\n\nFraternalmente,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`\n};\n\n// ============================================================================\n// MOD√àLES DE DEMANDE D'ACCUEIL\n// ============================================================================\n\nexport const hostRequestMessageTemplates = {\n  fr: `Bonjour √† tous ! üè†\n\nNous recherchons des volontaires pour accueillir nos orateurs visiteurs aux dates suivantes :\n\n{visitsList}\n\nSi vous √™tes disponible pour accueillir un ou plusieurs de ces orateurs, merci de me contacter.\n\nQue J√©hovah vous b√©nisse !\n\nFraternellement,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n  cv: `Bon dia tudu! üè†\n\nNu ta busca voluntariuoppa akolhe nu oradorisvizitantis na es datas li :\n\n{visitsList}\n\nSi bu sta dizponivel pa akolhe un o mas di es oradaris, favor kontakta-m.\n\nMa Jeova abensoa-bu!\n\nFraternalmenti,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n\n  pt: `Ol√° a todos! üè†\n\nEstamos √† procura de volunt√°rios para acolher os nossos oradores visitantes nas seguintes datas:\n\n{visitsList}\n\nSe estiveres dispon√≠vel para acolher um ou mais destes oradores, por favor contacta-me.\n\nQue Jeov√° vos aben√ßoe!\n\nFraternalmente,\n{hospitalityOverseer}\nüìû {hospitalityOverseerPhone}`,\n};\n\n// ============================================================================\n// FONCTION D'ADAPTATION DU GENRE\n// ============================================================================\n\nexport function adaptMessageGender(\n  message: string,\n  speakerGender?: Gender,\n  hostGender?: Gender\n): string {\n  let adapted = message;\n\n  // Adaptation pour orateur f√©minin\n  if (speakerGender === 'female') {\n    // Fr\n    adapted = adapted.replace(/Bonjour Fr√®re/g, 'Bonjour S≈ìur');\n    adapted = adapted.replace(/Fr√®re \\*{speakerName}\\*/g, 'S≈ìur *{speakerName}*');\n    adapted = adapted.replace(/notre orateur invit√©/g, 'notre oratrice invit√©e');\n    // Pt\n    adapted = adapted.replace(/Ol√° Irm√£o/g, 'Ol√° Irm√£');\n    adapted = adapted.replace(/Irm√£o \\*{speakerName}\\*/g, 'Irm√£ *{speakerName}*');\n    adapted = adapted.replace(/nosso orador convidado/g, 'nossa oradora convidada');\n    // Cv\n    adapted = adapted.replace(/Bon dia Mon/g, 'Bon dia Mana');\n    adapted = adapted.replace(/Mon \\*{speakerName}\\*/g, 'Mana *{speakerName}*');\n  }\n\n  // Adaptation pour contact d'accueil f√©minin\n  if (hostGender === 'female') {\n    // Fr\n    adapted = adapted.replace(/Fr√®re \\*{hostName}\\*/g, 'S≈ìur *{hostName}*');\n    adapted = adapted.replace(/notre fr√®re/g, 'notre s≈ìur');\n    // Pt\n    adapted = adapted.replace(/Irm√£o \\*{hostName}\\*/g, 'Irm√£ *{hostName}*');\n    adapted = adapted.replace(/nosso irm√£o/g, 'nossa irm√£');\n    // Cv\n    adapted = adapted.replace(/Mon \\*{hostName}\\*/g, 'Mana *{hostName}*');\n    adapted = adapted.replace(/nu mon {hostName}/g, 'nu mana {hostName}');\n  }\n\n  // Adaptation pour couple\n  if (hostGender === 'couple') {\n    // Fr\n    adapted = adapted.replace(/Fr√®re \\*{hostName}\\*/g, '*{hostName}*');\n    adapted = adapted.replace(/tu vas bien/g, 'vous allez bien');\n    // Pt\n    adapted = adapted.replace(/Irm√£o \\*{hostName}\\*/g, '*{hostName}*');\n    adapted = adapted.replace(/estejas bem/g, 'estejam bem');\n    adapted = adapted.replace(/tua disponibilidade/g, 'vossa disponibilidade');\n    adapted = adapted.replace(/teu acolhimento/g, 'vosso acolhimento');\n    // Cv\n    adapted = adapted.replace(/Mon \\*{hostName}\\*/g, '*{hostName}*');\n    adapted = adapted.replace(/bu sta bon/g, 'nh√≥s sta bon');\n  }\n\n  return adapted;\n}\n","import {\n  Visit,\n  Speaker,\n  Host,\n  Language,\n  MessageType,\n  MessageRole,\n  CongregationProfile,\n} from '@/types';\nimport {\n  messageTemplates,\n  hostRequestMessageTemplates,\n  individualHostRequestTemplates,\n  adaptMessageGender,\n} from '@/data/messageTemplates';\nimport { formatFullDate } from './formatters';\n\n// ============================================================================\n// G√âN√âRATION DE MESSAGE POUR UNE VISITE\n// ============================================================================\n\nexport function generateMessage(\n  visit: Visit,\n  speaker: Speaker | undefined,\n  host: Host | undefined,\n  congregationProfile: CongregationProfile,\n  messageType: MessageType,\n  role: MessageRole,\n  language: Language,\n  customTemplate?: string\n): string {\n  // Utiliser le mod√®le personnalis√© si fourni, sinon le mod√®le par d√©faut\n  const template = customTemplate || messageTemplates[language]?.[messageType]?.[role];\n\n  if (!template) {\n    return `Mod√®le non trouv√© pour: ${language}/${messageType}/${role}`;\n  }\n\n  // Remplacer les variables\n  let message = replaceVariables(template, visit, host, congregationProfile, language);\n\n  // Adapter selon le genre\n  message = adaptMessageGender(message, speaker?.gender, host?.gender);\n\n  return message;\n}\n\n// ============================================================================\n// REMPLACEMENT DES VARIABLES\n// ============================================================================\n\nfunction replaceVariables(\n  template: string,\n  visit: Visit,\n  host: Host | undefined,\n  congregationProfile: CongregationProfile,\n  language: Language\n): string {\n  let message = template;\n\n  // Variables de l'orateur\n  message = message.replace(/{speakerName}/g, visit.nom);\n  message = message.replace(/{congregation}/g, visit.congregation);\n  message = message.replace(/{speakerPhone}/g, visit.telephone || '(non renseign√©)');\n\n  // Variables du contact d'accueil\n  const hostName = visit.host !== '√Ä d√©finir' ? visit.host : '(non assign√©)';\n  message = message.replace(/{hostName}/g, hostName);\n  message = message.replace(/{hostPhone}/g, host?.telephone || '(non renseign√©)');\n  message = message.replace(/{hostAddress}/g, host?.address || '(non renseign√©e)');\n\n  // Variables de la visite\n  message = message.replace(/{visitDate}/g, formatFullDate(visit.visitDate));\n  message = message.replace(/{visitTime}/g, visit.visitTime);\n\n  // Variables du discours\n  if (visit.talkNoOrType && visit.talkTheme) {\n    message = message.replace(/{talkNo}/g, String(visit.talkNoOrType));\n    message = message.replace(/{talkTheme}/g, visit.talkTheme);\n  }\n\n  // Variables de la congr√©gation\n  message = message.replace(/{hospitalityOverseer}/g, congregationProfile.hospitalityOverseer);\n  message = message.replace(\n    /{hospitalityOverseerPhone}/g,\n    congregationProfile.hospitalityOverseerPhone\n  );\n  message = message.replace(/{congregationName}/g, congregationProfile.name);\n\n  // Introduction pour premier contact\n  const isFirstContact =\n    !visit.communicationStatus || Object.keys(visit.communicationStatus).length === 0;\n\n  if (isFirstContact) {\n    const intro = getFirstTimeIntroduction(congregationProfile.name, language);\n    message = message.replace(/{firstTimeIntroduction}/g, intro);\n  } else {\n    message = message.replace(/{firstTimeIntroduction}/g, '');\n  }\n\n  return message;\n}\n\n// ============================================================================\n// INTRODUCTION PREMIER CONTACT\n// ============================================================================\n\nfunction getFirstTimeIntroduction(congregationName: string, language: Language): string {\n  const introductions = {\n    fr: `\\n\\nJe suis le responsable de l'accueil pour le ${congregationName}.`,\n    cv: `\\n\\nNu ta responsavel di akolhimentu pa ${congregationName}.`,\n    pt: `\\n\\nSou o respons√°vel pela hospitalidade para o ${congregationName}.`,\n  };\n\n  return introductions[language] || introductions.fr;\n}\n\n// ============================================================================\n// G√âN√âRATION DE DEMANDE D'ACCUEIL\n// ============================================================================\n\nexport function generateHostRequestMessage(\n  visits: Visit[],\n  congregationProfile: CongregationProfile,\n  language: Language,\n  customTemplate?: string,\n  isIndividualRequest: boolean = false,\n  hostName: string = ''\n): string {\n  // Importer le mod√®le de demande individuelle si n√©cessaire\n  const individualTemplates = isIndividualRequest ? individualHostRequestTemplates[language] : null;\n\n  // Utiliser le mod√®le personnalis√© si fourni, sinon le mod√®le appropri√©\n  let template: string;\n  \n  if (customTemplate) {\n    template = customTemplate;\n  } else if (isIndividualRequest && individualTemplates) {\n    template = individualTemplates;\n  } else {\n    template = hostRequestMessageTemplates[language];\n  }\n\n  if (!template) {\n    return `Aucun mod√®le de demande d'accueil trouv√© pour la langue: ${language}`;\n  }\n\n  // G√©n√©rer la liste des visites ou traiter une seule visite pour une demande individuelle\n  let message = template;\n  \n  if (isIndividualRequest && visits.length > 0) {\n    const visit = visits[0]; // Pour une demande individuelle, on prend la premi√®re visite\n    \n    // Remplacer les variables sp√©cifiques √† la visite\n    message = message\n      .replace(/{speakerName}/g, visit.nom)\n      .replace(/{congregation}/g, visit.congregation)\n      .replace(/{speakerPhone}/g, visit.telephone || '(non renseign√©)')\n      .replace(/{visitDate}/g, formatFullDate(visit.visitDate))\n      .replace(/{visitTime}/g, visit.visitTime)\n      .replace(/{location}/g, congregationProfile.name)\n      .replace(/{talkTitle}/g, visit.talkTheme || 'une intervention')\n      .replace(/{hostName}/g, hostName || '[NOM DE L\\'H√îTE]');\n  } else {\n    // G√©n√©rer la liste des visites pour une demande group√©e\n    const visitsList = visits\n      .map(visit => {\n        return `‚Ä¢ ${formatFullDate(visit.visitDate)} √† ${visit.visitTime} - ${visit.nom} (${visit.congregation})`;\n      })\n      .join('\\n\\n');\n      \n    message = message.replace(/{visitsList}/g, visitsList);\n  }\n\n  // Remplacer les variables communes du mod√®le\n  message = message\n    .replace(/{congregationName}/g, congregationProfile.name)\n    .replace(/{hospitalityOverseer}/g, congregationProfile.hospitalityOverseer)\n    .replace(/{hospitalityOverseerPhone}/g, congregationProfile.hospitalityOverseerPhone);\n\n  return message;\n}\n\n// ============================================================================\n// G√âN√âRATION D'URL WHATSAPP\n// ============================================================================\n\nexport function generateWhatsAppUrl(phone: string, message: string): string {\n  // Nettoyer le num√©ro de t√©l√©phone\n  const cleanPhone = phone.replace(/[^0-9+]/g, '');\n\n  // Encoder le message\n  const encodedMessage = encodeURIComponent(message);\n\n  // D√©tection mobile vs desktop\n  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n  const baseUrl = isMobile ? 'whatsapp://send' : 'https://web.whatsapp.com/send';\n\n  return `${baseUrl}?phone=${cleanPhone}&text=${encodedMessage}`;\n}\n\n// ============================================================================\n// COPIER DANS LE PRESSE-PAPIERS\n// ============================================================================\n\nexport async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    // M√©thode moderne\n    if (navigator.clipboard && window.isSecureContext) {\n      await navigator.clipboard.writeText(text);\n      return true;\n    }\n\n    // Fallback pour anciens navigateurs\n    const textarea = document.createElement('textarea');\n    textarea.value = text;\n    textarea.style.position = 'fixed';\n    textarea.style.left = '-9999px';\n    document.body.appendChild(textarea);\n    textarea.select();\n\n    const success = document.execCommand('copy');\n    document.body.removeChild(textarea);\n\n    return success;\n  } catch (error) {\n    console.error('Error copying to clipboard:', error);\n    return false;\n  }\n}\n\n// ============================================================================\n// PARTAGE NATIF (MOBILE)\n// ============================================================================\n\nexport async function shareMessage(message: string): Promise<boolean> {\n  try {\n    if (navigator.share) {\n      await navigator.share({\n        text: message,\n      });\n      return true;\n    }\n    return false;\n  } catch (error) {\n    // L'utilisateur a annul√© le partage\n    return false;\n  }\n}\n\n// ============================================================================\n// EXTRACTION DE VARIABLES D'UN MOD√àLE\n// ============================================================================\n\nexport function extractVariables(template: string): string[] {\n  const regex = /{([^}]+)}/g;\n  const matches = template.matchAll(regex);\n  const variables = Array.from(matches, (m) => m[1]);\n  return [...new Set(variables)]; // D√©dupliquer\n}\n\n// ============================================================================\n// VALIDATION DE MOD√àLE\n// ============================================================================\n\nexport function validateTemplate(template: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  // V√©rifier que les accolades sont √©quilibr√©es\n  const openBraces = (template.match(/{/g) || []).length;\n  const closeBraces = (template.match(/}/g) || []).length;\n\n  if (openBraces !== closeBraces) {\n    errors.push('Les accolades ne sont pas √©quilibr√©es');\n  }\n\n  // V√©rifier que le template n'est pas vide\n  if (template.trim() === '') {\n    errors.push('Le mod√®le ne peut pas √™tre vide');\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Select } from '@/components/ui/Select';\nimport { useSettings } from '@/contexts/SettingsContext';\nimport { useData } from '@/contexts/DataContext';\nimport { useToast } from '@/contexts/ToastContext';\nimport { Visit, Speaker, MessageType, CommunicationChannel } from '@/types';\nimport { generateMessage } from '@/utils/messageGenerator';\nimport { Copy, RefreshCw, Send } from 'lucide-react';\n\ninterface MessageGeneratorModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  speaker: Speaker;\n  visit: Visit;\n  initialChannel?: CommunicationChannel;\n  initialType?: MessageType;\n}\n\nexport const MessageGeneratorModal: React.FC<MessageGeneratorModalProps> = ({\n  isOpen,\n  onClose,\n  speaker,\n  visit,\n  initialChannel = 'whatsapp',\n  initialType = 'reminder-7',\n}) => {\n  const { settings } = useSettings();\n  const { hosts, congregationProfile } = useData();\n  const { addToast } = useToast();\n\n  const [message, setMessage] = useState('');\n  const [channel, setChannel] = useState<CommunicationChannel>(initialChannel);\n  const [type, setType] = useState<MessageType>(initialType);\n  const [language, setLanguage] = useState(settings.language);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // G√©n√©rer le message initial lors de l'ouverture ou du changement de param√®tres\n  useEffect(() => {\n    if (isOpen) {\n      handleGenerate();\n    }\n  }, [isOpen, type, language]);\n\n  const handleGenerate = async () => {\n    setIsGenerating(true);\n    try {\n      const host = hosts.find((h) => h.nom === visit.host);\n\n      const generated = generateMessage(\n        visit,\n        speaker,\n        host,\n        congregationProfile,\n        type,\n        'speaker', // On √©crit √† l'orateur par d√©faut\n        language\n      );\n      setMessage(generated);\n    } catch (_error) {\n      addToast('Erreur lors de la g√©n√©ration du message', 'error');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(message);\n      addToast('Message copi√© dans le presse-papier', 'success');\n    } catch (_error) {\n      addToast('Erreur lors de la copie', 'error');\n    }\n  };\n\n  const handleSend = () => {\n    if (channel === 'whatsapp') {\n      const encodedMessage = encodeURIComponent(message);\n      const phone = speaker.telephone?.replace(/\\D/g, '') || '';\n      window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');\n    } else if (channel === 'email') {\n      const subject = encodeURIComponent(`Visite √† KBV Lyon - ${visit.talkTheme}`);\n      const body = encodeURIComponent(message);\n      window.open(`mailto:${speaker.email}?subject=${subject}&body=${body}`, '_blank');\n    } else {\n      // SMS\n      const body = encodeURIComponent(message);\n      window.open(`sms:${speaker.telephone}?body=${body}`, '_blank');\n    }\n    onClose();\n  };\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title={`Message pour ${speaker.nom}`}\n      size='lg'\n      footer={\n        <>\n          <Button variant='ghost' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button variant='secondary' onClick={handleCopy} leftIcon={<Copy className='w-4 h-4' />}>\n            Copier\n          </Button>\n          <Button onClick={handleSend} leftIcon={<Send className='w-4 h-4' />}>\n            Envoyer ({channel === 'whatsapp' ? 'WhatsApp' : channel === 'email' ? 'Email' : 'SMS'})\n          </Button>\n        </>\n      }\n    >\n      <div className='space-y-4'>\n        {/* Toolbar */}\n        <div className='flex flex-wrap gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700'>\n          <div className='w-full sm:w-auto min-w-[150px]'>\n            <Select\n              label='Type'\n              options={[\n                { value: 'confirmation', label: 'Confirmation' },\n                { value: 'reminder-7', label: 'Rappel (J-7)' },\n                { value: 'reminder-2', label: 'Rappel (J-2)' },\n                { value: 'thanks', label: 'Remerciements' },\n                { value: 'preparation', label: 'Pr√©paration' },\n              ]}\n              value={type}\n              onChange={(e) => setType(e.target.value as MessageType)}\n            />\n          </div>\n\n          <div className='w-full sm:w-auto min-w-[150px]'>\n            <Select\n              label='Langue'\n              options={[\n                { value: 'fr', label: 'Fran√ßais' },\n                { value: 'cv', label: 'Capverdien' },\n                { value: 'pt', label: 'Portugu√™s' },\n              ]}\n              value={language}\n              onChange={(e) => setLanguage(e.target.value as 'fr' | 'cv' | 'pt')}\n            />\n          </div>\n\n          <div className='w-full sm:w-auto min-w-[150px]'>\n            <Select\n              label='Canal'\n              options={[\n                { value: 'whatsapp', label: 'WhatsApp' },\n                { value: 'sms', label: 'SMS' },\n                { value: 'email', label: 'Email' },\n              ]}\n              value={channel}\n              onChange={(e) => setChannel(e.target.value as CommunicationChannel)}\n            />\n          </div>\n        </div>\n\n        {/* Message Area */}\n        <div className='relative'>\n          <textarea\n            className='w-full h-64 p-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none font-mono text-sm'\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            placeholder='Le message g√©n√©r√© appara√Ætra ici...'\n          />\n\n          <div className='absolute bottom-4 right-4 flex gap-2'>\n            <Button\n              size='sm'\n              variant='secondary'\n              onClick={handleGenerate}\n              isLoading={isGenerating}\n              leftIcon={<RefreshCw className='w-4 h-4' />}\n            >\n              R√©g√©n√©rer\n            </Button>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n"],"names":["Check","createLucideIcon","Send","messageTemplates","individualHostRequestTemplates","hostRequestMessageTemplates","adaptMessageGender","message","speakerGender","hostGender","adapted","generateMessage","visit","speaker","host","congregationProfile","messageType","role","language","customTemplate","template","replaceVariables","hostName","formatFullDate","intro","getFirstTimeIntroduction","congregationName","introductions","generateHostRequestMessage","visits","isIndividualRequest","individualTemplates","visitsList","MessageGeneratorModal","isOpen","onClose","initialChannel","initialType","settings","useSettings","hosts","useData","addToast","useToast","setMessage","useState","channel","setChannel","type","setType","setLanguage","isGenerating","setIsGenerating","useEffect","handleGenerate","h","generated","handleCopy","handleSend","encodedMessage","phone","subject","body","jsx","Modal","jsxs","Fragment","Button","Copy","Select","e","RefreshCw"],"mappings":"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","x_google_ignoreList":[0,1]}