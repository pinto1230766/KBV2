{"version":3,"file":"Planning-SXkzRTye.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-down-right.js","../../node_modules/lucide-react/dist/esm/icons/arrow-up-right.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../../node_modules/lucide-react/dist/esm/icons/list.js","../../node_modules/lucide-react/dist/esm/icons/more-horizontal.js","../../node_modules/lucide-react/dist/esm/icons/more-vertical.js","../../node_modules/lucide-react/dist/esm/icons/pie-chart.js","../../src/components/planning/ConflictDetectionModal.tsx","../../src/components/planning/CancellationModal.tsx","../../src/components/planning/EmergencyReplacementModal.tsx","../../src/components/planning/VisitCard.tsx","../../src/components/planning/PlanningCardsView.tsx","../../src/components/planning/PlanningListView.tsx","../../src/components/planning/PlanningCalendarView.tsx","../../src/components/planning/ScheduleVisitModal.tsx","../../src/components/planning/PlanningWorkloadView.tsx","../../src/components/planning/PlanningTimelineView.tsx","../../src/components/expenses/FinancialDashboard.tsx","../../src/components/ui/DatePicker.tsx","../../src/components/planning/PlanningFilterModal.tsx","../../src/pages/Planning.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownRight = createLucideIcon(\"ArrowDownRight\", [\n  [\"path\", { d: \"m7 7 10 10\", key: \"1fmybs\" }],\n  [\"path\", { d: \"M17 7v10H7\", key: \"6fjiku\" }]\n]);\n\nexport { ArrowDownRight as default };\n//# sourceMappingURL=arrow-down-right.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowUpRight = createLucideIcon(\"ArrowUpRight\", [\n  [\"path\", { d: \"M7 7h10v10\", key: \"1tivn9\" }],\n  [\"path\", { d: \"M7 17 17 7\", key: \"1vkiza\" }]\n]);\n\nexport { ArrowUpRight as default };\n//# sourceMappingURL=arrow-up-right.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart = createLucideIcon(\"BarChart\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"20\", y2: \"10\", key: \"1vz5eb\" }],\n  [\"line\", { x1: \"18\", x2: \"18\", y1: \"20\", y2: \"4\", key: \"cun8e5\" }],\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"20\", y2: \"16\", key: \"hq0ia6\" }]\n]);\n\nexport { BarChart as default };\n//# sourceMappingURL=bar-chart.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\"path\", { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutGrid = createLucideIcon(\"LayoutGrid\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n]);\n\nexport { LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst List = createLucideIcon(\"List\", [\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"6\", y2: \"6\", key: \"7ey8pc\" }],\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"12\", y2: \"12\", key: \"rjfblc\" }],\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"18\", y2: \"18\", key: \"c3b1m8\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"6\", y2: \"6\", key: \"1g7gq3\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"12\", y2: \"12\", key: \"1pjlvk\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"18\", y2: \"18\", key: \"28t2mc\" }]\n]);\n\nexport { List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreHorizontal = createLucideIcon(\"MoreHorizontal\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"19\", cy: \"12\", r: \"1\", key: \"1wjl8i\" }],\n  [\"circle\", { cx: \"5\", cy: \"12\", r: \"1\", key: \"1pcz8c\" }]\n]);\n\nexport { MoreHorizontal as default };\n//# sourceMappingURL=more-horizontal.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreVertical = createLucideIcon(\"MoreVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { MoreVertical as default };\n//# sourceMappingURL=more-vertical.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PieChart = createLucideIcon(\"PieChart\", [\n  [\"path\", { d: \"M21.21 15.89A10 10 0 1 1 8 2.83\", key: \"k2fpak\" }],\n  [\"path\", { d: \"M22 12A10 10 0 0 0 12 2v10z\", key: \"1rfc4y\" }]\n]);\n\nexport { PieChart as default };\n//# sourceMappingURL=pie-chart.js.map\n","import React, { useMemo, useState } from 'react';\nimport { AlertTriangle, Calendar, CheckCircle, XCircle, ArrowRight } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit, Speaker, Host } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface ConflictDetectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onResolve?: (resolution: ConflictResolution) => void;\n}\n\ninterface Conflict {\n  id: string;\n  type: 'date' | 'speaker' | 'host' | 'talk';\n  severity: 'critical' | 'warning' | 'info';\n  message: string;\n  details: string;\n  affectedVisit?: Visit;\n  suggestions: ConflictSuggestion[];\n}\n\ninterface ConflictSuggestion {\n  id: string;\n  type: 'reschedule' | 'change_speaker' | 'change_host' | 'cancel';\n  description: string;\n  newDate?: string;\n  newSpeaker?: Speaker;\n  newHost?: Host;\n  impact: 'low' | 'medium' | 'high';\n}\n\ninterface ConflictResolution {\n  conflictId: string;\n  suggestionId: string;\n  action: 'apply' | 'ignore';\n}\n\nexport const ConflictDetectionModal: React.FC<ConflictDetectionModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onResolve,\n}) => {\n  const { visits, hosts } = useData();\n  const [selectedResolutions, setSelectedResolutions] = useState<Map<string, string>>(new Map());\n\n  // D√©tection des conflits\n  const conflicts = useMemo(() => {\n    const detected: Conflict[] = [];\n\n    // 1. Conflit de date - M√™me orateur, m√™me date\n    const sameDateSpeaker = visits.find(\n      (v) =>\n        v.id === visit.id &&\n        v.visitId !== visit.visitId &&\n        v.visitDate === visit.visitDate &&\n        v.status !== 'cancelled'\n    );\n\n    if (sameDateSpeaker) {\n      detected.push({\n        id: 'conflict-speaker-date',\n        type: 'speaker',\n        severity: 'critical',\n        message: 'Orateur d√©j√† programm√©',\n        details: `${visit.nom} est d√©j√† programm√© le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')}`,\n        affectedVisit: sameDateSpeaker,\n        suggestions: [\n          {\n            id: 'suggest-reschedule',\n            type: 'reschedule',\n            description: 'Reprogrammer cette visite √† une autre date',\n            impact: 'medium',\n          },\n          {\n            id: 'suggest-cancel-other',\n            type: 'cancel',\n            description: \"Annuler l'autre visite\",\n            impact: 'high',\n          },\n        ],\n      });\n    }\n\n    // 2. Conflit d'h√¥te - H√¥te indisponible\n    const hostData = hosts.find((h) => h.nom === visit.host);\n    if (hostData?.unavailableDates?.includes(visit.visitDate)) {\n      const availableHosts = hosts.filter(\n        (h) => !h.unavailableDates?.includes(visit.visitDate) && h.gender === visit.congregation // Exemple de matching\n      );\n\n      detected.push({\n        id: 'conflict-host-unavailable',\n        type: 'host',\n        severity: 'warning',\n        message: 'H√¥te indisponible',\n        details: `${visit.host} n'est pas disponible le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')}`,\n        suggestions: availableHosts.slice(0, 3).map((h, idx) => ({\n          id: `suggest-host-${idx}`,\n          type: 'change_host',\n          description: `Assigner √† ${h.nom}`,\n          newHost: h,\n          impact: 'low',\n        })),\n      });\n    }\n\n    // 3. Conflit de discours - M√™me discours r√©cemment donn√©\n    const recentSameTalk = visits.find(\n      (v) =>\n        v.visitId !== visit.visitId &&\n        v.talkNoOrType === visit.talkNoOrType &&\n        v.status === 'completed' &&\n        Math.abs(new Date(v.visitDate).getTime() - new Date(visit.visitDate).getTime()) <\n          90 * 24 * 60 * 60 * 1000 // 90 jours\n    );\n\n    if (recentSameTalk && visit.talkNoOrType) {\n      detected.push({\n        id: 'conflict-talk-recent',\n        type: 'talk',\n        severity: 'info',\n        message: 'Discours r√©cemment donn√©',\n        details: `Le discours ${visit.talkNoOrType} a √©t√© donn√© il y a moins de 3 mois`,\n        affectedVisit: recentSameTalk,\n        suggestions: [\n          {\n            id: 'suggest-different-talk',\n            type: 'change_speaker',\n            description: 'Choisir un autre discours',\n            impact: 'low',\n          },\n          {\n            id: 'suggest-ignore',\n            type: 'reschedule',\n            description: 'Continuer quand m√™me',\n            impact: 'low',\n          },\n        ],\n      });\n    }\n\n    // 4. Conflit de charge - Trop de visites le m√™me mois\n    const sameMonthVisits = visits.filter((v) => {\n      const vDate = new Date(v.visitDate);\n      const visitDate = new Date(visit.visitDate);\n      return (\n        vDate.getMonth() === visitDate.getMonth() &&\n        vDate.getFullYear() === visitDate.getFullYear() &&\n        v.status !== 'cancelled'\n      );\n    });\n\n    if (sameMonthVisits.length > 5) {\n      detected.push({\n        id: 'conflict-overload',\n        type: 'date',\n        severity: 'warning',\n        message: 'Charge √©lev√©e ce mois',\n        details: `${sameMonthVisits.length} visites programm√©es ce mois`,\n        suggestions: [\n          {\n            id: 'suggest-next-month',\n            type: 'reschedule',\n            description: 'D√©placer au mois suivant',\n            impact: 'medium',\n          },\n        ],\n      });\n    }\n\n    return detected;\n  }, [visit, visits, hosts]);\n\n  const getSeverityColor = (severity: Conflict['severity']) => {\n    switch (severity) {\n      case 'critical':\n        return 'text-red-600 bg-red-100 dark:bg-red-900/20';\n      case 'warning':\n        return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20';\n      case 'info':\n        return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20';\n    }\n  };\n\n  const getSeverityIcon = (severity: Conflict['severity']) => {\n    switch (severity) {\n      case 'critical':\n        return <XCircle className='w-5 h-5' />;\n      case 'warning':\n        return <AlertTriangle className='w-5 h-5' />;\n      case 'info':\n        return <CheckCircle className='w-5 h-5' />;\n    }\n  };\n\n  const handleSelectSuggestion = (conflictId: string, suggestionId: string) => {\n    setSelectedResolutions((prev) => {\n      const newMap = new Map(prev);\n      newMap.set(conflictId, suggestionId);\n      return newMap;\n    });\n  };\n\n  const handleApplyResolutions = () => {\n    selectedResolutions.forEach((suggestionId, conflictId) => {\n      if (onResolve) {\n        onResolve({\n          conflictId,\n          suggestionId,\n          action: 'apply',\n        });\n      }\n    });\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='D√©tection de Conflits' size='lg'>\n      <div className='space-y-6'>\n        {/* En-t√™te */}\n        <div className='flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <Calendar className='w-6 h-6 text-primary-600' />\n          <div>\n            <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n            <p className='text-sm text-gray-600 dark:text-gray-400'>\n              {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                weekday: 'long',\n                day: 'numeric',\n                month: 'long',\n                year: 'numeric',\n              })}{' '}\n              √† {visit.visitTime}\n            </p>\n          </div>\n        </div>\n\n        {/* R√©sum√© */}\n        <div className='flex items-center justify-between p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg'>\n          <div className='flex items-center gap-2'>\n            <AlertTriangle className='w-5 h-5 text-orange-500' />\n            <span className='font-medium text-gray-900 dark:text-white'>\n              {conflicts.length} conflit{conflicts.length > 1 ? 's' : ''} d√©tect√©\n              {conflicts.length > 1 ? 's' : ''}\n            </span>\n          </div>\n          <div className='flex gap-2'>\n            <Badge variant='danger'>\n              {conflicts.filter((c) => c.severity === 'critical').length} critique\n              {conflicts.filter((c) => c.severity === 'critical').length > 1 ? 's' : ''}\n            </Badge>\n            <Badge variant='warning'>\n              {conflicts.filter((c) => c.severity === 'warning').length} avertissement\n              {conflicts.filter((c) => c.severity === 'warning').length > 1 ? 's' : ''}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Liste des conflits */}\n        {conflicts.length === 0 ? (\n          <div className='text-center py-12'>\n            <CheckCircle className='w-16 h-16 mx-auto mb-4 text-green-500' />\n            <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n              Aucun conflit d√©tect√©\n            </h3>\n            <p className='text-gray-600 dark:text-gray-400'>\n              Cette visite peut √™tre programm√©e sans probl√®me\n            </p>\n          </div>\n        ) : (\n          <div className='space-y-4 max-h-96 overflow-y-auto'>\n            {conflicts.map((conflict) => (\n              <Card\n                key={conflict.id}\n                className={`border-l-4 ${\n                  conflict.severity === 'critical'\n                    ? 'border-l-red-600'\n                    : conflict.severity === 'warning'\n                      ? 'border-l-orange-500'\n                      : 'border-l-blue-500'\n                }`}\n              >\n                <CardBody className='space-y-4'>\n                  {/* En-t√™te du conflit */}\n                  <div className='flex items-start gap-3'>\n                    <div className={`p-2 rounded-lg ${getSeverityColor(conflict.severity)}`}>\n                      {getSeverityIcon(conflict.severity)}\n                    </div>\n                    <div className='flex-1'>\n                      <h4 className='font-semibold text-gray-900 dark:text-white'>\n                        {conflict.message}\n                      </h4>\n                      <p className='text-sm text-gray-600 dark:text-gray-400 mt-1'>\n                        {conflict.details}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Suggestions */}\n                  {conflict.suggestions.length > 0 && (\n                    <div className='space-y-2'>\n                      <p className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n                        Solutions sugg√©r√©es :\n                      </p>\n                      {conflict.suggestions.map((suggestion) => (\n                        <button\n                          key={suggestion.id}\n                          onClick={() => handleSelectSuggestion(conflict.id, suggestion.id)}\n                          className={`w-full text-left p-3 rounded-lg border-2 transition-all ${\n                            selectedResolutions.get(conflict.id) === suggestion.id\n                              ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                              : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                          }`}\n                        >\n                          <div className='flex items-center justify-between'>\n                            <div className='flex items-center gap-2'>\n                              <ArrowRight className='w-4 h-4 text-primary-600' />\n                              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                                {suggestion.description}\n                              </span>\n                            </div>\n                            <Badge\n                              variant={\n                                suggestion.impact === 'high'\n                                  ? 'danger'\n                                  : suggestion.impact === 'medium'\n                                    ? 'warning'\n                                    : 'default'\n                              }\n                            >\n                              Impact{' '}\n                              {suggestion.impact === 'high'\n                                ? '√©lev√©'\n                                : suggestion.impact === 'medium'\n                                  ? 'moyen'\n                                  : 'faible'}\n                            </Badge>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </CardBody>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          {conflicts.length > 0 && (\n            <>\n              <Button\n                variant='outline'\n                onClick={() => {\n                  conflicts.forEach((c) => {\n                    if (onResolve) {\n                      onResolve({\n                        conflictId: c.id,\n                        suggestionId: '',\n                        action: 'ignore',\n                      });\n                    }\n                  });\n                  onClose();\n                }}\n              >\n                Ignorer les conflits\n              </Button>\n              <Button\n                variant='primary'\n                onClick={handleApplyResolutions}\n                disabled={selectedResolutions.size === 0}\n              >\n                Appliquer les solutions ({selectedResolutions.size})\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport { XCircle, Calendar, MessageSquare, RotateCcw, Send, AlertTriangle } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Visit } from '@/types';\n\ninterface CancellationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onCancel: (cancellationData: CancellationData) => void;\n}\n\nexport interface CancellationData {\n  visitId: string;\n  reason: CancellationReason;\n  customReason?: string;\n  notifySpeaker: boolean;\n  notifyHost: boolean;\n  proposeReschedule: boolean;\n  suggestedNewDate?: string;\n  internalNotes?: string;\n  cancelledBy: string;\n  cancelledAt: string;\n}\n\ntype CancellationReason =\n  | 'speaker_unavailable'\n  | 'host_unavailable'\n  | 'congregation_conflict'\n  | 'weather'\n  | 'health'\n  | 'emergency'\n  | 'duplicate'\n  | 'other';\n\nconst CANCELLATION_REASONS: { value: CancellationReason; label: string; icon: string }[] = [\n  { value: 'speaker_unavailable', label: 'Orateur indisponible', icon: 'üë§' },\n  { value: 'host_unavailable', label: 'H√¥te indisponible', icon: 'üè†' },\n  { value: 'congregation_conflict', label: 'Conflit de congr√©gation', icon: '‚ö†Ô∏è' },\n  { value: 'weather', label: 'Conditions m√©t√©o', icon: 'üåßÔ∏è' },\n  { value: 'health', label: 'Raisons de sant√©', icon: 'üè•' },\n  { value: 'emergency', label: 'Urgence', icon: 'üö®' },\n  { value: 'duplicate', label: 'Doublon d√©tect√©', icon: 'üìã' },\n  { value: 'other', label: 'Autre raison', icon: 'üìù' },\n];\n\nexport const CancellationModal: React.FC<CancellationModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onCancel,\n}) => {\n  const [selectedReason, setSelectedReason] = useState<CancellationReason | null>(null);\n  const [customReason, setCustomReason] = useState('');\n  const [notifySpeaker, setNotifySpeaker] = useState(true);\n  const [notifyHost, setNotifyHost] = useState(true);\n  const [proposeReschedule, setProposeReschedule] = useState(false);\n  const [suggestedNewDate, setSuggestedNewDate] = useState('');\n  const [internalNotes, setInternalNotes] = useState('');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const handleSubmit = () => {\n    if (!selectedReason) return;\n\n    const cancellationData: CancellationData = {\n      visitId: visit.visitId,\n      reason: selectedReason,\n      customReason: selectedReason === 'other' ? customReason : undefined,\n      notifySpeaker,\n      notifyHost,\n      proposeReschedule,\n      suggestedNewDate: proposeReschedule ? suggestedNewDate : undefined,\n      internalNotes,\n      cancelledBy: 'Coordinateur', // √Ä remplacer par l'utilisateur connect√©\n      cancelledAt: new Date().toISOString(),\n    };\n\n    onCancel(cancellationData);\n    onClose();\n  };\n\n  const getNotificationPreview = () => {\n    const reason = CANCELLATION_REASONS.find((r) => r.value === selectedReason);\n    return `Bonjour ${visit.nom},\\n\\nNous sommes au regret de vous informer que la visite pr√©vue le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')} doit √™tre annul√©e.\\n\\nRaison : ${reason?.label}${selectedReason === 'other' && customReason ? ` - ${customReason}` : ''}\\n\\n${proposeReschedule && suggestedNewDate ? `Nous vous proposons de reprogrammer cette visite le ${new Date(suggestedNewDate).toLocaleDateString('fr-FR')}.\\n\\n` : ''}Nous vous contacterons prochainement pour convenir d'une nouvelle date.\\n\\nCordialement,\\nKBV Lyon`;\n  };\n\n  if (showConfirmation) {\n    return (\n      <Modal isOpen={isOpen} onClose={onClose} title=\"Confirmer l'annulation\" size='md'>\n        <div className='space-y-6'>\n          <div className='flex items-start gap-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg'>\n            <AlertTriangle className='w-6 h-6 text-red-600 flex-shrink-0 mt-1' />\n            <div>\n              <h4 className='font-semibold text-red-900 dark:text-red-200 mb-2'>\n                Attention : Action irr√©versible\n              </h4>\n              <p className='text-sm text-red-800 dark:text-red-300'>\n                Vous √™tes sur le point d'annuler d√©finitivement cette visite. Cette action ne peut\n                pas √™tre annul√©e.\n              </p>\n            </div>\n          </div>\n\n          <div className='space-y-3'>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Orateur</span>\n              <span className='font-medium text-gray-900 dark:text-white'>{visit.nom}</span>\n            </div>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Date</span>\n              <span className='font-medium text-gray-900 dark:text-white'>\n                {new Date(visit.visitDate).toLocaleDateString('fr-FR')}\n              </span>\n            </div>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Raison</span>\n              <span className='font-medium text-gray-900 dark:text-white'>\n                {CANCELLATION_REASONS.find((r) => r.value === selectedReason)?.label}\n              </span>\n            </div>\n          </div>\n\n          {(notifySpeaker || notifyHost) && (\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-center gap-2 mb-2'>\n                <Send className='w-4 h-4 text-blue-600' />\n                <span className='font-medium text-blue-900 dark:text-blue-200'>\n                  Notifications √† envoyer\n                </span>\n              </div>\n              <ul className='text-sm text-blue-800 dark:text-blue-300 space-y-1'>\n                {notifySpeaker && <li>‚Ä¢ Notification √† l'orateur ({visit.nom})</li>}\n                {notifyHost && <li>‚Ä¢ Notification √† l'h√¥te ({visit.host})</li>}\n              </ul>\n            </div>\n          )}\n\n          <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n            <Button variant='secondary' onClick={() => setShowConfirmation(false)}>\n              Retour\n            </Button>\n            <Button variant='danger' onClick={handleSubmit}>\n              <XCircle className='w-4 h-4 mr-2' />\n              Confirmer l'annulation\n            </Button>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Annuler une visite' size='lg'>\n      <div className='space-y-6'>\n        {/* Informations de la visite */}\n        <div className='p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <div className='flex items-center gap-3 mb-3'>\n            <Calendar className='w-5 h-5 text-primary-600' />\n            <div>\n              <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n              <p className='text-sm text-gray-600 dark:text-gray-400'>\n                {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                  weekday: 'long',\n                  day: 'numeric',\n                  month: 'long',\n                  year: 'numeric',\n                })}{' '}\n                √† {visit.visitTime}\n              </p>\n            </div>\n          </div>\n          <div className='grid grid-cols-2 gap-2 text-sm'>\n            <div>\n              <span className='text-gray-500 dark:text-gray-400'>Discours :</span>\n              <span className='ml-2 text-gray-900 dark:text-white'>{visit.talkNoOrType}</span>\n            </div>\n            <div>\n              <span className='text-gray-500 dark:text-gray-400'>H√¥te :</span>\n              <span className='ml-2 text-gray-900 dark:text-white'>{visit.host}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Raison de l'annulation */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Raison de l'annulation *\n          </label>\n          <div className='grid grid-cols-2 gap-3'>\n            {CANCELLATION_REASONS.map((reason) => (\n              <button\n                key={reason.value}\n                onClick={() => setSelectedReason(reason.value)}\n                className={`p-3 rounded-lg border-2 text-left transition-all ${\n                  selectedReason === reason.value\n                    ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                }`}\n              >\n                <div className='flex items-center gap-2'>\n                  <span className='text-2xl'>{reason.icon}</span>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    {reason.label}\n                  </span>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Raison personnalis√©e */}\n        {selectedReason === 'other' && (\n          <div>\n            <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n              Pr√©cisez la raison\n            </label>\n            <textarea\n              value={customReason}\n              onChange={(e) => setCustomReason(e.target.value)}\n              className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              rows={3}\n              placeholder=\"D√©crivez la raison de l'annulation...\"\n            />\n          </div>\n        )}\n\n        {/* Options de notification */}\n        <div className='space-y-3'>\n          <h4 className='text-sm font-medium text-gray-700 dark:text-gray-300'>Notifications</h4>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={notifySpeaker}\n              onChange={(e) => setNotifySpeaker(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                Notifier l'orateur\n              </span>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>\n                Envoyer un message d'annulation √† {visit.nom}\n              </p>\n            </div>\n          </label>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={notifyHost}\n              onChange={(e) => setNotifyHost(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                Notifier l'h√¥te\n              </span>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>\n                Envoyer un message d'annulation √† {visit.host}\n              </p>\n            </div>\n          </label>\n        </div>\n\n        {/* Proposition de reprogrammation */}\n        <div className='space-y-3'>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={proposeReschedule}\n              onChange={(e) => setProposeReschedule(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <div className='flex items-center gap-2'>\n                <RotateCcw className='w-4 h-4 text-primary-600' />\n                <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                  Proposer une reprogrammation\n                </span>\n              </div>\n              <p className='text-xs text-gray-500 dark:text-gray-400 mt-1'>\n                Sugg√©rer une nouvelle date dans le message d'annulation\n              </p>\n            </div>\n          </label>\n\n          {proposeReschedule && (\n            <div>\n              <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                Nouvelle date propos√©e\n              </label>\n              <input\n                type='date'\n                value={suggestedNewDate}\n                onChange={(e) => setSuggestedNewDate(e.target.value)}\n                min={new Date().toISOString().split('T')[0]}\n                aria-label='Nouvelle date propos√©e'\n                className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Notes internes */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n            Notes internes (optionnel)\n          </label>\n          <textarea\n            value={internalNotes}\n            onChange={(e) => setInternalNotes(e.target.value)}\n            className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            rows={2}\n            placeholder=\"Notes pour l'√©quipe (non envoy√©es aux participants)...\"\n          />\n        </div>\n\n        {/* Pr√©visualisation du message */}\n        {(notifySpeaker || notifyHost) && selectedReason && (\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n            <div className='flex items-center gap-2 mb-2'>\n              <MessageSquare className='w-4 h-4 text-blue-600' />\n              <span className='text-sm font-medium text-blue-900 dark:text-blue-200'>\n                Aper√ßu du message\n              </span>\n            </div>\n            <pre className='text-xs text-blue-800 dark:text-blue-300 whitespace-pre-wrap font-sans'>\n              {getNotificationPreview()}\n            </pre>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button\n            variant='danger'\n            onClick={() => setShowConfirmation(true)}\n            disabled={!selectedReason || (selectedReason === 'other' && !customReason)}\n          >\n            <XCircle className='w-4 h-4 mr-2' />\n            Annuler la visite\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { AlertCircle, User, Phone, MapPin, Calendar, Send, Search, Filter } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit, Speaker } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface EmergencyReplacementModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onSelectReplacement: (speaker: Speaker, sendNotification: boolean) => void;\n}\n\ninterface SpeakerMatch {\n  speaker: Speaker;\n  score: number;\n  reasons: string[];\n  availableTalks: string[];\n  distance?: number;\n  lastVisit?: string;\n}\n\nexport const EmergencyReplacementModal: React.FC<EmergencyReplacementModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onSelectReplacement,\n}) => {\n  const { speakers, visits } = useData();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterByDistance, setFilterByDistance] = useState(false);\n  const [filterByAvailability, setFilterByAvailability] = useState(true);\n  const [selectedSpeaker, setSelectedSpeaker] = useState<Speaker | null>(null);\n  const [sendNotification, setSendNotification] = useState(true);\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Algorithme de matching intelligent\n  const matchedSpeakers = useMemo(() => {\n    const matches: SpeakerMatch[] = [];\n\n    speakers.forEach((speaker) => {\n      // Ne pas sugg√©rer l'orateur original\n      if (speaker.id === visit.id) return;\n\n      let score = 0;\n      const reasons: string[] = [];\n      const availableTalks: string[] = [];\n\n      // 1. V√©rifier les discours disponibles\n      const speakerTalks = speaker.talkHistory.map((t) => t.talkNo.toString());\n      if (visit.talkNoOrType && speakerTalks.includes(visit.talkNoOrType)) {\n        score += 50;\n        reasons.push('Poss√®de le m√™me discours');\n        availableTalks.push(visit.talkNoOrType);\n      } else {\n        // Ajouter tous les discours disponibles\n        speakerTalks.forEach((talk) => availableTalks.push(talk));\n      }\n\n      // 2. V√©rifier la disponibilit√© (pas de visite le m√™me jour)\n      const hasConflict = visits.some(\n        (v) => v.id === speaker.id && v.visitDate === visit.visitDate && v.status !== 'cancelled'\n      );\n\n      if (!hasConflict) {\n        score += 30;\n        reasons.push('Disponible √† cette date');\n      } else {\n        if (filterByAvailability) return; // Exclure si filtre activ√©\n        reasons.push('‚ö†Ô∏è D√©j√† programm√© ce jour');\n      }\n\n      // 3. V√©rifier la proximit√© g√©ographique\n      if (speaker.congregation === visit.congregation) {\n        score += 20;\n        reasons.push('M√™me congr√©gation');\n      }\n\n      // 4. V√©rifier l'historique r√©cent\n      const recentVisits = visits.filter(\n        (v) =>\n          v.id === speaker.id &&\n          v.status === 'completed' &&\n          new Date(v.visitDate) > new Date(Date.now() - 90 * 24 * 60 * 60 * 1000)\n      );\n\n      if (recentVisits.length === 0) {\n        score += 15;\n        reasons.push('Pas de visite r√©cente');\n      }\n\n      // 5. V√©rifier si v√©hicul√©\n      if (speaker.isVehiculed) {\n        score += 10;\n        reasons.push('V√©hicul√©');\n      }\n\n      // 6. V√©rifier les contacts disponibles\n      if (speaker.telephone) {\n        score += 5;\n        reasons.push('T√©l√©phone disponible');\n      }\n\n      // Calculer la derni√®re visite\n      const lastVisit = visits\n        .filter((v) => v.id === speaker.id && v.status === 'completed')\n        .sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime())[0];\n\n      matches.push({\n        speaker,\n        score,\n        reasons,\n        availableTalks,\n        lastVisit: lastVisit?.visitDate,\n      });\n    });\n\n    // Trier par score d√©croissant\n    return matches\n      .sort((a, b) => b.score - a.score)\n      .filter((m) => {\n        if (searchTerm) {\n          return (\n            m.speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            m.speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase())\n          );\n        }\n        return true;\n      });\n  }, [speakers, visits, visit, searchTerm, filterByAvailability]);\n\n  const handleSelectSpeaker = () => {\n    if (selectedSpeaker) {\n      onSelectReplacement(selectedSpeaker, sendNotification);\n      onClose();\n    }\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score >= 80) return 'text-green-600 bg-green-100 dark:bg-green-900/20';\n    if (score >= 50) return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20';\n    if (score >= 30) return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20';\n    return 'text-gray-600 bg-gray-100 dark:bg-gray-900/20';\n  };\n\n  const getScoreLabel = (score: number) => {\n    if (score >= 80) return 'Excellent match';\n    if (score >= 50) return 'Bon match';\n    if (score >= 30) return 'Match acceptable';\n    return 'Match faible';\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Trouver un rempla√ßant d'urgence\" size='xl'>\n      <div className='space-y-6'>\n        {/* Alerte urgence */}\n        <div className='flex items-start gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg'>\n          <AlertCircle className='w-5 h-5 text-red-600 flex-shrink-0 mt-0.5' />\n          <div>\n            <h4 className='font-semibold text-red-900 dark:text-red-200'>\n              Remplacement d'urgence requis\n            </h4>\n            <p className='text-sm text-red-800 dark:text-red-300 mt-1'>\n              Visite de <strong>{visit.nom}</strong> le{' '}\n              <strong>{new Date(visit.visitDate).toLocaleDateString('fr-FR')}</strong> √†{' '}\n              <strong>{visit.visitTime}</strong>\n            </p>\n            {visit.talkNoOrType && (\n              <p className='text-sm text-red-800 dark:text-red-300'>\n                Discours : <strong>{visit.talkNoOrType}</strong> - {visit.talkTheme}\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Barre de recherche et filtres */}\n        <div className='space-y-3'>\n          <div className='flex gap-3'>\n            <div className='flex-1 relative'>\n              <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400' />\n              <input\n                type='text'\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder='Rechercher un orateur...'\n                className='w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              />\n            </div>\n            <Button variant='outline' onClick={() => setShowFilters(!showFilters)}>\n              <Filter className='w-4 h-4 mr-2' />\n              Filtres\n            </Button>\n          </div>\n\n          {showFilters && (\n            <div className='flex gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={filterByAvailability}\n                  onChange={(e) => setFilterByAvailability(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Uniquement disponibles\n                </span>\n              </label>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={filterByDistance}\n                  onChange={(e) => setFilterByDistance(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Proximit√© g√©ographique\n                </span>\n              </label>\n            </div>\n          )}\n        </div>\n\n        {/* Statistiques */}\n        <div className='grid grid-cols-3 gap-4'>\n          <div className='p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>{matchedSpeakers.length}</div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Orateurs trouv√©s</div>\n          </div>\n          <div className='p-3 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {matchedSpeakers.filter((m) => m.score >= 50).length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Bons matchs</div>\n          </div>\n          <div className='p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>\n              {\n                matchedSpeakers.filter((m) => m.availableTalks.includes(visit.talkNoOrType || ''))\n                  .length\n              }\n            </div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>M√™me discours</div>\n          </div>\n        </div>\n\n        {/* Liste des orateurs */}\n        <div className='space-y-3 max-h-96 overflow-y-auto'>\n          {matchedSpeakers.length === 0 ? (\n            <div className='text-center py-12'>\n              <AlertCircle className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucun orateur trouv√©\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>\n                Essayez de modifier vos crit√®res de recherche\n              </p>\n            </div>\n          ) : (\n            matchedSpeakers.map((match) => (\n              <Card\n                key={match.speaker.id}\n                hoverable\n                className={`cursor-pointer transition-all ${\n                  selectedSpeaker?.id === match.speaker.id\n                    ? 'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : ''\n                }`}\n                onClick={() => setSelectedSpeaker(match.speaker)}\n              >\n                <CardBody>\n                  <div className='flex items-start justify-between gap-4'>\n                    {/* Informations orateur */}\n                    <div className='flex-1'>\n                      <div className='flex items-center gap-3 mb-2'>\n                        <div className='w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-lg'>\n                          {match.speaker.nom.charAt(0).toUpperCase()}\n                        </div>\n                        <div>\n                          <h4 className='font-semibold text-gray-900 dark:text-white'>\n                            {match.speaker.nom}\n                          </h4>\n                          <div className='flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400'>\n                            <MapPin className='w-3 h-3' />\n                            {match.speaker.congregation}\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Raisons du match */}\n                      <div className='flex flex-wrap gap-2 mb-3'>\n                        {match.reasons.map((reason, idx) => (\n                          <Badge key={idx} variant='default' className='text-xs'>\n                            {reason}\n                          </Badge>\n                        ))}\n                      </div>\n\n                      {/* Discours disponibles */}\n                      {match.availableTalks.length > 0 && (\n                        <div className='text-sm'>\n                          <span className='text-gray-600 dark:text-gray-400'>Discours : </span>\n                          <span className='text-gray-900 dark:text-white'>\n                            {match.availableTalks.slice(0, 5).join(', ')}\n                            {match.availableTalks.length > 5 &&\n                              ` +${match.availableTalks.length - 5}`}\n                          </span>\n                        </div>\n                      )}\n\n                      {/* Contact */}\n                      {match.speaker.telephone && (\n                        <div className='flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400'>\n                          <Phone className='w-3 h-3' />\n                          {match.speaker.telephone}\n                        </div>\n                      )}\n\n                      {/* Derni√®re visite */}\n                      {match.lastVisit && (\n                        <div className='flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-500'>\n                          <Calendar className='w-3 h-3' />\n                          Derni√®re visite : {new Date(match.lastVisit).toLocaleDateString('fr-FR')}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Score */}\n                    <div className='text-right'>\n                      <div\n                        className={`inline-flex items-center gap-2 px-3 py-1 rounded-full ${getScoreColor(match.score)}`}\n                      >\n                        <span className='text-lg font-bold'>{match.score}</span>\n                      </div>\n                      <div className='text-xs text-gray-600 dark:text-gray-400 mt-1'>\n                        {getScoreLabel(match.score)}\n                      </div>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Option de notification */}\n        {selectedSpeaker && (\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n            <label className='flex items-start gap-3 cursor-pointer'>\n              <input\n                type='checkbox'\n                checked={sendNotification}\n                onChange={(e) => setSendNotification(e.target.checked)}\n                className='mt-1 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n              />\n              <div>\n                <div className='flex items-center gap-2'>\n                  <Send className='w-4 h-4 text-blue-600' />\n                  <span className='font-medium text-blue-900 dark:text-blue-200'>\n                    Envoyer une notification imm√©diate\n                  </span>\n                </div>\n                <p className='text-sm text-blue-800 dark:text-blue-300 mt-1'>\n                  Un message sera envoy√© √† {selectedSpeaker.nom} pour l'informer du remplacement\n                  d'urgence\n                </p>\n              </div>\n            </label>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button variant='primary' onClick={handleSelectSpeaker} disabled={!selectedSpeaker}>\n            <User className='w-4 h-4 mr-2' />\n            S√©lectionner ce rempla√ßant\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport {\n  Calendar,\n  MapPin,\n  User,\n  Clock,\n  MoreVertical,\n  Edit2,\n  Trash2,\n  MessageSquare,\n  CheckCircle,\n  Star,\n  CreditCard,\n  Truck,\n} from 'lucide-react';\nimport { Visit } from '@/types';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Badge } from '@/components/ui/Badge';\nimport { CommunicationProgress } from '@/components/messages/CommunicationProgress';\nimport { format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\ninterface VisitCardProps {\n  visit: Visit;\n  onClick?: () => void;\n  onAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const VisitCard: React.FC<VisitCardProps> = ({ visit, onClick, onAction }) => {\n  const [showMenu, setShowMenu] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return (\n          <Badge variant='success' size='sm'>\n            Confirm√©\n          </Badge>\n        );\n      case 'pending':\n        return (\n          <Badge variant='warning' size='sm'>\n            En attente\n          </Badge>\n        );\n      case 'completed':\n        return (\n          <Badge variant='default' size='sm'>\n            Termin√©\n          </Badge>\n        );\n      case 'cancelled':\n        return (\n          <Badge variant='danger' size='sm'>\n            Annul√©\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant='default' size='sm'>\n            {status}\n          </Badge>\n        );\n    }\n  };\n\n  const handleActionClick = (\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses',\n    e: React.MouseEvent\n  ) => {\n    e.stopPropagation();\n    if (onAction) {\n      onAction(visit, action);\n    }\n    setShowMenu(false);\n  };\n\n  const actionOptions = [\n    { action: 'edit', label: 'Modifier', icon: Edit2, color: 'text-blue-600' },\n    {\n      action: 'message',\n      label: 'Envoyer un message',\n      icon: MessageSquare,\n      color: 'text-green-600',\n    },\n    { action: 'expenses', label: 'D√©penses', icon: CreditCard, color: 'text-purple-600' },\n    { action: 'logistics', label: 'Logistique', icon: Truck, color: 'text-blue-500' },\n    { action: 'status', label: 'Changer le statut', icon: CheckCircle, color: 'text-orange-600' },\n    { action: 'feedback', label: 'Bilan', icon: Star, color: 'text-yellow-500' },\n    { action: 'delete', label: 'Supprimer', icon: Trash2, color: 'text-red-600' },\n  ];\n\n  return (\n    <Card hoverable className='h-full relative overflow-visible' onClick={onClick}>\n      <CardBody className='p-4 flex flex-col h-full'>\n        <div className='flex justify-between items-start mb-3'>\n          <div className='flex items-center gap-2'>\n            <div className='w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-sm'>\n              {visit.nom.charAt(0)}\n            </div>\n            <div>\n              <h4 className='font-semibold text-gray-900 dark:text-white text-sm line-clamp-1'>\n                {visit.nom}\n              </h4>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>{visit.congregation}</p>\n            </div>\n          </div>\n          {getStatusBadge(visit.status)}\n        </div>\n\n        <div className='space-y-2 mb-4 flex-1'>\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <Calendar className='w-4 h-4 mr-2 text-gray-400' />\n            <span className='capitalize'>\n              {format(new Date(visit.visitDate), 'EEEE d MMMM yyyy', { locale: fr })}\n            </span>\n          </div>\n\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <Clock className='w-4 h-4 mr-2 text-gray-400' />\n            <span>{visit.visitTime}</span>\n          </div>\n\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <MapPin className='w-4 h-4 mr-2 text-gray-400' />\n            <span className='line-clamp-1'>\n              {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Visioconf√©rence'}\n            </span>\n          </div>\n\n          {visit.host && (\n            <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n              <User className='w-4 h-4 mr-2 text-gray-400' />\n              <span className='line-clamp-1'>Chez {visit.host}</span>\n            </div>\n          )}\n\n          {/* Logistics Indicator */}\n          {visit.logistics?.checklist &&\n            visit.logistics.checklist.some((item) => !item.isCompleted) && (\n              <div className='flex items-center text-xs text-orange-600 dark:text-orange-400 mt-1'>\n                <Truck className='w-3 h-3 mr-2' />\n                <span>Logistique √† compl√©ter</span>\n              </div>\n            )}\n        </div>\n\n        {/* Barre de progression communication */}\n        <div className='pt-3 mt-3 border-t border-gray-100 dark:border-gray-700'>\n          <CommunicationProgress visit={visit} size='sm' />\n        </div>\n\n        <div className='pt-3 border-t border-gray-100 dark:border-gray-700'>\n          <div className='flex justify-between items-start mb-2'>\n                <div className='flex-1 min-w-0'>\n                  <div className='text-xs font-medium text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 px-2 py-1 rounded inline-block mb-1'>\n                    {visit.talkNoOrType === 'Assembl√©e' || visit.talkNoOrType === 'Congr√®s'\n                      ? visit.talkNoOrType\n                      : `Discours n¬∞${visit.talkNoOrType}`}\n                  </div>\n                  {visit.talkTheme && visit.talkNoOrType !== 'Assembl√©e' && visit.talkNoOrType !== 'Congr√®s' && (\n                    <p className='text-xs text-gray-600 dark:text-gray-400 line-clamp-2 mt-1'>\n                      {visit.talkTheme}\n                    </p>\n                  )}\n                </div>\n          </div>\n\n          <div className='relative'>\n            <button\n              ref={buttonRef}\n              aria-label='Options'\n              className='p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700'\n              onClick={(e) => {\n                e.stopPropagation();\n                setShowMenu(!showMenu);\n              }}\n            >\n              <MoreVertical className='w-4 h-4' />\n            </button>\n\n            {showMenu &&\n              createPortal(\n                <>\n                  <div\n                    className='fixed inset-0 z-50 bg-black/20 backdrop-blur-sm'\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setShowMenu(false);\n                    }}\n                  />\n                  <div className='fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl z-50 w-72 overflow-hidden animate-in fade-in zoom-in-95 duration-200'>\n                    <div className='p-2'>\n                      {actionOptions.map((option) => (\n                        <button\n                          key={option.action}\n                          className='w-full px-4 py-3 text-left text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-3 transition-colors mb-1 last:mb-0'\n                          onClick={(e) => handleActionClick(option.action as any, e)}\n                        >\n                          <div\n                            className={`p-2 rounded-full bg-opacity-10 ${option.color.replace('text-', 'bg-')}`}\n                          >\n                            <option.icon className={`w-5 h-5 ${option.color}`} />\n                          </div>\n                          {option.label}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </>,\n                document.body\n              )}\n          </div>\n        </div>\n      </CardBody>\n\n      {/* Overlay to close menu when clicking outside */}\n    </Card>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { VisitCard } from './VisitCard';\n\ninterface PlanningCardsViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n  onVisitAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const PlanningCardsView: React.FC<PlanningCardsViewProps> = ({\n  visits,\n  onVisitClick,\n  onVisitAction,\n}) => {\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12'>\n        <p className='text-gray-500 dark:text-gray-400'>\n          Aucune visite trouv√©e pour cette p√©riode.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6'>\n      {visits.map((visit, index) => (\n        <VisitCard\n          key={`${visit.id}-${index}`}\n          visit={visit}\n          onClick={() => onVisitClick?.(visit)}\n          onAction={onVisitAction}\n        />\n      ))}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { format } from 'date-fns';\nimport { Badge } from '@/components/ui/Badge';\nimport { Edit, Trash2, MessageSquare } from 'lucide-react';\n\ninterface PlanningListViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n  onVisitAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const PlanningListView: React.FC<PlanningListViewProps> = ({\n  visits,\n  onVisitClick,\n  onVisitAction,\n}) => {\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return (\n          <Badge variant='success' size='sm'>\n            Confirm√©\n          </Badge>\n        );\n      case 'pending':\n        return (\n          <Badge variant='warning' size='sm'>\n            En attente\n          </Badge>\n        );\n      case 'completed':\n        return (\n          <Badge variant='default' size='sm'>\n            Termin√©\n          </Badge>\n        );\n      case 'cancelled':\n        return (\n          <Badge variant='danger' size='sm'>\n            Annul√©\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant='default' size='sm'>\n            {status}\n          </Badge>\n        );\n    }\n  };\n\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700'>\n        <p className='text-gray-500 dark:text-gray-400'>\n          Aucune visite trouv√©e pour cette p√©riode.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className='bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm'>\n      <div className='overflow-x-auto'>\n        <table className='min-w-full divide-y divide-gray-200 dark:divide-gray-700'>\n          <thead className='bg-gray-50 dark:bg-gray-900/50'>\n            <tr>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Date\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Orateur\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Discours\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Lieu / H√¥te\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Statut\n              </th>\n              <th scope='col' className='relative px-6 py-3'>\n                <span className='sr-only'>Actions</span>\n              </th>\n            </tr>\n          </thead>\n          <tbody className='bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700'>\n            {visits.map((visit) => (\n              <tr\n                key={visit.id}\n                className='hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer'\n                onClick={() => onVisitClick?.(visit)}\n              >\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='text-sm font-medium text-gray-900 dark:text-white'>\n                    {format(new Date(visit.visitDate), 'dd/MM/yyyy')}\n                  </div>\n                  <div className='text-sm text-gray-500 dark:text-gray-400'>{visit.visitTime}</div>\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='flex items-center'>\n                    <div className='flex-shrink-0 h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-xs mr-3'>\n                      {visit.nom.charAt(0)}\n                    </div>\n                    <div>\n                      <div className='text-sm font-medium text-gray-900 dark:text-white'>\n                        {visit.nom}\n                      </div>\n                      <div className='text-sm text-gray-500 dark:text-gray-400'>\n                        {visit.congregation}\n                      </div>\n                    </div>\n                  </div>\n                </td>\n                <td className='px-6 py-4'>\n                  <div className='text-sm text-gray-900 dark:text-white'>\n                    N¬∞{visit.talkNoOrType}\n                  </div>\n                  <div className='text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs'>\n                    {visit.talkTheme}\n                  </div>\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='text-sm text-gray-900 dark:text-white'>\n                    {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Visioconf√©rence'}\n                  </div>\n                  {visit.host && (\n                    <div className='text-sm text-gray-500 dark:text-gray-400'>\n                      Chez {visit.host}\n                    </div>\n                  )}\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>{getStatusBadge(visit.status)}</td>\n                <td className='px-6 py-4 whitespace-nowrap text-right text-sm font-medium'>\n                  <div className='flex items-center justify-end gap-2'>\n                    <button\n                      className='text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'edit');\n                      }}\n                      title='Modifier'\n                    >\n                      <Edit className='w-4 h-4' />\n                    </button>\n                    <button\n                      className='text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'message');\n                      }}\n                      title='Message'\n                    >\n                      <MessageSquare className='w-4 h-4' />\n                    </button>\n                    <button\n                      className='text-gray-400 hover:text-red-600 dark:hover:text-red-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'delete');\n                      }}\n                      title='Supprimer'\n                    >\n                      <Trash2 className='w-4 h-4' />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Visit } from '@/types';\nimport {\n  format,\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  eachDayOfInterval,\n  isSameMonth,\n  isSameDay,\n  addMonths,\n  subMonths,\n  isToday,\n} from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface PlanningCalendarViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n}\n\nexport const PlanningCalendarView: React.FC<PlanningCalendarViewProps> = ({\n  visits,\n  onVisitClick,\n}) => {\n  const [currentDate, setCurrentDate] = useState(new Date());\n\n  const nextMonth = () => setCurrentDate(addMonths(currentDate, 1));\n  const prevMonth = () => setCurrentDate(subMonths(currentDate, 1));\n  const today = () => setCurrentDate(new Date());\n\n  const monthStart = startOfMonth(currentDate);\n  const monthEnd = endOfMonth(monthStart);\n  const startDate = startOfWeek(monthStart, { locale: fr });\n  const endDate = endOfWeek(monthEnd, { locale: fr });\n\n  const calendarDays = eachDayOfInterval({\n    start: startDate,\n    end: endDate,\n  });\n\n  const weekDays = ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'];\n\n  const getVisitsForDay = (date: Date) =>\n    visits.filter((visit) => isSameDay(new Date(visit.visitDate), date));\n\n  return (\n    <div className='bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm'>\n      {/* Calendar Header */}\n      <div className='flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700'>\n        <h3 className='text-lg font-semibold text-gray-900 dark:text-white capitalize'>\n          {format(currentDate, 'MMMM yyyy', { locale: fr })}\n        </h3>\n        <div className='flex items-center gap-2'>\n          <button\n            onClick={prevMonth}\n            aria-label='Mois pr√©c√©dent'\n            className='p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400'\n          >\n            <ChevronLeft className='w-5 h-5' />\n          </button>\n          <button\n            onClick={today}\n            className='px-3 py-1 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 rounded-md'\n          >\n            Aujourd'hui\n          </button>\n          <button\n            onClick={nextMonth}\n            aria-label='Mois suivant'\n            className='p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400'\n          >\n            <ChevronRight className='w-5 h-5' />\n          </button>\n        </div>\n      </div>\n\n      {/* Calendar Grid */}\n      <div className='grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50'>\n        {weekDays.map((day) => (\n          <div\n            key={day}\n            className='py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n\n      <div className='grid grid-cols-7 auto-rows-fr bg-gray-200 dark:bg-gray-700 gap-px'>\n        {calendarDays.map((day) => {\n          const dayVisits = getVisitsForDay(day);\n          const isCurrentMonth = isSameMonth(day, monthStart);\n          const isCurrentDay = isToday(day);\n\n          return (\n            <div\n              key={day.toString()}\n              className={`\n                min-h-[120px] bg-white dark:bg-gray-800 p-2 transition-colors\n                ${!isCurrentMonth ? 'bg-gray-50 dark:bg-gray-800/50 text-gray-400 dark:text-gray-600' : ''}\n                ${isCurrentDay ? 'bg-blue-50/30 dark:bg-blue-900/10' : ''}\n              `}\n            >\n              <div className='flex justify-between items-start mb-1'>\n                <span\n                  className={`\n                    text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full\n                    ${\n                      isCurrentDay\n                        ? 'bg-primary-600 text-white'\n                        : isCurrentMonth\n                          ? 'text-gray-900 dark:text-white'\n                          : 'text-gray-400 dark:text-gray-600'\n                    }\n                  `}\n                >\n                  {format(day, 'd')}\n                </span>\n                {dayVisits.length > 0 && (\n                  <span className='text-xs font-medium text-gray-400'>{dayVisits.length}</span>\n                )}\n              </div>\n\n              <div className='space-y-1 mt-1'>\n                {dayVisits.map((visit) => (\n                  <button\n                    key={visit.id}\n                    onClick={() => onVisitClick?.(visit)}\n                    className={`\n                      w-full text-left px-2 py-1 rounded text-xs font-medium truncate transition-colors\n                      ${\n                        visit.status === 'confirmed'\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50'\n                          : visit.status === 'pending'\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-900/50'\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                      }\n                    `}\n                  >\n                    {visit.visitTime} - {visit.nom}\n                  </button>\n                ))}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Select } from '@/components/ui/Select';\nimport { useData } from '@/contexts/DataContext';\nimport { useToast } from '@/contexts/ToastContext';\nimport { Visit } from '@/types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { AlertTriangle } from 'lucide-react';\n\ninterface ScheduleVisitModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  initialDate?: Date;\n}\n\nexport const ScheduleVisitModal: React.FC<ScheduleVisitModalProps> = ({\n  isOpen,\n  onClose,\n  initialDate,\n}) => {\n  const { speakers, hosts, addVisit, publicTalks, visits, congregationProfile } = useData();\n  const { addToast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [dateError, setDateError] = useState<string>('');\n  const [dateConflict, setDateConflict] = useState<{ has: boolean; speakerName?: string }>({\n    has: false,\n  });\n\n  // Form state\n  const [formData, setFormData] = useState<Partial<Visit>>({\n    visitDate: initialDate ? initialDate.toISOString().split('T')[0] : '',\n    visitTime: congregationProfile.meetingTime || '14:30',\n    locationType: 'physical',\n    status: 'pending',\n    talkNoOrType: '',\n    talkTheme: '',\n    nom: '', // Speaker name\n    id: '', // Speaker ID\n    host: '',\n    congregation: '',\n  });\n\n  // Validate date when it changes\n  useEffect(() => {\n    if (formData.visitDate) {\n      validateDate(formData.visitDate);\n      checkDateConflict(formData.visitDate);\n    }\n  }, [formData.visitDate]);\n\n  const validateDate = (dateStr: string) => {\n    const visitDate = new Date(dateStr);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    if (visitDate < today) {\n      setDateError('La date doit √™tre dans le futur');\n      return false;\n    }\n    setDateError('');\n    return true;\n  };\n\n  const checkDateConflict = (date: string) => {\n    const conflict = visits.find((v) => v.visitDate === date);\n\n    if (conflict) {\n      setDateConflict({\n        has: true,\n        speakerName: conflict.nom,\n      });\n    } else {\n      setDateConflict({ has: false });\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Validate before submit\n    if (!validateDate(formData.visitDate || '')) {\n      addToast('Veuillez s√©lectionner une date valide dans le futur', 'error');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      if (!formData.id || !formData.visitDate) {\n        throw new Error('Veuillez remplir les champs obligatoires');\n      }\n\n      const newVisit: Visit = {\n        ...(formData as Visit),\n        visitId: uuidv4(),\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      await addVisit(newVisit);\n      addToast('Visite programm√©e avec succ√®s', 'success');\n      onClose();\n    } catch (error) {\n      addToast(error instanceof Error ? error.message : 'Erreur lors de la cr√©ation', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSpeakerChange = (speakerId: string) => {\n    const speaker = speakers.find((s) => s.id === speakerId);\n    if (speaker) {\n      setFormData((prev) => ({\n        ...prev,\n        id: speaker.id,\n        nom: speaker.nom,\n        congregation: speaker.congregation,\n      }));\n    }\n  };\n\n  const handleTalkChange = (talkNumber: string) => {\n    const talk = publicTalks.find((t) => t.number.toString() === talkNumber);\n    if (talk) {\n      setFormData((prev) => ({\n        ...prev,\n        talkNoOrType: talk.number.toString(),\n        talkTheme: talk.theme,\n      }));\n    }\n  };\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title='Programmer une visite'\n      size='lg'\n      footer={\n        <>\n          <Button variant='ghost' onClick={onClose} disabled={isLoading}>\n            Annuler\n          </Button>\n          <Button onClick={handleSubmit} isLoading={isLoading}>\n            Enregistrer\n          </Button>\n        </>\n      }\n    >\n      <form onSubmit={handleSubmit} className='space-y-6'>\n        <div className='grid grid-cols-1 md:grid-cols-2 gap-6'>\n          {/* Orateur */}\n          <div className='col-span-2'>\n            <Select\n              label='Orateur'\n              options={[\n                { value: '', label: 'S√©lectionner un orateur' },\n                ...speakers.map((s) => ({ value: s.id, label: `${s.nom} (${s.congregation})` })),\n              ]}\n              value={formData.id || ''}\n              onChange={(e) => handleSpeakerChange(e.target.value)}\n              required\n            />\n          </div>\n\n          {/* Date et Heure */}\n          <Input\n            type='date'\n            label='Date'\n            value={formData.visitDate || ''}\n            onChange={(e) => setFormData((prev) => ({ ...prev, visitDate: e.target.value }))}\n            required\n            error={dateError}\n          />\n\n          {/* Date conflict warning */}\n          {dateConflict.has && !dateError && (\n            <div className='col-span-2 -mt-4'>\n              <div className='flex items-start gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg'>\n                <AlertTriangle className='w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0' />\n                <div className='text-sm text-yellow-700 dark:text-yellow-300'>\n                  <p className='font-medium'>Une visite est d√©j√† programm√©e ce jour</p>\n                  <p className='text-xs mt-1'>Orateur pr√©vu : {dateConflict.speakerName}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <Input\n            type='time'\n            label='Heure'\n            value={formData.visitTime || ''}\n            onChange={(e) => setFormData((prev) => ({ ...prev, visitTime: e.target.value }))}\n            required\n          />\n\n          {/* Discours */}\n          <div className='col-span-2'>\n            <Select\n              label='Discours (liste)'\n              options={[\n                { value: '', label: 'S√©lectionner un discours' },\n                ...publicTalks.map((t) => ({\n                  value: t.number.toString(),\n                  label: `N¬∞${t.number} - ${t.theme}`,\n                })),\n              ]}\n              value={formData.talkNoOrType || ''}\n              onChange={(e) => handleTalkChange(e.target.value)}\n            />\n          </div>\n\n          <Input\n            label='N¬∞ Discours (manuel)'\n            value={formData.talkNoOrType || ''}\n            onChange={(e) => setFormData((prev) => ({ ...prev, talkNoOrType: e.target.value }))}\n            placeholder='Ex: 185'\n          />\n\n          <Input\n            label='Titre du discours (manuel)'\n            value={formData.talkTheme || ''}\n            onChange={(e) => setFormData((prev) => ({ ...prev, talkTheme: e.target.value }))}\n            placeholder='Ex: Nega iluzon di mundu...'\n          />\n\n          {/* Lieu et H√¥te */}\n          <Select\n            label='Type de lieu'\n            options={[\n              { value: 'physical', label: 'Salle du Royaume' },\n              { value: 'zoom', label: 'Visioconf√©rence' },\n              { value: 'streaming', label: 'Streaming' },\n            ]}\n            value={formData.locationType || 'physical'}\n            onChange={(e) =>\n              setFormData((prev) => ({ ...prev, locationType: e.target.value as any }))\n            }\n          />\n\n          <Select\n            label=\"Contact d'accueil\"\n            options={[\n              { value: '', label: 'Aucun' },\n              ...hosts.map((h) => ({ value: h.nom, label: h.nom })),\n            ]}\n            value={formData.host || ''}\n            onChange={(e) => setFormData((prev) => ({ ...prev, host: e.target.value }))}\n          />\n        </div>\n      </form>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { calculateWorkload } from '@/utils/workload';\nimport { WorkloadIndicator } from '@/components/workload/WorkloadIndicator';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Search } from 'lucide-react';\nimport { Input } from '@/components/ui/Input';\n\nexport const PlanningWorkloadView: React.FC = () => {\n  const { speakers, visits } = useData();\n  const [searchTerm, setSearchTerm] = React.useState('');\n\n  const workloadData = React.useMemo(\n    () =>\n      speakers\n        .map((speaker) => ({\n          speaker,\n          workload: calculateWorkload(speaker, visits),\n        }))\n        .sort((a, b) => b.workload.currentLoad - a.workload.currentLoad), // Tri par charge d√©croissante\n    [speakers, visits]\n  );\n\n  const filteredData = workloadData.filter(\n    ({ speaker }) =>\n      speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className='space-y-6'>\n      <div className='flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700'>\n        <h3 className='text-lg font-semibold text-gray-900 dark:text-white'>\n          Analyse de la Charge et Disponibilit√©\n        </h3>\n        <div className='w-64'>\n          <Input\n            placeholder='Rechercher un orateur...'\n            leftIcon={<Search className='w-4 h-4' />}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n        {filteredData.map(({ speaker, workload }) => (\n          <Card key={speaker.id} className='overflow-hidden'>\n            <CardBody className='p-4'>\n              <div className='flex justify-between items-start mb-3'>\n                <div className='flex items-center gap-3'>\n                  <div className='w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300 font-bold'>\n                    {speaker.nom.charAt(0)}\n                  </div>\n                  <div>\n                    <h4 className='font-semibold text-gray-900 dark:text-white'>{speaker.nom}</h4>\n                    <p className='text-xs text-gray-500 dark:text-gray-400'>\n                      {speaker.congregation}\n                    </p>\n                  </div>\n                </div>\n                <WorkloadIndicator workload={workload} />\n              </div>\n\n              <div className='mt-4 space-y-3'>\n                <div>\n                  <div className='flex justify-between text-xs mb-1'>\n                    <span className='text-gray-500'>Charge actuelle</span>\n                    <span className='font-medium text-gray-900 dark:text-white'>\n                      {workload.currentLoad}%\n                    </span>\n                  </div>\n                  <progress\n                    value={workload.currentLoad}\n                    max={100}\n                    className={`w-full h-2 rounded-full ${\n                      workload.workloadScore >= 5\n                        ? '[&::-webkit-progress-value]:bg-red-500 [&::-moz-progress-bar]:bg-red-500'\n                        : workload.workloadScore >= 4\n                          ? '[&::-webkit-progress-value]:bg-orange-500 [&::-moz-progress-bar]:bg-orange-500'\n                          : workload.workloadScore >= 3\n                            ? '[&::-webkit-progress-value]:bg-yellow-500 [&::-moz-progress-bar]:bg-yellow-500'\n                            : '[&::-webkit-progress-value]:bg-green-500 [&::-moz-progress-bar]:bg-green-500'\n                    } [&::-webkit-progress-bar]:bg-gray-100 [&::-webkit-progress-bar]:dark:bg-gray-700 [&::-moz-progress-bar]:bg-gray-100 [&::-moz-progress-bar]:dark:bg-gray-700`}\n                  />\n                </div>\n\n                <div className='flex justify-between items-center text-xs text-gray-500 border-t border-gray-100 dark:border-gray-700 pt-3'>\n                  <span>Derni√®re visite:</span>\n                  <span className='font-medium text-gray-700 dark:text-gray-300'>\n                    {workload.lastVisit\n                      ? new Date(workload.lastVisit).toLocaleDateString()\n                      : 'Aucune'}\n                  </span>\n                </div>\n              </div>\n            </CardBody>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { format, parseISO } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { Calendar, User, MapPin, Clock } from 'lucide-react';\nimport { Card } from '@/components/ui/Card';\n\ninterface PlanningTimelineViewProps {\n  visits: Visit[];\n}\n\nexport const PlanningTimelineView: React.FC<PlanningTimelineViewProps> = ({ visits }) => {\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12 text-gray-500 dark:text-gray-400'>\n        Aucune visite √† afficher dans la chronologie.\n      </div>\n    );\n  }\n\n  // Grouper par mois\n  const groupedVisits = visits.reduce(\n    (acc, visit) => {\n      const date = parseISO(visit.visitDate);\n      const key = format(date, 'yyyy-MM', { locale: fr });\n\n      if (!acc[key]) {\n        acc[key] = [];\n      }\n      acc[key].push(visit);\n      return acc;\n    },\n    {} as Record<string, Visit[]>\n  );\n\n  const sortedMonthKeys = Object.keys(groupedVisits).sort();\n\n  return (\n    <div className='relative space-y-8 p-4'>\n      {/* Ligne verticale centralis√©e */}\n      <div className='absolute left-4 md:left-1/2 top-4 bottom-4 w-0.5 bg-gray-200 dark:bg-gray-700 -ml-[1px]' />\n\n      {sortedMonthKeys.map((monthKey) => (\n        <div key={monthKey} className='relative'>\n          {/* En-t√™te de mois */}\n          <div className='flex justify-center mb-6 relative z-10'>\n            <span className='bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 px-4 py-1 rounded-full text-sm font-semibold border-4 border-white dark:border-gray-900'>\n              {format(parseISO(`${monthKey}-01`), 'MMMM yyyy', { locale: fr })}\n            </span>\n          </div>\n\n          <div className='space-y-6'>\n            {groupedVisits[monthKey].map((visit, index) => {\n              const date = parseISO(visit.visitDate);\n              const isLeft = index % 2 === 0;\n\n              return (\n                <div\n                  key={visit.id}\n                  className={`flex flex-col md:flex-row items-center gap-4 md:gap-8 ${isLeft ? 'md:flex-row-reverse' : ''}`}\n                >\n                  {/* Contenu (Carte) */}\n                  <div className='w-full md:w-1/2 pl-8 md:pl-0'>\n                    <Card className='p-4 hover:shadow-lg transition-shadow border-l-4 border-l-primary-500'>\n                      <div className='flex justify-between items-start mb-2'>\n                        <div className='flex items-center gap-2 text-sm text-primary-600 font-medium'>\n                          <Calendar className='w-4 h-4' />\n                          {format(date, 'EEEE d', { locale: fr })}\n                        </div>\n                        <span\n                          className={`text-xs px-2 py-0.5 rounded-full ${\n                            visit.status === 'confirmed'\n                              ? 'bg-green-100 text-green-800'\n                              : visit.status === 'pending'\n                                ? 'bg-orange-100 text-orange-800'\n                                : 'bg-gray-100 text-gray-800'\n                          }`}\n                        >\n                          {visit.status === 'confirmed'\n                            ? 'Confirm√©'\n                            : visit.status === 'pending'\n                              ? 'En attente'\n                              : visit.status}\n                        </span>\n                      </div>\n\n                      <h4 className='font-bold text-gray-900 dark:text-white mb-2'>{visit.nom}</h4>\n                      <div className='text-sm text-gray-600 dark:text-gray-400 space-y-1'>\n                        <div className='flex items-center gap-2'>\n                          <MapPin className='w-3 h-3' />\n                          {visit.congregation}\n                        </div>\n                        <div className='flex items-center gap-2'>\n                          <User className='w-3 h-3' />\n                          <div className='flex-1 min-w-0'>\n                            {visit.talkNoOrType ? (\n                              <>\n                                <div className='font-medium'>N¬∞{visit.talkNoOrType}</div>\n                                {visit.talkTheme && (\n                                  <div className='text-xs truncate'>{visit.talkTheme}</div>\n                                )}\n                              </>\n                            ) : (\n                              'Pas de discours'\n                            )}\n                          </div>\n                        </div>\n                        <div className='flex items-center gap-2'>\n                          <Clock className='w-3 h-3' />\n                          {visit.visitTime}\n                        </div>\n                      </div>\n                    </Card>\n                  </div>\n\n                  {/* Point central */}\n                  <div className='absolute left-4 md:left-1/2 w-4 h-4 bg-primary-500 rounded-full md:-ml-2 border-4 border-white dark:border-gray-900 shadow-sm z-10 flex items-center justify-center'>\n                    <div className='w-1.5 h-1.5 bg-white rounded-full' />\n                  </div>\n\n                  {/* Espace vide pour l'√©quilibrage */}\n                  <div className='hidden md:block w-1/2' />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { Visit, Expense } from '@/types';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Select } from '@/components/ui/Select';\nimport {\n  Euro,\n  TrendingUp,\n  PieChart,\n  Calendar,\n  ArrowUpRight,\n  ArrowDownRight,\n  Download,\n} from 'lucide-react';\nimport { format, startOfMonth, endOfMonth, isWithinInterval, subMonths } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\nexport const FinancialDashboard: React.FC = () => {\n  const { visits } = useData();\n  const [selectedMonth, setSelectedMonth] = useState<string>(new Date().toISOString().slice(0, 7)); // YYYY-MM\n  const [currency] = useState('‚Ç¨');\n\n  // Helper to extract all expenses from visits\n  const allExpenses = useMemo(\n    () =>\n      visits.flatMap((v: Visit) =>\n        (v.expenses || []).map((e: Expense) => ({ ...e, visitNom: v.nom, visitDate: v.visitDate }))\n      ),\n    [visits]\n  );\n\n  // Filter expenses by selected month\n  const monthlyStats = useMemo(() => {\n    const [year, month] = selectedMonth.split('-').map(Number);\n    const start = startOfMonth(new Date(year, month - 1));\n    const end = endOfMonth(new Date(year, month - 1));\n    const previousStart = startOfMonth(subMonths(start, 1));\n    const previousEnd = endOfMonth(subMonths(start, 1));\n\n    // Define the type for the flattened expense object\n    type DashboardExpense = Expense & { visitNom: string; visitDate: string };\n\n    const currentMonthExpenses = allExpenses.filter((e: DashboardExpense) =>\n      isWithinInterval(new Date(e.date), { start, end })\n    );\n\n    const previousMonthExpenses = allExpenses.filter((e: DashboardExpense) =>\n      isWithinInterval(new Date(e.date), { start: previousStart, end: previousEnd })\n    );\n\n    const totalCurrent = currentMonthExpenses.reduce(\n      (sum: number, e: DashboardExpense) => sum + e.amount,\n      0\n    );\n    const totalPrevious = previousMonthExpenses.reduce(\n      (sum: number, e: DashboardExpense) => sum + e.amount,\n      0\n    );\n\n    // Calculate variations\n    const variation =\n      totalPrevious === 0 ? 0 : ((totalCurrent - totalPrevious) / totalPrevious) * 100;\n\n    // By Category\n    const byCategory = currentMonthExpenses.reduce(\n      (acc: Record<string, number>, e: DashboardExpense) => {\n        const cat = e.category || 'Autre';\n        acc[cat] = (acc[cat] || 0) + e.amount;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    return {\n      total: totalCurrent,\n      variation,\n      count: currentMonthExpenses.length,\n      byCategory,\n      expenses: currentMonthExpenses.sort(\n        (a: DashboardExpense, b: DashboardExpense) =>\n          new Date(b.date).getTime() - new Date(a.date).getTime()\n      ),\n    };\n  }, [allExpenses, selectedMonth]);\n\n  // Overall stats (Year to date could be added here)\n  const totalVisitsWithExpenses = visits.filter((v: Visit) => (v.expenses?.length || 0) > 0).length;\n  const averageCostPerVisit =\n    totalVisitsWithExpenses === 0\n      ? 0\n      : allExpenses.reduce(\n          (sum: number, e: Expense & { visitNom: string; visitDate: string }) => sum + e.amount,\n          0\n        ) / totalVisitsWithExpenses;\n\n  const exportData = () => {\n    const headers = ['Date', 'Visite', 'Description', 'Cat√©gorie', 'Montant'];\n    const csvContent = [\n      headers.join(','),\n      ...monthlyStats.expenses.map((e: Expense & { visitNom: string; visitDate: string }) =>\n        [e.date, `\"${e.visitNom}\"`, `\"${e.description}\"`, e.category, e.amount].join(',')\n      ),\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = `depenses_${selectedMonth}.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const monthOptions = Array.from({ length: 12 }, (_, i) => {\n    const d = subMonths(new Date(), i);\n    const value = format(d, 'yyyy-MM');\n    const label = format(d, 'MMMM yyyy', { locale: fr });\n    return { value, label: label.charAt(0).toUpperCase() + label.slice(1) };\n  });\n\n  return (\n    <div className='space-y-6'>\n      {/* Header & Controls */}\n      <div className='flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm'>\n        <div>\n          <h2 className='text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2'>\n            <PieChart className='w-5 h-5 text-purple-600' />\n            Tableau de bord financier\n          </h2>\n          <p className='text-sm text-gray-500 dark:text-gray-400'>\n            Suivi des co√ªts et remboursements\n          </p>\n        </div>\n        <div className='flex items-center gap-3 w-full sm:w-auto'>\n          <Select\n            value={selectedMonth}\n            onChange={(e) => setSelectedMonth(e.target.value)}\n            options={monthOptions}\n            className='min-w-[180px]'\n          />\n          <Button\n            variant='secondary'\n            onClick={exportData}\n            leftIcon={<Download className='w-4 h-4' />}\n          >\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* KPI Cards */}\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-4'>\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>D√©penses du mois</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {monthlyStats.total.toFixed(2)} {currency}\n              </h3>\n              <div\n                className={`flex items-center text-xs mt-1 ${monthlyStats.variation > 0 ? 'text-red-500' : 'text-green-500'}`}\n              >\n                {monthlyStats.variation > 0 ? (\n                  <ArrowUpRight className='w-3 h-3 mr-1' />\n                ) : (\n                  <ArrowDownRight className='w-3 h-3 mr-1' />\n                )}\n                {Math.abs(monthlyStats.variation).toFixed(1)}% vs mois dernier\n              </div>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400'>\n              <Euro className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>Co√ªt moyen / Visite</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {averageCostPerVisit.toFixed(2)} {currency}\n              </h3>\n              <p className='text-xs text-gray-400 mt-1'>Sur toutes les visites</p>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400'>\n              <TrendingUp className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>Nombre de notes</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {monthlyStats.count}\n              </h3>\n              <p className='text-xs text-gray-400 mt-1'>Ce mois-ci</p>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400'>\n              <Calendar className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n\n      <div className='grid grid-cols-1 lg:grid-cols-2 gap-6'>\n        {/* Categories Breakdown */}\n        <Card className='h-full'>\n          <CardBody className='p-5'>\n            <h3 className='font-semibold text-gray-900 dark:text-white mb-4'>\n              R√©partition par cat√©gorie\n            </h3>\n            <div className='space-y-4'>\n              {Object.entries(monthlyStats.byCategory).length === 0 ? (\n                <p className='text-center text-gray-500 py-4'>Aucune donn√©e</p>\n              ) : (\n                (Object.entries(monthlyStats.byCategory) as [string, number][])\n                  .sort(([, a], [, b]) => b - a)\n                  .map(([cat, amount]) => {\n                    const percentage = (amount / monthlyStats.total) * 100;\n                    return (\n                      <div key={cat}>\n                        <div className='flex justify-between text-sm mb-1'>\n                          <span className='text-gray-700 dark:text-gray-300'>{cat}</span>\n                          <span className='font-medium text-gray-900 dark:text-white'>\n                            {amount.toFixed(2)} {currency} ({percentage.toFixed(0)}%)\n                          </span>\n                        </div>\n                        <div className='w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2'>\n                          <div\n                            className={`bg-purple-600 h-2 rounded-full transition-all duration-500 w-[${percentage}%]`}\n                          />\n                        </div>\n                      </div>\n                    );\n                  })\n              )}\n            </div>\n          </CardBody>\n        </Card>\n\n        {/* Recent Expenses List */}\n        <Card className='h-full'>\n          <CardBody className='p-0'>\n            <div className='p-5 border-b border-gray-100 dark:border-gray-700'>\n              <h3 className='font-semibold text-gray-900 dark:text-white'>Derni√®res d√©penses</h3>\n            </div>\n            <div className='divide-y divide-gray-100 dark:divide-gray-700 max-h-[300px] overflow-y-auto'>\n              {monthlyStats.expenses.length === 0 ? (\n                <p className='text-center text-gray-500 py-8'>Aucune d√©pense ce mois-ci</p>\n              ) : (\n                monthlyStats.expenses.map(\n                  (expense: Expense & { visitNom: string; visitDate: string }) => (\n                    <div\n                      key={expense.id}\n                      className='p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors'\n                    >\n                      <div className='flex justify-between items-start'>\n                        <div>\n                          <p className='font-medium text-gray-900 dark:text-white text-sm'>\n                            {expense.description}\n                          </p>\n                          <p className='text-xs text-gray-500 dark:text-gray-400 mt-0.5'>\n                            {format(new Date(expense.date), 'dd MMM', { locale: fr })} ‚Ä¢{' '}\n                            {expense.visitNom}\n                          </p>\n                        </div>\n                        <span className='font-semibold text-gray-900 dark:text-white text-sm'>\n                          {expense.amount.toFixed(2)} {currency}\n                        </span>\n                      </div>\n                    </div>\n                  )\n                )\n              )}\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Calendar } from 'lucide-react';\n\ninterface DatePickerProps {\n  value?: string;\n  onChange?: (date: string) => void;\n  placeholder?: string;\n  className?: string;\n  required?: boolean;\n  disabled?: boolean;\n  min?: string;\n  max?: string;\n}\n\nexport const DatePicker: React.FC<DatePickerProps> = ({\n  value,\n  onChange,\n  placeholder = 'S√©lectionner une date',\n  className = '',\n  required = false,\n  disabled = false,\n  min,\n  max,\n}) => (\n  <div className={`relative ${className}`}>\n    <div className='relative'>\n      <input\n        type='date'\n        value={value || ''}\n        onChange={(e) => onChange?.(e.target.value)}\n        className='w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors'\n        placeholder={placeholder}\n        required={required}\n        disabled={disabled}\n        min={min}\n        max={max}\n      />\n      <div className='absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none'>\n        <Calendar className='w-4 h-4 text-gray-400' />\n      </div>\n    </div>\n  </div>\n);\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { DatePicker } from '@/components/ui/DatePicker';\nimport { format, parseISO } from 'date-fns';\nimport { LocationType, VisitStatus } from '@/types';\n\ninterface PlanningFilterModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  dateRange: { start: Date | null; end: Date | null };\n  setDateRange: (range: { start: Date | null; end: Date | null }) => void;\n  statusFilter: VisitStatus | 'all';\n  setStatusFilter: (status: VisitStatus | 'all') => void;\n  typeFilter: LocationType | 'all';\n  setTypeFilter: (type: LocationType | 'all') => void;\n}\n\n// Helper to convert Date to string for input\nconst dateToString = (date: Date | null): string => {\n  if (!date) return '';\n  return format(date, 'yyyy-MM-dd');\n};\n\n// Helper to convert string to Date\nconst stringToDate = (dateStr: string): Date | null => {\n  if (!dateStr) return null;\n  return parseISO(dateStr);\n};\n\nexport const PlanningFilterModal: React.FC<PlanningFilterModalProps> = ({\n  isOpen,\n  onClose,\n  dateRange,\n  setDateRange,\n  statusFilter,\n  setStatusFilter,\n  typeFilter,\n  setTypeFilter,\n}) => {\n  const [localDateRange, setLocalDateRange] = useState(dateRange);\n  const [localStatusFilter, setLocalStatusFilter] = useState(statusFilter);\n  const [localTypeFilter, setLocalTypeFilter] = useState(typeFilter);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalDateRange(dateRange);\n      setLocalStatusFilter(statusFilter);\n      setLocalTypeFilter(typeFilter);\n    }\n  }, [isOpen, dateRange, statusFilter, typeFilter]);\n\n  const handleApply = () => {\n    setDateRange(localDateRange);\n    setStatusFilter(localStatusFilter);\n    setTypeFilter(localTypeFilter);\n    onClose();\n  };\n\n  const handleCancel = () => {\n    onClose();\n  };\n\n  const handleClear = () => {\n    setLocalDateRange({ start: null, end: null });\n    setLocalStatusFilter('all');\n    setLocalTypeFilter('all');\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Filtres avanc√©s'>\n      <div className='space-y-6'>\n        {/* Statut */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Statut\n          </label>\n          <div className='flex flex-wrap gap-2'>\n            {[\n              { value: 'all', label: 'Tous' },\n              { value: 'pending', label: 'En attente' },\n              { value: 'confirmed', label: 'Confirm√©' },\n              { value: 'completed', label: 'Termin√©' },\n              { value: 'cancelled', label: 'Annul√©' },\n            ].map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setLocalStatusFilter(option.value as VisitStatus | 'all')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  localStatusFilter === option.value\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Type */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Type de visite\n          </label>\n          <div className='flex flex-wrap gap-2'>\n            {[\n              { value: 'all', label: 'Tous' },\n              { value: 'physical', label: 'Physique' },\n              { value: 'zoom', label: 'Zoom' },\n              { value: 'streaming', label: 'Streaming' },\n            ].map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setLocalTypeFilter(option.value as LocationType | 'all')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  localTypeFilter === option.value\n                    ? 'bg-purple-500 text-white'\n                    : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Plage de dates */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Plage de dates\n          </label>\n          <div className='flex items-center space-x-2'>\n            <DatePicker\n              value={dateToString(localDateRange.start)}\n              onChange={(dateStr) =>\n                setLocalDateRange((prev) => ({ ...prev, start: stringToDate(dateStr) }))\n              }\n              placeholder='Date de d√©but'\n            />\n            <span className='text-gray-500'>-</span>\n            <DatePicker\n              value={dateToString(localDateRange.end)}\n              onChange={(dateStr) =>\n                setLocalDateRange((prev) => ({ ...prev, end: stringToDate(dateStr) }))\n              }\n              placeholder='Date de fin'\n              min={dateToString(localDateRange.start)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className='mt-8 flex justify-end space-x-3'>\n        <Button variant='ghost' onClick={handleClear}>\n          R√©initialiser\n        </Button>\n        <Button variant='ghost' onClick={handleCancel}>\n          Annuler\n        </Button>\n        <Button onClick={handleApply}>Appliquer les filtres</Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo, memo, useCallback, useRef } from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { PlanningCardsView } from '@/components/planning/PlanningCardsView';\nimport { PlanningListView } from '@/components/planning/PlanningListView';\nimport { PlanningCalendarView } from '@/components/planning/PlanningCalendarView';\nimport { ScheduleVisitModal } from '@/components/planning/ScheduleVisitModal';\nimport { VisitActionModal } from '@/components/planning/VisitActionModal';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport {\n  LayoutGrid,\n  List,\n  Calendar as CalendarIcon,\n  Plus,\n  Search,\n  Download,\n  Filter,\n  X,\n  Eye,\n  BarChart,\n  PieChart,\n  MoreHorizontal,\n  Clock,\n  Archive,\n  MessageSquare,\n  Star,\n} from 'lucide-react';\nimport { LocationType, VisitStatus, Visit } from '@/types';\nimport { PlanningWorkloadView } from '@/components/planning/PlanningWorkloadView';\nimport { PlanningTimelineView } from '@/components/planning/PlanningTimelineView';\nimport { FinancialDashboard } from '@/components/expenses/FinancialDashboard';\nimport { useReactToPrint } from 'react-to-print';\nimport { PlanningFilterModal } from '@/components/planning/PlanningFilterModal';\nimport {\n  ConflictDetectionModal,\n  CancellationModal,\n  EmergencyReplacementModal,\n} from '@/components/modals';\n\ntype ViewType = 'cards' | 'list' | 'calendar' | 'timeline' | 'workload' | 'finance' | 'archives';\n\n// Memoized statistics component for performance\nconst StatCard = memo(\n  ({\n    icon: Icon,\n    value,\n    label,\n    bgColor,\n    textColor,\n    iconBg,\n  }: {\n    icon: any;\n    value: number;\n    label: string;\n    bgColor: string;\n    textColor: string;\n    iconBg: string;\n  }) => (\n    <div className={`${bgColor} p-4 rounded-lg border`}>\n      <div className='flex items-center gap-2'>\n        <div className={`w-8 h-8 rounded-full ${iconBg} flex items-center justify-center`}>\n          <Icon className={`w-4 h-4 ${textColor}`} />\n        </div>\n        <div>\n          <div\n            className={`text-lg font-semibold ${textColor.replace('text-', 'text-').replace('blue-600', 'blue-900').replace('dark:text-blue-400', 'dark:text-blue-100')}`}\n          >\n            {value}\n          </div>\n          <div className='text-xs text-blue-700 dark:text-blue-300'>{label}</div>\n        </div>\n      </div>\n    </div>\n  )\n);\n\n// Memoized view option component\nconst ViewOption = memo(\n  ({\n    viewOption,\n    currentView,\n    onViewChange,\n  }: {\n    viewOption: any;\n    currentView: ViewType;\n    onViewChange: (view: ViewType) => void;\n  }) => (\n    <button\n      onClick={() => onViewChange(viewOption.id as ViewType)}\n      className={`p-2 rounded-md transition-all text-xs ${\n        currentView === viewOption.id\n          ? 'bg-white dark:bg-gray-600 shadow-sm text-primary-600 dark:text-primary-400'\n          : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'\n      }`}\n      title={viewOption.description}\n    >\n      <viewOption.icon className='w-4 h-4' />\n    </button>\n  )\n);\n\nexport const Planning: React.FC = () => {\n  const { visits, archivedVisits } = useData();\n  const [view, setView] = useState<ViewType>('cards');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState<VisitStatus | 'all'>('all');\n  const [typeFilter, setTypeFilter] = useState<LocationType | 'all'>('all');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isActionModalOpen, setIsActionModalOpen] = useState(false);\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [dateRange, setDateRange] = useState<{ start: Date | null; end: Date | null }>({\n    start: null,\n    end: null,\n  });\n  const [selectedVisit, setSelectedVisit] = useState<Visit | null>(null);\n  const [selectedAction, setSelectedAction] = useState<\n    'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  >('edit');\n  const [isConflictModalOpen, setIsConflictModalOpen] = useState(false);\n  const [isCancellationModalOpen, setIsCancellationModalOpen] = useState(false);\n  const [isReplacementModalOpen, setIsReplacementModalOpen] = useState(false);\n  const [isViewMenuOpen, setIsViewMenuOpen] = useState(false);\n\n  const componentRef = useRef<HTMLDivElement>(null);\n  const handlePrint = useReactToPrint({\n    contentRef: componentRef,\n    documentTitle: `Planning-visites-${new Date().toLocaleDateString()}`,\n  });\n\n  const handleExport = () => {\n    if (view === 'archives') {\n      const headers = ['Date', 'Heure', 'Orateur', 'Congr√©gation', 'Discours', 'Th√®me', 'H√¥te'];\n      const csvContent = [\n        headers.join(','),\n        ...archivedVisits.map((visit) =>\n          [\n            visit.visitDate,\n            visit.visitTime,\n            `\"${visit.nom}\"`,\n            `\"${visit.congregation}\"`,\n            visit.talkNoOrType || '',\n            `\"${visit.talkTheme || ''}\"`,\n            `\"${visit.host || ''}\"`,\n          ].join(',')\n        ),\n      ].join('\\n');\n\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = `visites_archivees_${new Date().toISOString().slice(0, 10)}.csv`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } else if (view === 'finance') {\n      // Le composant FinancialDashboard g√®re son propre export, mais on peut ajouter un toast ou une logique ici si n√©cessaire\n      // Pour l'instant on laisse le bouton interne du dashboard\n    } else {\n      handlePrint();\n    }\n  };\n\n  // Memoized event handlers to prevent unnecessary re-renders\n  const handleSetView = useCallback((newView: ViewType) => setView(newView), []);\n  const handleSearchChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => setSearchTerm(e.target.value),\n    []\n  );\n  const handleOpenModal = useCallback(() => setIsModalOpen(true), []);\n  const handleCloseModal = useCallback(() => setIsModalOpen(false), []);\n  const handleVisitAction = useCallback(\n    (\n      visit: Visit,\n      action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n    ) => {\n      setSelectedVisit(visit);\n      setSelectedAction(action);\n      setIsActionModalOpen(true);\n    },\n    []\n  );\n  const handleCloseActionModal = useCallback(() => {\n    setIsActionModalOpen(false);\n    setSelectedVisit(null);\n  }, []);\n\n  // Optimized filtered and sorted visits with proper dependencies\n  const filteredVisits = useMemo(\n    () =>\n      visits\n        .filter((visit: Visit) => {\n          const matchesSearch =\n            visit.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.congregation.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.talkNoOrType?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.notes?.toLowerCase().includes(searchTerm.toLowerCase());\n\n          const matchesStatus = statusFilter === 'all' || visit.status === statusFilter;\n          const matchesType = typeFilter === 'all' || visit.locationType === typeFilter;\n\n          const visitDate = new Date(visit.visitDate);\n          const matchesDateRange =\n            (!dateRange.start || visitDate >= dateRange.start) &&\n            (!dateRange.end || visitDate <= dateRange.end);\n\n          return matchesSearch && matchesStatus && matchesType && matchesDateRange;\n        })\n        .sort(\n          (a: Visit, b: Visit) => new Date(a.visitDate).getTime() - new Date(b.visitDate).getTime()\n        ),\n    [visits, searchTerm, statusFilter, typeFilter, dateRange]\n  );\n\n  // Optimized statistics calculation\n  const stats = useMemo(() => {\n    const total = filteredVisits.length;\n    const confirmed = filteredVisits.filter((v: Visit) => v.status === 'confirmed').length;\n    const pending = filteredVisits.filter((v: Visit) => v.status === 'pending').length;\n    const completed = filteredVisits.filter((v: Visit) => v.status === 'completed').length;\n    const upcoming = filteredVisits.filter((v: Visit) => {\n      const visitDate = new Date(v.visitDate);\n      const today = new Date();\n      return visitDate >= today && v.status === 'confirmed';\n    }).length;\n\n    return { total, confirmed, pending, completed, upcoming };\n  }, [filteredVisits]);\n\n  const mainViewOptions = useMemo(\n    () => [\n      { id: 'cards', label: 'Cartes', icon: LayoutGrid, description: 'Vue visuelle des visites' },\n      { id: 'list', label: 'Liste', icon: List, description: 'Tableau d√©taill√©' },\n      { id: 'calendar', label: 'Calendrier', icon: CalendarIcon, description: 'Vue calendrier' },\n    ],\n    []\n  );\n\n  const specializedViews = useMemo(\n    () => [\n      { id: 'archives', label: 'Archives', icon: Archive, description: 'Visites termin√©es' },\n      { id: 'timeline', label: 'Chronologie', icon: Eye, description: 'Timeline verticale' },\n      {\n        id: 'workload',\n        label: 'Disponibilit√©',\n        icon: BarChart,\n        description: 'Charge des orateurs',\n      },\n      { id: 'finance', label: 'Finances', icon: PieChart, description: 'Suivi des co√ªts' },\n    ],\n    []\n  );\n\n  return (\n    <div className='space-y-4 md:space-y-6'>\n      {/* Header & Stats */}\n      <div className='flex justify-end'>\n        <Button leftIcon={<Plus className='w-4 h-4' />} onClick={handleOpenModal} size='lg'>\n          Programmer une visite\n        </Button>\n      </div>\n\n      {/* Statistics Cards - Mobile Optimized */}\n      <div className='grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4'>\n        <StatCard\n          icon={CalendarIcon}\n          value={stats.total}\n          label='Total'\n          bgColor='bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800'\n          textColor='text-blue-600 dark:text-blue-400'\n          iconBg='bg-blue-100 dark:bg-blue-900'\n        />\n        <StatCard\n          icon={() => <div className='w-2 h-2 rounded-full bg-green-500' />}\n          value={stats.confirmed}\n          label='Confirm√©es'\n          bgColor='bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800'\n          textColor='text-green-600 dark:text-green-400'\n          iconBg='bg-green-100 dark:bg-green-900'\n        />\n        <StatCard\n          icon={Clock}\n          value={stats.pending}\n          label='En attente'\n          bgColor='bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800'\n          textColor='text-orange-600 dark:text-orange-400'\n          iconBg='bg-orange-100 dark:bg-orange-900'\n        />\n        <StatCard\n          icon={() => <div className='w-2 h-2 rounded-full bg-purple-500' />}\n          value={stats.upcoming}\n          label='√Ä venir'\n          bgColor='bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800'\n          textColor='text-purple-600 dark:text-purple-400'\n          iconBg='bg-purple-100 dark:bg-purple-900'\n        />\n      </div>\n\n      {/* Filters & View Toggle - Mobile Responsive */}\n      <div className='flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between bg-white dark:bg-gray-800 p-3 md:p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700'>\n        <div className='flex flex-col gap-3 w-full lg:w-auto'>\n          <div className='flex gap-3'>\n            <div className='flex-1 min-w-0 md:min-w-64'>\n              <Input\n                placeholder='Rechercher une visite...'\n                leftIcon={<Search className='w-4 h-4' />}\n                value={searchTerm}\n                onChange={handleSearchChange}\n              />\n            </div>\n            <Button\n              variant='secondary'\n              size='sm'\n              leftIcon={<Filter className='w-4 h-4' />}\n              onClick={() => setIsFilterModalOpen(true)}\n            >\n              Filtres\n            </Button>\n          </div>\n\n          {/* Active Filters Chips */}\n          {(statusFilter !== 'all' || typeFilter !== 'all') && (\n            <div className='flex gap-2 flex-wrap items-center'>\n              {statusFilter !== 'all' && (\n                <button\n                  onClick={() => setStatusFilter('all')}\n                  className='inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors'\n                >\n                  {statusFilter === 'pending' && 'En attente'}\n                  {statusFilter === 'confirmed' && 'Confirm√©'}\n                  {statusFilter === 'completed' && 'Termin√©'}\n                  {statusFilter === 'cancelled' && 'Annul√©'}\n                  <X className='w-3 h-3' />\n                </button>\n              )}\n              {typeFilter !== 'all' && (\n                <button\n                  onClick={() => setTypeFilter('all')}\n                  className='inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors'\n                >\n                  {typeFilter === 'physical' && 'Physique'}\n                  {typeFilter === 'zoom' && 'Zoom'}\n                  {typeFilter === 'streaming' && 'Streaming'}\n                  <X className='w-3 h-3' />\n                </button>\n              )}\n              <button\n                onClick={() => {\n                  setStatusFilter('all');\n                  setTypeFilter('all');\n                }}\n                className='text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 underline'\n              >\n                Effacer tout\n              </button>\n            </div>\n          )}\n        </div>\n\n        <div className='flex items-center gap-2 w-full lg:w-auto justify-between lg:justify-end'>\n          {/* View Toggle - 3 vues principales */}\n          <div className='flex items-center bg-gray-100 dark:bg-gray-700 p-1 rounded-lg'>\n            {mainViewOptions.map((viewOption) => (\n              <ViewOption\n                key={viewOption.id}\n                viewOption={viewOption}\n                currentView={view}\n                onViewChange={handleSetView}\n              />\n            ))}\n\n            {/* Menu d√©roulant pour vues sp√©cialis√©es */}\n            <div className='relative'>\n              <button\n                onClick={() => setIsViewMenuOpen(!isViewMenuOpen)}\n                className={`p-2 rounded-md transition-all text-xs ${\n                  ['timeline', 'workload', 'finance'].includes(view)\n                    ? 'bg-white dark:bg-gray-600 shadow-sm text-primary-600 dark:text-primary-400'\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'\n                }`}\n                title='Plus de vues'\n              >\n                <MoreHorizontal className='w-4 h-4' />\n              </button>\n\n              {isViewMenuOpen && (\n                <>\n                  <div className='fixed inset-0 z-10' onClick={() => setIsViewMenuOpen(false)} />\n                  <div className='absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-20'>\n                    {specializedViews.map((viewOption) => (\n                      <button\n                        key={viewOption.id}\n                        onClick={() => {\n                          handleSetView(viewOption.id as ViewType);\n                          setIsViewMenuOpen(false);\n                        }}\n                        className={`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors ${\n                          view === viewOption.id\n                            ? 'bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400'\n                            : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\n                        }`}\n                      >\n                        <viewOption.icon className='w-4 h-4' />\n                        <div className='text-left'>\n                          <div className='font-medium'>{viewOption.label}</div>\n                          <div className='text-xs text-gray-500 dark:text-gray-400'>\n                            {viewOption.description}\n                          </div>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n\n          <Button\n            variant='secondary'\n            size='sm'\n            leftIcon={<Download className='w-4 h-4' />}\n            onClick={handleExport}\n          >\n            Exporter\n          </Button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className='min-h-[400px] md:min-h-[600px]' ref={componentRef}>\n        {view === 'cards' && (\n          <PlanningCardsView\n            visits={filteredVisits}\n            onVisitAction={handleVisitAction}\n            onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n          />\n        )}\n\n        {view === 'list' && (\n          <PlanningListView\n            visits={filteredVisits}\n            onVisitAction={handleVisitAction}\n            onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n          />\n        )}\n\n        {view === 'calendar' && (\n          <PlanningCalendarView\n            visits={filteredVisits}\n            onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n          />\n        )}\n\n        {view === 'timeline' && <PlanningTimelineView visits={filteredVisits} />}\n\n        {view === 'workload' && <PlanningWorkloadView />}\n\n        {view === 'finance' && <FinancialDashboard />}\n\n        {view === 'archives' && (\n          <div className='space-y-4'>\n            <div className='flex items-center gap-3 mb-4'>\n              <Archive className='w-6 h-6 text-gray-600 dark:text-gray-400' />\n              <h2 className='text-xl font-semibold text-gray-900 dark:text-white'>\n                Visites archiv√©es ({archivedVisits.length})\n              </h2>\n            </div>\n\n            {archivedVisits.length === 0 ? (\n              <div className='text-center py-12'>\n                <Archive className='w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4' />\n                <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                  Aucune visite archiv√©e\n                </h3>\n                <p className='text-gray-500 dark:text-gray-400'>\n                  Les visites termin√©es appara√Ætront ici automatiquement.\n                </p>\n              </div>\n            ) : (\n              <div className='grid gap-4 md:grid-cols-2 lg:grid-cols-3'>\n                {archivedVisits\n                  .sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime())\n                  .map((visit) => (\n                    <div\n                      key={visit.visitId}\n                      className='bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow-sm hover:shadow-md transition-shadow'\n                    >\n                      <div className='flex items-start justify-between mb-3'>\n                        <div>\n                          <h3 className='font-semibold text-gray-900 dark:text-white'>\n                            {visit.nom}\n                          </h3>\n                          <p className='text-sm text-gray-600 dark:text-gray-400'>\n                            {visit.congregation}\n                          </p>\n                        </div>\n                        <div className='flex items-center gap-2'>\n                          <span className='inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'>\n                            Termin√©e\n                          </span>\n                        </div>\n                      </div>\n\n                      <div className='space-y-2 text-sm'>\n                        <div className='flex justify-between'>\n                          <span className='text-gray-600 dark:text-gray-400'>Date:</span>\n                          <span className='font-medium'>\n                            {new Date(visit.visitDate).toLocaleDateString('fr-FR')}\n                          </span>\n                        </div>\n                        <div className='flex justify-between'>\n                          <span className='text-gray-600 dark:text-gray-400'>Heure:</span>\n                          <span>{visit.visitTime}</span>\n                        </div>\n                        {visit.talkNoOrType && (\n                          <div className='flex justify-between'>\n                            <span className='text-gray-600 dark:text-gray-400'>Discours:</span>\n                            <span>{visit.talkNoOrType}</span>\n                          </div>\n                        )}\n                        {visit.host && (\n                          <div className='flex justify-between'>\n                            <span className='text-gray-600 dark:text-gray-400'>H√¥te:</span>\n                            <span>{visit.host}</span>\n                          </div>\n                        )}\n                      </div>\n\n                      {visit.talkTheme && (\n                        <div className='mt-3 pt-3 border-t border-gray-200 dark:border-gray-700'>\n                          <p className='text-sm text-gray-700 dark:text-gray-300 italic'>\n                            \"{visit.talkTheme}\"\n                          </p>\n                        </div>\n                      )}\n\n                      <div className='mt-4 flex gap-2'>\n                        <Button\n                          variant='secondary'\n                          size='sm'\n                          onClick={() => handleVisitAction(visit, 'message')}\n                          leftIcon={<MessageSquare className='w-3 h-3' />}\n                        >\n                          Message\n                        </Button>\n                        <Button\n                          variant='secondary'\n                          size='sm'\n                          onClick={() => handleVisitAction(visit, 'feedback')}\n                          leftIcon={<Star className='w-3 h-3' />}\n                        >\n                          Bilan\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Past Visits Alert */}\n      {visits.filter((v: Visit) => v.status === 'confirmed' && new Date(v.visitDate) < new Date())\n        .length > 0 && (\n        <div className='bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-900/50 rounded-lg p-4'>\n          <div className='flex items-center justify-between'>\n            <div className='flex items-center gap-3'>\n              <div className='w-8 h-8 md:w-10 md:h-10 rounded-full bg-orange-100 dark:bg-orange-900 flex items-center justify-center'>\n                <Clock className='w-4 h-4 md:w-5 md:h-5 text-orange-600 dark:text-orange-400' />\n              </div>\n              <div>\n                <h4 className='font-medium text-orange-900 dark:text-orange-100'>\n                  Visites pass√©es √† archiver\n                </h4>\n                <p className='text-sm text-orange-700 dark:text-orange-300'>\n                  {\n                    visits.filter(\n                      (v: Visit) => v.status === 'confirmed' && new Date(v.visitDate) < new Date()\n                    ).length\n                  }{' '}\n                  visite(s) pass√©e(s) n√©cessite(nt) une action\n                </p>\n              </div>\n            </div>\n            <Button variant='secondary' size='sm'>\n              Voir tout\n            </Button>\n          </div>\n        </div>\n      )}\n\n      <ScheduleVisitModal isOpen={isModalOpen} onClose={handleCloseModal} />\n\n      <VisitActionModal\n        isOpen={isActionModalOpen}\n        onClose={handleCloseActionModal}\n        visit={selectedVisit}\n        action={selectedAction}\n      />\n\n      <PlanningFilterModal\n        isOpen={isFilterModalOpen}\n        onClose={() => setIsFilterModalOpen(false)}\n        dateRange={dateRange}\n        setDateRange={setDateRange}\n        statusFilter={statusFilter}\n        setStatusFilter={setStatusFilter}\n        typeFilter={typeFilter}\n        setTypeFilter={setTypeFilter}\n      />\n\n      {selectedVisit && (\n        <>\n          <ConflictDetectionModal\n            isOpen={isConflictModalOpen}\n            onClose={() => setIsConflictModalOpen(false)}\n            visit={selectedVisit}\n            onResolve={(resolution) => {\n              console.log('Conflict resolved:', resolution);\n              setIsConflictModalOpen(false);\n            }}\n          />\n\n          <CancellationModal\n            isOpen={isCancellationModalOpen}\n            onClose={() => setIsCancellationModalOpen(false)}\n            visit={selectedVisit}\n            onCancel={(data) => {\n              console.log('Visit cancelled:', data);\n              setIsCancellationModalOpen(false);\n            }}\n          />\n\n          <EmergencyReplacementModal\n            isOpen={isReplacementModalOpen}\n            onClose={() => setIsReplacementModalOpen(false)}\n            visit={selectedVisit}\n            onSelectReplacement={(speaker) => {\n              console.log('Replacement selected:', speaker);\n              setIsReplacementModalOpen(false);\n            }}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n"],"names":["ArrowDownRight","createLucideIcon","ArrowUpRight","BarChart","Eye","LayoutGrid","List","MoreHorizontal","MoreVertical","PieChart","ConflictDetectionModal","isOpen","onClose","visit","onResolve","visits","hosts","useData","selectedResolutions","setSelectedResolutions","useState","conflicts","useMemo","detected","sameDateSpeaker","v","h","availableHosts","idx","recentSameTalk","sameMonthVisits","vDate","visitDate","getSeverityColor","severity","getSeverityIcon","jsx","XCircle","AlertTriangle","CheckCircle","handleSelectSuggestion","conflictId","suggestionId","prev","newMap","handleApplyResolutions","Modal","jsxs","Calendar","Badge","c","conflict","Card","CardBody","suggestion","ArrowRight","Button","Fragment","CANCELLATION_REASONS","CancellationModal","onCancel","selectedReason","setSelectedReason","customReason","setCustomReason","notifySpeaker","setNotifySpeaker","notifyHost","setNotifyHost","proposeReschedule","setProposeReschedule","suggestedNewDate","setSuggestedNewDate","internalNotes","setInternalNotes","showConfirmation","setShowConfirmation","handleSubmit","cancellationData","getNotificationPreview","reason","r","Send","e","RotateCcw","MessageSquare","EmergencyReplacementModal","onSelectReplacement","speakers","searchTerm","setSearchTerm","filterByDistance","setFilterByDistance","filterByAvailability","setFilterByAvailability","selectedSpeaker","setSelectedSpeaker","sendNotification","setSendNotification","showFilters","setShowFilters","matchedSpeakers","matches","speaker","score","reasons","availableTalks","speakerTalks","t","talk","lastVisit","a","b","m","handleSelectSpeaker","getScoreColor","getScoreLabel","AlertCircle","Search","Filter","match","MapPin","Phone","User","VisitCard","onClick","onAction","showMenu","setShowMenu","buttonRef","useRef","getStatusBadge","status","handleActionClick","action","actionOptions","Edit2","CreditCard","Truck","Star","Trash2","fr","Clock","item","CommunicationProgress","createPortal","option","PlanningCardsView","onVisitClick","onVisitAction","index","PlanningListView","format","Edit","PlanningCalendarView","currentDate","setCurrentDate","nextMonth","addMonths","prevMonth","subMonths","today","monthStart","startOfMonth","monthEnd","endOfMonth","startDate","startOfWeek","endDate","endOfWeek","calendarDays","eachDayOfInterval","weekDays","getVisitsForDay","date","isSameDay","ChevronLeft","ChevronRight","day","dayVisits","isCurrentMonth","isSameMonth","isCurrentDay","isToday","ScheduleVisitModal","initialDate","addVisit","publicTalks","congregationProfile","addToast","useToast","isLoading","setIsLoading","dateError","setDateError","dateConflict","setDateConflict","formData","setFormData","useEffect","validateDate","checkDateConflict","dateStr","newVisit","uuidv4","error","handleSpeakerChange","speakerId","s","handleTalkChange","talkNumber","Select","Input","PlanningWorkloadView","React","filteredData","calculateWorkload","workload","WorkloadIndicator","PlanningTimelineView","groupedVisits","acc","parseISO","key","sortedMonthKeys","monthKey","isLeft","FinancialDashboard","selectedMonth","setSelectedMonth","currency","allExpenses","monthlyStats","year","month","start","end","previousStart","previousEnd","currentMonthExpenses","isWithinInterval","previousMonthExpenses","totalCurrent","sum","totalPrevious","variation","byCategory","cat","totalVisitsWithExpenses","averageCostPerVisit","exportData","csvContent","blob","link","monthOptions","_","i","d","value","label","Download","Euro","TrendingUp","amount","percentage","expense","DatePicker","onChange","placeholder","className","required","disabled","min","max","dateToString","stringToDate","PlanningFilterModal","dateRange","setDateRange","statusFilter","setStatusFilter","typeFilter","setTypeFilter","localDateRange","setLocalDateRange","localStatusFilter","setLocalStatusFilter","localTypeFilter","setLocalTypeFilter","handleApply","handleCancel","handleClear","StatCard","memo","Icon","bgColor","textColor","iconBg","ViewOption","viewOption","currentView","onViewChange","Planning","archivedVisits","view","setView","isModalOpen","setIsModalOpen","isActionModalOpen","setIsActionModalOpen","isFilterModalOpen","setIsFilterModalOpen","selectedVisit","setSelectedVisit","selectedAction","setSelectedAction","isConflictModalOpen","setIsConflictModalOpen","isCancellationModalOpen","setIsCancellationModalOpen","isReplacementModalOpen","setIsReplacementModalOpen","isViewMenuOpen","setIsViewMenuOpen","componentRef","handlePrint","useReactToPrint","handleExport","handleSetView","useCallback","newView","handleSearchChange","handleOpenModal","handleCloseModal","handleVisitAction","handleCloseActionModal","filteredVisits","matchesSearch","matchesStatus","matchesType","matchesDateRange","stats","total","confirmed","pending","completed","upcoming","mainViewOptions","CalendarIcon","specializedViews","Archive","Plus","X","VisitActionModal","resolution","data"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}