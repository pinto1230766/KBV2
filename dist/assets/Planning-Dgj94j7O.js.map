{"version":3,"file":"Planning-Dgj94j7O.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-down-right.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/calendar-days.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/list.js","../../node_modules/lucide-react/dist/esm/icons/more-vertical.js","../../node_modules/lucide-react/dist/esm/icons/pie-chart.js","../../src/components/planning/VisitCard.tsx","../../src/components/planning/PlanningCardsView.tsx","../../src/components/planning/PlanningListView.tsx","../../src/components/planning/PlanningCalendarView.tsx","../../src/components/planning/ScheduleVisitModal.tsx","../../src/components/planning/PlanningWorkloadView.tsx","../../src/components/planning/PlanningTimelineView.tsx","../../src/components/expenses/FinancialDashboard.tsx","../../src/components/ui/DatePicker.tsx","../../src/components/planning/PlanningFilterModal.tsx","../../src/components/planning/ConflictDetectionModal.tsx","../../src/components/planning/CancellationModal.tsx","../../src/components/planning/EmergencyReplacementModal.tsx","../../src/pages/Planning.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownRight = createLucideIcon(\"ArrowDownRight\", [\n  [\"path\", { d: \"m7 7 10 10\", key: \"1fmybs\" }],\n  [\"path\", { d: \"M17 7v10H7\", key: \"6fjiku\" }]\n]);\n\nexport { ArrowDownRight as default };\n//# sourceMappingURL=arrow-down-right.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart = createLucideIcon(\"BarChart\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"20\", y2: \"10\", key: \"1vz5eb\" }],\n  [\"line\", { x1: \"18\", x2: \"18\", y1: \"20\", y2: \"4\", key: \"cun8e5\" }],\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"20\", y2: \"16\", key: \"hq0ia6\" }]\n]);\n\nexport { BarChart as default };\n//# sourceMappingURL=bar-chart.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CalendarDays = createLucideIcon(\"CalendarDays\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M8 18h.01\", key: \"lrp35t\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }],\n  [\"path\", { d: \"M16 18h.01\", key: \"kzsmim\" }]\n]);\n\nexport { CalendarDays as default };\n//# sourceMappingURL=calendar-days.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\"path\", { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst List = createLucideIcon(\"List\", [\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"6\", y2: \"6\", key: \"7ey8pc\" }],\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"12\", y2: \"12\", key: \"rjfblc\" }],\n  [\"line\", { x1: \"8\", x2: \"21\", y1: \"18\", y2: \"18\", key: \"c3b1m8\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"6\", y2: \"6\", key: \"1g7gq3\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"12\", y2: \"12\", key: \"1pjlvk\" }],\n  [\"line\", { x1: \"3\", x2: \"3.01\", y1: \"18\", y2: \"18\", key: \"28t2mc\" }]\n]);\n\nexport { List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreVertical = createLucideIcon(\"MoreVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { MoreVertical as default };\n//# sourceMappingURL=more-vertical.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PieChart = createLucideIcon(\"PieChart\", [\n  [\"path\", { d: \"M21.21 15.89A10 10 0 1 1 8 2.83\", key: \"k2fpak\" }],\n  [\"path\", { d: \"M22 12A10 10 0 0 0 12 2v10z\", key: \"1rfc4y\" }]\n]);\n\nexport { PieChart as default };\n//# sourceMappingURL=pie-chart.js.map\n","import React, { useState, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport {\n  Calendar,\n  MapPin,\n  User,\n  Clock,\n  MoreVertical,\n  Edit2,\n  Trash2,\n  MessageSquare,\n  CheckCircle,\n  Star,\n  CreditCard,\n  Truck,\n} from 'lucide-react';\nimport { Visit } from '@/types';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Badge } from '@/components/ui/Badge';\nimport { CommunicationProgress } from '@/components/messages/CommunicationProgress';\nimport { format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\ninterface VisitCardProps {\n  visit: Visit;\n  onClick?: () => void;\n  onAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const VisitCard: React.FC<VisitCardProps> = ({ visit, onClick, onAction }) => {\n  const [showMenu, setShowMenu] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return (\n          <Badge variant='success' size='sm'>\n            Confirmé\n          </Badge>\n        );\n      case 'pending':\n        return (\n          <Badge variant='warning' size='sm'>\n            En attente\n          </Badge>\n        );\n      case 'completed':\n        return (\n          <Badge variant='default' size='sm'>\n            Terminé\n          </Badge>\n        );\n      case 'cancelled':\n        return (\n          <Badge variant='danger' size='sm'>\n            Annulé\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant='default' size='sm'>\n            {status}\n          </Badge>\n        );\n    }\n  };\n\n  const handleActionClick = (\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses',\n    e: React.MouseEvent\n  ) => {\n    e.stopPropagation();\n    if (onAction) {\n      onAction(visit, action);\n    }\n    setShowMenu(false);\n  };\n\n  const actionOptions = [\n    { action: 'edit', label: 'Modifier', icon: Edit2, color: 'text-blue-600' },\n    {\n      action: 'message',\n      label: 'Envoyer un message',\n      icon: MessageSquare,\n      color: 'text-green-600',\n    },\n    { action: 'expenses', label: 'Dépenses', icon: CreditCard, color: 'text-purple-600' },\n    { action: 'logistics', label: 'Logistique', icon: Truck, color: 'text-blue-500' },\n    { action: 'status', label: 'Changer le statut', icon: CheckCircle, color: 'text-orange-600' },\n    { action: 'feedback', label: 'Bilan', icon: Star, color: 'text-yellow-500' },\n    { action: 'delete', label: 'Supprimer', icon: Trash2, color: 'text-red-600' },\n  ];\n\n  return (\n    <Card hoverable className='h-full relative overflow-visible' onClick={onClick}>\n      <CardBody className='p-4 flex flex-col h-full'>\n        <div className='flex justify-between items-start mb-3'>\n          <div className='flex items-center gap-2'>\n            <div className='w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-sm'>\n              {visit.nom.charAt(0)}\n            </div>\n            <div>\n              <h4 className='font-semibold text-gray-900 dark:text-white text-sm line-clamp-1'>\n                {visit.nom}\n              </h4>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>{visit.congregation}</p>\n            </div>\n          </div>\n          {getStatusBadge(visit.status)}\n        </div>\n\n        <div className='space-y-2 mb-4 flex-1'>\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <Calendar className='w-4 h-4 mr-2 text-gray-400' />\n            <span className='capitalize'>\n              {format(new Date(visit.visitDate), 'EEEE d MMMM yyyy', { locale: fr })}\n            </span>\n          </div>\n\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <Clock className='w-4 h-4 mr-2 text-gray-400' />\n            <span>{visit.visitTime}</span>\n          </div>\n\n          <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n            <MapPin className='w-4 h-4 mr-2 text-gray-400' />\n            <span className='line-clamp-1'>\n              {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Visioconférence'}\n            </span>\n          </div>\n\n          {visit.host && (\n            <div className='flex items-center text-sm text-gray-600 dark:text-gray-300'>\n              <User className='w-4 h-4 mr-2 text-gray-400' />\n              <span className='line-clamp-1'>Chez {visit.host}</span>\n            </div>\n          )}\n\n          {/* Logistics Indicator */}\n          {visit.logistics?.checklist &&\n            visit.logistics.checklist.some((item) => !item.isCompleted) && (\n              <div className='flex items-center text-xs text-orange-600 dark:text-orange-400 mt-1'>\n                <Truck className='w-3 h-3 mr-2' />\n                <span>Logistique à compléter</span>\n              </div>\n            )}\n        </div>\n\n        {/* Barre de progression communication */}\n        <div className='pt-3 mt-3 border-t border-gray-100 dark:border-gray-700'>\n          <CommunicationProgress visit={visit} size='sm' />\n        </div>\n\n        <div className='pt-3 border-t border-gray-100 dark:border-gray-700'>\n          <div className='flex justify-between items-start mb-2'>\n            <div className='flex-1 min-w-0'>\n              <div className='text-xs font-medium text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 px-2 py-1 rounded inline-block mb-1'>\n                {visit.talkNoOrType === 'Assemblée' || visit.talkNoOrType === 'Congrès'\n                  ? visit.talkNoOrType\n                  : `Discours n°${visit.talkNoOrType}`}\n              </div>\n              {visit.talkTheme &&\n                visit.talkNoOrType !== 'Assemblée' &&\n                visit.talkNoOrType !== 'Congrès' && (\n                  <p className='text-xs text-gray-600 dark:text-gray-400 line-clamp-2 mt-1'>\n                    {visit.talkTheme}\n                  </p>\n                )}\n            </div>\n          </div>\n\n          <div className='relative'>\n            <button\n              ref={buttonRef}\n              aria-label='Options'\n              className='p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700'\n              onClick={(e) => {\n                e.stopPropagation();\n                setShowMenu(!showMenu);\n              }}\n            >\n              <MoreVertical className='w-4 h-4' />\n            </button>\n\n            {showMenu &&\n              createPortal(\n                <>\n                  <div\n                    className='fixed inset-0 z-50 bg-black/20 backdrop-blur-sm'\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setShowMenu(false);\n                    }}\n                  />\n                  <div className='fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl z-50 w-72 overflow-hidden animate-in fade-in zoom-in-95 duration-200'>\n                    <div className='p-2'>\n                      {actionOptions.map((option) => (\n                        <button\n                          key={option.action}\n                          className='w-full px-4 py-3 text-left text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center gap-3 transition-colors mb-1 last:mb-0'\n                          onClick={(e) => handleActionClick(option.action as any, e)}\n                        >\n                          <div\n                            className={`p-2 rounded-full bg-opacity-10 ${option.color.replace('text-', 'bg-')}`}\n                          >\n                            <option.icon className={`w-5 h-5 ${option.color}`} />\n                          </div>\n                          {option.label}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </>,\n                document.body\n              )}\n          </div>\n        </div>\n      </CardBody>\n\n      {/* Overlay to close menu when clicking outside */}\n    </Card>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { VisitCard } from './VisitCard';\n\ninterface PlanningCardsViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n  onVisitAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const PlanningCardsView: React.FC<PlanningCardsViewProps> = ({\n  visits,\n  onVisitClick,\n  onVisitAction,\n}) => {\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12'>\n        <p className='text-gray-500 dark:text-gray-400'>\n          Aucune visite trouvée pour cette période.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6'>\n      {visits.map((visit, index) => (\n        <VisitCard\n          key={`${visit.id}-${index}`}\n          visit={visit}\n          onClick={() => onVisitClick?.(visit)}\n          onAction={onVisitAction}\n        />\n      ))}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { format } from 'date-fns';\nimport { Badge } from '@/components/ui/Badge';\nimport { Edit, Trash2, MessageSquare } from 'lucide-react';\n\ninterface PlanningListViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n  onVisitAction?: (\n    visit: Visit,\n    action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  ) => void;\n}\n\nexport const PlanningListView: React.FC<PlanningListViewProps> = ({\n  visits,\n  onVisitClick,\n  onVisitAction,\n}) => {\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return (\n          <Badge variant='success' size='sm'>\n            Confirmé\n          </Badge>\n        );\n      case 'pending':\n        return (\n          <Badge variant='warning' size='sm'>\n            En attente\n          </Badge>\n        );\n      case 'completed':\n        return (\n          <Badge variant='default' size='sm'>\n            Terminé\n          </Badge>\n        );\n      case 'cancelled':\n        return (\n          <Badge variant='danger' size='sm'>\n            Annulé\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant='default' size='sm'>\n            {status}\n          </Badge>\n        );\n    }\n  };\n\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700'>\n        <p className='text-gray-500 dark:text-gray-400'>\n          Aucune visite trouvée pour cette période.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className='bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm'>\n      <div className='overflow-x-auto'>\n        <table className='min-w-full divide-y divide-gray-200 dark:divide-gray-700'>\n          <thead className='bg-gray-50 dark:bg-gray-900/50'>\n            <tr>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Date\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Orateur\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Discours\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Lieu / Hôte\n              </th>\n              <th\n                scope='col'\n                className='px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n              >\n                Statut\n              </th>\n              <th scope='col' className='relative px-6 py-3'>\n                <span className='sr-only'>Actions</span>\n              </th>\n            </tr>\n          </thead>\n          <tbody className='bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700'>\n            {visits.map((visit) => (\n              <tr\n                key={visit.id}\n                className='hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer'\n                onClick={() => onVisitClick?.(visit)}\n              >\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='text-sm font-medium text-gray-900 dark:text-white'>\n                    {format(new Date(visit.visitDate), 'dd/MM/yyyy')}\n                  </div>\n                  <div className='text-sm text-gray-500 dark:text-gray-400'>{visit.visitTime}</div>\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='flex items-center'>\n                    <div className='flex-shrink-0 h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-xs mr-3'>\n                      {visit.nom.charAt(0)}\n                    </div>\n                    <div>\n                      <div className='text-sm font-medium text-gray-900 dark:text-white'>\n                        {visit.nom}\n                      </div>\n                      <div className='text-sm text-gray-500 dark:text-gray-400'>\n                        {visit.congregation}\n                      </div>\n                    </div>\n                  </div>\n                </td>\n                <td className='px-6 py-4'>\n                  <div className='text-sm text-gray-900 dark:text-white'>\n                    N°{visit.talkNoOrType}\n                  </div>\n                  <div className='text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs'>\n                    {visit.talkTheme}\n                  </div>\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>\n                  <div className='text-sm text-gray-900 dark:text-white'>\n                    {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Visioconférence'}\n                  </div>\n                  {visit.host && (\n                    <div className='text-sm text-gray-500 dark:text-gray-400'>\n                      Chez {visit.host}\n                    </div>\n                  )}\n                </td>\n                <td className='px-6 py-4 whitespace-nowrap'>{getStatusBadge(visit.status)}</td>\n                <td className='px-6 py-4 whitespace-nowrap text-right text-sm font-medium'>\n                  <div className='flex items-center justify-end gap-2'>\n                    <button\n                      className='text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'edit');\n                      }}\n                      title='Modifier'\n                    >\n                      <Edit className='w-4 h-4' />\n                    </button>\n                    <button\n                      className='text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'message');\n                      }}\n                      title='Message'\n                    >\n                      <MessageSquare className='w-4 h-4' />\n                    </button>\n                    <button\n                      className='text-gray-400 hover:text-red-600 dark:hover:text-red-400 p-1'\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onVisitAction?.(visit, 'delete');\n                      }}\n                      title='Supprimer'\n                    >\n                      <Trash2 className='w-4 h-4' />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Visit } from '@/types';\nimport {\n  format,\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  eachDayOfInterval,\n  isSameMonth,\n  isSameDay,\n  addMonths,\n  subMonths,\n  isToday,\n} from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface PlanningCalendarViewProps {\n  visits: Visit[];\n  onVisitClick?: (visit: Visit) => void;\n}\n\nexport const PlanningCalendarView: React.FC<PlanningCalendarViewProps> = ({\n  visits,\n  onVisitClick,\n}) => {\n  const [currentDate, setCurrentDate] = useState(new Date());\n\n  const nextMonth = () => setCurrentDate(addMonths(currentDate, 1));\n  const prevMonth = () => setCurrentDate(subMonths(currentDate, 1));\n  const today = () => setCurrentDate(new Date());\n\n  const monthStart = startOfMonth(currentDate);\n  const monthEnd = endOfMonth(monthStart);\n  const startDate = startOfWeek(monthStart, { locale: fr });\n  const endDate = endOfWeek(monthEnd, { locale: fr });\n\n  const calendarDays = eachDayOfInterval({\n    start: startDate,\n    end: endDate,\n  });\n\n  const weekDays = ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'];\n\n  const getVisitsForDay = (date: Date) =>\n    visits.filter((visit) => isSameDay(new Date(visit.visitDate), date));\n\n  return (\n    <div className='bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm'>\n      {/* Calendar Header */}\n      <div className='flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700'>\n        <h3 className='text-lg font-semibold text-gray-900 dark:text-white capitalize'>\n          {format(currentDate, 'MMMM yyyy', { locale: fr })}\n        </h3>\n        <div className='flex items-center gap-2'>\n          <button\n            onClick={prevMonth}\n            aria-label='Mois précédent'\n            className='p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400'\n          >\n            <ChevronLeft className='w-5 h-5' />\n          </button>\n          <button\n            onClick={today}\n            className='px-3 py-1 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20 rounded-md'\n          >\n            Aujourd'hui\n          </button>\n          <button\n            onClick={nextMonth}\n            aria-label='Mois suivant'\n            className='p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-400'\n          >\n            <ChevronRight className='w-5 h-5' />\n          </button>\n        </div>\n      </div>\n\n      {/* Calendar Grid */}\n      <div className='grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50'>\n        {weekDays.map((day) => (\n          <div\n            key={day}\n            className='py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider'\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n\n      <div className='grid grid-cols-7 auto-rows-fr bg-gray-200 dark:bg-gray-700 gap-px'>\n        {calendarDays.map((day) => {\n          const dayVisits = getVisitsForDay(day);\n          const isCurrentMonth = isSameMonth(day, monthStart);\n          const isCurrentDay = isToday(day);\n\n          return (\n            <div\n              key={day.toString()}\n              className={`\n                min-h-[120px] bg-white dark:bg-gray-800 p-2 transition-colors\n                ${!isCurrentMonth ? 'bg-gray-50 dark:bg-gray-800/50 text-gray-400 dark:text-gray-600' : ''}\n                ${isCurrentDay ? 'bg-blue-50/30 dark:bg-blue-900/10' : ''}\n              `}\n            >\n              <div className='flex justify-between items-start mb-1'>\n                <span\n                  className={`\n                    text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full\n                    ${\n                      isCurrentDay\n                        ? 'bg-primary-600 text-white'\n                        : isCurrentMonth\n                          ? 'text-gray-900 dark:text-white'\n                          : 'text-gray-400 dark:text-gray-600'\n                    }\n                  `}\n                >\n                  {format(day, 'd')}\n                </span>\n                {dayVisits.length > 0 && (\n                  <span className='text-xs font-medium text-gray-400'>{dayVisits.length}</span>\n                )}\n              </div>\n\n              <div className='space-y-1 mt-1'>\n                {dayVisits.map((visit) => (\n                  <button\n                    key={visit.id}\n                    onClick={() => onVisitClick?.(visit)}\n                    className={`\n                      w-full text-left px-2 py-1 rounded text-xs font-medium truncate transition-colors\n                      ${\n                        visit.status === 'confirmed'\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50'\n                          : visit.status === 'pending'\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-900/50'\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                      }\n                    `}\n                  >\n                    {visit.visitTime} - {visit.nom}\n                  </button>\n                ))}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { useData } from '@/contexts/DataContext';\nimport { useToast } from '@/contexts/ToastContext';\nimport { Visit } from '@/types';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  AlertTriangle,\n  Calendar,\n  Clock,\n  User,\n  MapPin,\n  BookOpen,\n  Home,\n  CheckCircle2,\n  ChevronRight,\n  Info,\n} from 'lucide-react';\nimport { Badge } from '@/components/ui/Badge';\nimport { cn } from '@/utils/cn';\nimport { useVisitNotifications } from '@/hooks/useVisitNotifications';\n\ninterface ScheduleVisitModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  initialDate?: Date;\n}\n\nexport const ScheduleVisitModal: React.FC<ScheduleVisitModalProps> = ({\n  isOpen,\n  onClose,\n  initialDate,\n}) => {\n  const { speakers, hosts, addVisit, publicTalks, visits, congregationProfile } = useData();\n  const { addToast } = useToast();\n  const { scheduleVisitReminder } = useVisitNotifications();\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [dateError, setDateError] = useState<string>('');\n  const [dateConflict, setDateConflict] = useState<{ has: boolean; speakerName?: string }>({\n    has: false,\n  });\n\n  const [formData, setFormData] = useState<Partial<Visit>>({\n    visitDate: initialDate ? initialDate.toISOString().split('T')[0] : '',\n    visitTime: congregationProfile.meetingTime || '14:30',\n    locationType: 'physical',\n    status: 'pending',\n    talkNoOrType: '',\n    talkTheme: '',\n    nom: '',\n    id: '',\n    host: '',\n    congregation: '',\n  });\n\n  // Reset step on open\n  useEffect(() => {\n    if (isOpen) setCurrentStep(1);\n    if (initialDate) {\n      setFormData((prev) => ({ ...prev, visitDate: initialDate.toISOString().split('T')[0] }));\n    }\n  }, [isOpen, initialDate]);\n\n  useEffect(() => {\n    if (formData.visitDate) {\n      validateDate(formData.visitDate);\n      checkDateConflict(formData.visitDate);\n    }\n  }, [formData.visitDate]);\n\n  const validateDate = (dateStr: string) => {\n    const visitDate = new Date(dateStr);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    if (visitDate < today) {\n      setDateError('La date doit être dans le futur');\n      return false;\n    }\n    setDateError('');\n    return true;\n  };\n\n  const checkDateConflict = (date: string) => {\n    const conflict = visits.find((v) => v.visitDate === date);\n    if (conflict) {\n      setDateConflict({\n        has: true,\n        speakerName: conflict.nom,\n      });\n    } else {\n      setDateConflict({ has: false });\n    }\n  };\n\n  const handleSpeakerChange = (speakerId: string) => {\n    const speaker = speakers.find((s) => s.id === speakerId);\n    if (speaker) {\n      const isLocal = speaker.congregation === 'Lyon KBV' || speaker.congregation === 'Lyon';\n      setFormData((prev) => ({\n        ...prev,\n        id: speaker.id,\n        nom: speaker.nom,\n        congregation: speaker.congregation,\n        host: isLocal ? '' : prev.host,\n      }));\n    }\n  };\n\n  const handleTalkChange = (talkNumber: string) => {\n    const talk = publicTalks.find((t) => t.number.toString() === talkNumber);\n    if (talk) {\n      setFormData((prev) => ({\n        ...prev,\n        talkNoOrType: talk.number.toString(),\n        talkTheme: talk.theme,\n      }));\n    } else {\n      // Allow manual input\n      setFormData((prev) => ({\n        ...prev,\n        talkNoOrType: talkNumber,\n      }));\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateDate(formData.visitDate || '')) {\n      addToast('Veuillez sélectionner une date valide', 'error');\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      if (!formData.id || !formData.visitDate) {\n        throw new Error('Champs obligatoires manquants');\n      }\n\n      const newVisit: Visit = {\n        ...(formData as Visit),\n        visitId: uuidv4(),\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      await addVisit(newVisit);\n      await scheduleVisitReminder(newVisit);\n      addToast('Visite programmée avec succès', 'success');\n      onClose();\n    } catch (_error) {\n      addToast('Erreur lors de la création', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const isLocalSpeaker = formData.congregation === 'Lyon KBV' || formData.congregation === 'Lyon';\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=''\n      size='lg'\n      padding='none'\n      hideCloseButton={true}\n      className='max-sm:rounded-none overflow-hidden'\n    >\n      <div className='flex flex-col h-[85vh] md:h-auto bg-white dark:bg-gray-900 md:max-h-[85vh]'>\n        {/* 1. Header */}\n        <div className='bg-gradient-to-r from-indigo-600 to-violet-600 p-6 md:p-8 text-white relative overflow-hidden shrink-0'>\n          <Calendar className='absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12' />\n          <div className='relative z-10'>\n            <h2 className='text-2xl font-black tracking-tighter mb-1'>Nouvelle Visite</h2>\n            <p className='text-indigo-100 text-sm'>Organisez le programme spirituel</p>\n\n            {/* Stepper */}\n            <div className='flex items-center gap-2 mt-6'>\n              {[1, 2, 3].map((step) => (\n                <div key={step} className='flex items-center'>\n                  <div\n                    className={cn(\n                      'w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300',\n                      currentStep >= step\n                        ? 'bg-white text-indigo-600 shadow-md scale-110'\n                        : 'bg-indigo-900/40 text-indigo-300'\n                    )}\n                  >\n                    {step}\n                  </div>\n                  {step < 3 && (\n                    <div\n                      className={cn(\n                        'w-8 md:w-16 h-1 mx-2 rounded-full',\n                        currentStep > step ? 'bg-white/50' : 'bg-indigo-900/20'\n                      )}\n                    />\n                  )}\n                </div>\n              ))}\n              <span className='ml-auto text-xs font-bold uppercase tracking-widest opacity-80'>\n                {currentStep === 1\n                  ? 'Date & Orateur'\n                  : currentStep === 2\n                    ? 'Logistique'\n                    : 'Confirmation'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* 2. Content */}\n        <div className='flex-1 overflow-y-auto p-6 md:p-8 space-y-8'>\n          {/* STEP 1: DATE & SPEAKER */}\n          {currentStep === 1 && (\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-8 duration-300'>\n              {/* Date Selection */}\n              <div className='grid grid-cols-2 gap-4'>\n                <div className='space-y-2'>\n                  <label className='text-xs font-bold text-gray-500 uppercase tracking-widest pl-1'>\n                    Date\n                  </label>\n                  <div className='relative'>\n                    <Calendar className='absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400' />\n                    <input\n                      type='date'\n                      value={formData.visitDate}\n                      onChange={(e) => setFormData((p) => ({ ...p, visitDate: e.target.value }))}\n                      className={cn(\n                        'w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 transition-all',\n                        dateError\n                          ? 'focus:ring-red-500 bg-red-50 dark:bg-red-900/20'\n                          : 'focus:ring-indigo-500'\n                      )}\n                    />\n                  </div>\n                  {dateError && (\n                    <p className='text-xs text-red-600 font-medium pl-1'>{dateError}</p>\n                  )}\n                </div>\n                <div className='space-y-2'>\n                  <label className='text-xs font-bold text-gray-500 uppercase tracking-widest pl-1'>\n                    Heure\n                  </label>\n                  <div className='relative'>\n                    <Clock className='absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400' />\n                    <input\n                      type='time'\n                      value={formData.visitTime}\n                      onChange={(e) => setFormData((p) => ({ ...p, visitTime: e.target.value }))}\n                      className='w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-indigo-500'\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {dateConflict.has && (\n                <div className='p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-800 rounded-xl flex items-start gap-3'>\n                  <AlertTriangle className='w-5 h-5 text-orange-600 shrink-0' />\n                  <div>\n                    <h4 className='text-sm font-bold text-orange-800 dark:text-orange-200'>\n                      Attention : Conflit potentiel\n                    </h4>\n                    <p className='text-xs text-orange-600 dark:text-orange-300 mt-1'>\n                      Une visite est déjà prévue ce jour avec {dateConflict.speakerName}.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Speaker Selection */}\n              <div className='space-y-2'>\n                <label className='text-xs font-bold text-gray-500 uppercase tracking-widest pl-1'>\n                  Orateur\n                </label>\n                <div className='relative'>\n                  <User className='absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400' />\n                  <select\n                    value={formData.id || ''}\n                    onChange={(e) => handleSpeakerChange(e.target.value)}\n                    className='w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-indigo-500 appearance-none'\n                  >\n                    <option value=''>Sélectionner un orateur...</option>\n                    {speakers.map((s) => (\n                      <option key={s.id} value={s.id}>\n                        {s.nom} ({s.congregation})\n                      </option>\n                    ))}\n                  </select>\n                  <div className='absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none'>\n                    <ChevronRight className='w-4 h-4 text-gray-400 rotate-90' />\n                  </div>\n                </div>\n              </div>\n\n              {/* Talk Selection */}\n              <div className='space-y-4 pt-2 border-t border-gray-100 dark:border-gray-800'>\n                <div className='flex items-center gap-2'>\n                  <BookOpen className='w-4 h-4 text-indigo-500' />\n                  <h4 className='text-sm font-bold text-gray-900 dark:text-white'>Discours</h4>\n                </div>\n                <div className='grid grid-cols-[1fr,2fr] gap-4'>\n                  <input\n                    placeholder='N°'\n                    value={formData.talkNoOrType || ''}\n                    onChange={(e) => handleTalkChange(e.target.value)}\n                    list='talks-list'\n                    className='w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-indigo-500'\n                  />\n                  <input\n                    placeholder='Thème du discours...'\n                    value={formData.talkTheme || ''}\n                    onChange={(e) => setFormData((p) => ({ ...p, talkTheme: e.target.value }))}\n                    className='w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-indigo-500'\n                  />\n                  <datalist id='talks-list'>\n                    {publicTalks.map((t) => (\n                      <option key={t.number} value={t.number}>\n                        {t.theme}\n                      </option>\n                    ))}\n                  </datalist>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* STEP 2: LOGISTICS */}\n          {currentStep === 2 && (\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-8 duration-300'>\n              <div className='space-y-3'>\n                <label className='text-xs font-bold text-gray-500 uppercase tracking-widest pl-1'>\n                  Mode de diffusion\n                </label>\n                <div className='grid grid-cols-1 sm:grid-cols-3 gap-3'>\n                  {[\n                    { id: 'physical', label: 'Présentiel', icon: MapPin },\n                    { id: 'zoom', label: 'Zoom', icon: User },\n                    { id: 'streaming', label: 'Streaming', icon: User },\n                  ].map((type) => (\n                    <button\n                      key={type.id}\n                      onClick={() => setFormData((p) => ({ ...p, locationType: type.id as any }))}\n                      className={cn(\n                        'flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all',\n                        formData.locationType === type.id\n                          ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300'\n                          : 'border-gray-100 dark:border-gray-800 text-gray-500 hover:border-gray-200'\n                      )}\n                    >\n                      <type.icon className='w-5 h-5' />\n                      <span className='text-xs font-bold'>{type.label}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {formData.locationType === 'physical' && !isLocalSpeaker && (\n                <div className='space-y-4 pt-4 border-t border-gray-100 dark:border-gray-800 animate-in fade-in duration-300'>\n                  <div className='flex items-center gap-2'>\n                    <Home className='w-4 h-4 text-teal-500' />\n                    <h4 className='text-sm font-bold text-gray-900 dark:text-white'>Hospitalité</h4>\n                  </div>\n\n                  <div className='relative'>\n                    <select\n                      value={formData.host || ''}\n                      onChange={(e) => setFormData((p) => ({ ...p, host: e.target.value }))}\n                      className='w-full pl-4 pr-10 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-teal-500 appearance-none'\n                    >\n                      <option value=''>Sélectionner un hôte...</option>\n                      {hosts.map((h, index) => (\n                        <option key={index} value={h.nom}>\n                          {h.nom}\n                        </option>\n                      ))}\n                    </select>\n                    <ChevronRight className='absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 rotate-90 pointer-events-none' />\n                  </div>\n\n                  <div className='p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl flex gap-3 text-blue-700 dark:text-blue-300 text-xs leading-relaxed'>\n                    <Info className='w-4 h-4 shrink-0 mt-0.5' />\n                    <p>\n                      L'orateur vient d'une autre congrégation. Pensez à vérifier ses besoins en\n                      matière de repas ou d'hébergement.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {isLocalSpeaker && (\n                <div className='p-6 bg-gray-50 dark:bg-gray-800 rounded-2xl text-center'>\n                  <p className='text-sm text-gray-500'>\n                    Aucune logistique nécessaire pour un orateur local.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* STEP 3: SUMMARY */}\n          {currentStep === 3 && (\n            <div className='space-y-6 animate-in fade-in slide-in-from-right-8 duration-300 text-center'>\n              <div className='w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4'>\n                <CheckCircle2 className='w-10 h-10 text-green-600 dark:text-green-400' />\n              </div>\n              <h3 className='text-xl font-black text-gray-900 dark:text-white'>\n                Tout semble correct ?\n              </h3>\n              <p className='text-gray-500 text-sm max-w-sm mx-auto'>\n                Vérifiez les détails ci-dessous avant de confirmer la programmation de cette visite.\n              </p>\n\n              <div className='bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 text-left space-y-4'>\n                <div className='flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-2'>\n                  <span className='text-xs font-bold text-gray-400 uppercase'>Date</span>\n                  <span className='text-sm font-bold text-gray-900 dark:text-white'>\n                    {new Date(formData.visitDate!).toLocaleDateString('fr-FR', {\n                      weekday: 'long',\n                      day: 'numeric',\n                      month: 'long',\n                    })}\n                  </span>\n                </div>\n                <div className='flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-2'>\n                  <span className='text-xs font-bold text-gray-400 uppercase'>Orateur</span>\n                  <span className='text-sm font-bold text-gray-900 dark:text-white'>\n                    {formData.nom}\n                  </span>\n                </div>\n                <div className='flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-2'>\n                  <span className='text-xs font-bold text-gray-400 uppercase'>Discours</span>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white text-right max-w-[200px] truncate'>\n                    {formData.talkNoOrType\n                      ? `N°${formData.talkNoOrType} - ${formData.talkTheme}`\n                      : 'Non défini'}\n                  </span>\n                </div>\n                <div className='flex justify-between items-center'>\n                  <span className='text-xs font-bold text-gray-400 uppercase'>Logistique</span>\n                  <Badge variant='default' className='text-xs'>\n                    {formData.host || 'Aucun hôte'}\n                  </Badge>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* 3. Footer Actions */}\n        <div className='p-6 md:p-8 border-t border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 shrink-0 flex justify-between items-center'>\n          {currentStep > 1 && (\n            <Button variant='ghost' onClick={() => setCurrentStep((p) => p - 1)}>\n              Précédent\n            </Button>\n          )}\n          {currentStep === 1 && (\n            <Button variant='ghost' onClick={onClose} className='text-red-500 hover:bg-red-50'>\n              Annuler\n            </Button>\n          )}\n\n          {currentStep < 3 ? (\n            <Button\n              className='ml-auto bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200 dark:shadow-none'\n              onClick={() => {\n                if (!formData.visitDate || !formData.id) {\n                  addToast('Veuillez remplir les champs obligatoires', 'error');\n                  return;\n                }\n                setCurrentStep((p) => p + 1);\n              }}\n            >\n              Suivant <ChevronRight className='w-4 h-4 ml-1' />\n            </Button>\n          ) : (\n            <Button\n              className='ml-auto bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-200 dark:shadow-none px-8'\n              onClick={handleSubmit}\n              isLoading={isLoading}\n            >\n              Confirmer\n            </Button>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { calculateWorkload } from '@/utils/workload';\nimport { WorkloadIndicator } from '@/components/workload/WorkloadIndicator';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Search } from 'lucide-react';\nimport { Input } from '@/components/ui/Input';\n\nexport const PlanningWorkloadView: React.FC = () => {\n  const { speakers, visits } = useData();\n  const [searchTerm, setSearchTerm] = React.useState('');\n\n  const workloadData = React.useMemo(\n    () =>\n      speakers\n        .map((speaker) => ({\n          speaker,\n          workload: calculateWorkload(speaker, visits),\n        }))\n        .sort((a, b) => b.workload.currentLoad - a.workload.currentLoad), // Tri par charge décroissante\n    [speakers, visits]\n  );\n\n  const filteredData = workloadData.filter(\n    ({ speaker }) =>\n      speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className='space-y-6'>\n      <div className='flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700'>\n        <h3 className='text-lg font-semibold text-gray-900 dark:text-white'>\n          Analyse de la Charge et Disponibilité\n        </h3>\n        <div className='w-64'>\n          <Input\n            placeholder='Rechercher un orateur...'\n            leftIcon={<Search className='w-4 h-4' />}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n        {filteredData.map(({ speaker, workload }) => (\n          <Card key={speaker.id} className='overflow-hidden'>\n            <CardBody className='p-4'>\n              <div className='flex justify-between items-start mb-3'>\n                <div className='flex items-center gap-3'>\n                  <div className='w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300 font-bold'>\n                    {speaker.nom.charAt(0)}\n                  </div>\n                  <div>\n                    <h4 className='font-semibold text-gray-900 dark:text-white'>{speaker.nom}</h4>\n                    <p className='text-xs text-gray-500 dark:text-gray-400'>\n                      {speaker.congregation}\n                    </p>\n                  </div>\n                </div>\n                <WorkloadIndicator workload={workload} />\n              </div>\n\n              <div className='mt-4 space-y-3'>\n                <div>\n                  <div className='flex justify-between text-xs mb-1'>\n                    <span className='text-gray-500'>Charge actuelle</span>\n                    <span className='font-medium text-gray-900 dark:text-white'>\n                      {workload.currentLoad}%\n                    </span>\n                  </div>\n                  <progress\n                    value={workload.currentLoad}\n                    max={100}\n                    className={`w-full h-2 rounded-full ${\n                      workload.workloadScore >= 5\n                        ? '[&::-webkit-progress-value]:bg-red-500 [&::-moz-progress-bar]:bg-red-500'\n                        : workload.workloadScore >= 4\n                          ? '[&::-webkit-progress-value]:bg-orange-500 [&::-moz-progress-bar]:bg-orange-500'\n                          : workload.workloadScore >= 3\n                            ? '[&::-webkit-progress-value]:bg-yellow-500 [&::-moz-progress-bar]:bg-yellow-500'\n                            : '[&::-webkit-progress-value]:bg-green-500 [&::-moz-progress-bar]:bg-green-500'\n                    } [&::-webkit-progress-bar]:bg-gray-100 [&::-webkit-progress-bar]:dark:bg-gray-700 [&::-moz-progress-bar]:bg-gray-100 [&::-moz-progress-bar]:dark:bg-gray-700`}\n                  />\n                </div>\n\n                <div className='flex justify-between items-center text-xs text-gray-500 border-t border-gray-100 dark:border-gray-700 pt-3'>\n                  <span>Dernière visite:</span>\n                  <span className='font-medium text-gray-700 dark:text-gray-300'>\n                    {workload.lastVisit\n                      ? new Date(workload.lastVisit).toLocaleDateString()\n                      : 'Aucune'}\n                  </span>\n                </div>\n              </div>\n            </CardBody>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Visit } from '@/types';\nimport { format, parseISO } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { Calendar, User, MapPin, Clock } from 'lucide-react';\nimport { Card } from '@/components/ui/Card';\n\ninterface PlanningTimelineViewProps {\n  visits: Visit[];\n}\n\nexport const PlanningTimelineView: React.FC<PlanningTimelineViewProps> = ({ visits }) => {\n  if (visits.length === 0) {\n    return (\n      <div className='text-center py-12 text-gray-500 dark:text-gray-400'>\n        Aucune visite à afficher dans la chronologie.\n      </div>\n    );\n  }\n\n  // Grouper par mois\n  const groupedVisits = visits.reduce(\n    (acc, visit) => {\n      const date = parseISO(visit.visitDate);\n      const key = format(date, 'yyyy-MM', { locale: fr });\n\n      if (!acc[key]) {\n        acc[key] = [];\n      }\n      acc[key].push(visit);\n      return acc;\n    },\n    {} as Record<string, Visit[]>\n  );\n\n  const sortedMonthKeys = Object.keys(groupedVisits).sort();\n\n  return (\n    <div className='relative space-y-8 p-4'>\n      {/* Ligne verticale centralisée */}\n      <div className='absolute left-4 md:left-1/2 top-4 bottom-4 w-0.5 bg-gray-200 dark:bg-gray-700 -ml-[1px]' />\n\n      {sortedMonthKeys.map((monthKey) => (\n        <div key={monthKey} className='relative'>\n          {/* En-tête de mois */}\n          <div className='flex justify-center mb-6 relative z-10'>\n            <span className='bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 px-4 py-1 rounded-full text-sm font-semibold border-4 border-white dark:border-gray-900'>\n              {format(parseISO(`${monthKey}-01`), 'MMMM yyyy', { locale: fr })}\n            </span>\n          </div>\n\n          <div className='space-y-6'>\n            {groupedVisits[monthKey].map((visit, index) => {\n              const date = parseISO(visit.visitDate);\n              const isLeft = index % 2 === 0;\n\n              return (\n                <div\n                  key={visit.id}\n                  className={`flex flex-col md:flex-row items-center gap-4 md:gap-8 ${isLeft ? 'md:flex-row-reverse' : ''}`}\n                >\n                  {/* Contenu (Carte) */}\n                  <div className='w-full md:w-1/2 pl-8 md:pl-0'>\n                    <Card className='p-4 hover:shadow-lg transition-shadow border-l-4 border-l-primary-500'>\n                      <div className='flex justify-between items-start mb-2'>\n                        <div className='flex items-center gap-2 text-sm text-primary-600 font-medium'>\n                          <Calendar className='w-4 h-4' />\n                          {format(date, 'EEEE d', { locale: fr })}\n                        </div>\n                        <span\n                          className={`text-xs px-2 py-0.5 rounded-full ${\n                            visit.status === 'confirmed'\n                              ? 'bg-green-100 text-green-800'\n                              : visit.status === 'pending'\n                                ? 'bg-orange-100 text-orange-800'\n                                : 'bg-gray-100 text-gray-800'\n                          }`}\n                        >\n                          {visit.status === 'confirmed'\n                            ? 'Confirmé'\n                            : visit.status === 'pending'\n                              ? 'En attente'\n                              : visit.status}\n                        </span>\n                      </div>\n\n                      <h4 className='font-bold text-gray-900 dark:text-white mb-2'>{visit.nom}</h4>\n                      <div className='text-sm text-gray-600 dark:text-gray-400 space-y-1'>\n                        <div className='flex items-center gap-2'>\n                          <MapPin className='w-3 h-3' />\n                          {visit.congregation}\n                        </div>\n                        <div className='flex items-center gap-2'>\n                          <User className='w-3 h-3' />\n                          <div className='flex-1 min-w-0'>\n                            {visit.talkNoOrType ? (\n                              <>\n                                <div className='font-medium'>N°{visit.talkNoOrType}</div>\n                                {visit.talkTheme && (\n                                  <div className='text-xs truncate'>{visit.talkTheme}</div>\n                                )}\n                              </>\n                            ) : (\n                              'Pas de discours'\n                            )}\n                          </div>\n                        </div>\n                        <div className='flex items-center gap-2'>\n                          <Clock className='w-3 h-3' />\n                          {visit.visitTime}\n                        </div>\n                      </div>\n                    </Card>\n                  </div>\n\n                  {/* Point central */}\n                  <div className='absolute left-4 md:left-1/2 w-4 h-4 bg-primary-500 rounded-full md:-ml-2 border-4 border-white dark:border-gray-900 shadow-sm z-10 flex items-center justify-center'>\n                    <div className='w-1.5 h-1.5 bg-white rounded-full' />\n                  </div>\n\n                  {/* Espace vide pour l'équilibrage */}\n                  <div className='hidden md:block w-1/2' />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { Visit, Expense } from '@/types';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Select } from '@/components/ui/Select';\nimport {\n  Euro,\n  TrendingUp,\n  PieChart,\n  Calendar,\n  ArrowUpRight,\n  ArrowDownRight,\n  Download,\n} from 'lucide-react';\nimport { format, startOfMonth, endOfMonth, isWithinInterval, subMonths } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\nexport const FinancialDashboard: React.FC = () => {\n  const { visits } = useData();\n  const [selectedMonth, setSelectedMonth] = useState<string>(new Date().toISOString().slice(0, 7)); // YYYY-MM\n  const [currency] = useState('€');\n\n  // Helper to extract all expenses from visits\n  const allExpenses = useMemo(\n    () =>\n      visits.flatMap((v: Visit) =>\n        (v.expenses || []).map((e: Expense) => ({ ...e, visitNom: v.nom, visitDate: v.visitDate }))\n      ),\n    [visits]\n  );\n\n  // Filter expenses by selected month\n  const monthlyStats = useMemo(() => {\n    const [year, month] = selectedMonth.split('-').map(Number);\n    const start = startOfMonth(new Date(year, month - 1));\n    const end = endOfMonth(new Date(year, month - 1));\n    const previousStart = startOfMonth(subMonths(start, 1));\n    const previousEnd = endOfMonth(subMonths(start, 1));\n\n    // Define the type for the flattened expense object\n    type DashboardExpense = Expense & { visitNom: string; visitDate: string };\n\n    const currentMonthExpenses = allExpenses.filter((e: DashboardExpense) =>\n      isWithinInterval(new Date(e.date), { start, end })\n    );\n\n    const previousMonthExpenses = allExpenses.filter((e: DashboardExpense) =>\n      isWithinInterval(new Date(e.date), { start: previousStart, end: previousEnd })\n    );\n\n    const totalCurrent = currentMonthExpenses.reduce(\n      (sum: number, e: DashboardExpense) => sum + e.amount,\n      0\n    );\n    const totalPrevious = previousMonthExpenses.reduce(\n      (sum: number, e: DashboardExpense) => sum + e.amount,\n      0\n    );\n\n    // Calculate variations\n    const variation =\n      totalPrevious === 0 ? 0 : ((totalCurrent - totalPrevious) / totalPrevious) * 100;\n\n    // By Category\n    const byCategory = currentMonthExpenses.reduce(\n      (acc: Record<string, number>, e: DashboardExpense) => {\n        const cat = e.category || 'Autre';\n        acc[cat] = (acc[cat] || 0) + e.amount;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    return {\n      total: totalCurrent,\n      variation,\n      count: currentMonthExpenses.length,\n      byCategory,\n      expenses: currentMonthExpenses.sort(\n        (a: DashboardExpense, b: DashboardExpense) =>\n          new Date(b.date).getTime() - new Date(a.date).getTime()\n      ),\n    };\n  }, [allExpenses, selectedMonth]);\n\n  // Overall stats (Year to date could be added here)\n  const totalVisitsWithExpenses = visits.filter((v: Visit) => (v.expenses?.length || 0) > 0).length;\n  const averageCostPerVisit =\n    totalVisitsWithExpenses === 0\n      ? 0\n      : allExpenses.reduce(\n          (sum: number, e: Expense & { visitNom: string; visitDate: string }) => sum + e.amount,\n          0\n        ) / totalVisitsWithExpenses;\n\n  const exportData = () => {\n    const headers = ['Date', 'Visite', 'Description', 'Catégorie', 'Montant'];\n    const csvContent = [\n      headers.join(','),\n      ...monthlyStats.expenses.map((e: Expense & { visitNom: string; visitDate: string }) =>\n        [e.date, `\"${e.visitNom}\"`, `\"${e.description}\"`, e.category, e.amount].join(',')\n      ),\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = `depenses_${selectedMonth}.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const monthOptions = Array.from({ length: 12 }, (_, i) => {\n    const d = subMonths(new Date(), i);\n    const value = format(d, 'yyyy-MM');\n    const label = format(d, 'MMMM yyyy', { locale: fr });\n    return { value, label: label.charAt(0).toUpperCase() + label.slice(1) };\n  });\n\n  return (\n    <div className='space-y-6'>\n      {/* Header & Controls */}\n      <div className='flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm'>\n        <div>\n          <h2 className='text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2'>\n            <PieChart className='w-5 h-5 text-purple-600' />\n            Tableau de bord financier\n          </h2>\n          <p className='text-sm text-gray-500 dark:text-gray-400'>\n            Suivi des coûts et remboursements\n          </p>\n        </div>\n        <div className='flex items-center gap-3 w-full sm:w-auto'>\n          <Select\n            value={selectedMonth}\n            onChange={(e) => setSelectedMonth(e.target.value)}\n            options={monthOptions}\n            className='min-w-[180px]'\n          />\n          <Button\n            variant='secondary'\n            onClick={exportData}\n            leftIcon={<Download className='w-4 h-4' />}\n          >\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* KPI Cards */}\n      <div className='grid grid-cols-1 md:grid-cols-3 gap-4'>\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>Dépenses du mois</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {monthlyStats.total.toFixed(2)} {currency}\n              </h3>\n              <div\n                className={`flex items-center text-xs mt-1 ${monthlyStats.variation > 0 ? 'text-red-500' : 'text-green-500'}`}\n              >\n                {monthlyStats.variation > 0 ? (\n                  <ArrowUpRight className='w-3 h-3 mr-1' />\n                ) : (\n                  <ArrowDownRight className='w-3 h-3 mr-1' />\n                )}\n                {Math.abs(monthlyStats.variation).toFixed(1)}% vs mois dernier\n              </div>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400'>\n              <Euro className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>Coût moyen / Visite</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {averageCostPerVisit.toFixed(2)} {currency}\n              </h3>\n              <p className='text-xs text-gray-400 mt-1'>Sur toutes les visites</p>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400'>\n              <TrendingUp className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n\n        <Card>\n          <CardBody className='p-4 flex items-center justify-between'>\n            <div>\n              <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>Nombre de notes</p>\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white'>\n                {monthlyStats.count}\n              </h3>\n              <p className='text-xs text-gray-400 mt-1'>Ce mois-ci</p>\n            </div>\n            <div className='w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400'>\n              <Calendar className='w-5 h-5' />\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n\n      <div className='grid grid-cols-1 lg:grid-cols-2 gap-6'>\n        {/* Categories Breakdown */}\n        <Card className='h-full'>\n          <CardBody className='p-5'>\n            <h3 className='font-semibold text-gray-900 dark:text-white mb-4'>\n              Répartition par catégorie\n            </h3>\n            <div className='space-y-4'>\n              {Object.entries(monthlyStats.byCategory).length === 0 ? (\n                <p className='text-center text-gray-500 py-4'>Aucune donnée</p>\n              ) : (\n                (Object.entries(monthlyStats.byCategory) as [string, number][])\n                  .sort(([, a], [, b]) => b - a)\n                  .map(([cat, amount]) => {\n                    const percentage = (amount / monthlyStats.total) * 100;\n                    return (\n                      <div key={cat}>\n                        <div className='flex justify-between text-sm mb-1'>\n                          <span className='text-gray-700 dark:text-gray-300'>{cat}</span>\n                          <span className='font-medium text-gray-900 dark:text-white'>\n                            {amount.toFixed(2)} {currency} ({percentage.toFixed(0)}%)\n                          </span>\n                        </div>\n                        <div className='w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2'>\n                          <div\n                            className={`bg-purple-600 h-2 rounded-full transition-all duration-500 w-[${percentage}%]`}\n                          />\n                        </div>\n                      </div>\n                    );\n                  })\n              )}\n            </div>\n          </CardBody>\n        </Card>\n\n        {/* Recent Expenses List */}\n        <Card className='h-full'>\n          <CardBody className='p-0'>\n            <div className='p-5 border-b border-gray-100 dark:border-gray-700'>\n              <h3 className='font-semibold text-gray-900 dark:text-white'>Dernières dépenses</h3>\n            </div>\n            <div className='divide-y divide-gray-100 dark:divide-gray-700 max-h-[300px] overflow-y-auto'>\n              {monthlyStats.expenses.length === 0 ? (\n                <p className='text-center text-gray-500 py-8'>Aucune dépense ce mois-ci</p>\n              ) : (\n                monthlyStats.expenses.map(\n                  (expense: Expense & { visitNom: string; visitDate: string }) => (\n                    <div\n                      key={expense.id}\n                      className='p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors'\n                    >\n                      <div className='flex justify-between items-start'>\n                        <div>\n                          <p className='font-medium text-gray-900 dark:text-white text-sm'>\n                            {expense.description}\n                          </p>\n                          <p className='text-xs text-gray-500 dark:text-gray-400 mt-0.5'>\n                            {format(new Date(expense.date), 'dd MMM', { locale: fr })} •{' '}\n                            {expense.visitNom}\n                          </p>\n                        </div>\n                        <span className='font-semibold text-gray-900 dark:text-white text-sm'>\n                          {expense.amount.toFixed(2)} {currency}\n                        </span>\n                      </div>\n                    </div>\n                  )\n                )\n              )}\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Calendar } from 'lucide-react';\n\ninterface DatePickerProps {\n  value?: string;\n  onChange?: (date: string) => void;\n  placeholder?: string;\n  className?: string;\n  required?: boolean;\n  disabled?: boolean;\n  min?: string;\n  max?: string;\n}\n\nexport const DatePicker: React.FC<DatePickerProps> = ({\n  value,\n  onChange,\n  placeholder = 'Sélectionner une date',\n  className = '',\n  required = false,\n  disabled = false,\n  min,\n  max,\n}) => (\n  <div className={`relative ${className}`}>\n    <div className='relative'>\n      <input\n        type='date'\n        value={value || ''}\n        onChange={(e) => onChange?.(e.target.value)}\n        className='w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors'\n        placeholder={placeholder}\n        required={required}\n        disabled={disabled}\n        min={min}\n        max={max}\n      />\n      <div className='absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none'>\n        <Calendar className='w-4 h-4 text-gray-400' />\n      </div>\n    </div>\n  </div>\n);\n","import React, { useState, useEffect } from 'react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { DatePicker } from '@/components/ui/DatePicker';\nimport { format, parseISO } from 'date-fns';\nimport { LocationType, VisitStatus } from '@/types';\n\ninterface PlanningFilterModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  dateRange: { start: Date | null; end: Date | null };\n  setDateRange: (range: { start: Date | null; end: Date | null }) => void;\n  statusFilter: VisitStatus | 'all';\n  setStatusFilter: (status: VisitStatus | 'all') => void;\n  typeFilter: LocationType | 'all';\n  setTypeFilter: (type: LocationType | 'all') => void;\n}\n\n// Helper to convert Date to string for input\nconst dateToString = (date: Date | null): string => {\n  if (!date) return '';\n  return format(date, 'yyyy-MM-dd');\n};\n\n// Helper to convert string to Date\nconst stringToDate = (dateStr: string): Date | null => {\n  if (!dateStr) return null;\n  return parseISO(dateStr);\n};\n\nexport const PlanningFilterModal: React.FC<PlanningFilterModalProps> = ({\n  isOpen,\n  onClose,\n  dateRange,\n  setDateRange,\n  statusFilter,\n  setStatusFilter,\n  typeFilter,\n  setTypeFilter,\n}) => {\n  const [localDateRange, setLocalDateRange] = useState(dateRange);\n  const [localStatusFilter, setLocalStatusFilter] = useState(statusFilter);\n  const [localTypeFilter, setLocalTypeFilter] = useState(typeFilter);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalDateRange(dateRange);\n      setLocalStatusFilter(statusFilter);\n      setLocalTypeFilter(typeFilter);\n    }\n  }, [isOpen, dateRange, statusFilter, typeFilter]);\n\n  const handleApply = () => {\n    setDateRange(localDateRange);\n    setStatusFilter(localStatusFilter);\n    setTypeFilter(localTypeFilter);\n    onClose();\n  };\n\n  const handleCancel = () => {\n    onClose();\n  };\n\n  const handleClear = () => {\n    setLocalDateRange({ start: null, end: null });\n    setLocalStatusFilter('all');\n    setLocalTypeFilter('all');\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Filtres avancés'>\n      <div className='space-y-6'>\n        {/* Statut */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Statut\n          </label>\n          <div className='flex flex-wrap gap-2'>\n            {[\n              { value: 'all', label: 'Tous' },\n              { value: 'pending', label: 'En attente' },\n              { value: 'confirmed', label: 'Confirmé' },\n              { value: 'completed', label: 'Terminé' },\n              { value: 'cancelled', label: 'Annulé' },\n            ].map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setLocalStatusFilter(option.value as VisitStatus | 'all')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  localStatusFilter === option.value\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Type */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Type de visite\n          </label>\n          <div className='flex flex-wrap gap-2'>\n            {[\n              { value: 'all', label: 'Tous' },\n              { value: 'physical', label: 'Physique' },\n              { value: 'zoom', label: 'Zoom' },\n              { value: 'streaming', label: 'Streaming' },\n            ].map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setLocalTypeFilter(option.value as LocationType | 'all')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  localTypeFilter === option.value\n                    ? 'bg-purple-500 text-white'\n                    : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Plage de dates */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Plage de dates\n          </label>\n          <div className='flex items-center space-x-2'>\n            <DatePicker\n              value={dateToString(localDateRange.start)}\n              onChange={(dateStr) =>\n                setLocalDateRange((prev) => ({ ...prev, start: stringToDate(dateStr) }))\n              }\n              placeholder='Date de début'\n            />\n            <span className='text-gray-500'>-</span>\n            <DatePicker\n              value={dateToString(localDateRange.end)}\n              onChange={(dateStr) =>\n                setLocalDateRange((prev) => ({ ...prev, end: stringToDate(dateStr) }))\n              }\n              placeholder='Date de fin'\n              min={dateToString(localDateRange.start)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className='mt-8 flex justify-end space-x-3'>\n        <Button variant='ghost' onClick={handleClear}>\n          Réinitialiser\n        </Button>\n        <Button variant='ghost' onClick={handleCancel}>\n          Annuler\n        </Button>\n        <Button onClick={handleApply}>Appliquer les filtres</Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport { AlertTriangle, Calendar, CheckCircle, XCircle, ArrowRight } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit, Speaker, Host } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface ConflictDetectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onResolve?: (resolution: ConflictResolution) => void;\n}\n\ninterface Conflict {\n  id: string;\n  type: 'date' | 'speaker' | 'host' | 'talk';\n  severity: 'critical' | 'warning' | 'info';\n  message: string;\n  details: string;\n  affectedVisit?: Visit;\n  suggestions: ConflictSuggestion[];\n}\n\ninterface ConflictSuggestion {\n  id: string;\n  type: 'reschedule' | 'change_speaker' | 'change_host' | 'cancel';\n  description: string;\n  newDate?: string;\n  newSpeaker?: Speaker;\n  newHost?: Host;\n  impact: 'low' | 'medium' | 'high';\n}\n\ninterface ConflictResolution {\n  conflictId: string;\n  suggestionId: string;\n  action: 'apply' | 'ignore';\n}\n\nexport const ConflictDetectionModal: React.FC<ConflictDetectionModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onResolve,\n}) => {\n  const { visits, hosts } = useData();\n  const [selectedResolutions, setSelectedResolutions] = useState<Map<string, string>>(new Map());\n\n  // Détection des conflits\n  const conflicts = useMemo(() => {\n    const detected: Conflict[] = [];\n\n    // 1. Conflit de date - Même orateur, même date\n    const sameDateSpeaker = visits.find(\n      (v) =>\n        v.id === visit.id &&\n        v.visitId !== visit.visitId &&\n        v.visitDate === visit.visitDate &&\n        v.status !== 'cancelled'\n    );\n\n    if (sameDateSpeaker) {\n      detected.push({\n        id: 'conflict-speaker-date',\n        type: 'speaker',\n        severity: 'critical',\n        message: 'Orateur déjà programmé',\n        details: `${visit.nom} est déjà programmé le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')}`,\n        affectedVisit: sameDateSpeaker,\n        suggestions: [\n          {\n            id: 'suggest-reschedule',\n            type: 'reschedule',\n            description: 'Reprogrammer cette visite à une autre date',\n            impact: 'medium',\n          },\n          {\n            id: 'suggest-cancel-other',\n            type: 'cancel',\n            description: \"Annuler l'autre visite\",\n            impact: 'high',\n          },\n        ],\n      });\n    }\n\n    // 2. Conflit d'hôte - Hôte indisponible\n    const hostData = hosts.find((h) => h.nom === visit.host);\n    if (hostData?.unavailableDates?.includes(visit.visitDate)) {\n      const availableHosts = hosts.filter(\n        (h) => !h.unavailableDates?.includes(visit.visitDate) && h.gender === visit.congregation // Exemple de matching\n      );\n\n      detected.push({\n        id: 'conflict-host-unavailable',\n        type: 'host',\n        severity: 'warning',\n        message: 'Hôte indisponible',\n        details: `${visit.host} n'est pas disponible le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')}`,\n        suggestions: availableHosts.slice(0, 3).map((h, idx) => ({\n          id: `suggest-host-${idx}`,\n          type: 'change_host',\n          description: `Assigner à ${h.nom}`,\n          newHost: h,\n          impact: 'low',\n        })),\n      });\n    }\n\n    // 3. Conflit de discours - Même discours récemment donné\n    const recentSameTalk = visits.find(\n      (v) =>\n        v.visitId !== visit.visitId &&\n        v.talkNoOrType === visit.talkNoOrType &&\n        v.status === 'completed' &&\n        Math.abs(new Date(v.visitDate).getTime() - new Date(visit.visitDate).getTime()) <\n          90 * 24 * 60 * 60 * 1000 // 90 jours\n    );\n\n    if (recentSameTalk && visit.talkNoOrType) {\n      detected.push({\n        id: 'conflict-talk-recent',\n        type: 'talk',\n        severity: 'info',\n        message: 'Discours récemment donné',\n        details: `Le discours ${visit.talkNoOrType} a été donné il y a moins de 3 mois`,\n        affectedVisit: recentSameTalk,\n        suggestions: [\n          {\n            id: 'suggest-different-talk',\n            type: 'change_speaker',\n            description: 'Choisir un autre discours',\n            impact: 'low',\n          },\n          {\n            id: 'suggest-ignore',\n            type: 'reschedule',\n            description: 'Continuer quand même',\n            impact: 'low',\n          },\n        ],\n      });\n    }\n\n    // 4. Conflit de charge - Trop de visites le même mois\n    const sameMonthVisits = visits.filter((v) => {\n      const vDate = new Date(v.visitDate);\n      const visitDate = new Date(visit.visitDate);\n      return (\n        vDate.getMonth() === visitDate.getMonth() &&\n        vDate.getFullYear() === visitDate.getFullYear() &&\n        v.status !== 'cancelled'\n      );\n    });\n\n    if (sameMonthVisits.length > 5) {\n      detected.push({\n        id: 'conflict-overload',\n        type: 'date',\n        severity: 'warning',\n        message: 'Charge élevée ce mois',\n        details: `${sameMonthVisits.length} visites programmées ce mois`,\n        suggestions: [\n          {\n            id: 'suggest-next-month',\n            type: 'reschedule',\n            description: 'Déplacer au mois suivant',\n            impact: 'medium',\n          },\n        ],\n      });\n    }\n\n    return detected;\n  }, [visit, visits, hosts]);\n\n  const getSeverityColor = (severity: Conflict['severity']) => {\n    switch (severity) {\n      case 'critical':\n        return 'text-red-600 bg-red-100 dark:bg-red-900/20';\n      case 'warning':\n        return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20';\n      case 'info':\n        return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20';\n    }\n  };\n\n  const getSeverityIcon = (severity: Conflict['severity']) => {\n    switch (severity) {\n      case 'critical':\n        return <XCircle className='w-5 h-5' />;\n      case 'warning':\n        return <AlertTriangle className='w-5 h-5' />;\n      case 'info':\n        return <CheckCircle className='w-5 h-5' />;\n    }\n  };\n\n  const handleSelectSuggestion = (conflictId: string, suggestionId: string) => {\n    setSelectedResolutions((prev) => {\n      const newMap = new Map(prev);\n      newMap.set(conflictId, suggestionId);\n      return newMap;\n    });\n  };\n\n  const handleApplyResolutions = () => {\n    selectedResolutions.forEach((suggestionId, conflictId) => {\n      if (onResolve) {\n        onResolve({\n          conflictId,\n          suggestionId,\n          action: 'apply',\n        });\n      }\n    });\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Détection de Conflits' size='lg'>\n      <div className='space-y-6'>\n        {/* En-tête */}\n        <div className='flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <Calendar className='w-6 h-6 text-primary-600' />\n          <div>\n            <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n            <p className='text-sm text-gray-600 dark:text-gray-400'>\n              {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                weekday: 'long',\n                day: 'numeric',\n                month: 'long',\n                year: 'numeric',\n              })}{' '}\n              à {visit.visitTime}\n            </p>\n          </div>\n        </div>\n\n        {/* Résumé */}\n        <div className='flex items-center justify-between p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg'>\n          <div className='flex items-center gap-2'>\n            <AlertTriangle className='w-5 h-5 text-orange-500' />\n            <span className='font-medium text-gray-900 dark:text-white'>\n              {conflicts.length} conflit{conflicts.length > 1 ? 's' : ''} détecté\n              {conflicts.length > 1 ? 's' : ''}\n            </span>\n          </div>\n          <div className='flex gap-2'>\n            <Badge variant='danger'>\n              {conflicts.filter((c) => c.severity === 'critical').length} critique\n              {conflicts.filter((c) => c.severity === 'critical').length > 1 ? 's' : ''}\n            </Badge>\n            <Badge variant='warning'>\n              {conflicts.filter((c) => c.severity === 'warning').length} avertissement\n              {conflicts.filter((c) => c.severity === 'warning').length > 1 ? 's' : ''}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Liste des conflits */}\n        {conflicts.length === 0 ? (\n          <div className='text-center py-12'>\n            <CheckCircle className='w-16 h-16 mx-auto mb-4 text-green-500' />\n            <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n              Aucun conflit détecté\n            </h3>\n            <p className='text-gray-600 dark:text-gray-400'>\n              Cette visite peut être programmée sans problème\n            </p>\n          </div>\n        ) : (\n          <div className='space-y-4 max-h-96 overflow-y-auto'>\n            {conflicts.map((conflict) => (\n              <Card\n                key={conflict.id}\n                className={`border-l-4 ${\n                  conflict.severity === 'critical'\n                    ? 'border-l-red-600'\n                    : conflict.severity === 'warning'\n                      ? 'border-l-orange-500'\n                      : 'border-l-blue-500'\n                }`}\n              >\n                <CardBody className='space-y-4'>\n                  {/* En-tête du conflit */}\n                  <div className='flex items-start gap-3'>\n                    <div className={`p-2 rounded-lg ${getSeverityColor(conflict.severity)}`}>\n                      {getSeverityIcon(conflict.severity)}\n                    </div>\n                    <div className='flex-1'>\n                      <h4 className='font-semibold text-gray-900 dark:text-white'>\n                        {conflict.message}\n                      </h4>\n                      <p className='text-sm text-gray-600 dark:text-gray-400 mt-1'>\n                        {conflict.details}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Suggestions */}\n                  {conflict.suggestions.length > 0 && (\n                    <div className='space-y-2'>\n                      <p className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n                        Solutions suggérées :\n                      </p>\n                      {conflict.suggestions.map((suggestion) => (\n                        <button\n                          key={suggestion.id}\n                          onClick={() => handleSelectSuggestion(conflict.id, suggestion.id)}\n                          className={`w-full text-left p-3 rounded-lg border-2 transition-all ${\n                            selectedResolutions.get(conflict.id) === suggestion.id\n                              ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                              : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                          }`}\n                        >\n                          <div className='flex items-center justify-between'>\n                            <div className='flex items-center gap-2'>\n                              <ArrowRight className='w-4 h-4 text-primary-600' />\n                              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                                {suggestion.description}\n                              </span>\n                            </div>\n                            <Badge\n                              variant={\n                                suggestion.impact === 'high'\n                                  ? 'danger'\n                                  : suggestion.impact === 'medium'\n                                    ? 'warning'\n                                    : 'default'\n                              }\n                            >\n                              Impact{' '}\n                              {suggestion.impact === 'high'\n                                ? 'élevé'\n                                : suggestion.impact === 'medium'\n                                  ? 'moyen'\n                                  : 'faible'}\n                            </Badge>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </CardBody>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          {conflicts.length > 0 && (\n            <>\n              <Button\n                variant='outline'\n                onClick={() => {\n                  conflicts.forEach((c) => {\n                    if (onResolve) {\n                      onResolve({\n                        conflictId: c.id,\n                        suggestionId: '',\n                        action: 'ignore',\n                      });\n                    }\n                  });\n                  onClose();\n                }}\n              >\n                Ignorer les conflits\n              </Button>\n              <Button\n                variant='primary'\n                onClick={handleApplyResolutions}\n                disabled={selectedResolutions.size === 0}\n              >\n                Appliquer les solutions ({selectedResolutions.size})\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport { XCircle, Calendar, MessageSquare, RotateCcw, Send, AlertTriangle } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Visit } from '@/types';\n\ninterface CancellationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onCancel: (cancellationData: CancellationData) => void;\n}\n\nexport interface CancellationData {\n  visitId: string;\n  reason: CancellationReason;\n  customReason?: string;\n  notifySpeaker: boolean;\n  notifyHost: boolean;\n  proposeReschedule: boolean;\n  suggestedNewDate?: string;\n  internalNotes?: string;\n  cancelledBy: string;\n  cancelledAt: string;\n}\n\ntype CancellationReason =\n  | 'speaker_unavailable'\n  | 'host_unavailable'\n  | 'congregation_conflict'\n  | 'weather'\n  | 'health'\n  | 'emergency'\n  | 'duplicate'\n  | 'other';\n\nconst CANCELLATION_REASONS: { value: CancellationReason; label: string; icon: string }[] = [\n  { value: 'speaker_unavailable', label: 'Orateur indisponible', icon: '👤' },\n  { value: 'host_unavailable', label: 'Hôte indisponible', icon: '🏠' },\n  { value: 'congregation_conflict', label: 'Conflit de congrégation', icon: '⚠️' },\n  { value: 'weather', label: 'Conditions météo', icon: '🌧️' },\n  { value: 'health', label: 'Raisons de santé', icon: '🏥' },\n  { value: 'emergency', label: 'Urgence', icon: '🚨' },\n  { value: 'duplicate', label: 'Doublon détecté', icon: '📋' },\n  { value: 'other', label: 'Autre raison', icon: '📝' },\n];\n\nexport const CancellationModal: React.FC<CancellationModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onCancel,\n}) => {\n  const [selectedReason, setSelectedReason] = useState<CancellationReason | null>(null);\n  const [customReason, setCustomReason] = useState('');\n  const [notifySpeaker, setNotifySpeaker] = useState(true);\n  const [notifyHost, setNotifyHost] = useState(true);\n  const [proposeReschedule, setProposeReschedule] = useState(false);\n  const [suggestedNewDate, setSuggestedNewDate] = useState('');\n  const [internalNotes, setInternalNotes] = useState('');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const handleSubmit = () => {\n    if (!selectedReason) return;\n\n    const cancellationData: CancellationData = {\n      visitId: visit.visitId,\n      reason: selectedReason,\n      customReason: selectedReason === 'other' ? customReason : undefined,\n      notifySpeaker,\n      notifyHost,\n      proposeReschedule,\n      suggestedNewDate: proposeReschedule ? suggestedNewDate : undefined,\n      internalNotes,\n      cancelledBy: 'Coordinateur', // À remplacer par l'utilisateur connecté\n      cancelledAt: new Date().toISOString(),\n    };\n\n    onCancel(cancellationData);\n    onClose();\n  };\n\n  const getNotificationPreview = () => {\n    const reason = CANCELLATION_REASONS.find((r) => r.value === selectedReason);\n    return `Bonjour ${visit.nom},\\n\\nNous sommes au regret de vous informer que la visite prévue le ${new Date(visit.visitDate).toLocaleDateString('fr-FR')} doit être annulée.\\n\\nRaison : ${reason?.label}${selectedReason === 'other' && customReason ? ` - ${customReason}` : ''}\\n\\n${proposeReschedule && suggestedNewDate ? `Nous vous proposons de reprogrammer cette visite le ${new Date(suggestedNewDate).toLocaleDateString('fr-FR')}.\\n\\n` : ''}Nous vous contacterons prochainement pour convenir d'une nouvelle date.\\n\\nCordialement,\\nKBV Lyon`;\n  };\n\n  if (showConfirmation) {\n    return (\n      <Modal isOpen={isOpen} onClose={onClose} title=\"Confirmer l'annulation\" size='md'>\n        <div className='space-y-6'>\n          <div className='flex items-start gap-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg'>\n            <AlertTriangle className='w-6 h-6 text-red-600 flex-shrink-0 mt-1' />\n            <div>\n              <h4 className='font-semibold text-red-900 dark:text-red-200 mb-2'>\n                Attention : Action irréversible\n              </h4>\n              <p className='text-sm text-red-800 dark:text-red-300'>\n                Vous êtes sur le point d'annuler définitivement cette visite. Cette action ne peut\n                pas être annulée.\n              </p>\n            </div>\n          </div>\n\n          <div className='space-y-3'>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Orateur</span>\n              <span className='font-medium text-gray-900 dark:text-white'>{visit.nom}</span>\n            </div>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Date</span>\n              <span className='font-medium text-gray-900 dark:text-white'>\n                {new Date(visit.visitDate).toLocaleDateString('fr-FR')}\n              </span>\n            </div>\n            <div className='flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <span className='text-sm text-gray-600 dark:text-gray-400'>Raison</span>\n              <span className='font-medium text-gray-900 dark:text-white'>\n                {CANCELLATION_REASONS.find((r) => r.value === selectedReason)?.label}\n              </span>\n            </div>\n          </div>\n\n          {(notifySpeaker || notifyHost) && (\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-center gap-2 mb-2'>\n                <Send className='w-4 h-4 text-blue-600' />\n                <span className='font-medium text-blue-900 dark:text-blue-200'>\n                  Notifications à envoyer\n                </span>\n              </div>\n              <ul className='text-sm text-blue-800 dark:text-blue-300 space-y-1'>\n                {notifySpeaker && <li>• Notification à l'orateur ({visit.nom})</li>}\n                {notifyHost && <li>• Notification à l'hôte ({visit.host})</li>}\n              </ul>\n            </div>\n          )}\n\n          <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n            <Button variant='secondary' onClick={() => setShowConfirmation(false)}>\n              Retour\n            </Button>\n            <Button variant='danger' onClick={handleSubmit}>\n              <XCircle className='w-4 h-4 mr-2' />\n              Confirmer l'annulation\n            </Button>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Annuler une visite' size='lg'>\n      <div className='space-y-6'>\n        {/* Informations de la visite */}\n        <div className='p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <div className='flex items-center gap-3 mb-3'>\n            <Calendar className='w-5 h-5 text-primary-600' />\n            <div>\n              <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n              <p className='text-sm text-gray-600 dark:text-gray-400'>\n                {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                  weekday: 'long',\n                  day: 'numeric',\n                  month: 'long',\n                  year: 'numeric',\n                })}{' '}\n                à {visit.visitTime}\n              </p>\n            </div>\n          </div>\n          <div className='grid grid-cols-2 gap-2 text-sm'>\n            <div>\n              <span className='text-gray-500 dark:text-gray-400'>Discours :</span>\n              <span className='ml-2 text-gray-900 dark:text-white'>{visit.talkNoOrType}</span>\n            </div>\n            <div>\n              <span className='text-gray-500 dark:text-gray-400'>Hôte :</span>\n              <span className='ml-2 text-gray-900 dark:text-white'>{visit.host}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Raison de l'annulation */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n            Raison de l'annulation *\n          </label>\n          <div className='grid grid-cols-2 gap-3'>\n            {CANCELLATION_REASONS.map((reason) => (\n              <button\n                key={reason.value}\n                onClick={() => setSelectedReason(reason.value)}\n                className={`p-3 rounded-lg border-2 text-left transition-all ${\n                  selectedReason === reason.value\n                    ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                }`}\n              >\n                <div className='flex items-center gap-2'>\n                  <span className='text-2xl'>{reason.icon}</span>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    {reason.label}\n                  </span>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Raison personnalisée */}\n        {selectedReason === 'other' && (\n          <div>\n            <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n              Précisez la raison\n            </label>\n            <textarea\n              value={customReason}\n              onChange={(e) => setCustomReason(e.target.value)}\n              className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              rows={3}\n              placeholder=\"Décrivez la raison de l'annulation...\"\n            />\n          </div>\n        )}\n\n        {/* Options de notification */}\n        <div className='space-y-3'>\n          <h4 className='text-sm font-medium text-gray-700 dark:text-gray-300'>Notifications</h4>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={notifySpeaker}\n              onChange={(e) => setNotifySpeaker(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                Notifier l'orateur\n              </span>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>\n                Envoyer un message d'annulation à {visit.nom}\n              </p>\n            </div>\n          </label>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={notifyHost}\n              onChange={(e) => setNotifyHost(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                Notifier l'hôte\n              </span>\n              <p className='text-xs text-gray-500 dark:text-gray-400'>\n                Envoyer un message d'annulation à {visit.host}\n              </p>\n            </div>\n          </label>\n        </div>\n\n        {/* Proposition de reprogrammation */}\n        <div className='space-y-3'>\n          <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n            <input\n              type='checkbox'\n              checked={proposeReschedule}\n              onChange={(e) => setProposeReschedule(e.target.checked)}\n              className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n            />\n            <div className='flex-1'>\n              <div className='flex items-center gap-2'>\n                <RotateCcw className='w-4 h-4 text-primary-600' />\n                <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                  Proposer une reprogrammation\n                </span>\n              </div>\n              <p className='text-xs text-gray-500 dark:text-gray-400 mt-1'>\n                Suggérer une nouvelle date dans le message d'annulation\n              </p>\n            </div>\n          </label>\n\n          {proposeReschedule && (\n            <div>\n              <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                Nouvelle date proposée\n              </label>\n              <input\n                type='date'\n                value={suggestedNewDate}\n                onChange={(e) => setSuggestedNewDate(e.target.value)}\n                min={new Date().toISOString().split('T')[0]}\n                aria-label='Nouvelle date proposée'\n                className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Notes internes */}\n        <div>\n          <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n            Notes internes (optionnel)\n          </label>\n          <textarea\n            value={internalNotes}\n            onChange={(e) => setInternalNotes(e.target.value)}\n            className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            rows={2}\n            placeholder=\"Notes pour l'équipe (non envoyées aux participants)...\"\n          />\n        </div>\n\n        {/* Prévisualisation du message */}\n        {(notifySpeaker || notifyHost) && selectedReason && (\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n            <div className='flex items-center gap-2 mb-2'>\n              <MessageSquare className='w-4 h-4 text-blue-600' />\n              <span className='text-sm font-medium text-blue-900 dark:text-blue-200'>\n                Aperçu du message\n              </span>\n            </div>\n            <pre className='text-xs text-blue-800 dark:text-blue-300 whitespace-pre-wrap font-sans'>\n              {getNotificationPreview()}\n            </pre>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button\n            variant='danger'\n            onClick={() => setShowConfirmation(true)}\n            disabled={!selectedReason || (selectedReason === 'other' && !customReason)}\n          >\n            <XCircle className='w-4 h-4 mr-2' />\n            Annuler la visite\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { AlertCircle, User, Phone, MapPin, Calendar, Send, Search, Filter } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit, Speaker } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface EmergencyReplacementModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  visit: Visit;\n  onSelectReplacement: (speaker: Speaker, sendNotification: boolean) => void;\n}\n\ninterface SpeakerMatch {\n  speaker: Speaker;\n  score: number;\n  reasons: string[];\n  availableTalks: string[];\n  distance?: number;\n  lastVisit?: string;\n}\n\nexport const EmergencyReplacementModal: React.FC<EmergencyReplacementModalProps> = ({\n  isOpen,\n  onClose,\n  visit,\n  onSelectReplacement,\n}) => {\n  const { speakers, visits } = useData();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterByDistance, setFilterByDistance] = useState(false);\n  const [filterByAvailability, setFilterByAvailability] = useState(true);\n  const [selectedSpeaker, setSelectedSpeaker] = useState<Speaker | null>(null);\n  const [sendNotification, setSendNotification] = useState(true);\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Algorithme de matching intelligent\n  const matchedSpeakers = useMemo(() => {\n    const matches: SpeakerMatch[] = [];\n\n    speakers.forEach((speaker) => {\n      // Ne pas suggérer l'orateur original\n      if (speaker.id === visit.id) return;\n\n      let score = 0;\n      const reasons: string[] = [];\n      const availableTalks: string[] = [];\n\n      // 1. Vérifier les discours disponibles\n      const speakerTalks = speaker.talkHistory.map((t) => t.talkNo.toString());\n      if (visit.talkNoOrType && speakerTalks.includes(visit.talkNoOrType)) {\n        score += 50;\n        reasons.push('Possède le même discours');\n        availableTalks.push(visit.talkNoOrType);\n      } else {\n        // Ajouter tous les discours disponibles\n        speakerTalks.forEach((talk) => availableTalks.push(talk));\n      }\n\n      // 2. Vérifier la disponibilité (pas de visite le même jour)\n      const hasConflict = visits.some(\n        (v) => v.id === speaker.id && v.visitDate === visit.visitDate && v.status !== 'cancelled'\n      );\n\n      if (!hasConflict) {\n        score += 30;\n        reasons.push('Disponible à cette date');\n      } else {\n        if (filterByAvailability) return; // Exclure si filtre activé\n        reasons.push('⚠️ Déjà programmé ce jour');\n      }\n\n      // 3. Vérifier la proximité géographique\n      if (speaker.congregation === visit.congregation) {\n        score += 20;\n        reasons.push('Même congrégation');\n      }\n\n      // 4. Vérifier l'historique récent\n      const recentVisits = visits.filter(\n        (v) =>\n          v.id === speaker.id &&\n          v.status === 'completed' &&\n          new Date(v.visitDate) > new Date(Date.now() - 90 * 24 * 60 * 60 * 1000)\n      );\n\n      if (recentVisits.length === 0) {\n        score += 15;\n        reasons.push('Pas de visite récente');\n      }\n\n      // 5. Vérifier si véhiculé\n      if (speaker.isVehiculed) {\n        score += 10;\n        reasons.push('Véhiculé');\n      }\n\n      // 6. Vérifier les contacts disponibles\n      if (speaker.telephone) {\n        score += 5;\n        reasons.push('Téléphone disponible');\n      }\n\n      // Calculer la dernière visite\n      const lastVisit = visits\n        .filter((v) => v.id === speaker.id && v.status === 'completed')\n        .sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime())[0];\n\n      matches.push({\n        speaker,\n        score,\n        reasons,\n        availableTalks,\n        lastVisit: lastVisit?.visitDate,\n      });\n    });\n\n    // Trier par score décroissant\n    return matches\n      .sort((a, b) => b.score - a.score)\n      .filter((m) => {\n        if (searchTerm) {\n          return (\n            m.speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            m.speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase())\n          );\n        }\n        return true;\n      });\n  }, [speakers, visits, visit, searchTerm, filterByAvailability]);\n\n  const handleSelectSpeaker = () => {\n    if (selectedSpeaker) {\n      onSelectReplacement(selectedSpeaker, sendNotification);\n      onClose();\n    }\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score >= 80) return 'text-green-600 bg-green-100 dark:bg-green-900/20';\n    if (score >= 50) return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20';\n    if (score >= 30) return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20';\n    return 'text-gray-600 bg-gray-100 dark:bg-gray-900/20';\n  };\n\n  const getScoreLabel = (score: number) => {\n    if (score >= 80) return 'Excellent match';\n    if (score >= 50) return 'Bon match';\n    if (score >= 30) return 'Match acceptable';\n    return 'Match faible';\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Trouver un remplaçant d'urgence\" size='xl'>\n      <div className='space-y-6'>\n        {/* Alerte urgence */}\n        <div className='flex items-start gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg'>\n          <AlertCircle className='w-5 h-5 text-red-600 flex-shrink-0 mt-0.5' />\n          <div>\n            <h4 className='font-semibold text-red-900 dark:text-red-200'>\n              Remplacement d'urgence requis\n            </h4>\n            <p className='text-sm text-red-800 dark:text-red-300 mt-1'>\n              Visite de <strong>{visit.nom}</strong> le{' '}\n              <strong>{new Date(visit.visitDate).toLocaleDateString('fr-FR')}</strong> à{' '}\n              <strong>{visit.visitTime}</strong>\n            </p>\n            {visit.talkNoOrType && (\n              <p className='text-sm text-red-800 dark:text-red-300'>\n                Discours : <strong>{visit.talkNoOrType}</strong> - {visit.talkTheme}\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Barre de recherche et filtres */}\n        <div className='space-y-3'>\n          <div className='flex gap-3'>\n            <div className='flex-1 relative'>\n              <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400' />\n              <input\n                type='text'\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder='Rechercher un orateur...'\n                className='w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n              />\n            </div>\n            <Button variant='outline' onClick={() => setShowFilters(!showFilters)}>\n              <Filter className='w-4 h-4 mr-2' />\n              Filtres\n            </Button>\n          </div>\n\n          {showFilters && (\n            <div className='flex gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={filterByAvailability}\n                  onChange={(e) => setFilterByAvailability(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Uniquement disponibles\n                </span>\n              </label>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={filterByDistance}\n                  onChange={(e) => setFilterByDistance(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Proximité géographique\n                </span>\n              </label>\n            </div>\n          )}\n        </div>\n\n        {/* Statistiques */}\n        <div className='grid grid-cols-3 gap-4'>\n          <div className='p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>{matchedSpeakers.length}</div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Orateurs trouvés</div>\n          </div>\n          <div className='p-3 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {matchedSpeakers.filter((m) => m.score >= 50).length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Bons matchs</div>\n          </div>\n          <div className='p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>\n              {\n                matchedSpeakers.filter((m) => m.availableTalks.includes(visit.talkNoOrType || ''))\n                  .length\n              }\n            </div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>Même discours</div>\n          </div>\n        </div>\n\n        {/* Liste des orateurs */}\n        <div className='space-y-3 max-h-96 overflow-y-auto'>\n          {matchedSpeakers.length === 0 ? (\n            <div className='text-center py-12'>\n              <AlertCircle className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucun orateur trouvé\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>\n                Essayez de modifier vos critères de recherche\n              </p>\n            </div>\n          ) : (\n            matchedSpeakers.map((match) => (\n              <Card\n                key={match.speaker.id}\n                hoverable\n                className={`cursor-pointer transition-all ${\n                  selectedSpeaker?.id === match.speaker.id\n                    ? 'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : ''\n                }`}\n                onClick={() => setSelectedSpeaker(match.speaker)}\n              >\n                <CardBody>\n                  <div className='flex items-start justify-between gap-4'>\n                    {/* Informations orateur */}\n                    <div className='flex-1'>\n                      <div className='flex items-center gap-3 mb-2'>\n                        <div className='w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-lg'>\n                          {match.speaker.nom.charAt(0).toUpperCase()}\n                        </div>\n                        <div>\n                          <h4 className='font-semibold text-gray-900 dark:text-white'>\n                            {match.speaker.nom}\n                          </h4>\n                          <div className='flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400'>\n                            <MapPin className='w-3 h-3' />\n                            {match.speaker.congregation}\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Raisons du match */}\n                      <div className='flex flex-wrap gap-2 mb-3'>\n                        {match.reasons.map((reason, idx) => (\n                          <Badge key={idx} variant='default' className='text-xs'>\n                            {reason}\n                          </Badge>\n                        ))}\n                      </div>\n\n                      {/* Discours disponibles */}\n                      {match.availableTalks.length > 0 && (\n                        <div className='text-sm'>\n                          <span className='text-gray-600 dark:text-gray-400'>Discours : </span>\n                          <span className='text-gray-900 dark:text-white'>\n                            {match.availableTalks.slice(0, 5).join(', ')}\n                            {match.availableTalks.length > 5 &&\n                              ` +${match.availableTalks.length - 5}`}\n                          </span>\n                        </div>\n                      )}\n\n                      {/* Contact */}\n                      {match.speaker.telephone && (\n                        <div className='flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400'>\n                          <Phone className='w-3 h-3' />\n                          {match.speaker.telephone}\n                        </div>\n                      )}\n\n                      {/* Dernière visite */}\n                      {match.lastVisit && (\n                        <div className='flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-500'>\n                          <Calendar className='w-3 h-3' />\n                          Dernière visite : {new Date(match.lastVisit).toLocaleDateString('fr-FR')}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Score */}\n                    <div className='text-right'>\n                      <div\n                        className={`inline-flex items-center gap-2 px-3 py-1 rounded-full ${getScoreColor(match.score)}`}\n                      >\n                        <span className='text-lg font-bold'>{match.score}</span>\n                      </div>\n                      <div className='text-xs text-gray-600 dark:text-gray-400 mt-1'>\n                        {getScoreLabel(match.score)}\n                      </div>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Option de notification */}\n        {selectedSpeaker && (\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n            <label className='flex items-start gap-3 cursor-pointer'>\n              <input\n                type='checkbox'\n                checked={sendNotification}\n                onChange={(e) => setSendNotification(e.target.checked)}\n                className='mt-1 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n              />\n              <div>\n                <div className='flex items-center gap-2'>\n                  <Send className='w-4 h-4 text-blue-600' />\n                  <span className='font-medium text-blue-900 dark:text-blue-200'>\n                    Envoyer une notification immédiate\n                  </span>\n                </div>\n                <p className='text-sm text-blue-800 dark:text-blue-300 mt-1'>\n                  Un message sera envoyé à {selectedSpeaker.nom} pour l'informer du remplacement\n                  d'urgence\n                </p>\n              </div>\n            </label>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Annuler\n          </Button>\n          <Button variant='primary' onClick={handleSelectSpeaker} disabled={!selectedSpeaker}>\n            <User className='w-4 h-4 mr-2' />\n            Sélectionner ce remplaçant\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo, memo, useCallback, useRef } from 'react';\nimport { useData } from '@/contexts/DataContext';\nimport { PlanningCardsView } from '@/components/planning/PlanningCardsView';\nimport { PlanningListView } from '@/components/planning/PlanningListView';\nimport { PlanningCalendarView } from '@/components/planning/PlanningCalendarView';\nimport { ScheduleVisitModal } from '@/components/planning/ScheduleVisitModal';\nimport { VisitActionModal } from '@/components/planning/VisitActionModal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport {\n  LayoutGrid,\n  List,\n  Calendar as CalendarIcon,\n  Plus,\n  Search,\n  Download,\n  Filter,\n  X,\n  Eye,\n  BarChart,\n  PieChart,\n  Clock,\n  Archive,\n  MessageSquare,\n  Star,\n  CalendarDays,\n  Sparkles,\n  ChevronDown,\n} from 'lucide-react';\nimport { LocationType, VisitStatus, Visit } from '@/types';\nimport { PlanningWorkloadView } from '@/components/planning/PlanningWorkloadView';\nimport { PlanningTimelineView } from '@/components/planning/PlanningTimelineView';\nimport { FinancialDashboard } from '@/components/expenses/FinancialDashboard';\nimport { useReactToPrint } from 'react-to-print';\nimport { PlanningFilterModal } from '@/components/planning/PlanningFilterModal';\nimport {\n  ConflictDetectionModal,\n  CancellationModal,\n  EmergencyReplacementModal,\n} from '@/components/modals';\nimport { cn } from '@/utils/cn';\n\ntype ViewType = 'cards' | 'list' | 'calendar' | 'timeline' | 'workload' | 'finance' | 'archives';\n\n// Premium Stat Card\nconst StatCard = memo(\n  ({\n    icon: Icon,\n    value,\n    label,\n    colorClasses,\n  }: {\n    icon: any;\n    value: number;\n    label: string;\n    colorClasses: { bg: string; text: string; iconBg: string };\n  }) => (\n    <div\n      className={cn(\n        'relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:scale-[1.02] shadow-sm',\n        colorClasses.bg,\n        'border-white/20 dark:border-gray-700/50'\n      )}\n    >\n      <div className='relative z-10 flex items-center justify-between'>\n        <div>\n          <p\n            className={cn(\n              'text-xs font-bold uppercase tracking-widest mb-1',\n              colorClasses.text,\n              'opacity-70'\n            )}\n          >\n            {label}\n          </p>\n          <h3 className={cn('text-3xl font-black tracking-tighter', colorClasses.text)}>{value}</h3>\n        </div>\n        <div className={cn('p-3 rounded-xl', colorClasses.iconBg)}>\n          <Icon className={cn('w-6 h-6', colorClasses.text)} />\n        </div>\n      </div>\n      <div\n        className={cn(\n          'absolute -bottom-4 -right-4 w-24 h-24 rounded-full opacity-10',\n          colorClasses.text,\n          'bg-current blur-2xl'\n        )}\n      />\n    </div>\n  )\n);\n\nexport const Planning: React.FC = () => {\n  const { visits, archivedVisits } = useData();\n  const [view, setView] = useState<ViewType>('cards');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState<VisitStatus | 'all'>('all');\n  const [typeFilter, setTypeFilter] = useState<LocationType | 'all'>('all');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isActionModalOpen, setIsActionModalOpen] = useState(false);\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [dateRange, setDateRange] = useState<{ start: Date | null; end: Date | null }>({\n    start: null,\n    end: null,\n  });\n  const [selectedVisit, setSelectedVisit] = useState<Visit | null>(null);\n  const [selectedAction, setSelectedAction] = useState<\n    'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n  >('edit');\n  const [isConflictModalOpen, setIsConflictModalOpen] = useState(false);\n  const [isCancellationModalOpen, setIsCancellationModalOpen] = useState(false);\n  const [isReplacementModalOpen, setIsReplacementModalOpen] = useState(false);\n  const [isViewMenuOpen, setIsViewMenuOpen] = useState(false);\n\n  const componentRef = useRef<HTMLDivElement>(null);\n  const handlePrint = useReactToPrint({\n    contentRef: componentRef,\n    documentTitle: `Planning-visites-${new Date().toLocaleDateString()}`,\n  });\n\n  const handleExport = () => {\n    if (view === 'archives') {\n      const headers = ['Date', 'Heure', 'Orateur', 'Congrégation', 'Discours', 'Thème', 'Hôte'];\n      const csvContent = [\n        headers.join(','),\n        ...archivedVisits.map((visit) =>\n          [\n            visit.visitDate,\n            visit.visitTime,\n            `\"${visit.nom}\"`,\n            `\"${visit.congregation}\"`,\n            visit.talkNoOrType || '',\n            `\"${visit.talkTheme || ''}\"`,\n            `\"${visit.host || ''}\"`,\n          ].join(',')\n        ),\n      ].join('\\n');\n\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = `visites_archivees_${new Date().toISOString().slice(0, 10)}.csv`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } else if (view === 'finance') {\n      // Handled internally by component\n    } else {\n      handlePrint();\n    }\n  };\n\n  const handleVisitAction = useCallback(\n    (\n      visit: Visit,\n      action: 'edit' | 'delete' | 'status' | 'message' | 'feedback' | 'expenses' | 'logistics'\n    ) => {\n      setSelectedVisit(visit);\n      setSelectedAction(action);\n      setIsActionModalOpen(true);\n    },\n    []\n  );\n\n  const handleCloseActionModal = useCallback(() => {\n    setIsActionModalOpen(false);\n    setSelectedVisit(null);\n  }, []);\n\n  const filteredVisits = useMemo(\n    () =>\n      visits\n        .filter((visit: Visit) => {\n          const matchesSearch =\n            visit.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.congregation.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.talkNoOrType?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            visit.notes?.toLowerCase().includes(searchTerm.toLowerCase());\n\n          const matchesStatus = statusFilter === 'all' || visit.status === statusFilter;\n          const matchesType = typeFilter === 'all' || visit.locationType === typeFilter;\n\n          const visitDate = new Date(visit.visitDate);\n          const matchesDateRange =\n            (!dateRange.start || visitDate >= dateRange.start) &&\n            (!dateRange.end || visitDate <= dateRange.end);\n\n          return matchesSearch && matchesStatus && matchesType && matchesDateRange;\n        })\n        .sort(\n          (a: Visit, b: Visit) => new Date(a.visitDate).getTime() - new Date(b.visitDate).getTime()\n        ),\n    [visits, searchTerm, statusFilter, typeFilter, dateRange]\n  );\n\n  const stats = useMemo(() => {\n    const total = filteredVisits.length;\n    const confirmed = filteredVisits.filter((v: Visit) => v.status === 'confirmed').length;\n    const pending = filteredVisits.filter((v: Visit) => v.status === 'pending').length;\n    const upcoming = filteredVisits.filter((v: Visit) => {\n      const visitDate = new Date(v.visitDate);\n      const today = new Date();\n      return visitDate >= today && v.status === 'confirmed';\n    }).length;\n\n    return { total, confirmed, pending, upcoming };\n  }, [filteredVisits]);\n\n  const SpecializedViewOption = ({ id, label, icon: Icon, desc }: any) => (\n    <button\n      onClick={() => {\n        setView(id as ViewType);\n        setIsViewMenuOpen(false);\n      }}\n      className={cn(\n        'w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors group',\n        view === id\n          ? 'bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400'\n          : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50'\n      )}\n    >\n      <div\n        className={cn(\n          'p-2 rounded-lg group-hover:bg-white dark:group-hover:bg-gray-800 transition-colors',\n          view === id ? 'bg-white dark:bg-gray-800' : 'bg-gray-100 dark:bg-gray-800'\n        )}\n      >\n        <Icon className='w-4 h-4' />\n      </div>\n      <div className='text-left'>\n        <div className='font-bold text-xs uppercase tracking-tight'>{label}</div>\n        <div className='text-[10px] text-gray-500 dark:text-gray-400 mt-0.5'>{desc}</div>\n      </div>\n    </button>\n  );\n\n  return (\n    <div className='space-y-6 max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6'>\n      {/* 1. Header & Primary Actions */}\n      <div className='flex flex-col md:flex-row md:items-center justify-between gap-6'>\n        <div>\n          <div className='flex items-center gap-2 mb-2'>\n            <Badge className='bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 border-none px-3 py-1 font-bold text-[10px] tracking-widest uppercase'>\n              Planning\n            </Badge>\n            <span className='text-gray-400 text-xs font-medium'>{new Date().getFullYear()}</span>\n          </div>\n          <h1 className='text-3xl font-black text-gray-900 dark:text-white tracking-tighter'>\n            Gestion des Visites\n          </h1>\n        </div>\n        <div className='flex items-center gap-3'>\n          <Button\n            variant='secondary'\n            className='font-bold border-gray-200 dark:border-gray-700 shadow-sm'\n            leftIcon={<Download className='w-4 h-4' />}\n            onClick={handleExport}\n          >\n            Exporter\n          </Button>\n          <Button\n            className='bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200 dark:shadow-none font-bold px-6'\n            leftIcon={<Plus className='w-5 h-5' />}\n            onClick={() => setIsModalOpen(true)}\n          >\n            Programmer\n          </Button>\n        </div>\n      </div>\n\n      {/* 2. Stats Grid */}\n      <div className='grid grid-cols-2 lg:grid-cols-4 gap-4'>\n        <StatCard\n          icon={CalendarDays}\n          value={stats.total}\n          label='Total Visites'\n          colorClasses={{\n            bg: 'bg-blue-50 dark:bg-blue-900/10',\n            text: 'text-blue-600 dark:text-blue-400',\n            iconBg: 'bg-white dark:bg-blue-900/30',\n          }}\n        />\n        <StatCard\n          icon={Sparkles}\n          value={stats.confirmed}\n          label='Confirmées'\n          colorClasses={{\n            bg: 'bg-green-50 dark:bg-green-900/10',\n            text: 'text-green-600 dark:text-green-400',\n            iconBg: 'bg-white dark:bg-green-900/30',\n          }}\n        />\n        <StatCard\n          icon={Clock}\n          value={stats.pending}\n          label='En Attente'\n          colorClasses={{\n            bg: 'bg-orange-50 dark:bg-orange-900/10',\n            text: 'text-orange-600 dark:text-orange-400',\n            iconBg: 'bg-white dark:bg-orange-900/30',\n          }}\n        />\n        <StatCard\n          icon={CalendarIcon}\n          value={stats.upcoming}\n          label='À Venir'\n          colorClasses={{\n            bg: 'bg-purple-50 dark:bg-purple-900/10',\n            text: 'text-purple-600 dark:text-purple-400',\n            iconBg: 'bg-white dark:bg-purple-900/30',\n          }}\n        />\n      </div>\n\n      {/* 3. Modern Control Bar */}\n      <div className='sticky top-20 z-30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl p-2 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm flex flex-col md:flex-row gap-2'>\n        {/* Search */}\n        <div className='relative flex-1 group'>\n          <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-indigo-500 transition-colors' />\n          <input\n            type='text'\n            placeholder='Rechercher orateur, congrégation...'\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className='w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-indigo-500/20 transition-all placeholder:text-gray-400'\n          />\n        </div>\n\n        <div className='flex items-center gap-2 overflow-x-auto pb-1 md:pb-0 scrollbar-none'>\n          {/* Filter Toggle */}\n          <button\n            onClick={() => setIsFilterModalOpen(true)}\n            className={cn(\n              'flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold transition-all border shrink-0',\n              statusFilter !== 'all' || typeFilter !== 'all'\n                ? 'bg-indigo-50 text-indigo-600 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800'\n                : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:border-gray-300'\n            )}\n          >\n            <Filter className='w-4 h-4' />\n            <span>Filtres</span>\n            {(statusFilter !== 'all' || typeFilter !== 'all') && (\n              <span className='w-2 h-2 rounded-full bg-indigo-500 ml-1' />\n            )}\n          </button>\n\n          {/* View Switcher */}\n          <div className='bg-gray-100 dark:bg-gray-800 p-1 rounded-xl flex items-center shrink-0'>\n            {[\n              { id: 'cards', icon: LayoutGrid },\n              { id: 'list', icon: List },\n              { id: 'calendar', icon: CalendarIcon },\n            ].map((v) => (\n              <button\n                key={v.id}\n                onClick={() => setView(v.id as ViewType)}\n                className={cn(\n                  'p-2 rounded-lg transition-all',\n                  view === v.id\n                    ? 'bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm'\n                    : 'text-gray-400 hover:text-gray-600 dark:hover:text-gray-300'\n                )}\n              >\n                <v.icon className='w-4 h-4' />\n              </button>\n            ))}\n          </div>\n\n          {/* Specialized Views Dropdown */}\n          <div className='relative'>\n            <button\n              onClick={() => setIsViewMenuOpen(!isViewMenuOpen)}\n              className={cn(\n                'flex items-center gap-2 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wide transition-all border shrink-0',\n                ['timeline', 'workload', 'finance', 'archives'].includes(view)\n                  ? 'bg-gray-900 text-white dark:bg-white dark:text-gray-900 border-transparent shadow-lg'\n                  : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:border-gray-300'\n              )}\n            >\n              <span>Vues Avancées</span>\n              <ChevronDown className='w-3 h-3' />\n            </button>\n\n            {isViewMenuOpen && (\n              <>\n                <div className='fixed inset-0 z-40' onClick={() => setIsViewMenuOpen(false)} />\n                <div className='absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-800 z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200'>\n                  <div className='p-2 space-y-1'>\n                    <div className='px-3 py-2 text-[10px] uppercase font-black tracking-widest text-gray-400'>\n                      Analyses\n                    </div>\n                    <SpecializedViewOption\n                      id='timeline'\n                      label='Chronologie'\n                      icon={Eye}\n                      desc='Vue temporelle verticale'\n                    />\n                    <SpecializedViewOption\n                      id='workload'\n                      label='Disponibilité'\n                      icon={BarChart}\n                      desc='Charge des orateurs'\n                    />\n                    <SpecializedViewOption\n                      id='finance'\n                      label='Finances'\n                      icon={PieChart}\n                      desc='Suivi des dépenses'\n                    />\n                    <div className='my-1 border-t border-gray-100 dark:border-gray-800' />\n                    <SpecializedViewOption\n                      id='archives'\n                      label='Archives'\n                      icon={Archive}\n                      desc='Historique complet'\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* 4. Active Filters Display */}\n      {(statusFilter !== 'all' || typeFilter !== 'all') && (\n        <div className='flex flex-wrap gap-2 animate-in fade-in slide-in-from-top-2'>\n          {statusFilter !== 'all' && (\n            <Badge variant='primary' className='pl-2 pr-1 py-1 flex items-center gap-1'>\n              Statut: {statusFilter}\n              <button\n                onClick={() => setStatusFilter('all')}\n                className='p-0.5 hover:bg-white/20 rounded-full'\n              >\n                <X className='w-3 h-3' />\n              </button>\n            </Badge>\n          )}\n          {typeFilter !== 'all' && (\n            <Badge\n              variant='default'\n              className='pl-2 pr-1 py-1 flex items-center gap-1 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300'\n            >\n              Type: {typeFilter}\n              <button\n                onClick={() => setTypeFilter('all')}\n                className='p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full'\n              >\n                <X className='w-3 h-3' />\n              </button>\n            </Badge>\n          )}\n          <button\n            onClick={() => {\n              setStatusFilter('all');\n              setTypeFilter('all');\n            }}\n            className='text-xs text-gray-500 hover:text-red-500 font-medium underline px-2'\n          >\n            Tout effacer\n          </button>\n        </div>\n      )}\n\n      {/* 5. Content Area */}\n      <div className='min-h-[500px] animate-in fade-in duration-500' ref={componentRef}>\n        {view === 'cards' && (\n          <div className='bg-transparent'>\n            <PlanningCardsView\n              visits={filteredVisits}\n              onVisitAction={handleVisitAction}\n              onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n            />\n          </div>\n        )}\n\n        {view === 'list' && (\n          <div className='bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden'>\n            <PlanningListView\n              visits={filteredVisits}\n              onVisitAction={handleVisitAction}\n              onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n            />\n          </div>\n        )}\n\n        {view === 'calendar' && (\n          <div className='bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 p-4'>\n            <PlanningCalendarView\n              visits={filteredVisits}\n              onVisitClick={(visit) => handleVisitAction(visit, 'edit')}\n            />\n          </div>\n        )}\n\n        {view === 'timeline' && <PlanningTimelineView visits={filteredVisits} />}\n        {view === 'workload' && <PlanningWorkloadView />}\n        {/* Finance Dashboard handles its own layout */}\n        {view === 'finance' && (\n          <div className='rounded-3xl overflow-hidden'>\n            <FinancialDashboard />\n          </div>\n        )}\n\n        {view === 'archives' && (\n          <div className='bg-white dark:bg-gray-800 rounded-3xl border border-gray-200 dark:border-gray-700 p-8 shadow-sm'>\n            <div className='flex items-center gap-4 mb-8'>\n              <div className='p-3 bg-gray-100 dark:bg-gray-700 rounded-2xl'>\n                <Archive className='w-6 h-6 text-gray-600 dark:text-gray-400' />\n              </div>\n              <div>\n                <h2 className='text-xl font-black text-gray-900 dark:text-white tracking-tight'>\n                  Visites archivées\n                </h2>\n                <p className='text-sm text-gray-500'>\n                  {archivedVisits.length} visite(s) dans l'historique\n                </p>\n              </div>\n            </div>\n\n            {archivedVisits.length === 0 ? (\n              <div className='text-center py-12 bg-gray-50 dark:bg-gray-900/50 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700'>\n                <Archive className='w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4' />\n                <h3 className='text-sm font-bold text-gray-900 dark:text-white uppercase tracking-widest mb-1'>\n                  Aucune archive\n                </h3>\n                <p className='text-xs text-gray-500 dark:text-gray-400'>\n                  Les visites terminées apparaîtront ici automatiquement.\n                </p>\n              </div>\n            ) : (\n              <div className='grid gap-4 md:grid-cols-2 lg:grid-cols-3'>\n                {archivedVisits\n                  .sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime())\n                  .map((visit) => (\n                    <div\n                      key={visit.visitId}\n                      className='group bg-gray-50 dark:bg-gray-900/30 rounded-2xl border border-gray-200 dark:border-gray-700 p-5 hover:border-gray-300 dark:hover:border-gray-600 transition-all'\n                    >\n                      <div className='flex items-start justify-between mb-4'>\n                        <div>\n                          <h3 className='font-bold text-gray-900 dark:text-white'>{visit.nom}</h3>\n                          <p className='text-xs font-bold text-gray-400 uppercase tracking-wider mt-1'>\n                            {visit.congregation}\n                          </p>\n                        </div>\n                        <Badge variant='success' className='text-[10px] px-2 py-0.5'>\n                          Terminée\n                        </Badge>\n                      </div>\n\n                      <div className='space-y-2 text-sm mb-4'>\n                        <div className='flex justify-between py-1 border-b border-gray-100 dark:border-gray-700/50'>\n                          <span className='text-gray-500 text-xs uppercase font-bold tracking-wider'>\n                            Date\n                          </span>\n                          <span className='font-medium text-gray-900 dark:text-gray-200'>\n                            {new Date(visit.visitDate).toLocaleDateString('fr-FR')}\n                          </span>\n                        </div>\n                        <div className='flex justify-between py-1 border-b border-gray-100 dark:border-gray-700/50'>\n                          <span className='text-gray-500 text-xs uppercase font-bold tracking-wider'>\n                            Numéro\n                          </span>\n                          <span className='font-medium'>{visit.talkNoOrType || '-'}</span>\n                        </div>\n                      </div>\n\n                      <div className='mt-4 flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity'>\n                        <Button\n                          variant='secondary'\n                          className='flex-1 text-xs h-8'\n                          onClick={() => handleVisitAction(visit, 'message')}\n                          leftIcon={<MessageSquare className='w-3 h-3' />}\n                        >\n                          Message\n                        </Button>\n                        <Button\n                          variant='secondary'\n                          className='flex-1 text-xs h-8'\n                          onClick={() => handleVisitAction(visit, 'feedback')}\n                          leftIcon={<Star className='w-3 h-3' />}\n                        >\n                          Bilan\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <ScheduleVisitModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />\n\n      <VisitActionModal\n        isOpen={isActionModalOpen}\n        onClose={handleCloseActionModal}\n        visit={selectedVisit}\n        action={selectedAction}\n      />\n\n      <PlanningFilterModal\n        isOpen={isFilterModalOpen}\n        onClose={() => setIsFilterModalOpen(false)}\n        dateRange={dateRange}\n        setDateRange={setDateRange}\n        statusFilter={statusFilter}\n        setStatusFilter={setStatusFilter}\n        typeFilter={typeFilter}\n        setTypeFilter={setTypeFilter}\n      />\n\n      {selectedVisit && (\n        <>\n          <ConflictDetectionModal\n            isOpen={isConflictModalOpen}\n            onClose={() => setIsConflictModalOpen(false)}\n            visit={selectedVisit}\n            onResolve={(_resolution) => setIsConflictModalOpen(false)}\n          />\n          <CancellationModal\n            isOpen={isCancellationModalOpen}\n            onClose={() => setIsCancellationModalOpen(false)}\n            visit={selectedVisit}\n            onCancel={() => setIsCancellationModalOpen(false)}\n          />\n          <EmergencyReplacementModal\n            isOpen={isReplacementModalOpen}\n            onClose={() => setIsReplacementModalOpen(false)}\n            visit={selectedVisit}\n            onSelectReplacement={() => setIsReplacementModalOpen(false)}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n"],"names":["ArrowDownRight","createLucideIcon","BarChart","BookOpen","CalendarDays","Eye","List","MoreVertical","PieChart","VisitCard","visit","onClick","onAction","showMenu","setShowMenu","useState","buttonRef","useRef","getStatusBadge","status","Badge","handleActionClick","action","e","actionOptions","Edit2","MessageSquare","CreditCard","Truck","CheckCircle","Star","Trash2","jsx","Card","jsxs","CardBody","Calendar","fr","Clock","MapPin","User","item","CommunicationProgress","createPortal","Fragment","option","PlanningCardsView","visits","onVisitClick","onVisitAction","index","PlanningListView","format","Edit","PlanningCalendarView","currentDate","setCurrentDate","nextMonth","addMonths","prevMonth","subMonths","today","monthStart","startOfMonth","monthEnd","endOfMonth","startDate","startOfWeek","endDate","endOfWeek","calendarDays","eachDayOfInterval","weekDays","getVisitsForDay","date","isSameDay","ChevronLeft","ChevronRight","day","dayVisits","isCurrentMonth","isSameMonth","isCurrentDay","isToday","ScheduleVisitModal","isOpen","onClose","initialDate","speakers","hosts","addVisit","publicTalks","congregationProfile","useData","addToast","useToast","scheduleVisitReminder","useVisitNotifications","isLoading","setIsLoading","currentStep","setCurrentStep","dateError","setDateError","dateConflict","setDateConflict","formData","setFormData","useEffect","prev","validateDate","checkDateConflict","dateStr","visitDate","conflict","v","handleSpeakerChange","speakerId","speaker","s","isLocal","handleTalkChange","talkNumber","talk","t","handleSubmit","newVisit","uuidv4","isLocalSpeaker","Modal","step","cn","p","AlertTriangle","type","Home","h","Info","CheckCircle2","Button","PlanningWorkloadView","searchTerm","setSearchTerm","React","filteredData","calculateWorkload","a","b","Input","Search","workload","WorkloadIndicator","PlanningTimelineView","groupedVisits","acc","parseISO","key","sortedMonthKeys","monthKey","isLeft","FinancialDashboard","selectedMonth","setSelectedMonth","currency","allExpenses","useMemo","monthlyStats","year","month","start","end","previousStart","previousEnd","currentMonthExpenses","isWithinInterval","previousMonthExpenses","totalCurrent","sum","totalPrevious","variation","byCategory","cat","totalVisitsWithExpenses","averageCostPerVisit","exportData","csvContent","blob","link","monthOptions","_","i","d","value","label","Select","Download","ArrowUpRight","Euro","TrendingUp","amount","percentage","expense","DatePicker","onChange","placeholder","className","required","disabled","min","max","dateToString","stringToDate","PlanningFilterModal","dateRange","setDateRange","statusFilter","setStatusFilter","typeFilter","setTypeFilter","localDateRange","setLocalDateRange","localStatusFilter","setLocalStatusFilter","localTypeFilter","setLocalTypeFilter","handleApply","handleCancel","handleClear","ConflictDetectionModal","onResolve","selectedResolutions","setSelectedResolutions","conflicts","detected","sameDateSpeaker","availableHosts","idx","recentSameTalk","sameMonthVisits","vDate","getSeverityColor","severity","getSeverityIcon","XCircle","handleSelectSuggestion","conflictId","suggestionId","newMap","handleApplyResolutions","c","suggestion","ArrowRight","CANCELLATION_REASONS","CancellationModal","onCancel","selectedReason","setSelectedReason","customReason","setCustomReason","notifySpeaker","setNotifySpeaker","notifyHost","setNotifyHost","proposeReschedule","setProposeReschedule","suggestedNewDate","setSuggestedNewDate","internalNotes","setInternalNotes","showConfirmation","setShowConfirmation","cancellationData","getNotificationPreview","reason","r","Send","RotateCcw","EmergencyReplacementModal","onSelectReplacement","filterByDistance","setFilterByDistance","filterByAvailability","setFilterByAvailability","selectedSpeaker","setSelectedSpeaker","sendNotification","setSendNotification","showFilters","setShowFilters","matchedSpeakers","matches","score","reasons","availableTalks","speakerTalks","lastVisit","m","handleSelectSpeaker","getScoreColor","getScoreLabel","AlertCircle","Filter","match","Phone","StatCard","memo","Icon","colorClasses","Planning","archivedVisits","view","setView","isModalOpen","setIsModalOpen","isActionModalOpen","setIsActionModalOpen","isFilterModalOpen","setIsFilterModalOpen","selectedVisit","setSelectedVisit","selectedAction","setSelectedAction","isConflictModalOpen","setIsConflictModalOpen","isCancellationModalOpen","setIsCancellationModalOpen","isReplacementModalOpen","setIsReplacementModalOpen","isViewMenuOpen","setIsViewMenuOpen","componentRef","handlePrint","useReactToPrint","handleExport","handleVisitAction","useCallback","handleCloseActionModal","filteredVisits","matchesSearch","matchesStatus","matchesType","matchesDateRange","stats","total","confirmed","pending","upcoming","SpecializedViewOption","id","desc","Plus","Sparkles","CalendarIcon","LayoutGrid","ChevronDown","Archive","X","VisitActionModal","_resolution"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}