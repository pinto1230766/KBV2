import{c as O,j as e,f,u as P,d as R,e as $,B as j,b as V,n as q,U as A,F as G,p as X,h as J,I as ee,H as T,D as ae,P as se}from"./index-DUL-pobT.js";import{r as u}from"./charts-Cazb4rp-.js";import{W as re,c as te,P as W,v as le,F as ie}from"./WorkloadIndicator-Cyp1gL7f.js";import{T as B,I as de}from"./Input-BYRE2Q1N.js";import{P as D,U as Y,M as Z,B as ne}from"./Badge-D10Q5L1j.js";import{M as U,U as oe}from"./user-check-BeFRGFlE.js";import{C as _,S as ce,F as xe}from"./FeedbackFormModal-DUCHbmuA.js";import"./react-vendor-B9D_A6Vq.js";import"./utils-FTT-aY8U.js";const me=O("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const ge=O("Dog",[["path",{d:"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5",key:"19br0u"}],["path",{d:"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"11n1an"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306",key:"wsu29d"}]]);const he=O("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]),ue={sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl"},pe={default:"bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300"},K=({src:o,alt:h,name:a,size:x="md",className:p,fallbackClassName:t,...r})=>{const m=ue[x],b=t||pe.default;return o?e.jsx("div",{className:f("rounded-full overflow-hidden flex items-center justify-center",m,p),...r,children:e.jsx("img",{src:o,alt:h||a||"Avatar",className:"w-full h-full object-cover",onError:c=>{const l=c.target;l.style.display="none";const g=l.parentElement;g&&(g.className=f("rounded-full overflow-hidden flex items-center justify-center font-bold",m,b),g.textContent=a?a.charAt(0).toUpperCase():"?")}})}):e.jsx("div",{className:f("rounded-full overflow-hidden flex items-center justify-center font-bold",m,b,p),...r,children:a?a.charAt(0).toUpperCase():"?"})},be=({speakers:o,onEdit:h,onDelete:a,onFeedback:x})=>{const{visits:p}=P();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(t=>{const r=t.talkHistory[0],m=r?p.find(b=>b.visitId===r.visitId):void 0;return e.jsx(R,{hoverable:!0,children:e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{src:t.photoUrl,name:t.nom,size:"md",fallbackClassName:"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.nom}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:t.congregation}),e.jsx(re,{workload:te(t,p),size:"sm"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>h(t),"aria-label":"Modifier l'orateur",children:e.jsx(W,{className:"w-4 h-4 text-gray-500"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>a(t.id),"aria-label":"Supprimer l'orateur",children:e.jsx(B,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[t.telephone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`tel:${t.telephone}`,className:"hover:text-primary-600",children:t.telephone})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`mailto:${t.email}`,className:"hover:text-primary-600 truncate",children:t.email})]}),t.isVehiculed&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Véhiculé"})]})]}),r&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Dernier discours :"}),m&&new Date(m.visitDate)<new Date&&e.jsx(j,{variant:"outline",size:"sm",onClick:()=>x(m),leftIcon:e.jsx(ce,{className:"w-3 h-3"}),children:"Évaluer"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{className:"font-medium",children:["N°",r.talkNo," - ",r.talkTheme]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(r.date).toLocaleDateString("fr-FR")})]})]}),t.talkHistory.length===0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 text-xs text-gray-500",children:"Aucune visite enregistrée"})]})},t.id)})}),o.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Aucun orateur trouvé"})]})},Q=({value:o,onChange:h,label:a="Photo",size:x="md",className:p=""})=>{const t=u.useRef(null),[r,m]=u.useState(!1),b=u.useId(),c={sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32"},l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},g=async k=>{const y=k.target.files?.[0];if(y){if(!y.type.startsWith("image/")){alert("Veuillez sélectionner une image");return}if(y.size>5*1024*1024){alert("L'image ne doit pas dépasser 5 Mo");return}m(!0);try{const w=await d(y,300,300);h(w)}catch(w){console.error("Erreur lors du traitement de l'image:",w),alert("Erreur lors du traitement de l'image")}finally{m(!1)}}},d=(k,y,w)=>new Promise((M,S)=>{const L=new FileReader;L.onload=E=>{const C=new Image;C.onload=()=>{const I=document.createElement("canvas");let{width:v,height:N}=C;v>N?v>y&&(N=N*y/v,v=y):N>w&&(v=v*w/N,N=w),I.width=v,I.height=N;const z=I.getContext("2d");if(!z){S(new Error("Impossible de créer le contexte canvas"));return}z.drawImage(C,0,0,v,N);const H=I.toDataURL("image/jpeg",.8);M(H)},C.onerror=()=>S(new Error("Erreur de chargement de l'image")),C.src=E.target?.result},L.onerror=()=>S(new Error("Erreur de lecture du fichier")),L.readAsDataURL(k)}),s=()=>{h(void 0),t.current&&(t.current.value="")},i=()=>{t.current?.click()};return e.jsxs("div",{className:`space-y-2 ${p}`,children:[a&&e.jsx("label",{htmlFor:b,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{onClick:i,className:`
              ${c[x]}
              rounded-full overflow-hidden border-2 border-dashed border-gray-300 dark:border-gray-600
              hover:border-primary-500 dark:hover:border-primary-400
              transition-colors cursor-pointer
              flex items-center justify-center
              bg-gray-100 dark:bg-gray-700
              ${r?"opacity-50":""}
            `,children:o?e.jsx("img",{src:o,alt:"Photo",className:"w-full h-full object-cover"}):e.jsx(Y,{className:`${l[x]} text-gray-400 dark:text-gray-500`})}),e.jsx("button",{type:"button",onClick:i,className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-primary-600 hover:bg-primary-700 text-white flex items-center justify-center shadow-lg transition-colors",title:"Changer la photo",children:e.jsx(me,{className:"w-4 h-4"})})]}),o&&e.jsx("button",{type:"button",onClick:s,className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Supprimer la photo",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsx("input",{id:b,ref:t,type:"file",accept:"image/*",onChange:g,className:"hidden","aria-label":a})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Formats acceptés : JPG, PNG, GIF. Max 5 Mo."})]})},fe=({isOpen:o,onClose:h,speaker:a})=>{const{addSpeaker:x,updateSpeaker:p,speakers:t}=P(),{addToast:r}=V(),[m,b]=u.useState(!1),[c,l]=u.useState({nom:"",congregation:"",telephone:"",email:"",photoUrl:"",gender:"male",notes:"",isVehiculed:!0});u.useEffect(()=>{l(a?{...a,isVehiculed:a.isVehiculed??!0}:{nom:"",congregation:"",telephone:"",email:"",photoUrl:"",gender:"male",notes:"",isVehiculed:!0})},[a,o]);const g=async d=>{d.preventDefault(),b(!0);try{if(!c.nom||!c.congregation)throw new Error("Le nom et la congrégation sont obligatoires");if(!a&&t.some(i=>i.nom.toLowerCase()===c.nom?.toLowerCase()))throw new Error("Un orateur avec ce nom existe déjà");const s={...c,id:a?a.id:le(),talkHistory:a?a.talkHistory:[],updatedAt:new Date().toISOString(),createdAt:a?a.createdAt:new Date().toISOString()};a?(p(s),r("Orateur mis à jour avec succès","success")):(x(s),r("Orateur ajouté avec succès","success")),h()}catch(s){r(s instanceof Error?s.message:"Erreur lors de l'enregistrement","error")}finally{b(!1)}};return e.jsx(q,{isOpen:o,onClose:h,title:"",size:"lg",padding:"none",hideCloseButton:!0,className:"overflow-hidden",children:e.jsxs("div",{className:"flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white shrink-0 relative overflow-hidden",children:[e.jsx(A,{className:"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tighter mb-1",children:a?"Modifier l'orateur":"Nouvel Orateur"}),e.jsx("p",{className:"text-emerald-100 text-sm",children:"Ajoutez les coordonnées d'un frère qualifié pour les discours."})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-white dark:bg-gray-900",children:e.jsxs("form",{id:"speaker-form",onSubmit:g,className:"space-y-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Q,{value:c.photoUrl||"",onChange:d=>l(s=>({...s,photoUrl:d})),label:"",size:"lg",className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl"}),e.jsx("div",{className:"absolute inset-0 rounded-full ring-1 ring-black/5 dark:ring-white/10 pointer-events-none"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(Y,{className:"w-4 h-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Identité"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Nom Complet"}),e.jsx("input",{required:!0,value:c.nom,onChange:d=>l(s=>({...s,nom:d.target.value})),placeholder:"Ex: Jean Dupont",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Congrégation"}),e.jsx("input",{required:!0,value:c.congregation,onChange:d=>l(s=>({...s,congregation:d.target.value})),placeholder:"Ex: Lyon Centre",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(D,{className:"w-4 h-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Contact"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Téléphone"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:c.telephone,onChange:d=>l(s=>({...s,telephone:d.target.value})),placeholder:"06 12 34 56 78",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:c.email,onChange:d=>l(s=>({...s,email:d.target.value})),placeholder:"jean@example.com",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(G,{className:"w-4 h-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Détails"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Genre"}),e.jsx("div",{className:"flex gap-2",children:[{id:"male",label:"Frère"},{id:"female",label:"Sœur"},{id:"couple",label:"Couple"}].map(d=>e.jsx("button",{type:"button",onClick:()=>l(s=>({...s,gender:d.id})),className:f("flex-1 py-2 px-3 rounded-lg text-sm font-bold border transition-all",c.gender===d.id?"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800":"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:d.label},d.id))})]}),e.jsx("div",{className:"flex items-end pb-3",children:e.jsxs("button",{type:"button",onClick:()=>l(d=>({...d,isVehiculed:!d.isVehiculed})),className:f("w-full flex items-center justify-between p-3 rounded-xl border transition-all",c.isVehiculed?"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800":"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:"Est véhiculé"})]}),c.isVehiculed&&e.jsx(X,{className:"w-4 h-4 text-emerald-500"})]})})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Notes"}),e.jsx("textarea",{rows:3,value:c.notes,onChange:d=>l(s=>({...s,notes:d.target.value})),placeholder:"Particularités, disponibilités...",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all resize-none"})]})]})]})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-3 shrink-0",children:[e.jsx(j,{variant:"ghost",onClick:h,disabled:m,children:"Annuler"}),e.jsx(j,{type:"submit",form:"speaker-form",isLoading:m,className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none shadow-lg shadow-emerald-200 dark:shadow-none",children:"Enregistrer"})]})]})})},ye=({hosts:o,onEdit:h,onDelete:a})=>{const[x,p]=u.useState(""),t=o.filter(r=>r.nom.toLowerCase().includes(x.toLowerCase())||r.address&&r.address.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(de,{placeholder:"Rechercher un contact...",leftIcon:e.jsx(J,{className:"w-4 h-4"}),value:x,onChange:r=>p(r.target.value)})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(r=>e.jsx(R,{hoverable:!0,children:e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{src:r.photoUrl,name:r.nom,size:"md",fallbackClassName:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.nom}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Capacité: ",r.capacity," pers."]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>h(r),children:e.jsx(W,{className:"w-4 h-4 text-gray-500"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>a(r.nom),children:e.jsx(B,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[r.telephone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`tel:${r.telephone}`,className:"hover:text-primary-600",children:r.telephone})]}),r.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`mailto:${r.email}`,className:"hover:text-primary-600 truncate",children:r.email})]}),r.address&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:r.address})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-2",children:[r.hasPets&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Animaux"}),r.notes&&e.jsxs("div",{className:"w-full flex items-start gap-2 mt-2 text-xs text-gray-500 italic",children:[e.jsx(ee,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"line-clamp-2",children:r.notes})]})]})]})},r.nom))}),t.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Aucun contact trouvé"})]})},je=({isOpen:o,onClose:h,host:a})=>{const{addHost:x,updateHost:p,hosts:t}=P(),{addToast:r}=V(),[m,b]=u.useState(!1),c=2,[l,g]=u.useState({nom:"",address:"",telephone:"",email:"",photoUrl:"",gender:"couple",notes:"",capacity:c,hasPets:!1,isSmoker:!1});u.useEffect(()=>{g(a?{...a,capacity:a.capacity??c,hasPets:a.hasPets??!1,isSmoker:a.isSmoker??!1}:{nom:"",address:"",telephone:"",email:"",photoUrl:"",gender:"couple",notes:"",capacity:c,hasPets:!1,isSmoker:!1})},[a,o]);const d=s=>{s.preventDefault(),b(!0);try{if(!l.nom)throw new Error("Le nom est obligatoire");if(!a&&t.some(k=>k.nom.toLowerCase()===l.nom?.toLowerCase()))throw new Error("Un contact avec ce nom existe déjà");const i={...l,unavailableDates:a?a.unavailableDates:[]};a?(p(a.nom,i),r("Contact mis à jour avec succès","success")):(x(i),r("Contact ajouté avec succès","success")),h()}catch(i){r(i instanceof Error?i.message:"Erreur","error")}finally{b(!1)}};return e.jsx(q,{isOpen:o,onClose:h,title:"",size:"lg",padding:"none",hideCloseButton:!0,className:"overflow-hidden",children:e.jsxs("div",{className:"flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 p-6 text-white shrink-0 relative overflow-hidden",children:[e.jsx(T,{className:"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tighter mb-1",children:a?"Modifier le foyer":"Nouveau Foyer"}),e.jsx("p",{className:"text-teal-100 text-sm",children:"Gérez les capacités d'accueil de la congrégation."})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-white dark:bg-gray-900",children:e.jsxs("form",{id:"host-form",onSubmit:d,className:"space-y-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx(Q,{value:l.photoUrl||"",onChange:s=>g(i=>({...i,photoUrl:s})),label:"",size:"lg",className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl"}),e.jsx("div",{className:"absolute inset-0 rounded-full ring-1 ring-black/5 dark:ring-white/10 pointer-events-none"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(A,{className:"w-4 h-4 text-teal-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Le Foyer"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Nom du foyer"}),e.jsx("input",{required:!0,value:l.nom,onChange:s=>g(i=>({...i,nom:s.target.value})),placeholder:"Ex: Famille Martin",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 transition-all"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Type"}),e.jsx("div",{className:"flex bg-gray-50 dark:bg-gray-800 rounded-xl p-1",children:[{id:"couple",label:"Couple"},{id:"male",label:"Frère"},{id:"female",label:"Sœur"}].map(s=>e.jsx("button",{type:"button",onClick:()=>g(i=>({...i,gender:s.id})),className:f("flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all",l.gender===s.id?"bg-white dark:bg-gray-700 text-teal-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:s.label},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Adresse"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:l.address,onChange:s=>g(i=>({...i,address:s.target.value})),placeholder:"12 rue de la Paix, Lyon",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 transition-all"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(D,{className:"w-4 h-4 text-teal-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Contact"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:l.telephone,onChange:s=>g(i=>({...i,telephone:s.target.value})),placeholder:"06 12 34 56 78",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:l.email,onChange:s=>g(i=>({...i,email:s.target.value})),placeholder:"famille@example.com",className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4",children:[e.jsx(G,{className:"w-4 h-4 text-teal-500"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Capacité & Particularités"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Capacité (personnes)"}),e.jsx("input",{type:"number",min:1,value:l.capacity,onChange:s=>g(i=>({...i,capacity:parseInt(s.target.value)})),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500"})]}),e.jsx("div",{className:"flex flex-col gap-3 py-1",children:e.jsxs("button",{type:"button",onClick:()=>g(s=>({...s,hasPets:!s.hasPets})),className:f("w-full flex items-center justify-between p-3 rounded-xl border transition-all",l.hasPets?"bg-teal-50 text-teal-700 border-teal-200":"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:"Animaux"})]}),e.jsx("div",{className:f("w-4 h-4 rounded-full border transition-colors",l.hasPets?"bg-teal-500 border-teal-500":"border-gray-300")})]})})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Contraintes / Préférences"}),e.jsx("textarea",{rows:3,value:l.notes,onChange:s=>g(i=>({...i,notes:s.target.value})),placeholder:"Allergies, escaliers, régimes particuliers...",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 resize-none"})]})]})]})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-3 shrink-0",children:[e.jsx(j,{variant:"ghost",onClick:h,disabled:m,children:"Annuler"}),e.jsx(j,{type:"submit",form:"host-form",isLoading:m,className:"bg-teal-600 hover:bg-teal-700 text-white border-none shadow-lg shadow-teal-200 dark:shadow-none",children:"Enregistrer"})]})]})})},F=({icon:o,value:h,label:a,colorClasses:x})=>e.jsx("div",{className:f("relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:scale-[1.02] shadow-sm",x.bg,"border-white/20 dark:border-gray-700/50"),children:e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:f("text-xs font-bold uppercase tracking-widest mb-1",x.text,"opacity-70"),children:a}),e.jsx("h3",{className:f("text-3xl font-black tracking-tighter",x.text),children:h})]}),e.jsx("div",{className:f("p-3 rounded-xl",x.iconBg),children:e.jsx(o,{className:f("w-6 h-6",x.text)})})]})}),De=()=>{const{speakers:o,deleteSpeaker:h,hosts:a,deleteHost:x}=P(),{addToast:p}=V(),[t,r]=u.useState("speakers"),[m,b]=u.useState(""),[c,l]=u.useState(!1),[g,d]=u.useState(void 0),[s,i]=u.useState(!1),[k,y]=u.useState(void 0),[w,M]=u.useState(!1),[S,L]=u.useState(null),E=u.useMemo(()=>({totalSpeakers:o.length,localSpeakers:o.filter(n=>n.congregation.toLowerCase().includes("lyon")).length,totalHosts:a.length,activeHosts:a.length}),[o,a]),C=n=>{d(n),l(!0)},I=async n=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet orateur ?")&&(h(n),p("Orateur supprimé","success"))},v=n=>{y(n),i(!0)},N=async n=>{window.confirm("Êtes-vous sûr de vouloir supprimer ce contact ?")&&(x(n),p("Contact supprimé","success"))},z=n=>{L(n),M(!0)},H=()=>{t==="speakers"?(d(void 0),l(!0)):(y(void 0),i(!0))};return e.jsxs("div",{className:"space-y-6 max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border-none px-3 py-1 font-bold text-[10px] tracking-widest uppercase",children:"Annuaire"}),e.jsx("span",{className:"text-gray-400 text-xs font-medium",children:t==="speakers"?"Orateurs":"Hébergement"})]}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tighter",children:"Contacts & Hospitalité"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{variant:"secondary",className:"font-bold border-gray-200 dark:border-gray-700 shadow-sm",leftIcon:e.jsx(ae,{className:"w-4 h-4"}),children:"Exporter"}),e.jsx(j,{className:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-200 dark:shadow-none font-bold px-6",leftIcon:e.jsx(se,{className:"w-5 h-5"}),onClick:H,children:"Ajouter"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(F,{icon:A,value:E.totalSpeakers,label:"Total Orateurs",colorClasses:{bg:"bg-blue-50 dark:bg-blue-900/10",text:"text-blue-600 dark:text-blue-400",iconBg:"bg-white dark:bg-blue-900/30"}}),e.jsx(F,{icon:he,value:E.localSpeakers,label:"Locaux (Lyon)",colorClasses:{bg:"bg-indigo-50 dark:bg-indigo-900/10",text:"text-indigo-600 dark:text-indigo-400",iconBg:"bg-white dark:bg-indigo-900/30"}}),e.jsx(F,{icon:T,value:E.totalHosts,label:"Contacts Accueil",colorClasses:{bg:"bg-teal-50 dark:bg-teal-900/10",text:"text-teal-600 dark:text-teal-400",iconBg:"bg-white dark:bg-teal-900/30"}}),e.jsx(F,{icon:oe,value:E.activeHosts,label:"Hôtes Actifs",colorClasses:{bg:"bg-green-50 dark:bg-green-900/10",text:"text-green-600 dark:text-green-400",iconBg:"bg-white dark:bg-green-900/30"}})]}),e.jsxs("div",{className:"sticky top-20 z-30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl p-2 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm flex flex-col md:flex-row gap-2",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded-xl flex items-center shrink-0",children:[{id:"speakers",label:"Orateurs",icon:A},{id:"hosts",label:"Accueil",icon:T}].map(n=>e.jsxs("button",{onClick:()=>r(n.id),className:f("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all",t===n.id?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:[e.jsx(n.icon,{className:"w-4 h-4"}),n.label]},n.id))}),e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-emerald-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:t==="speakers"?"Rechercher un orateur...":"Rechercher un hôte...",value:m,onChange:n=>b(n.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-emerald-500/20 transition-all placeholder:text-gray-400"})]}),e.jsx(j,{variant:"secondary",className:"hidden md:flex bg-gray-50 dark:bg-gray-800 border-none text-gray-500 hover:text-gray-700",leftIcon:e.jsx(ie,{className:"w-4 h-4"}),children:"Filtres"})]}),e.jsx("div",{className:"min-h-[500px] animate-in fade-in duration-500",children:t==="speakers"?e.jsx("div",{className:"bg-transparent",children:e.jsx(be,{speakers:o.filter(n=>n.nom.toLowerCase().includes(m.toLowerCase())||n.congregation.toLowerCase().includes(m.toLowerCase())),onEdit:C,onDelete:I,onFeedback:z})}):e.jsx("div",{className:"bg-transparent",children:e.jsx(ye,{hosts:a.filter(n=>n.nom.toLowerCase().includes(m.toLowerCase())),onEdit:v,onDelete:N})})}),e.jsx(fe,{isOpen:c,onClose:()=>{l(!1),d(void 0)},speaker:g}),e.jsx(je,{isOpen:s,onClose:()=>{i(!1),y(void 0)},host:k}),S&&e.jsx(xe,{isOpen:w,onClose:()=>{M(!1),L(null)},visit:S,onSubmit:n=>{console.log("Feedback submitted:",n),p("Évaluation enregistrée","success"),M(!1)}})]})};export{De as Speakers};
//# sourceMappingURL=Speakers-DDRRyLuG.js.map
