{"version":3,"file":"Speakers-_rixauya.js","sources":["../../node_modules/lucide-react/dist/esm/icons/camera.js","../../node_modules/lucide-react/dist/esm/icons/dog.js","../../node_modules/lucide-react/dist/esm/icons/mic-2.js","../../src/components/ui/Avatar.tsx","../../src/components/speakers/SpeakerList.tsx","../../src/components/ui/ImageUpload.tsx","../../src/components/speakers/SpeakerFormModal.tsx","../../src/components/hosts/HostList.tsx","../../src/components/hosts/HostFormModal.tsx","../../src/pages/Speakers.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Camera = createLucideIcon(\"Camera\", [\n  [\n    \"path\",\n    {\n      d: \"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\",\n      key: \"1tc9qg\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"13\", r: \"3\", key: \"1vg3eu\" }]\n]);\n\nexport { Camera as default };\n//# sourceMappingURL=camera.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dog = createLucideIcon(\"Dog\", [\n  [\n    \"path\",\n    {\n      d: \"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5\",\n      key: \"19br0u\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5\",\n      key: \"11n1an\"\n    }\n  ],\n  [\"path\", { d: \"M8 14v.5\", key: \"1nzgdb\" }],\n  [\"path\", { d: \"M16 14v.5\", key: \"1lajdz\" }],\n  [\"path\", { d: \"M11.25 16.25h1.5L12 17l-.75-.75Z\", key: \"12kq1m\" }],\n  [\n    \"path\",\n    {\n      d: \"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306\",\n      key: \"wsu29d\"\n    }\n  ]\n]);\n\nexport { Dog as default };\n//# sourceMappingURL=dog.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mic2 = createLucideIcon(\"Mic2\", [\n  [\"path\", { d: \"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12\", key: \"zoua8r\" }],\n  [\"circle\", { cx: \"17\", cy: \"7\", r: \"5\", key: \"1fomce\" }]\n]);\n\nexport { Mic2 as default };\n//# sourceMappingURL=mic-2.js.map\n","import React from 'react';\nimport { cn } from '@/utils/cn';\n\ninterface AvatarProps {\n  src?: string;\n  alt?: string;\n  name?: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n  fallbackClassName?: string;\n}\n\nconst sizeClasses = {\n  sm: 'w-8 h-8 text-sm',\n  md: 'w-10 h-10 text-base',\n  lg: 'w-12 h-12 text-lg',\n  xl: 'w-16 h-16 text-xl',\n};\n\nconst fallbackColors = {\n  speaker: 'bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300',\n  host: 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300',\n  default: 'bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300',\n};\n\nexport const Avatar: React.FC<AvatarProps> = ({\n  src,\n  alt,\n  name,\n  size = 'md',\n  className,\n  fallbackClassName,\n  ...props\n}) => {\n  const sizeClass = sizeClasses[size];\n  const fallbackColor = fallbackClassName || fallbackColors.default;\n\n  if (src) {\n    return (\n      <div\n        className={cn(\n          'rounded-full overflow-hidden flex items-center justify-center',\n          sizeClass,\n          className\n        )}\n        {...props}\n      >\n        <img\n          src={src}\n          alt={alt || name || 'Avatar'}\n          className='w-full h-full object-cover'\n          onError={(e) => {\n            // Fallback to letter avatar if image fails to load\n            const target = e.target as HTMLImageElement;\n            target.style.display = 'none';\n            const parent = target.parentElement;\n            if (parent) {\n              parent.className = cn(\n                'rounded-full overflow-hidden flex items-center justify-center font-bold',\n                sizeClass,\n                fallbackColor\n              );\n              parent.textContent = name ? name.charAt(0).toUpperCase() : '?';\n            }\n          }}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        'rounded-full overflow-hidden flex items-center justify-center font-bold',\n        sizeClass,\n        fallbackColor,\n        className\n      )}\n      {...props}\n    >\n      {name ? name.charAt(0).toUpperCase() : '?'}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Speaker, Visit } from '@/types';\nimport { Button } from '@/components/ui/Button';\nimport { Edit, Trash2, Phone, Mail, Car, Star } from 'lucide-react';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Avatar } from '@/components/ui/Avatar';\nimport { useData } from '@/contexts/DataContext';\nimport { calculateWorkload } from '@/utils/workload';\nimport { WorkloadIndicator } from '@/components/workload/WorkloadIndicator';\n\ninterface SpeakerListProps {\n  speakers: Speaker[];\n  onEdit: (_speaker: Speaker) => void;\n  onDelete: (_id: string) => void;\n  onFeedback: (_visit: Visit) => void;\n}\n\nexport const SpeakerList: React.FC<SpeakerListProps> = ({\n  speakers,\n  onEdit,\n  onDelete,\n  onFeedback,\n}) => {\n  const { visits } = useData();\n\n  return (\n    <div className='space-y-6'>\n      <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n        {speakers.map((speaker) => {\n          const lastTalk = speaker.talkHistory[0];\n          const lastVisit = lastTalk\n            ? visits.find((v) => v.visitId === lastTalk.visitId)\n            : undefined;\n\n          return (\n            <Card key={speaker.id} hoverable>\n              <CardBody className='p-4'>\n                <div className='flex justify-between items-start mb-4'>\n                  <div className='flex items-center gap-3'>\n                    <Avatar\n                      src={speaker.photoUrl}\n                      name={speaker.nom}\n                      size='md'\n                      fallbackClassName='bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300'\n                    />\n                    <div>\n                      <h3 className='font-semibold text-gray-900 dark:text-white'>{speaker.nom}</h3>\n                      <p className='text-sm text-gray-500 dark:text-gray-400 mb-1'>\n                        {speaker.congregation}\n                      </p>\n                      <WorkloadIndicator workload={calculateWorkload(speaker, visits)} size='sm' />\n                    </div>\n                  </div>\n                  <div className='flex gap-1'>\n                    <Button\n                      variant='ghost'\n                      size='sm'\n                      onClick={() => onEdit(speaker)}\n                      aria-label=\"Modifier l'orateur\"\n                    >\n                      <Edit className='w-4 h-4 text-gray-500' />\n                    </Button>\n                    <Button\n                      variant='ghost'\n                      size='sm'\n                      onClick={() => onDelete(speaker.id)}\n                      aria-label=\"Supprimer l'orateur\"\n                    >\n                      <Trash2 className='w-4 h-4 text-red-500' />\n                    </Button>\n                  </div>\n                </div>\n\n                <div className='space-y-2 text-sm text-gray-600 dark:text-gray-300'>\n                  {speaker.telephone && (\n                    <div className='flex items-center gap-2'>\n                      <Phone className='w-4 h-4 text-gray-400' />\n                      <a href={`tel:${speaker.telephone}`} className='hover:text-primary-600'>\n                        {speaker.telephone}\n                      </a>\n                    </div>\n                  )}\n                  {speaker.email && (\n                    <div className='flex items-center gap-2'>\n                      <Mail className='w-4 h-4 text-gray-400' />\n                      <a\n                        href={`mailto:${speaker.email}`}\n                        className='hover:text-primary-600 truncate'\n                      >\n                        {speaker.email}\n                      </a>\n                    </div>\n                  )}\n                  {speaker.isVehiculed && (\n                    <div className='flex items-center gap-2 text-green-600 dark:text-green-400'>\n                      <Car className='w-4 h-4' />\n                      <span>Véhiculé</span>\n                    </div>\n                  )}\n                </div>\n\n                {lastTalk && (\n                  <div className='mt-4 pt-4 border-t border-gray-100 dark:border-gray-700'>\n                    <div className='flex justify-between items-center mb-2'>\n                      <p className='text-xs font-medium text-gray-700 dark:text-gray-300'>\n                        Dernier discours :\n                      </p>\n                      {lastVisit && new Date(lastVisit.visitDate) < new Date() && (\n                        <Button\n                          variant='outline'\n                          size='sm'\n                          onClick={() => onFeedback(lastVisit)}\n                          leftIcon={<Star className='w-3 h-3' />}\n                        >\n                          Évaluer\n                        </Button>\n                      )}\n                    </div>\n                    <div className='text-sm text-gray-600 dark:text-gray-400'>\n                      <p className='font-medium'>\n                        N°{lastTalk.talkNo} - {lastTalk.talkTheme}\n                      </p>\n                      <p className='text-xs text-gray-500 mt-1'>\n                        {new Date(lastTalk.date).toLocaleDateString('fr-FR')}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                {speaker.talkHistory.length === 0 && (\n                  <div className='mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 text-xs text-gray-500'>\n                    Aucune visite enregistrée\n                  </div>\n                )}\n              </CardBody>\n            </Card>\n          );\n        })}\n      </div>\n\n      {speakers.length === 0 && (\n        <div className='text-center py-12 text-gray-500 dark:text-gray-400'>\n          Aucun orateur trouvé\n        </div>\n      )}\n    </div>\n  );\n};","import React, { useRef, useState, useId } from 'react';\nimport { Camera, Trash2, User } from 'lucide-react';\n\ninterface ImageUploadProps {\n  value?: string;\n  onChange: (imageUrl: string | undefined) => void;\n  label?: string;\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport const ImageUpload: React.FC<ImageUploadProps> = ({\n  value,\n  onChange,\n  label = 'Photo',\n  size = 'md',\n  className = '',\n}) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const id = useId();\n\n  const sizeClasses = {\n    sm: 'w-16 h-16',\n    md: 'w-24 h-24',\n    lg: 'w-32 h-32',\n  };\n\n  const iconSizes = {\n    sm: 'w-6 h-6',\n    md: 'w-8 h-8',\n    lg: 'w-10 h-10',\n  };\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Vérifier le type de fichier\n    if (!file.type.startsWith('image/')) {\n      alert('Veuillez sélectionner une image');\n      return;\n    }\n\n    // Vérifier la taille (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      alert(\"L'image ne doit pas dépasser 5 Mo\");\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      // Redimensionner et compresser l'image\n      const resizedImage = await resizeImage(file, 300, 300);\n      onChange(resizedImage);\n    } catch (error) {\n      console.error(\"Erreur lors du traitement de l'image:\", error);\n      alert(\"Erreur lors du traitement de l'image\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const resizeImage = (file: File, maxWidth: number, maxHeight: number): Promise<string> =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n          let { width, height } = img;\n\n          // Calculer les nouvelles dimensions\n          if (width > height) {\n            if (width > maxWidth) {\n              height = (height * maxWidth) / width;\n              width = maxWidth;\n            }\n          } else {\n            if (height > maxHeight) {\n              width = (width * maxHeight) / height;\n              height = maxHeight;\n            }\n          }\n\n          canvas.width = width;\n          canvas.height = height;\n\n          const ctx = canvas.getContext('2d');\n          if (!ctx) {\n            reject(new Error('Impossible de créer le contexte canvas'));\n            return;\n          }\n\n          ctx.drawImage(img, 0, 0, width, height);\n\n          // Convertir en base64 avec compression JPEG\n          const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(dataUrl);\n        };\n        img.onerror = () => reject(new Error(\"Erreur de chargement de l'image\"));\n        img.src = e.target?.result as string;\n      };\n      reader.onerror = () => reject(new Error('Erreur de lecture du fichier'));\n      reader.readAsDataURL(file);\n    });\n\n  const handleRemove = () => {\n    onChange(undefined);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  return (\n    <div className={`space-y-2 ${className}`}>\n      {label && (\n        <label htmlFor={id} className='block text-sm font-medium text-gray-700 dark:text-gray-300'>\n          {label}\n        </label>\n      )}\n\n      <div className='flex items-center gap-4'>\n        <div className='relative'>\n          <div\n            onClick={handleClick}\n            className={`\n              ${sizeClasses[size]}\n              rounded-full overflow-hidden border-2 border-dashed border-gray-300 dark:border-gray-600\n              hover:border-primary-500 dark:hover:border-primary-400\n              transition-colors cursor-pointer\n              flex items-center justify-center\n              bg-gray-100 dark:bg-gray-700\n              ${isLoading ? 'opacity-50' : ''}\n            `}\n          >\n            {value ? (\n              <img src={value} alt='Photo' className='w-full h-full object-cover' />\n            ) : (\n              <User className={`${iconSizes[size]} text-gray-400 dark:text-gray-500`} />\n            )}\n          </div>\n\n          {/* Badge caméra */}\n          <button\n            type='button'\n            onClick={handleClick}\n            className='absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-primary-600 hover:bg-primary-700 text-white flex items-center justify-center shadow-lg transition-colors'\n            title='Changer la photo'\n          >\n            <Camera className='w-4 h-4' />\n          </button>\n        </div>\n\n        {value && (\n          <button\n            type='button'\n            onClick={handleRemove}\n            className='p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors'\n            title='Supprimer la photo'\n          >\n            <Trash2 className='w-5 h-5' />\n          </button>\n        )}\n\n        <input\n          id={id}\n          ref={fileInputRef}\n          type='file'\n          accept='image/*'\n          onChange={handleFileChange}\n          className='hidden'\n          aria-label={label}\n        />\n      </div>\n\n      <p className='text-xs text-gray-500 dark:text-gray-400'>\n        Formats acceptés : JPG, PNG, GIF. Max 5 Mo.\n      </p>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { ImageUpload } from '@/components/ui/ImageUpload';\r\nimport { Speaker, Gender } from '@/types';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { User, Phone, Mail, FileText, CheckCircle2, Car, Users } from 'lucide-react';\r\nimport { cn } from '@/utils/cn';\r\n\r\ninterface SpeakerFormModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  speaker?: Speaker;\r\n}\r\n\r\nexport const SpeakerFormModal: React.FC<SpeakerFormModalProps> = ({ isOpen, onClose, speaker }) => {\r\n  const { addSpeaker, updateSpeaker, speakers } = useData();\r\n  const { addToast } = useToast();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [formData, setFormData] = useState<Partial<Speaker>>({\r\n    nom: '',\r\n    congregation: '',\r\n    telephone: '',\r\n    email: '',\r\n    photoUrl: '',\r\n    gender: 'male',\r\n    notes: '',\r\n    isVehiculed: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (speaker) {\r\n      setFormData({\r\n        ...speaker,\r\n        isVehiculed: speaker.isVehiculed ?? true,\r\n      });\r\n    } else {\r\n       setFormData({\r\n        nom: '',\r\n        congregation: '',\r\n        telephone: '',\r\n        email: '',\r\n        photoUrl: '',\r\n        gender: 'male',\r\n        notes: '',\r\n        isVehiculed: true,\r\n      });\r\n    }\r\n  }, [speaker, isOpen]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (!formData.nom || !formData.congregation) {\r\n        throw new Error('Le nom et la congrégation sont obligatoires');\r\n      }\r\n\r\n      if (!speaker && speakers.some((s) => s.nom.toLowerCase() === formData.nom?.toLowerCase())) {\r\n        throw new Error('Un orateur avec ce nom existe déjà');\r\n      }\r\n\r\n      const speakerData: Speaker = {\r\n        ...(formData as Speaker),\r\n        id: speaker ? speaker.id : uuidv4(),\r\n        talkHistory: speaker ? speaker.talkHistory : [],\r\n        updatedAt: new Date().toISOString(),\r\n        createdAt: speaker ? speaker.createdAt : new Date().toISOString(),\r\n      };\r\n\r\n      if (speaker) {\r\n        updateSpeaker(speakerData);\r\n        addToast('Orateur mis à jour avec succès', 'success');\r\n      } else {\r\n        addSpeaker(speakerData);\r\n        addToast('Orateur ajouté avec succès', 'success');\r\n      }\r\n      onClose();\r\n    } catch (error) {\r\n      addToast(error instanceof Error ? error.message : \"Erreur lors de l'enregistrement\", 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"\"\r\n      size=\"lg\"\r\n      padding=\"none\"\r\n      hideCloseButton={true}\r\n      className=\"overflow-hidden\"\r\n    >\r\n      <div className=\"flex flex-col max-h-[90vh]\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white shrink-0 relative overflow-hidden\">\r\n           <Users className=\"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12\" />\r\n           <div className=\"relative z-10\"> \r\n             <h2 className=\"text-2xl font-black tracking-tighter mb-1\">\r\n                {speaker ? \"Modifier l'orateur\" : \"Nouvel Orateur\"}\r\n             </h2>\r\n             <p className=\"text-emerald-100 text-sm\">\r\n                Ajoutez les coordonnées d'un frère qualifié pour les discours.\r\n             </p>\r\n           </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6 md:p-8 bg-white dark:bg-gray-900\">\r\n           <form id=\"speaker-form\" onSubmit={handleSubmit} className=\"space-y-8\">\r\n              \r\n              {/* Profile Photo */}\r\n              <div className=\"flex justify-center\">\r\n                 <div className=\"relative group\">\r\n                    <ImageUpload\r\n                      value={formData.photoUrl || ''}\r\n                      onChange={(url) => setFormData((prev) => ({ ...prev, photoUrl: url }))}\r\n                      label=\"\"\r\n                      size=\"lg\"\r\n                      className=\"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl\"\r\n                    />\r\n                    <div className=\"absolute inset-0 rounded-full ring-1 ring-black/5 dark:ring-white/10 pointer-events-none\" />\r\n                 </div>\r\n              </div>\r\n\r\n              {/* Identity Section */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <User className=\"w-4 h-4 text-emerald-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Identité</h3>\r\n                 </div>\r\n\r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Nom Complet</label>\r\n                       <input \r\n                         required\r\n                         value={formData.nom}\r\n                         onChange={e => setFormData(p => ({ ...p, nom: e.target.value }))}\r\n                         placeholder=\"Ex: Jean Dupont\"\r\n                         className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all\"\r\n                       />\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Congrégation</label>\r\n                       <input \r\n                         required\r\n                         value={formData.congregation}\r\n                         onChange={e => setFormData(p => ({ ...p, congregation: e.target.value }))}\r\n                         placeholder=\"Ex: Lyon Centre\"\r\n                         className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all\"\r\n                       />\r\n                    </div>\r\n                 </div>\r\n              </div>\r\n\r\n              {/* Contact Section */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <Phone className=\"w-4 h-4 text-emerald-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Contact</h3>\r\n                 </div>\r\n\r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Téléphone</label>\r\n                       <div className=\"relative\">\r\n                          <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                          <input \r\n                            value={formData.telephone}\r\n                            onChange={e => setFormData(p => ({ ...p, telephone: e.target.value }))}\r\n                            placeholder=\"06 12 34 56 78\"\r\n                            className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all\"\r\n                          />\r\n                       </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Email</label>\r\n                       <div className=\"relative\">\r\n                          <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                          <input \r\n                            type=\"email\"\r\n                            value={formData.email}\r\n                            onChange={e => setFormData(p => ({ ...p, email: e.target.value }))}\r\n                            placeholder=\"jean@example.com\"\r\n                            className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all\"\r\n                          />\r\n                       </div>\r\n                    </div>\r\n                 </div>\r\n              </div>\r\n\r\n              {/* Details Section */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <FileText className=\"w-4 h-4 text-emerald-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Détails</h3>\r\n                 </div>\r\n\r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Genre</label>\r\n                       <div className=\"flex gap-2\">\r\n                          {[\r\n                            { id: 'male', label: 'Frère' },\r\n                            { id: 'female', label: 'Sœur' },\r\n                            { id: 'couple', label: 'Couple' }\r\n                          ].map(g => (\r\n                             <button\r\n                                key={g.id}\r\n                                type=\"button\"\r\n                                onClick={() => setFormData(p => ({ ...p, gender: g.id as Gender }))}\r\n                                className={cn(\r\n                                   \"flex-1 py-2 px-3 rounded-lg text-sm font-bold border transition-all\",\r\n                                   formData.gender === g.id \r\n                                     ? \"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800\" \r\n                                     : \"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700 hover:border-gray-300\"\r\n                                )}\r\n                             >\r\n                                {g.label}\r\n                             </button>\r\n                          ))}\r\n                       </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-end pb-3\">\r\n                       <button\r\n                          type=\"button\"\r\n                          onClick={() => setFormData(p => ({ ...p, isVehiculed: !p.isVehiculed }))}\r\n                          className={cn(\r\n                             \"w-full flex items-center justify-between p-3 rounded-xl border transition-all\",\r\n                             formData.isVehiculed \r\n                               ? \"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800\" \r\n                               : \"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700 hover:border-gray-300\"\r\n                          )}\r\n                       >\r\n                          <div className=\"flex items-center gap-2\">\r\n                             <Car className=\"w-4 h-4\" />\r\n                             <span className=\"text-sm font-bold\">Est véhiculé</span>\r\n                          </div>\r\n                          {formData.isVehiculed && <CheckCircle2 className=\"w-4 h-4 text-emerald-500\" />}\r\n                       </button>\r\n                    </div>\r\n                 </div>\r\n\r\n                 <div className=\"space-y-1 pt-2\">\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Notes</label>\r\n                    <textarea \r\n                       rows={3}\r\n                       value={formData.notes}\r\n                       onChange={e => setFormData(p => ({ ...p, notes: e.target.value }))}\r\n                       placeholder=\"Particularités, disponibilités...\"\r\n                       className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-emerald-500 transition-all resize-none\"\r\n                    />\r\n                 </div>\r\n              </div>\r\n\r\n           </form>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-3 shrink-0\">\r\n           <Button variant=\"ghost\" onClick={onClose} disabled={isLoading}>Annuler</Button>\r\n           <Button \r\n              type=\"submit\" \r\n              form=\"speaker-form\" \r\n              isLoading={isLoading} \r\n              className=\"bg-emerald-600 hover:bg-emerald-700 text-white border-none shadow-lg shadow-emerald-200 dark:shadow-none\"\r\n           >\r\n              Enregistrer\r\n           </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\nimport { Host } from '@/types';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Edit, Trash2, Phone, Mail, MapPin, Search, Info } from 'lucide-react';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Avatar } from '@/components/ui/Avatar';\n\ninterface HostListProps {\n  hosts: Host[];\n  onEdit: (_host: Host) => void;\n  onDelete: (_name: string) => void;\n}\n\nexport const HostList: React.FC<HostListProps> = ({ hosts, onEdit, onDelete }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const filteredHosts = hosts.filter(\n    (host) =>\n      host.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (host.address && host.address.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  return (\n    <div className='space-y-6'>\n      <div className='flex gap-4'>\n        <div className='flex-1'>\n          <Input\n            placeholder='Rechercher un contact...'\n            leftIcon={<Search className='w-4 h-4' />}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'>\n        {filteredHosts.map((host) => (\n          <Card key={host.nom} hoverable>\n            <CardBody className='p-4'>\n              <div className='flex justify-between items-start mb-4'>\n                <div className='flex items-center gap-3'>\n                  <Avatar\n                    src={host.photoUrl}\n                    name={host.nom}\n                    size='md'\n                    fallbackClassName='bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\n                  />\n                  <div>\n                    <h3 className='font-semibold text-gray-900 dark:text-white'>{host.nom}</h3>\n                    <p className='text-sm text-gray-500 dark:text-gray-400'>\n                      Capacité: {host.capacity} pers.\n                    </p>\n                  </div>\n                </div>\n                <div className='flex gap-1'>\n                  <Button variant='ghost' size='sm' onClick={() => onEdit(host)}>\n                    <Edit className='w-4 h-4 text-gray-500' />\n                  </Button>\n                  <Button variant='ghost' size='sm' onClick={() => onDelete(host.nom)}>\n                    <Trash2 className='w-4 h-4 text-red-500' />\n                  </Button>\n                </div>\n              </div>\n\n              <div className='space-y-2 text-sm text-gray-600 dark:text-gray-300'>\n                {host.telephone && (\n                  <div className='flex items-center gap-2'>\n                    <Phone className='w-4 h-4 text-gray-400' />\n                    <a href={`tel:${host.telephone}`} className='hover:text-primary-600'>\n                      {host.telephone}\n                    </a>\n                  </div>\n                )}\n                {host.email && (\n                  <div className='flex items-center gap-2'>\n                    <Mail className='w-4 h-4 text-gray-400' />\n                    <a href={`mailto:${host.email}`} className='hover:text-primary-600 truncate'>\n                      {host.email}\n                    </a>\n                  </div>\n                )}\n                {host.address && (\n                  <div className='flex items-center gap-2'>\n                    <MapPin className='w-4 h-4 text-gray-400' />\n                    <span className='truncate'>{host.address}</span>\n                  </div>\n                )}\n              </div>\n\n              <div className='mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-2'>\n                {host.hasPets && (\n                  <span className='px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium'>\n                    Animaux\n                  </span>\n                )}\n                {host.notes && (\n                  <div className='w-full flex items-start gap-2 mt-2 text-xs text-gray-500 italic'>\n                    <Info className='w-3 h-3 mt-0.5 flex-shrink-0' />\n                    <p className='line-clamp-2'>{host.notes}</p>\n                  </div>\n                )}\n              </div>\n            </CardBody>\n          </Card>\n        ))}\n      </div>\n\n      {filteredHosts.length === 0 && (\n        <div className='text-center py-12 text-gray-500 dark:text-gray-400'>\n          Aucun contact trouvé\n        </div>\n      )}\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { ImageUpload } from '@/components/ui/ImageUpload';\r\nimport { Host, Gender } from '@/types';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { Home, Users, MapPin, Phone, Mail, FileText, Dog } from 'lucide-react';\r\nimport { cn } from '@/utils/cn';\r\n\r\ninterface HostFormModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  host?: Host;\r\n}\r\n\r\nexport const HostFormModal: React.FC<HostFormModalProps> = ({ isOpen, onClose, host }) => {\r\n  const { addHost, updateHost, hosts } = useData();\r\n  const { addToast } = useToast();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const DEFAULT_CAPACITY = 2;\r\n\r\n  const [formData, setFormData] = useState<Partial<Host>>({\r\n    nom: '',\r\n    address: '',\r\n    telephone: '',\r\n    email: '',\r\n    photoUrl: '',\r\n    gender: 'couple',\r\n    notes: '',\r\n    capacity: DEFAULT_CAPACITY,\r\n    hasPets: false,\r\n    isSmoker: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (host) {\r\n      setFormData({\r\n        ...host,\r\n         capacity: host.capacity ?? DEFAULT_CAPACITY,\r\n         hasPets: host.hasPets ?? false,\r\n         isSmoker: host.isSmoker ?? false,\r\n      });\r\n    } else {\r\n       setFormData({\r\n        nom: '',\r\n        address: '',\r\n        telephone: '',\r\n        email: '',\r\n        photoUrl: '',\r\n        gender: 'couple',\r\n        notes: '',\r\n        capacity: DEFAULT_CAPACITY,\r\n        hasPets: false,\r\n        isSmoker: false,\r\n      });\r\n    }\r\n  }, [host, isOpen]);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      if (!formData.nom) throw new Error('Le nom est obligatoire');\r\n\r\n      if (!host && hosts.some((h) => h.nom.toLowerCase() === formData.nom?.toLowerCase())) {\r\n        throw new Error('Un contact avec ce nom existe déjà');\r\n      }\r\n\r\n      const hostData: Host = {\r\n        ...(formData as Host),\r\n        unavailableDates: host ? host.unavailableDates : [],\r\n      };\r\n\r\n      if (host) {\r\n        updateHost(host.nom, hostData);\r\n        addToast('Contact mis à jour avec succès', 'success');\r\n      } else {\r\n        addHost(hostData);\r\n        addToast('Contact ajouté avec succès', 'success');\r\n      }\r\n      onClose();\r\n    } catch (error) {\r\n       addToast(error instanceof Error ? error.message : \"Erreur\", \"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"\"\r\n      size=\"lg\"\r\n      padding=\"none\"\r\n      hideCloseButton={true}\r\n      className=\"overflow-hidden\"\r\n    >\r\n      <div className=\"flex flex-col max-h-[90vh]\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-teal-600 to-emerald-600 p-6 text-white shrink-0 relative overflow-hidden\">\r\n           <Home className=\"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12\" />\r\n           <div className=\"relative z-10\"> \r\n             <h2 className=\"text-2xl font-black tracking-tighter mb-1\">\r\n                {host ? \"Modifier le foyer\" : \"Nouveau Foyer\"}\r\n             </h2>\r\n             <p className=\"text-teal-100 text-sm\">\r\n                Gérez les capacités d'accueil de la congrégation.\r\n             </p>\r\n           </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6 md:p-8 bg-white dark:bg-gray-900\">\r\n           <form id=\"host-form\" onSubmit={handleSubmit} className=\"space-y-8\">\r\n              \r\n              {/* Profile Photo */}\r\n              <div className=\"flex justify-center\">\r\n                 <div className=\"relative group\">\r\n                    <ImageUpload\r\n                      value={formData.photoUrl || ''}\r\n                      onChange={(url) => setFormData((prev) => ({ ...prev, photoUrl: url }))}\r\n                      label=\"\"\r\n                      size=\"lg\"\r\n                      className=\"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl\"\r\n                    />\r\n                    <div className=\"absolute inset-0 rounded-full ring-1 ring-black/5 dark:ring-white/10 pointer-events-none\" />\r\n                 </div>\r\n              </div>\r\n\r\n              {/* Foyer Info */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <Users className=\"w-4 h-4 text-teal-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Le Foyer</h3>\r\n                 </div>\r\n\r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Nom du foyer</label>\r\n                       <input \r\n                         required\r\n                         value={formData.nom}\r\n                         onChange={e => setFormData(p => ({ ...p, nom: e.target.value }))}\r\n                         placeholder=\"Ex: Famille Martin\"\r\n                         className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 transition-all\"\r\n                       />\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Type</label>\r\n                       <div className=\"flex bg-gray-50 dark:bg-gray-800 rounded-xl p-1\">\r\n                          {[\r\n                            { id: 'couple', label: 'Couple' },\r\n                            { id: 'male', label: 'Frère' },\r\n                            { id: 'female', label: 'Sœur' }\r\n                          ].map(g => (\r\n                             <button\r\n                                key={g.id}\r\n                                type=\"button\"\r\n                                onClick={() => setFormData(p => ({ ...p, gender: g.id as Gender }))}\r\n                                className={cn(\r\n                                   \"flex-1 py-2 px-2 rounded-lg text-xs font-bold transition-all\",\r\n                                   formData.gender === g.id \r\n                                     ? \"bg-white dark:bg-gray-700 text-teal-600 shadow-sm\" \r\n                                     : \"text-gray-500 hover:text-gray-700\"\r\n                                )}\r\n                             >\r\n                                {g.label}\r\n                             </button>\r\n                          ))}\r\n                       </div>\r\n                    </div>\r\n                 </div>\r\n\r\n                  <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Adresse</label>\r\n                       <div className=\"relative\">\r\n                          <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                          <input \r\n                            value={formData.address}\r\n                            onChange={e => setFormData(p => ({ ...p, address: e.target.value }))}\r\n                            placeholder=\"12 rue de la Paix, Lyon\"\r\n                            className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 transition-all\"\r\n                          />\r\n                       </div>\r\n                   </div>\r\n              </div>\r\n\r\n              {/* Contact */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <Phone className=\"w-4 h-4 text-teal-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Contact</h3>\r\n                 </div>\r\n                 \r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"relative\">\r\n                       <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                       <input \r\n                         value={formData.telephone}\r\n                         onChange={e => setFormData(p => ({ ...p, telephone: e.target.value }))}\r\n                         placeholder=\"06 12 34 56 78\"\r\n                         className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500\"\r\n                       />\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                       <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                       <input \r\n                         value={formData.email}\r\n                         onChange={e => setFormData(p => ({ ...p, email: e.target.value }))}\r\n                         placeholder=\"famille@example.com\"\r\n                         className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500\"\r\n                       />\r\n                    </div>\r\n                 </div>\r\n              </div>\r\n\r\n              {/* Capacity & Constraints */}\r\n              <div className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-2 border-b border-gray-100 dark:border-gray-800 pb-2 mb-4\">\r\n                    <FileText className=\"w-4 h-4 text-teal-500\" />\r\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider\">Capacité & Particularités</h3>\r\n                 </div>\r\n\r\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"space-y-1\">\r\n                       <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Capacité (personnes)</label>\r\n                       <input \r\n                          type=\"number\"\r\n                          min={1}\r\n                          value={formData.capacity}\r\n                          onChange={e => setFormData(p => ({ ...p, capacity: parseInt(e.target.value) }))}\r\n                          className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500\"\r\n                       />\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col gap-3 py-1\">\r\n                       <button\r\n                          type=\"button\"\r\n                          onClick={() => setFormData(p => ({ ...p, hasPets: !p.hasPets }))}\r\n                          className={cn(\r\n                             \"w-full flex items-center justify-between p-3 rounded-xl border transition-all\",\r\n                             formData.hasPets\r\n                               ? \"bg-teal-50 text-teal-700 border-teal-200\" \r\n                               : \"bg-white dark:bg-gray-800 text-gray-500 border-gray-200 dark:border-gray-700\"\r\n                          )}\r\n                       >\r\n                          <div className=\"flex items-center gap-2\">\r\n                             <Dog className=\"w-4 h-4\" />\r\n                             <span className=\"text-sm font-bold\">Animaux</span>\r\n                          </div>\r\n                          <div className={cn(\"w-4 h-4 rounded-full border transition-colors\", formData.hasPets ? \"bg-teal-500 border-teal-500\" : \"border-gray-300\")} />\r\n                       </button>\r\n                    </div>\r\n                 </div>\r\n\r\n                 <div className=\"space-y-1 pt-2\">\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1\">Contraintes / Préférences</label>\r\n                    <textarea \r\n                       rows={3}\r\n                       value={formData.notes}\r\n                       onChange={e => setFormData(p => ({ ...p, notes: e.target.value }))}\r\n                       placeholder=\"Allergies, escaliers, régimes particuliers...\"\r\n                       className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-teal-500 resize-none\"\r\n                    />\r\n                 </div>\r\n              </div>\r\n           </form>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-3 shrink-0\">\r\n           <Button variant=\"ghost\" onClick={onClose} disabled={isLoading}>Annuler</Button>\r\n           <Button \r\n              type=\"submit\" \r\n              form=\"host-form\" \r\n              isLoading={isLoading} \r\n              className=\"bg-teal-600 hover:bg-teal-700 text-white border-none shadow-lg shadow-teal-200 dark:shadow-none\"\r\n           >\r\n              Enregistrer\r\n           </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from 'react';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { SpeakerList } from '@/components/speakers/SpeakerList';\r\nimport { SpeakerFormModal } from '@/components/speakers/SpeakerFormModal';\r\nimport { HostList } from '@/components/hosts/HostList';\r\nimport { HostFormModal } from '@/components/hosts/HostFormModal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Speaker, Host, Visit } from '@/types';\r\nimport { FeedbackFormModal } from '@/components/modals';\r\nimport { \r\n  Plus, \r\n  Users, \r\n  Home, \r\n  Search, \r\n  Filter, \r\n  Download, \r\n  Mic2, \r\n  UserCheck\r\n} from 'lucide-react';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { cn } from '@/utils/cn';\r\n\r\ntype Tab = 'speakers' | 'hosts';\r\n\r\n// Premium Stat Card (Consistent with Planning/Dashboard)\r\nconst StatCard = ({ icon: Icon, value, label, colorClasses }: any) => (\r\n  <div className={cn(\r\n    \"relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:scale-[1.02] shadow-sm\",\r\n    colorClasses.bg,\r\n    \"border-white/20 dark:border-gray-700/50\"\r\n  )}>\r\n    <div className=\"relative z-10 flex items-center justify-between\">\r\n       <div>\r\n          <p className={cn(\"text-xs font-bold uppercase tracking-widest mb-1\", colorClasses.text, \"opacity-70\")}>{label}</p>\r\n          <h3 className={cn(\"text-3xl font-black tracking-tighter\", colorClasses.text)}>{value}</h3>\r\n       </div>\r\n       <div className={cn(\"p-3 rounded-xl\", colorClasses.iconBg)}>\r\n          <Icon className={cn(\"w-6 h-6\", colorClasses.text)} />\r\n       </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport const Speakers: React.FC = () => {\r\n  const { speakers, deleteSpeaker, hosts, deleteHost } = useData();\r\n  const { addToast } = useToast();\r\n  const [activeTab, setActiveTab] = useState<Tab>('speakers');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Modal states\r\n  const [isSpeakerModalOpen, setIsSpeakerModalOpen] = useState(false);\r\n  const [editingSpeaker, setEditingSpeaker] = useState<Speaker | undefined>(undefined);\r\n  const [isHostModalOpen, setIsHostModalOpen] = useState(false);\r\n  const [editingHost, setEditingHost] = useState<Host | undefined>(undefined);\r\n  const [isFeedbackModalOpen, setIsFeedbackModalOpen] = useState(false);\r\n  const [feedbackVisit, setFeedbackVisit] = useState<Visit | null>(null);\r\n\r\n  // Statistics\r\n  const stats = useMemo(() => ({\r\n    totalSpeakers: speakers.length,\r\n    localSpeakers: speakers.filter(s => s.congregation.toLowerCase().includes('lyon')).length,\r\n    totalHosts: hosts.length,\r\n    activeHosts: hosts.length,\r\n  }), [speakers, hosts]);\r\n\r\n  // Handlers\r\n  const handleEditSpeaker = (speaker: Speaker) => {\r\n    setEditingSpeaker(speaker);\r\n    setIsSpeakerModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteSpeaker = async (id: string) => {\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cet orateur ?')) {\r\n      deleteSpeaker(id);\r\n      addToast('Orateur supprimé', 'success');\r\n    }\r\n  };\r\n\r\n  const handleEditHost = (host: Host) => {\r\n    setEditingHost(host);\r\n    setIsHostModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteHost = async (name: string) => {\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce contact ?')) {\r\n      deleteHost(name);\r\n      addToast('Contact supprimé', 'success');\r\n    }\r\n  };\r\n\r\n  const handleOpenFeedbackModal = (visit: Visit) => {\r\n    setFeedbackVisit(visit);\r\n    setIsFeedbackModalOpen(true);\r\n  };\r\n\r\n  const handleCreate = () => {\r\n    if (activeTab === 'speakers') {\r\n      setEditingSpeaker(undefined);\r\n      setIsSpeakerModalOpen(true);\r\n    } else {\r\n      setEditingHost(undefined);\r\n      setIsHostModalOpen(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='space-y-6 max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6'>\r\n      \r\n      {/* 1. Header & Actions */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n         <div>\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n               <Badge className=\"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border-none px-3 py-1 font-bold text-[10px] tracking-widest uppercase\">\r\n                  Annuaire\r\n               </Badge>\r\n               <span className=\"text-gray-400 text-xs font-medium\">{activeTab === 'speakers' ? 'Orateurs' : 'Hébergement'}</span>\r\n            </div>\r\n            <h1 className=\"text-3xl font-black text-gray-900 dark:text-white tracking-tighter\">\r\n               Contacts & Hospitalité\r\n            </h1>\r\n         </div>\r\n         <div className=\"flex items-center gap-3\">\r\n            <Button \r\n               variant=\"secondary\" \r\n               className=\"font-bold border-gray-200 dark:border-gray-700 shadow-sm\"\r\n               leftIcon={<Download className=\"w-4 h-4\" />}\r\n            >\r\n               Exporter\r\n            </Button>\r\n            <Button \r\n               className=\"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-200 dark:shadow-none font-bold px-6\"\r\n               leftIcon={<Plus className=\"w-5 h-5\" />}\r\n               onClick={handleCreate}\r\n            >\r\n               Ajouter\r\n            </Button>\r\n         </div>\r\n      </div>\r\n\r\n      {/* 2. Stats Grid */}\r\n      <div className='grid grid-cols-2 lg:grid-cols-4 gap-4'>\r\n        <StatCard\r\n          icon={Users}\r\n          value={stats.totalSpeakers}\r\n          label='Total Orateurs'\r\n          colorClasses={{ bg: 'bg-blue-50 dark:bg-blue-900/10', text: 'text-blue-600 dark:text-blue-400', iconBg: 'bg-white dark:bg-blue-900/30' }}\r\n        />\r\n        <StatCard\r\n          icon={Mic2}\r\n          value={stats.localSpeakers}\r\n          label='Locaux (Lyon)'\r\n          colorClasses={{ bg: 'bg-indigo-50 dark:bg-indigo-900/10', text: 'text-indigo-600 dark:text-indigo-400', iconBg: 'bg-white dark:bg-indigo-900/30' }}\r\n        />\r\n        <StatCard\r\n          icon={Home}\r\n          value={stats.totalHosts}\r\n          label='Contacts Accueil'\r\n          colorClasses={{ bg: 'bg-teal-50 dark:bg-teal-900/10', text: 'text-teal-600 dark:text-teal-400', iconBg: 'bg-white dark:bg-teal-900/30' }}\r\n        />\r\n        <StatCard\r\n          icon={UserCheck}\r\n          value={stats.activeHosts}\r\n          label='Hôtes Actifs'\r\n          colorClasses={{ bg: 'bg-green-50 dark:bg-green-900/10', text: 'text-green-600 dark:text-green-400', iconBg: 'bg-white dark:bg-green-900/30' }}\r\n        />\r\n      </div>\r\n\r\n      {/* 3. Control Panel (Sticky) */}\r\n      <div className=\"sticky top-20 z-30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl p-2 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm flex flex-col md:flex-row gap-2\">\r\n         \r\n         {/* Tab Switcher */}\r\n         <div className=\"bg-gray-100 dark:bg-gray-800 p-1 rounded-xl flex items-center shrink-0\">\r\n            {[\r\n              { id: 'speakers', label: 'Orateurs', icon: Users },\r\n              { id: 'hosts', label: 'Accueil', icon: Home },\r\n            ].map((tab) => (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setActiveTab(tab.id as Tab)}\r\n                className={cn(\r\n                  \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all\",\r\n                  activeTab === tab.id\r\n                    ? \"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm\"\r\n                    : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\r\n                )}\r\n              >\r\n                 <tab.icon className=\"w-4 h-4\" />\r\n                 {tab.label}\r\n              </button>\r\n            ))}\r\n         </div>\r\n\r\n         {/* Search */}\r\n         <div className=\"relative flex-1 group\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-emerald-500 transition-colors\" />\r\n            <input \r\n               type=\"text\" \r\n               placeholder={activeTab === 'speakers' ? \"Rechercher un orateur...\" : \"Rechercher un hôte...\"}\r\n               value={searchTerm}\r\n               onChange={(e) => setSearchTerm(e.target.value)}\r\n               className=\"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-emerald-500/20 transition-all placeholder:text-gray-400\"\r\n            />\r\n         </div>\r\n\r\n         <Button \r\n            variant=\"secondary\" \r\n            className=\"hidden md:flex bg-gray-50 dark:bg-gray-800 border-none text-gray-500 hover:text-gray-700\" \r\n            leftIcon={<Filter className=\"w-4 h-4\" />}\r\n         >\r\n            Filtres\r\n         </Button>\r\n      </div>\r\n\r\n      {/* 4. Content Area */}\r\n      <div className=\"min-h-[500px] animate-in fade-in duration-500\">\r\n        {activeTab === 'speakers' ? (\r\n          /* Enclosing SpeakerList in a container that effectively passes search props if supported, \r\n             or relies on SpeakerList's internal search. \r\n             Ideally SpeakerList should accept 'searchTerm' prop but standard component might handle it internally.\r\n             For this redesign, we focus on the wrapper. */\r\n          <div className=\"bg-transparent\">\r\n             <SpeakerList\r\n                speakers={speakers.filter(s => \r\n                   s.nom.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n                   s.congregation.toLowerCase().includes(searchTerm.toLowerCase())\r\n                )} \r\n                onEdit={handleEditSpeaker}\r\n                onDelete={handleDeleteSpeaker}\r\n                onFeedback={handleOpenFeedbackModal}\r\n             />\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-transparent\">\r\n            <HostList \r\n               hosts={hosts.filter(h => \r\n                  h.nom.toLowerCase().includes(searchTerm.toLowerCase()) \r\n\r\n               )} \r\n               onEdit={handleEditHost} \r\n               onDelete={handleDeleteHost} \r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <SpeakerFormModal\r\n        isOpen={isSpeakerModalOpen}\r\n        onClose={() => { setIsSpeakerModalOpen(false); setEditingSpeaker(undefined); }}\r\n        speaker={editingSpeaker}\r\n      />\r\n\r\n      <HostFormModal \r\n        isOpen={isHostModalOpen} \r\n        onClose={() => { setIsHostModalOpen(false); setEditingHost(undefined); }} \r\n        host={editingHost} \r\n      />\r\n\r\n      {feedbackVisit && (\r\n        <FeedbackFormModal\r\n          isOpen={isFeedbackModalOpen}\r\n          onClose={() => {\r\n            setIsFeedbackModalOpen(false);\r\n            setFeedbackVisit(null);\r\n          }}\r\n          visit={feedbackVisit}\r\n          onSubmit={(feedback) => {\r\n            console.log('Feedback submitted:', feedback);\r\n            addToast('Évaluation enregistrée', 'success');\r\n            setIsFeedbackModalOpen(false);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":["Camera","createLucideIcon","Dog","Mic2","sizeClasses","fallbackColors","Avatar","src","alt","name","size","className","fallbackClassName","props","sizeClass","fallbackColor","jsx","cn","e","target","parent","SpeakerList","speakers","onEdit","onDelete","onFeedback","visits","useData","jsxs","speaker","lastTalk","lastVisit","v","Card","CardBody","WorkloadIndicator","calculateWorkload","Button","Edit","Trash2","Phone","Mail","Car","Star","ImageUpload","value","onChange","label","fileInputRef","useRef","isLoading","setIsLoading","useState","id","useId","iconSizes","handleFileChange","file","resizedImage","resizeImage","error","maxWidth","maxHeight","resolve","reject","reader","img","canvas","width","height","ctx","dataUrl","handleRemove","handleClick","User","SpeakerFormModal","isOpen","onClose","addSpeaker","updateSpeaker","addToast","useToast","formData","setFormData","useEffect","handleSubmit","s","speakerData","uuidv4","Modal","Users","url","prev","p","FileText","g","CheckCircle2","HostList","hosts","searchTerm","setSearchTerm","filteredHosts","host","Input","Search","MapPin","Info","HostFormModal","addHost","updateHost","DEFAULT_CAPACITY","h","hostData","Home","StatCard","Icon","colorClasses","Speakers","deleteSpeaker","deleteHost","activeTab","setActiveTab","isSpeakerModalOpen","setIsSpeakerModalOpen","editingSpeaker","setEditingSpeaker","isHostModalOpen","setIsHostModalOpen","editingHost","setEditingHost","isFeedbackModalOpen","setIsFeedbackModalOpen","feedbackVisit","setFeedbackVisit","stats","useMemo","handleEditSpeaker","handleDeleteSpeaker","handleEditHost","handleDeleteHost","handleOpenFeedbackModal","visit","handleCreate","Badge","Download","Plus","UserCheck","tab","Filter","FeedbackFormModal","feedback"],"mappings":"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","x_google_ignoreList":[0,1,2]}