{"version":3,"file":"Dashboard-D0OvUNSB.js","sources":["../../node_modules/lucide-react/dist/esm/icons/calendar-plus.js","../../node_modules/lucide-react/dist/esm/icons/user-plus.js","../../node_modules/lucide-react/dist/esm/icons/wifi-off.js","../../src/hooks/usePullToRefresh.ts","../../src/components/ui/PullToRefreshIndicator.tsx","../../src/components/ui/OfflineBanner.tsx","../../src/utils/mobileOptimization.ts","../../src/pages/Dashboard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CalendarPlus = createLucideIcon(\"CalendarPlus\", [\n  [\"path\", { d: \"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8\", key: \"3spt84\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"16\", y2: \"22\", key: \"1ttwzi\" }],\n  [\"line\", { x1: \"16\", x2: \"22\", y1: \"19\", y2: \"19\", key: \"1g9955\" }]\n]);\n\nexport { CalendarPlus as default };\n//# sourceMappingURL=calendar-plus.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst WifiOff = createLucideIcon(\"WifiOff\", [\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }],\n  [\"path\", { d: \"M8.5 16.5a5 5 0 0 1 7 0\", key: \"sej527\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 4.17-2.65\", key: \"11utq1\" }],\n  [\"path\", { d: \"M10.66 5c4.01-.36 8.14.9 11.34 3.76\", key: \"hxefdu\" }],\n  [\"path\", { d: \"M16.85 11.25a10 10 0 0 1 2.22 1.68\", key: \"q734kn\" }],\n  [\"path\", { d: \"M5 13a10 10 0 0 1 5.24-2.76\", key: \"piq4yl\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"20\", y2: \"20\", key: \"of4bc4\" }]\n]);\n\nexport { WifiOff as default };\n//# sourceMappingURL=wifi-off.js.map\n","import { useState, useCallback, useEffect, useRef } from 'react';\r\n\r\ninterface PullToRefreshOptions {\r\n  onRefresh: () => Promise<void>;\r\n  threshold?: number;\r\n  resistance?: number;\r\n}\r\n\r\nexport const usePullToRefresh = (options: PullToRefreshOptions) => {\r\n  const { onRefresh, threshold = 80, resistance = 2.5 } = options;\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [pullDistance, setPullDistance] = useState(0);\r\n  const startY = useRef(0);\r\n  const isPulling = useRef(false);\r\n\r\n  const handleTouchStart = useCallback((e: TouchEvent) => {\r\n    // Seulement si on est en haut de la page\r\n    if (window.scrollY === 0) {\r\n      startY.current = e.touches[0].clientY;\r\n      isPulling.current = true;\r\n    }\r\n  }, []);\r\n\r\n  const handleTouchMove = useCallback((e: TouchEvent) => {\r\n    if (!isPulling.current || isRefreshing) return;\r\n\r\n    const currentY = e.touches[0].clientY;\r\n    const distance = currentY - startY.current;\r\n\r\n    if (distance > 0) {\r\n      // Appliquer une résistance pour un effet plus naturel\r\n      const adjustedDistance = distance / resistance;\r\n      setPullDistance(Math.min(adjustedDistance, threshold * 1.5));\r\n      \r\n      // Empêcher le scroll par défaut si on tire vers le bas\r\n      if (distance > 10) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  }, [isRefreshing, threshold, resistance]);\r\n\r\n  const handleTouchEnd = useCallback(async () => {\r\n    if (!isPulling.current) return;\r\n\r\n    isPulling.current = false;\r\n\r\n    if (pullDistance >= threshold && !isRefreshing) {\r\n      setIsRefreshing(true);\r\n      try {\r\n        await onRefresh();\r\n      } finally {\r\n        setIsRefreshing(false);\r\n        setPullDistance(0);\r\n      }\r\n    } else {\r\n      setPullDistance(0);\r\n    }\r\n  }, [pullDistance, threshold, isRefreshing, onRefresh]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n    document.addEventListener('touchmove', handleTouchMove, { passive: false });\r\n    document.addEventListener('touchend', handleTouchEnd);\r\n\r\n    return () => {\r\n      document.removeEventListener('touchstart', handleTouchStart);\r\n      document.removeEventListener('touchmove', handleTouchMove);\r\n      document.removeEventListener('touchend', handleTouchEnd);\r\n    };\r\n  }, [handleTouchStart, handleTouchMove, handleTouchEnd]);\r\n\r\n  return {\r\n    isRefreshing,\r\n    pullDistance,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface PullToRefreshIndicatorProps {\r\n  pullDistance: number;\r\n  isRefreshing: boolean;\r\n  threshold?: number;\r\n}\r\n\r\nexport const PullToRefreshIndicator: React.FC<PullToRefreshIndicatorProps> = ({\r\n  pullDistance,\r\n  isRefreshing,\r\n  threshold = 80,\r\n}) => {\r\n  const progress = Math.min((pullDistance / threshold) * 100, 100);\r\n  const opacity = Math.min(pullDistance / threshold, 1);\r\n\r\n  if (pullDistance === 0 && !isRefreshing) return null;\r\n\r\n  // Utiliser les variables CSS pour éviter les styles inline\r\n  React.useEffect(() => {\r\n    const root = document.documentElement;\r\n    root.style.setProperty('--ptr-transform', `translateY(${isRefreshing ? '60px' : `${pullDistance}px`})`);\r\n    root.style.setProperty('--ptr-opacity', isRefreshing ? '1' : opacity.toString());\r\n  }, [pullDistance, isRefreshing, opacity]);\r\n\r\n  return (\r\n    <div className=\"pull-refresh-indicator fixed top-0 left-0 right-0 flex justify-center items-center z-50 transition-all duration-200\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-full p-3 shadow-lg\">\r\n        {isRefreshing ? (\r\n          <Loader2 className=\"w-6 h-6 text-ios-blue animate-spin\" />\r\n        ) : (\r\n          <div className=\"relative w-6 h-6\">\r\n            <svg className=\"w-6 h-6 transform -rotate-90\" viewBox=\"0 0 24 24\">\r\n              <circle\r\n                cx=\"12\"\r\n                cy=\"12\"\r\n                r=\"10\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                fill=\"none\"\r\n                className=\"text-gray-200 dark:text-gray-700\"\r\n              />\r\n              <circle\r\n                cx=\"12\"\r\n                cy=\"12\"\r\n                r=\"10\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                fill=\"none\"\r\n                strokeDasharray={`${2 * Math.PI * 10}`}\r\n                strokeDashoffset={`${2 * Math.PI * 10 * (1 - progress / 100)}`}\r\n                className=\"text-ios-blue transition-all duration-200\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { WifiOff } from 'lucide-react';\r\n\r\ninterface OfflineBannerProps {\r\n  isOnline: boolean;\r\n}\r\n\r\nexport const OfflineBanner: React.FC<OfflineBannerProps> = ({ isOnline }) => {\r\n  if (isOnline) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white px-4 py-2 flex items-center justify-center gap-2 text-sm font-medium shadow-lg\">\r\n      <WifiOff className=\"w-4 h-4\" />\r\n      <span>Mode hors ligne - Données en cache</span>\r\n    </div>\r\n  );\r\n};\r\n","// Mobile Performance Optimization Utilities\r\n\r\n// Debounce utility for search and filter inputs\r\nexport function debounce<T extends (...args: any[]) => void>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: NodeJS.Timeout;\r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(() => func(...args), wait);\r\n  };\r\n}\r\n\r\n// Throttle utility for scroll and resize events\r\nexport function throttle<T extends (...args: any[]) => void>(\r\n  func: T,\r\n  limit: number\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean;\r\n  return (...args: Parameters<T>) => {\r\n    if (!inThrottle) {\r\n      func(...args);\r\n      inThrottle = true;\r\n      setTimeout(() => (inThrottle = false), limit);\r\n    }\r\n  };\r\n}\r\n\r\n// Intersection Observer for lazy loading (progressive enhancement)\r\nexport function createIntersectionObserver(\r\n  callback: (entries: IntersectionObserverEntry[]) => void,\r\n  options?: IntersectionObserverInit\r\n) {\r\n  if (typeof IntersectionObserver === 'undefined') {\r\n    // Fallback for browsers without IntersectionObserver\r\n    return null;\r\n  }\r\n\r\n  return new IntersectionObserver(callback, {\r\n    rootMargin: '50px',\r\n    threshold: 0.1,\r\n    ...options\r\n  });\r\n}\r\n\r\n// Virtual scrolling helper for large lists\r\nexport interface VirtualItem {\r\n  index: number;\r\n  start: number;\r\n  end: number;\r\n}\r\n\r\nexport function calculateVirtualItems(\r\n  containerHeight: number,\r\n  itemHeight: number,\r\n  scrollTop: number,\r\n  overscan: number = 5\r\n): VirtualItem[] {\r\n  const startIndex = Math.floor(scrollTop / itemHeight);\r\n  const endIndex = Math.min(\r\n    startIndex + Math.ceil(containerHeight / itemHeight) + overscan,\r\n    Infinity\r\n  );\r\n\r\n  return [\r\n    {\r\n      index: Math.max(startIndex - overscan, 0),\r\n      start: Math.max(startIndex - overscan, 0) * itemHeight,\r\n      end: startIndex * itemHeight\r\n    },\r\n    ...Array.from({ length: endIndex - startIndex }, (_, i) => ({\r\n      index: startIndex + i,\r\n      start: (startIndex + i) * itemHeight,\r\n      end: (startIndex + i + 1) * itemHeight\r\n    })),\r\n    {\r\n      index: endIndex,\r\n      start: endIndex * itemHeight,\r\n      end: endIndex * itemHeight + containerHeight\r\n    }\r\n  ];\r\n}\r\n\r\n// Memory management utilities\r\nexport function isLowMemoryDevice(): boolean {\r\n  // Check for low-end devices based on available memory and cores\r\n  if ('deviceMemory' in navigator) {\r\n    return (navigator as any).deviceMemory <= 2;\r\n  }\r\n  \r\n  // Fallback based on hardwareConcurrency\r\n  if ('hardwareConcurrency' in navigator) {\r\n    return (navigator as any).hardwareConcurrency <= 2;\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\nexport function getOptimalListHeight(): number {\r\n  return isLowMemoryDevice() ? 400 : 600;\r\n}\r\n\r\n// Performance monitoring\r\nexport function measurePerformance<T>(name: string, fn: () => T): T {\r\n  if (typeof performance === 'undefined') {\r\n    return fn();\r\n  }\r\n\r\n  const start = performance.now();\r\n  const result = fn();\r\n  const end = performance.now();\r\n\r\n  console.log(`${name} took ${end - start} milliseconds`);\r\n  return result;\r\n}\r\n\r\n// React Native-like performance utilities\r\nexport const AnimationFrame = {\r\n  cancel: (id: number) => {\r\n    if (typeof cancelAnimationFrame === 'function') {\r\n      cancelAnimationFrame(id);\r\n    }\r\n  },\r\n  request: (callback: FrameRequestCallback): number => {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n      return requestAnimationFrame(callback);\r\n    }\r\n    // Fallback for older browsers\r\n    return setTimeout(() => callback(performance.now()), 16) as any;\r\n  }\r\n};\r\n\r\n// Touch gesture detection for mobile\r\nexport function detectSwipeDirection(\r\n  touchStart: Touch,\r\n  touchEnd: Touch,\r\n  threshold: number = 50\r\n): 'left' | 'right' | 'up' | 'down' | null {\r\n  const deltaX = touchEnd.clientX - touchStart.clientX;\r\n  const deltaY = touchEnd.clientY - touchStart.clientY;\r\n\r\n  if (Math.abs(deltaX) > Math.abs(deltaY)) {\r\n    if (Math.abs(deltaX) > threshold) {\r\n      return deltaX > 0 ? 'right' : 'left';\r\n    }\r\n  } else {\r\n    if (Math.abs(deltaY) > threshold) {\r\n      return deltaY > 0 ? 'down' : 'up';\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n// Safe storage operations with fallback\r\nexport const SafeStorage = {\r\n  get: (key: string): any => {\r\n    try {\r\n      const item = localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : null;\r\n    } catch (error) {\r\n      console.warn('SafeStorage.get failed:', error);\r\n      return null;\r\n    }\r\n  },\r\n  set: (key: string, value: any): boolean => {\r\n    try {\r\n      localStorage.setItem(key, JSON.stringify(value));\r\n      return true;\r\n    } catch (error) {\r\n      console.warn('SafeStorage.set failed:', error);\r\n      return false;\r\n    }\r\n  },\r\n  remove: (key: string): boolean => {\r\n    try {\r\n      localStorage.removeItem(key);\r\n      return true;\r\n    } catch (error) {\r\n      console.warn('SafeStorage.remove failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\n// Network status detection\r\nexport function isOnline(): boolean {\r\n  return typeof navigator !== 'undefined' ? navigator.onLine : true;\r\n}\r\n\r\n// Progressive loading for images\r\nexport function preloadImage(src: string): Promise<void> {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.onload = () => resolve();\r\n    img.onerror = reject;\r\n    img.src = src;\r\n  });\r\n}\r\n\r\n// Battery optimization hints\r\nexport function isLowPowerMode(): boolean {\r\n  // Check if user prefers reduced motion\r\n  if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\r\n    return true;\r\n  }\r\n  \r\n  // Check for battery-saving mode (when available)\r\n  if ('getBattery' in navigator) {\r\n    (navigator as any).getBattery().then((battery: any) => battery.level < 0.2 && !battery.charging).catch(() => false);\r\n  }\r\n  \r\n  return false;\r\n}\r\n","import React, { memo, useMemo, useCallback, useState, useEffect } from 'react';\r\nimport { Users, Calendar, AlertCircle, TrendingUp, Clock, Zap, CalendarPlus, UserPlus, MessageSquare, FileText } from 'lucide-react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { usePlatformContext } from '@/contexts/PlatformContext';\r\nimport { usePullToRefresh } from '@/hooks/usePullToRefresh';\r\nimport { Card, CardBody, CardHeader } from '@/components/ui/Card';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { cn } from '@/utils/cn';\r\nimport { PullToRefreshIndicator } from '@/components/ui/PullToRefreshIndicator';\r\nimport { OfflineBanner } from '@/components/ui/OfflineBanner';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Visit } from '@/types';\r\n\r\nimport { isLowMemoryDevice } from '@/utils/mobileOptimization';\r\nimport { QuickActionsModal } from '@/components/ui/QuickActionsModal';\r\nimport { ReportGeneratorModal } from '@/components/reports/ReportGeneratorModal';\r\nimport { VisitActionModal } from '@/components/planning/VisitActionModal';\r\n\r\n// Memoized components for performance\r\nconst VisitItem = memo(({ \r\n  visit, \r\n  onClick,\r\n  showStatus = false\r\n}: { \r\n  visit: Visit; \r\n  onClick?: () => void;\r\n  showStatus?: boolean;\r\n}) => {\r\n  const getStatusBadge = () => {\r\n    switch (visit.status) {\r\n      case 'confirmed':\r\n        return <Badge variant=\"success\" className=\"text-xs\">Confirmé</Badge>;\r\n      case 'pending':\r\n        return <Badge variant=\"warning\" className=\"text-xs\">En attente</Badge>;\r\n      case 'completed':\r\n        return <Badge variant=\"default\" className=\"text-xs\">Terminé</Badge>;\r\n      case 'cancelled':\r\n        return <Badge variant=\"danger\" className=\"text-xs\">Annulé</Badge>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors cursor-pointer\"\r\n      onClick={onClick}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold\">\r\n          {visit.nom.charAt(0).toUpperCase()}\r\n        </div>\r\n        <div>\r\n          <p className=\"font-medium text-gray-900 dark:text-white\">{visit.nom}</p>\r\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n            {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\r\n              weekday: 'short',\r\n              day: 'numeric',\r\n              month: 'short'\r\n            })} à {visit.visitTime}\r\n          </p>\r\n          {visit.talkTheme && (\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-500 mt-1\">\r\n              N°{visit.talkNoOrType} - {visit.talkTheme}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showStatus && getStatusBadge()}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport const Dashboard: React.FC = () => {\r\n  const { visits, speakers, hosts } = useData();\r\n  const { addToast } = useToast();\r\n  const { deviceType, orientation, isPhoneS25Ultra } = usePlatformContext();\r\n  const navigate = useNavigate();\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [isQuickActionsOpen, setIsQuickActionsOpen] = useState(false);\r\n  const [isReportModalOpen, setIsReportModalOpen] = useState(false);\r\n  const [selectedVisit, setSelectedVisit] = useState<Visit | null>(null);\r\n  const [isVisitActionModalOpen, setIsVisitActionModalOpen] = useState(false);\r\n\r\n  const handleVisitClick = useCallback((visit: Visit) => {\r\n    setSelectedVisit(visit);\r\n    setIsVisitActionModalOpen(true);\r\n  }, []);\r\n\r\n  const isTablet = deviceType === 'tablet';\r\n  // Détection spécifique Samsung Tab S10 Ultra (ajusté pour le scaling Chrome: 1200px au lieu de 1848px)\r\n  const isSamsungTablet = isTablet && window.innerWidth >= 1200;\r\n  \r\n  // Pull-to-refresh\r\n  const { isRefreshing, pullDistance } = usePullToRefresh({\r\n    onRefresh: async () => {\r\n      // Le rafraîchissement sera géré par le contexte de données\r\n      window.location.reload();\r\n    },\r\n  });\r\n  \r\n  // Écouter les changements de connexion\r\n  React.useEffect(() => {\r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n    \r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n    \r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n  \r\n  // Device detection for mobile optimizations\r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth < 768;\r\n  const isLowEndDevice = isLowMemoryDevice();\r\n\r\n  // Memoized calculations\r\n  const dateCalculations = useMemo(() => {\r\n    const today = new Date();\r\n    // Reset hours to compare just dates if needed, but keeping time is fine for \"upcoming\"\r\n    today.setHours(0, 0, 0, 0);\r\n    const endOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);\r\n    endOfMonth.setHours(23, 59, 59, 999);\r\n    \r\n    // Fallback: If end of month is very close (e.g. last few days), maybe show next 30 days?\r\n    // User asked \"prochaines visites du mois\", implying current month scope.\r\n    // I will stick to End of Month as requested. \r\n    return { today, endOfMonth };\r\n  }, []);\r\n\r\n  const upcomingVisits = useMemo(() => visits.filter((visit: Visit) => {\r\n      const visitDate = new Date(visit.visitDate);\r\n      // Visits from today until end of month\r\n      return visitDate >= dateCalculations.today && \r\n             visitDate <= dateCalculations.endOfMonth && \r\n             (visit.status === 'confirmed' || visit.status === 'pending');\r\n    }).sort((a, b) => new Date(a.visitDate).getTime() - new Date(b.visitDate).getTime()), [visits, dateCalculations]);\r\n\r\n  const visitsNeedingAction = useMemo(() => visits.filter((visit: Visit) =>\r\n      visit.status === 'pending' ||\r\n      (visit.status === 'confirmed' && new Date(visit.visitDate) < dateCalculations.today)\r\n    ), [visits, dateCalculations]);\r\n\r\n  const currentMonthVisits = useMemo(() => {\r\n    const now = dateCalculations.today;\r\n    return visits.filter((v: Visit) => {\r\n      const visitDate = new Date(v.visitDate);\r\n      return visitDate.getMonth() === now.getMonth() && \r\n             visitDate.getFullYear() === now.getFullYear();\r\n    }).length;\r\n  }, [visits, dateCalculations]);\r\n\r\n  const stats = useMemo(() => [\r\n    {\r\n      label: 'Orateurs actifs',\r\n      value: speakers.length,\r\n      icon: Users,\r\n      color: 'text-blue-600',\r\n      bg: 'bg-blue-100 dark:bg-blue-900/20',\r\n      trend: '+2 ce mois'\r\n    },\r\n    {\r\n      label: \"Contacts d'accueil\",\r\n      value: hosts.length,\r\n      icon: Users,\r\n      color: 'text-green-600',\r\n      bg: 'bg-green-100 dark:bg-green-900/20',\r\n      trend: '+1 cette semaine'\r\n    },\r\n    {\r\n      label: 'Visites ce mois',\r\n      value: currentMonthVisits,\r\n      icon: Calendar,\r\n      color: 'text-purple-600',\r\n      bg: 'bg-purple-100 dark:bg-purple-900/20',\r\n      trend: '+15%'\r\n    },\r\n    {\r\n      label: 'Actions requises',\r\n      value: visitsNeedingAction.length,\r\n      icon: AlertCircle,\r\n      color: 'text-orange-600',\r\n      bg: 'bg-orange-100 dark:bg-orange-900/20',\r\n      trend: visitsNeedingAction.length > 0 ? 'Urgent' : 'À jour'\r\n    },\r\n  ], [speakers.length, hosts.length, currentMonthVisits, visitsNeedingAction.length]);\r\n\r\n  const monthlyData = useMemo(() => {\r\n    const data = [];\r\n    const now = dateCalculations.today;\r\n\r\n    for (let i = 5; i >= 0; i--) {\r\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\r\n      const monthVisits = visits.filter((visit: Visit) => {\r\n        const visitDate = new Date(visit.visitDate);\r\n        return visitDate.getMonth() === date.getMonth() && \r\n               visitDate.getFullYear() === date.getFullYear();\r\n      }).length;\r\n\r\n      data.push({\r\n        name: date.toLocaleDateString('fr-FR', { month: 'short' }),\r\n        visites: monthVisits\r\n      });\r\n    }\r\n\r\n    return data;\r\n  }, [visits, dateCalculations]);\r\n\r\n  const pieData = useMemo(() => [\r\n    { name: 'Physique', value: visits.filter((v: Visit) => v.locationType === 'physical').length, color: '#3B82F6' },\r\n    { name: 'Zoom', value: visits.filter((v: Visit) => v.locationType === 'zoom').length, color: '#10B981' },\r\n    { name: 'Streaming', value: visits.filter((v: Visit) => v.locationType === 'streaming').length, color: '#F59E0B' }\r\n  ], [visits]);\r\n\r\n  // Keyboard shortcut for Quick Actions (Ctrl+K)\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\r\n        e.preventDefault();\r\n        setIsQuickActionsOpen(true);\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  // Memoized event handlers\r\n  const handleNavigateToPlanning = useCallback(() => navigate('/planning'), [navigate]);\r\n\r\n  return (\r\n    <>\r\n      <div className={cn(\r\n        \"h-full\",\r\n        isPhoneS25Ultra && \"s25-ultra-optimized\",\r\n        isTablet ? 'flex flex-col space-y-3 pb-4' : isMobile ? 'space-y-4' : 'space-y-6',\r\n        isTablet && orientation === 'landscape' ? 'px-4' : isTablet ? 'px-4' : 'px-4',\r\n        isLowEndDevice && 'optimize-rendering'\r\n      )}>\r\n      {/* Pull to Refresh Indicator */}\r\n      <PullToRefreshIndicator pullDistance={pullDistance} isRefreshing={isRefreshing} />\r\n      \r\n      {/* Offline Banner */}\r\n      <OfflineBanner isOnline={isOnline} />\r\n\r\n      {/* Stats Cards - Optimisé pour tous les appareils Samsung */}\r\n      <div className={`flex-shrink-0 grid gap-3 sm:gap-6 ${\r\n        isPhoneS25Ultra ? 'grid-cols-2' :\r\n        isMobile ? 'grid-cols-2' : \r\n        deviceType === 'tablet' && orientation === 'landscape' ? 'grid-cols-4' :\r\n        deviceType === 'tablet' ? 'grid-cols-4' :\r\n        'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'\r\n      }`}>\r\n        {stats.map((stat, index) => (\r\n          <Card \r\n            key={stat.label} \r\n            hoverable \r\n            className={cn(\r\n              \"relative overflow-hidden cursor-pointer\",\r\n              isPhoneS25Ultra && \"s25-card\"\r\n            )}\r\n            onClick={() => {\r\n              if (index === 0 || index === 1) navigate('/speakers');\r\n              else if (index === 2 || index === 3) navigate('/planning');\r\n            }}\r\n          >\r\n            <CardBody className=\"flex items-center\">\r\n              <div className={`p-2 sm:p-3 rounded-xl ${stat.bg} mr-3 sm:mr-4`}>\r\n                <stat.icon className={`w-5 h-5 sm:w-6 sm:h-6 ${stat.color}`} />\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400\">\r\n                  {stat.label}\r\n                </p>\r\n                <p className=\"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white\">\r\n                  {stat.value}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                  {stat.trend}\r\n                </p>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Main Content Area - Optimisé pour Samsung Tab S10 Ultra */}\r\n      <div className={`\r\n        grid gap-4 sm:gap-6\r\n        ${isTablet && isSamsungTablet && orientation === 'landscape' ? 'grid-cols-12' : 'grid-cols-1 lg:grid-cols-12'}\r\n      `}>\r\n        \r\n        {/* Row 1 - Left: Evolution Mensuelle (8/12) */}\r\n        <div className={`\r\n          ${isTablet && isSamsungTablet && orientation === 'landscape' ? 'col-span-8' : 'col-span-1 lg:col-span-8'}\r\n        `}>\r\n          <Card className=\"h-full\">\r\n            <CardHeader>\r\n              <h3 className=\"text-base md:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <TrendingUp className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n                Évolution mensuelle\r\n              </h3>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <div className={`${isMobile ? 'h-48' : 'h-64'} w-full`}>\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <BarChart data={monthlyData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" className=\"dark:stroke-gray-700\" />\r\n                    <XAxis dataKey=\"name\" stroke=\"#6B7280\" fontSize={12} tickLine={false} axisLine={false} />\r\n                    <YAxis stroke=\"#6B7280\" fontSize={12} tickLine={false} axisLine={false} />\r\n                    <Tooltip cursor={{ fill: '#F3F4F6' }} contentStyle={{ borderRadius: '8px', border: 'none' }} />\r\n                    <Bar dataKey=\"visites\" fill=\"#4F46E5\" radius={[4, 4, 0, 0]} />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Row 1 - Right: Prochaines Visites (4/12) */}\r\n        <div className={`\r\n          ${isTablet && isSamsungTablet && orientation === 'landscape' ? 'col-span-4' : 'col-span-1 lg:col-span-4'}\r\n        `}>\r\n          <Card className=\"h-full flex flex-col\">\r\n            <CardHeader className=\"flex items-center justify-between flex-shrink-0\">\r\n              <h3 className=\"text-sm md:text-md font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <Clock className=\"w-4 h-4\" />\r\n                Prochaines visites\r\n              </h3>\r\n              <Button variant=\"secondary\" size=\"sm\" onClick={handleNavigateToPlanning}>\r\n                Voir tout\r\n              </Button>\r\n            </CardHeader>\r\n            <CardBody className=\"flex-1 overflow-y-auto min-h-[200px]\">\r\n              {upcomingVisits.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {upcomingVisits.slice(0, 5).map((visit: Visit) => (\r\n                    <VisitItem key={visit.id} visit={visit} onClick={() => handleVisitClick(visit)} showStatus={true} />\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400 h-full flex flex-col justify-center\">\r\n                  <Calendar className=\"w-10 h-10 mx-auto mb-2 opacity-20\" />\r\n                  <p className=\"font-medium text-sm\">Aucune visite</p>\r\n                </div>\r\n              )}\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Row 2 - Left: Répartition & Accès Rapide (4/12) */}\r\n        <div className={`\r\n          ${isTablet && isSamsungTablet && orientation === 'landscape' ? 'col-span-4' : 'col-span-1 lg:col-span-4'}\r\n          flex flex-col gap-4 sm:gap-6\r\n        `}>\r\n          {/* Card 1: Répartition - Compacte */}\r\n          <Card>\r\n            <CardHeader className=\"py-3\">\r\n              <h3 className=\"text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <Calendar className=\"w-4 h-4\" />\r\n                Répartition\r\n              </h3>\r\n            </CardHeader>\r\n            <CardBody className=\"py-2\">\r\n              <div className=\"h-32 w-full\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={pieData}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      innerRadius={30}\r\n                      outerRadius={50}\r\n                      paddingAngle={5}\r\n                      dataKey=\"value\"\r\n                    >\r\n                      {pieData.map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n              <div className=\"flex justify-center gap-3 mt-1 pb-2\">\r\n                {pieData.map((item) => {\r\n                  const dotClass = item.name === 'Physique' ? 'bg-blue-500' : item.name === 'Zoom' ? 'bg-green-500' : 'bg-amber-500';\r\n                  return (\r\n                    <div key={item.name} className=\"flex items-center gap-1.5\">\r\n                      <div className={`w-1.5 h-1.5 rounded-full ${dotClass}`}></div>\r\n                      <span className=\"text-xs text-gray-600 dark:text-gray-400\">{item.name}</span>\r\n                      <span className=\"text-xs font-bold text-gray-900 dark:text-white\">{item.value}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n\r\n          {/* Card 2: Accès Rapide */}\r\n          <Card className=\"flex-1\">\r\n            <CardHeader className=\"py-3\">\r\n              <h3 className=\"text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <Zap className=\"w-4 h-4 text-yellow-500\" />\r\n                Accès Rapide\r\n              </h3>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <Button \r\n                  variant=\"secondary\" \r\n                  className=\"h-auto py-3 flex flex-col gap-2 items-center justify-center text-center hover:bg-primary-50 hover:text-primary-700 hover:border-primary-200 dark:hover:bg-primary-900/20\"\r\n                  onClick={() => setIsVisitActionModalOpen(true)}\r\n                >\r\n                  <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full text-blue-600 dark:text-blue-400\">\r\n                    <CalendarPlus className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium\">Nouvelle Visite</span>\r\n                </Button>\r\n\r\n                <Button \r\n                  variant=\"secondary\" \r\n                  className=\"h-auto py-3 flex flex-col gap-2 items-center justify-center text-center hover:bg-primary-50 hover:text-primary-700 hover:border-primary-200 dark:hover:bg-primary-900/20\"\r\n                  onClick={() => navigate('/speakers')}\r\n                >\r\n                  <div className=\"p-2 bg-green-100 dark:bg-green-900/30 rounded-full text-green-600 dark:text-green-400\">\r\n                    <UserPlus className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium\">Nouvel Orateur</span>\r\n                </Button>\r\n\r\n                <Button \r\n                  variant=\"secondary\" \r\n                  className=\"h-auto py-3 flex flex-col gap-2 items-center justify-center text-center hover:bg-primary-50 hover:text-primary-700 hover:border-primary-200 dark:hover:bg-primary-900/20\"\r\n                  onClick={() => navigate('/messages')}\r\n                >\r\n                  <div className=\"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-full text-purple-600 dark:text-purple-400\">\r\n                    <MessageSquare className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium\">Messages</span>\r\n                </Button>\r\n\r\n                <Button \r\n                  variant=\"secondary\" \r\n                  className=\"h-auto py-3 flex flex-col gap-2 items-center justify-center text-center hover:bg-primary-50 hover:text-primary-700 hover:border-primary-200 dark:hover:bg-primary-900/20\"\r\n                  onClick={() => setIsReportModalOpen(true)}\r\n                >\r\n                  <div className=\"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-full text-orange-600 dark:text-orange-400\">\r\n                    <FileText className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-medium\">Rapports</span>\r\n                </Button>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Row 2 - Right: Actions Requises (8/12) - AGRANDI */}\r\n        <div className={`\r\n          ${isTablet && isSamsungTablet && orientation === 'landscape' ? 'col-span-8' : 'col-span-1 lg:col-span-8'}\r\n        `}>\r\n          <Card className=\"h-full flex flex-col\">\r\n            <CardHeader className=\"flex items-center justify-between flex-shrink-0\">\r\n              <h3 className=\"text-sm md:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <AlertCircle className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n                Actions requises\r\n              </h3>\r\n              {visitsNeedingAction.length > 0 && (\r\n                <Badge variant=\"danger\" className=\"text-xs\">\r\n                  {visitsNeedingAction.length} alerte{visitsNeedingAction.length > 1 ? 's' : ''}\r\n                </Badge>\r\n              )}\r\n            </CardHeader>\r\n            <CardBody className=\"flex-1 overflow-y-auto min-h-[250px]\">\r\n              <div className=\"space-y-3\">\r\n                {visitsNeedingAction.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    {visitsNeedingAction.slice(0, 10).map((visit: Visit) => (\r\n                      <div key={visit.id} className=\"flex items-center justify-between p-3 border border-orange-200 dark:border-orange-900/50 bg-orange-50 dark:bg-orange-900/10 rounded-lg\">\r\n                        <div className=\"flex items-center gap-3 cursor-pointer overflow-hidden\" onClick={() => handleVisitClick(visit)}>\r\n                          <AlertCircle className=\"w-8 h-8 text-orange-500 flex-shrink-0\" />\r\n                          <div className=\"min-w-0\">\r\n                            <p className=\"font-medium text-gray-900 dark:text-white truncate\">\r\n                              {visit.status === 'pending' ? 'Validation requise' : 'Visite passée'}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400 truncate\">\r\n                              {visit.nom}\r\n                            </p>\r\n                            <p className=\"text-xs text-orange-600 dark:text-orange-400\">\r\n                              {new Date(visit.visitDate).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long' })}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <Button variant=\"secondary\" size=\"sm\" onClick={(e) => { e.stopPropagation(); handleVisitClick(visit); }}>\r\n                          Traiter\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-gray-500 dark:text-gray-400 flex flex-col items-center justify-center h-full\">\r\n                    <AlertCircle className=\"w-16 h-16 mx-auto mb-4 opacity-20\" />\r\n                    <p className=\"font-medium text-lg\">Aucune action requise</p>\r\n                    <p className=\"text-sm mt-1\">Tout est à jour !</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n\r\n      </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {selectedVisit && (\r\n        <VisitActionModal\r\n          isOpen={isVisitActionModalOpen}\r\n          onClose={() => setIsVisitActionModalOpen(false)}\r\n          visit={selectedVisit}\r\n          action=\"edit\"\r\n        />\r\n      )}\r\n      <QuickActionsModal\r\n        isOpen={isQuickActionsOpen}\r\n        onClose={() => setIsQuickActionsOpen(false)}\r\n        onAction={(action) => {\r\n          setIsQuickActionsOpen(false);\r\n          // Rediriger vers la page appropriée selon l'action\r\n          switch(action) {\r\n            case 'schedule-visit':\r\n              navigate('/planning');\r\n              break;\r\n            case 'add-speaker':\r\n              navigate('/speakers');\r\n              break;\r\n            case 'add-host':\r\n              navigate('/speakers');\r\n              break;\r\n            case 'send-message':\r\n              navigate('/messages');\r\n              break;\r\n            case 'generate-report':\r\n              setIsReportModalOpen(true);\r\n              break;\r\n            case 'check-conflicts':\r\n              navigate('/planning');\r\n              break;\r\n            case 'backup-data':\r\n              navigate('/settings');\r\n              break;\r\n            case 'import-data':\r\n              navigate('/settings');\r\n              break;\r\n            case 'sync-sheets':\r\n              navigate('/settings');\r\n              addToast('Synchronisation Google Sheets lancée...', 'info');\r\n              break;\r\n            case 'export-all-data':\r\n              navigate('/settings');\r\n              addToast('Exportation de toutes les données lancée...', 'info');\r\n              break;\r\n            case 'search-entities':\r\n              // Assuming a search page or integrating search into an existing page\r\n              navigate('/planning'); // Redirect to planning for now, as it involves entities\r\n              addToast('Redirection vers la recherche d\\'entités', 'info');\r\n              break;\r\n            case 'show-statistics':\r\n              // Since we are already on the dashboard, a toast for now.\r\n              // Ideally, this would open a dedicated statistics view or enhance the current one.\r\n              addToast('Affichage des statistiques...', 'info');\r\n              break;\r\n          }\r\n        }}\r\n      />\r\n      <ReportGeneratorModal\r\n        isOpen={isReportModalOpen}\r\n        onClose={() => setIsReportModalOpen(false)}\r\n        onGenerate={(config) => {\r\n          const filteredVisits = visits.filter(v => {\r\n            if (config.period === 'current-month') {\r\n              const now = new Date();\r\n              const visitDate = new Date(v.visitDate);\r\n              return visitDate.getMonth() === now.getMonth() && visitDate.getFullYear() === now.getFullYear();\r\n            }\r\n            return true;\r\n          });\r\n          \r\n          const fileName = `rapport-kbv-${new Date().toISOString().slice(0, 10)}`;\r\n          \r\n          if (config.format === 'csv') {\r\n            let csvContent = 'Date,Orateur,Congrégation,Discours,Thème,Hôte,Statut\\n';\r\n            filteredVisits.forEach(v => {\r\n              csvContent += `${v.visitDate},${v.nom},${v.congregation},${v.talkNoOrType || ''},${v.talkTheme || ''},${v.host || ''},${v.status}\\n`;\r\n            });\r\n            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${fileName}.csv`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n            addToast('Rapport CSV généré !', 'success');\r\n          } else if (config.format === 'excel') {\r\n            let htmlContent = `<html><head><meta charset=\"utf-8\"><style>table{border-collapse:collapse;width:100%;}th,td{border:1px solid black;padding:8px;text-align:left;}th{background-color:#4F46E5;color:white;}</style></head><body><h1>Rapport KBV Lyon</h1><table><tr><th>Date</th><th>Orateur</th><th>Congrégation</th><th>Discours</th><th>Thème</th><th>Hôte</th><th>Statut</th></tr>`;\r\n            filteredVisits.forEach(v => {\r\n              htmlContent += `<tr><td>${v.visitDate}</td><td>${v.nom}</td><td>${v.congregation}</td><td>${v.talkNoOrType || ''}</td><td>${v.talkTheme || ''}</td><td>${v.host || ''}</td><td>${v.status}</td></tr>`;\r\n            });\r\n            htmlContent += '</table></body></html>';\r\n            const blob = new Blob([htmlContent], { type: 'application/vnd.ms-excel' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${fileName}.xls`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n            addToast('Rapport Excel généré !', 'success');\r\n          } else if (config.format === 'pdf') {\r\n            let htmlContent = `<html><head><meta charset=\"utf-8\"><style>body{font-family:Arial,sans-serif;margin:40px;}h1{color:#4F46E5;}table{border-collapse:collapse;width:100%;margin-top:20px;}th,td{border:1px solid #ddd;padding:12px;text-align:left;}th{background-color:#4F46E5;color:white;}</style></head><body><h1>Rapport KBV Lyon</h1><p>Généré le ${new Date().toLocaleDateString('fr-FR')}</p><table><tr><th>Date</th><th>Orateur</th><th>Congrégation</th><th>Discours</th><th>Thème</th><th>Hôte</th><th>Statut</th></tr>`;\r\n            filteredVisits.forEach(v => {\r\n              htmlContent += `<tr><td>${new Date(v.visitDate).toLocaleDateString('fr-FR')}</td><td>${v.nom}</td><td>${v.congregation}</td><td>${v.talkNoOrType || ''}</td><td>${v.talkTheme || ''}</td><td>${v.host || ''}</td><td>${v.status}</td></tr>`;\r\n            });\r\n            htmlContent += `</table><p style=\"margin-top:30px;color:#666;\">Total: ${  filteredVisits.length  } visite(s)</p></body></html>`;\r\n            const blob = new Blob([htmlContent], { type: 'text/html' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${fileName}.html`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n            addToast('Rapport HTML généré ! Ouvrez-le et imprimez en PDF', 'success');\r\n          }\r\n          \r\n          setIsReportModalOpen(false);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n"],"names":["CalendarPlus","createLucideIcon","UserPlus","WifiOff","usePullToRefresh","options","onRefresh","threshold","resistance","isRefreshing","setIsRefreshing","useState","pullDistance","setPullDistance","startY","useRef","isPulling","handleTouchStart","useCallback","e","handleTouchMove","distance","adjustedDistance","handleTouchEnd","useEffect","PullToRefreshIndicator","progress","opacity","React","root","jsx","Loader2","OfflineBanner","isOnline","jsxs","isLowMemoryDevice","VisitItem","memo","visit","onClick","showStatus","getStatusBadge","Badge","Dashboard","visits","speakers","hosts","useData","addToast","useToast","deviceType","orientation","isPhoneS25Ultra","usePlatformContext","navigate","useNavigate","setIsOnline","isQuickActionsOpen","setIsQuickActionsOpen","isReportModalOpen","setIsReportModalOpen","selectedVisit","setSelectedVisit","isVisitActionModalOpen","setIsVisitActionModalOpen","handleVisitClick","isTablet","isSamsungTablet","handleOnline","handleOffline","isMobile","isLowEndDevice","dateCalculations","useMemo","today","endOfMonth","upcomingVisits","visitDate","a","b","visitsNeedingAction","currentMonthVisits","now","v","stats","Users","Calendar","AlertCircle","monthlyData","data","i","date","monthVisits","pieData","handleKeyDown","handleNavigateToPlanning","Fragment","cn","stat","index","Card","CardBody","CardHeader","TrendingUp","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","Clock","Button","PieChart","Pie","entry","Cell","item","dotClass","Zap","MessageSquare","FileText","VisitActionModal","QuickActionsModal","action","ReportGeneratorModal","config","filteredVisits","fileName","csvContent","blob","url","htmlContent"],"mappings":"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","x_google_ignoreList":[0,1,2]}