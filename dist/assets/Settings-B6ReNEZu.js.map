{"version":3,"file":"Settings-B6ReNEZu.js","sources":["../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/hard-drive.js","../../node_modules/lucide-react/dist/esm/icons/merge.js","../../node_modules/lucide-react/dist/esm/icons/monitor.js","../../node_modules/lucide-react/dist/esm/icons/moon.js","../../node_modules/lucide-react/dist/esm/icons/palette.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/smartphone.js","../../node_modules/lucide-react/dist/esm/icons/sun.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../src/components/settings/DuplicateDetectionModal.tsx","../../src/components/settings/BackupManagerModal.tsx","../../src/components/settings/ImportWizardModal.tsx","../../src/components/settings/ArchiveManagerModal.tsx","../../src/utils/phoneNumberUpdater.ts","../../src/components/settings/PhoneNumberImportModal.tsx","../../src/pages/Settings.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Database = createLucideIcon(\"Database\", [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n]);\n\nexport { Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HardDrive = createLucideIcon(\"HardDrive\", [\n  [\"line\", { x1: \"22\", x2: \"2\", y1: \"12\", y2: \"12\", key: \"1y58io\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\",\n      key: \"oot6mr\"\n    }\n  ],\n  [\"line\", { x1: \"6\", x2: \"6.01\", y1: \"16\", y2: \"16\", key: \"sgf278\" }],\n  [\"line\", { x1: \"10\", x2: \"10.01\", y1: \"16\", y2: \"16\", key: \"1l4acy\" }]\n]);\n\nexport { HardDrive as default };\n//# sourceMappingURL=hard-drive.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Merge = createLucideIcon(\"Merge\", [\n  [\"path\", { d: \"m8 6 4-4 4 4\", key: \"ybng9g\" }],\n  [\"path\", { d: \"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22\", key: \"1hyw0i\" }],\n  [\"path\", { d: \"m20 22-5-5\", key: \"1m27yz\" }]\n]);\n\nexport { Merge as default };\n//# sourceMappingURL=merge.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Monitor = createLucideIcon(\"Monitor\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"3\", rx: \"2\", key: \"48i651\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"21\", y2: \"21\", key: \"1svkeh\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"17\", y2: \"21\", key: \"vw1qmm\" }]\n]);\n\nexport { Monitor as default };\n//# sourceMappingURL=monitor.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"Moon\", [\n  [\"path\", { d: \"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z\", key: \"a7tn18\" }]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Palette = createLucideIcon(\"Palette\", [\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", key: \"1xcu5\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", key: \"736e4u\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", key: \"clrty\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", key: \"1s4xz9\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z\",\n      key: \"12rzf8\"\n    }\n  ]\n]);\n\nexport { Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Smartphone = createLucideIcon(\"Smartphone\", [\n  [\"rect\", { width: \"14\", height: \"20\", x: \"5\", y: \"2\", rx: \"2\", ry: \"2\", key: \"1yt0o3\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }]\n]);\n\nexport { Smartphone as default };\n//# sourceMappingURL=smartphone.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"Sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","import React, { useState, useMemo } from 'react';\nimport { Copy, Trash2, AlertTriangle, Merge, CheckCircle } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Speaker, Host, Visit } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface DuplicateDetectionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onMerge: (\n    _duplicates: DuplicateGroup[],\n    _action: 'merge' | 'delete',\n    _strategy?: 'keep-first' | 'keep-recent' | 'manual'\n  ) => void;\n}\n\ninterface DuplicateGroup {\n  type: 'speaker' | 'host' | 'visit' | 'message' | 'archivedVisit';\n  items: any[];\n  similarity: number;\n  reason: string[];\n}\n\nexport const DuplicateDetectionModal: React.FC<DuplicateDetectionModalProps> = ({\n  isOpen,\n  onClose: _onClose,\n  onMerge: _onMerge,\n}) => {\n  const { speakers, hosts, visits, speakerMessages, archivedVisits } = useData();\n  const [selectedGroups, setSelectedGroups] = useState<Set<number>>(new Set());\n  const [mergeStrategy, setMergeStrategy] = useState<'keep-first' | 'keep-recent' | 'manual'>(\n    'keep-recent'\n  );\n  const [includeArchives, setIncludeArchives] = useState(false);\n\n  // Seuils de similarité pour la détection des doublons\n  const SIMILARITY_THRESHOLD_HIGH = 95;\n  const SIMILARITY_THRESHOLD_MEDIUM = 90;\n\n  // Algorithme de détection de doublons\n  const duplicateGroups = useMemo(() => {\n    const groups: DuplicateGroup[] = [];\n\n    // 1. Détection de doublons d'orateurs\n    const speakerGroups = new Map<string, Speaker[]>();\n    speakers.forEach((speaker) => {\n      const normalizedName = speaker.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n      const key = normalizedName;\n\n      if (!speakerGroups.has(key)) {\n        speakerGroups.set(key, []);\n      }\n      speakerGroups.get(key)!.push(speaker);\n    });\n\n    speakerGroups.forEach((group) => {\n      if (group.length > 1) {\n        const reasons: string[] = ['Nom identique'];\n\n        // Vérifier téléphone identique\n        const phones = group.map((s) => s.telephone).filter(Boolean);\n        if (phones.length > 1 && new Set(phones).size < phones.length) {\n          reasons.push('Téléphone identique');\n        }\n\n        // Vérifier congrégation identique\n        const congregations = group.map((s) => s.congregation);\n        if (new Set(congregations).size === 1) {\n          reasons.push('Même congrégation');\n        }\n\n        const similarity = SIMILARITY_THRESHOLD_HIGH;\n        groups.push({\n          type: 'speaker',\n          items: group,\n          similarity,\n          reason: reasons,\n        });\n      }\n    });\n\n    // 2. Détection de doublons d'hôtes\n    const hostGroups = new Map<string, Host[]>();\n    hosts.forEach((host) => {\n      const normalizedName = host.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n      const key = normalizedName;\n\n      if (!hostGroups.has(key)) {\n        hostGroups.set(key, []);\n      }\n      hostGroups.get(key)!.push(host);\n    });\n\n    hostGroups.forEach((group) => {\n      if (group.length > 1) {\n        const reasons: string[] = ['Nom identique'];\n\n        const phones = group.map((h) => h.telephone).filter(Boolean);\n        if (phones.length > 1 && new Set(phones).size < phones.length) {\n          reasons.push('Téléphone identique');\n        }\n\n        const addresses = group.map((h) => h.address).filter(Boolean);\n        if (addresses.length > 1 && new Set(addresses).size < addresses.length) {\n          reasons.push('Adresse identique');\n        }\n\n        const similarity = SIMILARITY_THRESHOLD_HIGH;\n        groups.push({\n          type: 'host',\n          items: group,\n          similarity,\n          reason: reasons,\n        });\n      }\n    });\n\n    // 3. Détection de visites en double\n    const visitGroups = new Map<string, Visit[]>();\n    visits.forEach((visit) => {\n      const key = `${visit.id}-${visit.visitDate}-${visit.visitTime}`;\n\n      if (!visitGroups.has(key)) {\n        visitGroups.set(key, []);\n      }\n      visitGroups.get(key)!.push(visit);\n    });\n\n    visitGroups.forEach((group) => {\n      if (group.length > 1) {\n        groups.push({\n          type: 'visit',\n          items: group,\n          similarity: 100,\n          reason: ['Même orateur, date et heure'],\n        });\n      }\n    });\n\n    // 4. Détection de doublons dans les archives (si activé)\n    if (includeArchives && archivedVisits) {\n      // Vérifier les doublons entre archives uniquement\n      const archivedVisitGroups = new Map<string, any[]>();\n      archivedVisits.forEach((visit) => {\n        const key = `${visit.id}-${visit.visitDate}-${visit.visitTime}`;\n\n        if (!archivedVisitGroups.has(key)) {\n          archivedVisitGroups.set(key, []);\n        }\n        archivedVisitGroups.get(key)!.push(visit);\n      });\n\n      archivedVisitGroups.forEach((group) => {\n        if (group.length > 1) {\n          groups.push({\n            type: 'archivedVisit',\n            items: group,\n            similarity: 100,\n            reason: ['Doublon dans les archives - Même orateur, date et heure'],\n          });\n        }\n      });\n\n      // Vérifier les doublons entre visites actuelles et archives\n      const crossVisitGroups = new Map<string, any[]>();\n      visits.forEach((currentVisit) => {\n        const key = `${currentVisit.id}-${currentVisit.visitDate}-${currentVisit.visitTime}`;\n\n        if (!crossVisitGroups.has(key)) {\n          crossVisitGroups.set(key, []);\n        }\n        crossVisitGroups.get(key)!.push({ ...currentVisit, _source: 'current' });\n\n        // Ajouter les visites archivées correspondantes\n        const matchingArchived = archivedVisits.filter(\n          (av) =>\n            av.id === currentVisit.id &&\n            av.visitDate === currentVisit.visitDate &&\n            av.visitTime === currentVisit.visitTime\n        );\n\n        matchingArchived.forEach((archived) => {\n          crossVisitGroups.get(key)!.push({ ...archived, _source: 'archived' });\n        });\n      });\n\n      crossVisitGroups.forEach((group) => {\n        if (group.length > 1) {\n          groups.push({\n            type: 'archivedVisit',\n            items: group,\n            similarity: 100,\n            reason: ['Doublon entre visites actuelles et archivées'],\n          });\n        }\n      });\n    }\n\n    // 5. Détection de messages en double\n    const messageGroups = new Map<string, any[]>();\n    if (speakerMessages && speakerMessages.length > 0) {\n      speakerMessages.forEach((msg) => {\n        // Clé combinant l'ID de l'orateur, le contenu et la date de réception\n        const normalizedContent = msg.message?.trim().toLowerCase() || '';\n        const dateKey = msg.receivedAt ? new Date(msg.receivedAt).toISOString() : 'no-date';\n        // On considère un doublon si même orateur, même message, même date (à la seconde près)\n        const key = `${msg.speakerId}-${normalizedContent}-${dateKey}`;\n\n        if (!messageGroups.has(key)) {\n          messageGroups.set(key, []);\n        }\n        messageGroups.get(key)!.push(msg);\n      });\n    }\n\n    messageGroups.forEach((group) => {\n      if (group.length > 1) {\n        groups.push({\n          type: 'message',\n          items: group,\n          similarity: 100,\n          reason: ['Contenu et date identiques'],\n        });\n      }\n    });\n\n    return groups;\n  }, [speakers, hosts, visits, speakerMessages, archivedVisits, includeArchives]);\n\n  const toggleGroup = (index: number) => {\n    setSelectedGroups((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(index)) {\n        newSet.delete(index);\n      } else {\n        newSet.add(index);\n      }\n      return newSet;\n    });\n  };\n\n  const handleMerge = () => {\n    const selectedDuplicates = Array.from(selectedGroups).map((idx) => duplicateGroups[idx]);\n    _onMerge(selectedDuplicates, 'merge', mergeStrategy);\n    setSelectedGroups(new Set());\n  };\n\n  const handleDelete = () => {\n    // Supprimer les doublons (keep one?) No, modal says \"Delete Duplicates\" which usually calls onMerge(..., delete).\n    // The previous implementation used _onMerge with 'delete'.\n    const selectedDuplicates = Array.from(selectedGroups).map((idx) => duplicateGroups[idx]);\n    _onMerge(selectedDuplicates, 'delete', mergeStrategy);\n    setSelectedGroups(new Set());\n  };\n\n  const getTypeLabel = (type: DuplicateGroup['type']) => {\n    switch (type) {\n      case 'speaker':\n        return 'Orateur';\n      case 'host':\n        return 'Hôte';\n      case 'visit':\n        return 'Visite';\n      case 'archivedVisit':\n        return 'Visite archivée';\n      case 'message':\n        return 'Message';\n      default:\n        return 'Inconnu';\n    }\n  };\n\n  const getTypeColor = (type: DuplicateGroup['type']) => {\n    switch (type) {\n      case 'speaker':\n        return 'bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300';\n      case 'host':\n        return 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300';\n      case 'visit':\n        return 'bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300';\n      case 'archivedVisit':\n        return 'bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-300';\n      case 'message':\n        return 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300';\n      default:\n        return 'bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300';\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={_onClose} title='Détection de doublons' size='xl'>\n      <div className='space-y-6'>\n        {/* Statistiques */}\n        <div className='grid grid-cols-2 md:grid-cols-5 gap-4'>\n          <div className='p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>\n              {duplicateGroups.filter((g) => g.type === 'speaker').length}\n            </div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Orateurs</div>\n          </div>\n          <div className='p-4 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {duplicateGroups.filter((g) => g.type === 'host').length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Hôtes</div>\n          </div>\n          <div className='p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>\n              {duplicateGroups.filter((g) => g.type === 'visit').length}\n            </div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>Visites</div>\n          </div>\n          <div className='p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-orange-600'>\n              {duplicateGroups.filter((g) => g.type === 'archivedVisit').length}\n            </div>\n            <div className='text-sm text-orange-800 dark:text-orange-300'>Archives</div>\n          </div>\n          <div className='p-4 bg-red-50 dark:bg-red-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-red-600'>\n              {duplicateGroups.filter((g) => g.type === 'message').length}\n            </div>\n            <div className='text-sm text-red-800 dark:text-red-300'>Messages</div>\n          </div>\n        </div>\n\n        {/* Option pour inclure les archives */}\n        <div className='flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n          <input\n            type='checkbox'\n            id='include-archives'\n            checked={includeArchives}\n            onChange={(e) => setIncludeArchives(e.target.checked)}\n            className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n          />\n          <label htmlFor='include-archives' className='cursor-pointer'>\n            <div className='font-medium text-gray-900 dark:text-white'>\n              Inclure les archives dans l'analyse\n            </div>\n            <div className='text-sm text-gray-600 dark:text-gray-400'>\n              Détecte les doublons dans les visites archivées et entre visites actuelles/archivées\n            </div>\n          </label>\n        </div>\n\n        {/* Stratégie de fusion */}\n        {selectedGroups.size > 0 && (\n          <div className='p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n            <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n              Stratégie de fusion\n            </label>\n            <div className='space-y-2'>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='radio'\n                  value='keep-recent'\n                  checked={mergeStrategy === 'keep-recent'}\n                  onChange={(e) => setMergeStrategy(e.target.value as any)}\n                  className='w-4 h-4 text-primary-600'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Conserver l'entrée la plus récente\n                </span>\n              </label>\n              <label className='flex items-center gap-2 cursor-pointer'>\n                <input\n                  type='radio'\n                  value='keep-first'\n                  checked={mergeStrategy === 'keep-first'}\n                  onChange={(e) => setMergeStrategy(e.target.value as any)}\n                  className='w-4 h-4 text-primary-600'\n                />\n                <span className='text-sm text-gray-700 dark:text-gray-300'>\n                  Conserver la première entrée\n                </span>\n              </label>\n            </div>\n          </div>\n        )}\n\n        {/* Liste des doublons */}\n        <div className='space-y-4 max-h-96 overflow-y-auto'>\n          {duplicateGroups.length === 0 ? (\n            <div className='text-center py-12'>\n              <CheckCircle className='w-16 h-16 mx-auto mb-4 text-green-500' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucun doublon détecté\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>\n                Vos données sont propres et sans doublons\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className='flex items-center gap-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg mb-2 sticky top-0 z-10'>\n                <input\n                  type='checkbox'\n                  aria-label='Tout sélectionner'\n                  checked={\n                    duplicateGroups.length > 0 && selectedGroups.size === duplicateGroups.length\n                  }\n                  onChange={(e) => {\n                    if (e.target.checked) {\n                      setSelectedGroups(new Set(duplicateGroups.map((_, i) => i)));\n                    } else {\n                      setSelectedGroups(new Set());\n                    }\n                  }}\n                  className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <span className='font-medium text-gray-700 dark:text-gray-300'>\n                  Tout sélectionner ({duplicateGroups.length})\n                </span>\n                {selectedGroups.size > 0 && (\n                  <span className='text-sm text-gray-500 ml-auto'>\n                    {selectedGroups.size} sélectionné(s)\n                  </span>\n                )}\n              </div>\n              {duplicateGroups.map((group, index) => (\n                <Card\n                  key={index}\n                  className={`${\n                    group.similarity >= SIMILARITY_THRESHOLD_MEDIUM\n                      ? 'border-l-4 border-l-red-600'\n                      : 'border-l-4 border-l-orange-500'\n                  } ${selectedGroups.has(index) ? 'ring-2 ring-primary-500' : ''}`}\n                >\n                  <CardBody>\n                    <div className='space-y-4'>\n                      {/* En-tête */}\n                      <div className='flex items-start justify-between'>\n                        <div className='flex items-center gap-3'>\n                          <input\n                            type='checkbox'\n                            checked={selectedGroups.has(index)}\n                            onChange={() => toggleGroup(index)}\n                            aria-label={`Sélectionner ce groupe de doublons ${getTypeLabel(group.type)}`}\n                            className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                          />\n                          <div>\n                            <div className='flex items-center gap-2 mb-1'>\n                              <Badge className={getTypeColor(group.type)}>\n                                {getTypeLabel(group.type)}\n                              </Badge>\n                              <Badge variant='warning'>{group.similarity}% similaire</Badge>\n                            </div>\n                            <div className='flex flex-wrap gap-1'>\n                              {group.reason.map((reason, idx) => (\n                                <span\n                                  key={idx}\n                                  className='text-xs text-gray-600 dark:text-gray-400'\n                                >\n                                  • {reason}\n                                </span>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                        <Copy className='w-5 h-5 text-gray-400' />\n                      </div>\n\n                      {/* Items en double */}\n                      <div className='grid grid-cols-1 md:grid-cols-2 gap-3'>\n                        {group.items.map((item: any, itemIdx) => (\n                          <div key={itemIdx} className='p-3 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n                            <div className='font-medium text-gray-900 dark:text-white mb-2'>\n                              {group.type === 'message'\n                                ? item.subject || 'Message sans sujet'\n                                : item.nom || `Visite ${itemIdx + 1}`}\n                            </div>\n                            <div className='space-y-1 text-sm text-gray-600 dark:text-gray-400'>\n                              {group.type === 'speaker' && (\n                                <>\n                                  <div>Congrégation : {item.congregation}</div>\n                                  {item.telephone && <div>Tél : {item.telephone}</div>}\n                                  {item.email && <div>Email : {item.email}</div>}\n                                  <div>\n                                    Visites : {visits.filter((v) => v.id === item.id).length}\n                                  </div>\n                                  <div>\n                                    Messages :{' '}\n                                    {\n                                      visits.filter(\n                                        (v) => v.id === item.id && v.communicationStatus\n                                      ).length\n                                    }\n                                  </div>\n                                  {item.createdAt && (\n                                    <div className='text-xs'>\n                                      Créé : {new Date(item.createdAt).toLocaleDateString('fr-FR')}\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'host' && (\n                                <>\n                                  {item.telephone && <div>Tél : {item.telephone}</div>}\n                                  {item.address && <div>Adresse : {item.address}</div>}\n                                  {item.createdAt && (\n                                    <div className='text-xs'>\n                                      Créé : {new Date(item.createdAt).toLocaleDateString('fr-FR')}\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'visit' && (\n                                <>\n                                  <div>\n                                    Date : {new Date(item.visitDate).toLocaleDateString('fr-FR')}\n                                  </div>\n                                  <div>Heure : {item.visitTime}</div>\n                                  <div>Statut : {item.status}</div>\n                                </>\n                              )}\n                              {group.type === 'archivedVisit' && (\n                                <>\n                                  <div>\n                                    Date : {new Date(item.visitDate).toLocaleDateString('fr-FR')}\n                                  </div>\n                                  <div>Heure : {item.visitTime || 'N/A'}</div>\n                                  <div>Statut : {item.status}</div>\n                                  {item._source && (\n                                    <div className='mt-1'>\n                                      <Badge\n                                        variant={item._source === 'archived' ? 'warning' : 'success'}\n                                        className='text-xs'\n                                      >\n                                        {item._source === 'archived' ? 'Archivée' : 'Actuelle'}\n                                      </Badge>\n                                    </div>\n                                  )}\n                                </>\n                              )}\n                              {group.type === 'message' && (\n                                <>\n                                  <div>Orateur : {item.speakerName}</div>\n                                  <div>\n                                    Date : {new Date(item.receivedAt).toLocaleDateString('fr-FR')}{' '}\n                                    {new Date(item.receivedAt).toLocaleTimeString('fr-FR')}\n                                  </div>\n                                  <div className='line-clamp-2'>Contenu : {item.message}</div>\n                                </>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </CardBody>\n                </Card>\n              ))}\n            </>\n          )}\n        </div>\n\n        {/* Avertissement */}\n        {selectedGroups.size > 0 && (\n          <div className='flex items-start gap-3 p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n            <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n            <div className='text-sm text-orange-800 dark:text-orange-300'>\n              <strong>Attention :</strong> La fusion des doublons est irréversible. Assurez-vous de\n              vérifier les données avant de continuer.\n            </div>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={_onClose}>\n            Fermer\n          </Button>\n          {selectedGroups.size > 0 && (\n            <>\n              <Button variant='danger' onClick={handleDelete}>\n                <Trash2 className='w-4 h-4 mr-2' />\n                Supprimer les doublons ({selectedGroups.size})\n              </Button>\n              <Button variant='primary' onClick={handleMerge}>\n                <Merge className='w-4 h-4 mr-2' />\n                Fusionner ({selectedGroups.size})\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport {\n  Save,\n  Download,\n  Upload,\n  Clock,\n  HardDrive,\n  Shield,\n  CheckCircle,\n  AlertTriangle,\n} from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\n\ninterface BackupManagerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onBackup: (options: BackupOptions) => Promise<void>;\n  onRestore: (file: File) => Promise<void>;\n}\n\ninterface BackupOptions {\n  includeArchived: boolean;\n  includeSettings: boolean;\n  includeTemplates: boolean;\n  encrypt: boolean;\n  password?: string;\n}\n\ninterface BackupHistory {\n  id: string;\n  date: string;\n  size: number;\n  itemsCount: number;\n  encrypted: boolean;\n}\n\nexport const BackupManagerModal: React.FC<BackupManagerModalProps> = ({\n  isOpen,\n  onClose,\n  onBackup,\n  onRestore,\n}) => {\n  const [activeTab, setActiveTab] = useState<'backup' | 'restore' | 'history'>('backup');\n  const [includeArchived, setIncludeArchived] = useState(true);\n  const [includeSettings, setIncludeSettings] = useState(true);\n  const [includeTemplates, setIncludeTemplates] = useState(true);\n  const [encrypt, setEncrypt] = useState(false);\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isCreating, setIsCreating] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  // Simuler l'historique des sauvegardes (à remplacer par les vraies données)\n  const backupHistory: BackupHistory[] = [\n    {\n      id: '1',\n      date: new Date().toISOString(),\n      size: 2048576,\n      itemsCount: 150,\n      encrypted: true,\n    },\n  ];\n\n  const handleCreateBackup = async () => {\n    if (encrypt && password !== confirmPassword) {\n      alert('Les mots de passe ne correspondent pas');\n      return;\n    }\n\n    setIsCreating(true);\n    try {\n      const options: BackupOptions = {\n        includeArchived,\n        includeSettings,\n        includeTemplates,\n        encrypt,\n        password: encrypt ? password : undefined,\n      };\n\n      await onBackup(options);\n\n      // Réinitialiser le formulaire\n      setPassword('');\n      setConfirmPassword('');\n      setIsCreating(false);\n    } catch (error) {\n      console.error('Erreur lors de la sauvegarde:', error);\n      setIsCreating(false);\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleRestore = async () => {\n    if (!selectedFile) return;\n\n    if (\n      confirm(\n        '⚠️ La restauration remplacera toutes les données actuelles. Êtes-vous sûr de vouloir continuer ?'\n      )\n    ) {\n      try {\n        await onRestore(selectedFile);\n        onClose();\n      } catch (error) {\n        console.error('Erreur lors de la restauration:', error);\n      }\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(2)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Gestion des sauvegardes' size='lg'>\n      <div className='space-y-6'>\n        {/* Onglets */}\n        <div className='flex gap-2 border-b border-gray-200 dark:border-gray-700'>\n          <button\n            onClick={() => setActiveTab('backup')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'backup'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Save className='w-4 h-4 inline mr-2' />\n            Créer une sauvegarde\n          </button>\n          <button\n            onClick={() => setActiveTab('restore')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'restore'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Upload className='w-4 h-4 inline mr-2' />\n            Restaurer\n          </button>\n          <button\n            onClick={() => setActiveTab('history')}\n            className={`px-4 py-2 font-medium transition-colors ${\n              activeTab === 'history'\n                ? 'text-primary-600 border-b-2 border-primary-600'\n                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            <Clock className='w-4 h-4 inline mr-2' />\n            Historique\n          </button>\n        </div>\n\n        {/* Contenu - Créer une sauvegarde */}\n        {activeTab === 'backup' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <HardDrive className='w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-blue-800 dark:text-blue-300'>\n                  <strong>Sauvegarde locale :</strong> Les données seront exportées dans un fichier\n                  JSON téléchargeable. Conservez ce fichier en lieu sûr pour pouvoir restaurer vos\n                  données en cas de besoin.\n                </div>\n              </div>\n            </div>\n\n            {/* Options de sauvegarde */}\n            <div className='space-y-3'>\n              <h4 className='font-medium text-gray-900 dark:text-white'>Données à inclure</h4>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeArchived}\n                  onChange={(e) => setIncludeArchived(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Visites archivées\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Inclure l'historique complet des visites passées\n                  </p>\n                </div>\n              </label>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeSettings}\n                  onChange={(e) => setIncludeSettings(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Paramètres de l'application\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Thème, langue, notifications, etc.\n                  </p>\n                </div>\n              </label>\n\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={includeTemplates}\n                  onChange={(e) => setIncludeTemplates(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                    Templates personnalisés\n                  </span>\n                  <p className='text-xs text-gray-500 dark:text-gray-400'>\n                    Modèles de messages et configurations personnalisées\n                  </p>\n                </div>\n              </label>\n            </div>\n\n            {/* Chiffrement */}\n            <div className='space-y-3'>\n              <label className='flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer'>\n                <input\n                  type='checkbox'\n                  checked={encrypt}\n                  onChange={(e) => setEncrypt(e.target.checked)}\n                  className='w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                />\n                <div className='flex-1'>\n                  <div className='flex items-center gap-2'>\n                    <Shield className='w-4 h-4 text-primary-600' />\n                    <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                      Chiffrer la sauvegarde\n                    </span>\n                  </div>\n                  <p className='text-xs text-gray-500 dark:text-gray-400 mt-1'>\n                    Protéger les données sensibles avec un mot de passe\n                  </p>\n                </div>\n              </label>\n\n              {encrypt && (\n                <div className='space-y-3 pl-4'>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Mot de passe\n                    </label>\n                    <input\n                      type='password'\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                      placeholder='Entrez un mot de passe'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Confirmer le mot de passe\n                    </label>\n                    <input\n                      type='password'\n                      value={confirmPassword}\n                      onChange={(e) => setConfirmPassword(e.target.value)}\n                      className='w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                      placeholder='Confirmez le mot de passe'\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <Button\n              variant='primary'\n              onClick={handleCreateBackup}\n              disabled={isCreating || (encrypt && (!password || password !== confirmPassword))}\n              className='w-full'\n            >\n              <Download className='w-4 h-4 mr-2' />\n              {isCreating ? 'Création en cours...' : 'Créer et télécharger la sauvegarde'}\n            </Button>\n          </div>\n        )}\n\n        {/* Contenu - Restaurer */}\n        {activeTab === 'restore' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-orange-800 dark:text-orange-300'>\n                  <strong>Attention :</strong> La restauration remplacera toutes les données\n                  actuelles. Assurez-vous d'avoir créé une sauvegarde récente avant de continuer.\n                </div>\n              </div>\n            </div>\n\n            <div className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8'>\n              <div className='text-center'>\n                <Upload className='w-12 h-12 mx-auto mb-4 text-gray-400' />\n                <h4 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                  Sélectionner un fichier de sauvegarde\n                </h4>\n                <p className='text-sm text-gray-600 dark:text-gray-400 mb-4'>\n                  Fichier JSON (.json) exporté précédemment\n                </p>\n                <input\n                  type='file'\n                  accept='.json'\n                  onChange={handleFileSelect}\n                  className='hidden'\n                  id='backup-file'\n                />\n                <label htmlFor='backup-file'>\n                  <span className='inline-flex items-center justify-center px-4 py-2 border-2 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 font-medium rounded-lg cursor-pointer transition-colors'>\n                    Parcourir\n                  </span>\n                </label>\n              </div>\n            </div>\n\n            {selectedFile && (\n              <div className='p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg'>\n                <div className='flex items-center justify-between'>\n                  <div className='flex items-center gap-3'>\n                    <CheckCircle className='w-5 h-5 text-green-600' />\n                    <div>\n                      <div className='font-medium text-green-900 dark:text-green-200'>\n                        {selectedFile.name}\n                      </div>\n                      <div className='text-sm text-green-800 dark:text-green-300'>\n                        {formatFileSize(selectedFile.size)}\n                      </div>\n                    </div>\n                  </div>\n                  <Button variant='danger' onClick={handleRestore}>\n                    Restaurer\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Contenu - Historique */}\n        {activeTab === 'history' && (\n          <div className='space-y-4'>\n            {backupHistory.length === 0 ? (\n              <div className='text-center py-12'>\n                <Clock className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                  Aucune sauvegarde\n                </h3>\n                <p className='text-gray-600 dark:text-gray-400'>\n                  Créez votre première sauvegarde pour sécuriser vos données\n                </p>\n              </div>\n            ) : (\n              backupHistory.map((backup) => (\n                <Card key={backup.id}>\n                  <CardBody>\n                    <div className='flex items-center justify-between'>\n                      <div className='flex items-center gap-4'>\n                        <div className='p-3 bg-primary-100 dark:bg-primary-900 rounded-lg'>\n                          <HardDrive className='w-6 h-6 text-primary-600' />\n                        </div>\n                        <div>\n                          <div className='font-medium text-gray-900 dark:text-white'>\n                            {new Date(backup.date).toLocaleDateString('fr-FR', {\n                              day: 'numeric',\n                              month: 'long',\n                              year: 'numeric',\n                              hour: '2-digit',\n                              minute: '2-digit',\n                            })}\n                          </div>\n                          <div className='text-sm text-gray-600 dark:text-gray-400'>\n                            {backup.itemsCount} éléments • {formatFileSize(backup.size)}\n                            {backup.encrypted && (\n                              <Badge variant='default' className='ml-2'>\n                                <Shield className='w-3 h-3 mr-1' />\n                                Chiffré\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      <Button variant='outline' size='sm'>\n                        <Download className='w-4 h-4' />\n                      </Button>\n                    </div>\n                  </CardBody>\n                </Card>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Fermer\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState } from 'react';\nimport { Upload, FileText, CheckCircle, AlertTriangle, ArrowRight, Download } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { ImportResult } from '@/types';\n\ninterface ImportWizardModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onImport: (data: any, mapping: ColumnMapping) => Promise<ImportResult>;\n}\n\ninterface ColumnMapping {\n  [key: string]: string; // clé = colonne source, valeur = champ cible\n}\n\ntype ImportStep = 'upload' | 'mapping' | 'preview' | 'import' | 'result';\n\nconst AVAILABLE_FIELDS = {\n  speakers: [\n    { key: 'nom', label: 'Nom', required: true },\n    { key: 'congregation', label: 'Congrégation', required: true },\n    { key: 'telephone', label: 'Téléphone', required: false },\n    { key: 'email', label: 'Email', required: false },\n    { key: 'gender', label: 'Genre (male/female/couple)', required: false },\n  ],\n  visits: [\n    { key: 'nom', label: 'Nom orateur', required: true },\n    { key: 'visitDate', label: 'Date (YYYY-MM-DD)', required: true },\n    { key: 'visitTime', label: 'Heure (HH:MM)', required: true },\n    { key: 'talkNoOrType', label: 'N° discours', required: false },\n    { key: 'talkTheme', label: 'Thème discours', required: false },\n    { key: 'host', label: 'Hôte', required: false },\n    { key: 'status', label: 'Statut', required: false },\n  ],\n  hosts: [\n    { key: 'nom', label: 'Nom', required: true },\n    { key: 'telephone', label: 'Téléphone', required: false },\n    { key: 'email', label: 'Email', required: false },\n    { key: 'address', label: 'Adresse', required: false },\n    { key: 'gender', label: 'Genre (male/female/couple)', required: false },\n  ],\n};\n\nexport const ImportWizardModal: React.FC<ImportWizardModalProps> = ({\n  isOpen,\n  onClose,\n  onImport,\n}) => {\n  const [currentStep, setCurrentStep] = useState<ImportStep>('upload');\n  const [importType, setImportType] = useState<'speakers' | 'visits' | 'hosts'>('speakers');\n  const [file, setFile] = useState<File | null>(null);\n  const [parsedData, setParsedData] = useState<any[]>([]);\n  const [columns, setColumns] = useState<string[]>([]);\n  const [mapping, setMapping] = useState<ColumnMapping>({});\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) return;\n\n    setFile(selectedFile);\n\n    // Parser le fichier CSV\n    const text = await selectedFile.text();\n    const lines = text.split('\\n').filter((line) => line.trim());\n\n    if (lines.length === 0) return;\n\n    // Extraire les colonnes (première ligne)\n    const headers = lines[0].split(',').map((h) => h.trim().replace(/\"/g, ''));\n    setColumns(headers);\n\n    // Parser les données\n    const data = lines.slice(1).map((line) => {\n      const values = line.split(',').map((v) => v.trim().replace(/\"/g, ''));\n      const row: any = {};\n      headers.forEach((header, index) => {\n        row[header] = values[index] || '';\n      });\n      return row;\n    });\n\n    setParsedData(data);\n    setCurrentStep('mapping');\n  };\n\n  const handleMappingChange = (sourceColumn: string, targetField: string) => {\n    setMapping((prev) => ({\n      ...prev,\n      [sourceColumn]: targetField,\n    }));\n  };\n\n  const handleImport = async () => {\n    setCurrentStep('import');\n\n    try {\n      // Transformer les données selon le mapping\n      const transformedData = parsedData.map((row) => {\n        const transformed: any = {};\n        Object.entries(mapping).forEach(([sourceCol, targetField]) => {\n          if (targetField && row[sourceCol]) {\n            transformed[targetField] = row[sourceCol];\n          }\n        });\n        return transformed;\n      });\n\n      const result = await onImport(transformedData, mapping);\n      setImportResult(result);\n      setCurrentStep('result');\n    } catch (error) {\n      console.error(\"Erreur lors de l'import:\", error);\n    }\n  };\n\n  const getMappingProgress = () => {\n    const requiredFields = AVAILABLE_FIELDS[importType].filter((f) => f.required);\n    const mappedRequired = requiredFields.filter((f) => Object.values(mapping).includes(f.key));\n    return `${mappedRequired.length}/${requiredFields.length}`;\n  };\n\n  const canProceed = () => {\n    const requiredFields = AVAILABLE_FIELDS[importType].filter((f) => f.required);\n    return requiredFields.every((f) => Object.values(mapping).includes(f.key));\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Assistant d'importation\" size='xl'>\n      <div className='space-y-6'>\n        {/* Indicateur de progression */}\n        <div className='flex items-center justify-between'>\n          {['upload', 'mapping', 'preview', 'import', 'result'].map((step, index) => (\n            <React.Fragment key={step}>\n              <div\n                className={`flex items-center gap-2 ${\n                  currentStep === step\n                    ? 'text-primary-600'\n                    : ['upload', 'mapping', 'preview'].indexOf(currentStep) > index\n                      ? 'text-green-600'\n                      : 'text-gray-400'\n                }`}\n              >\n                <div\n                  className={`w-8 h-8 rounded-full flex items-center justify-center font-medium ${\n                    currentStep === step\n                      ? 'bg-primary-100 dark:bg-primary-900/20'\n                      : ['upload', 'mapping', 'preview'].indexOf(currentStep) > index\n                        ? 'bg-green-100 dark:bg-green-900/20'\n                        : 'bg-gray-100 dark:bg-gray-800'\n                  }`}\n                >\n                  {index + 1}\n                </div>\n                <span className='text-sm font-medium hidden md:inline'>\n                  {step === 'upload' && 'Fichier'}\n                  {step === 'mapping' && 'Mapping'}\n                  {step === 'preview' && 'Aperçu'}\n                  {step === 'import' && 'Import'}\n                  {step === 'result' && 'Résultat'}\n                </span>\n              </div>\n              {index < 4 && <ArrowRight className='w-4 h-4 text-gray-400' />}\n            </React.Fragment>\n          ))}\n        </div>\n\n        {/* Étape 1: Upload */}\n        {currentStep === 'upload' && (\n          <div className='space-y-6'>\n            <div>\n              <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n                Type de données à importer\n              </label>\n              <div className='grid grid-cols-3 gap-3'>\n                {[\n                  { value: 'speakers' as const, label: 'Orateurs', icon: '👤' },\n                  { value: 'visits' as const, label: 'Visites', icon: '📅' },\n                  { value: 'hosts' as const, label: 'Hôtes', icon: '🏠' },\n                ].map((type) => (\n                  <button\n                    key={type.value}\n                    onClick={() => setImportType(type.value)}\n                    className={`p-4 rounded-lg border-2 transition-all ${\n                      importType === type.value\n                        ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    <div className='text-3xl mb-2'>{type.icon}</div>\n                    <div className='font-medium text-gray-900 dark:text-white'>{type.label}</div>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className='border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12'>\n              <div className='text-center'>\n                <Upload className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n                <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n                  Sélectionner un fichier CSV\n                </h3>\n                <p className='text-sm text-gray-600 dark:text-gray-400 mb-4'>\n                  Fichier CSV avec en-têtes de colonnes\n                </p>\n                <input\n                  type='file'\n                  accept='.csv'\n                  onChange={handleFileSelect}\n                  className='hidden'\n                  id='csv-file'\n                />\n                <label htmlFor='csv-file'>\n                  <span className='inline-flex items-center justify-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg cursor-pointer transition-colors'>\n                    <Upload className='w-4 h-4 mr-2' />\n                    Parcourir\n                  </span>\n                </label>\n              </div>\n            </div>\n\n            <div className='p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg'>\n              <div className='flex items-start gap-3'>\n                <FileText className='w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5' />\n                <div className='text-sm text-blue-800 dark:text-blue-300'>\n                  <strong>Format attendu :</strong> Fichier CSV avec la première ligne contenant les\n                  noms de colonnes. Les colonnes seront mappées à l'étape suivante.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 2: Mapping */}\n        {currentStep === 'mapping' && (\n          <div className='space-y-6'>\n            <div className='flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n              <div>\n                <h4 className='font-medium text-gray-900 dark:text-white'>{file?.name}</h4>\n                <p className='text-sm text-gray-600 dark:text-gray-400'>\n                  {parsedData.length} ligne(s) détectée(s)\n                </p>\n              </div>\n              <Badge variant='default'>Champs requis : {getMappingProgress()}</Badge>\n            </div>\n\n            <div>\n              <h4 className='font-medium text-gray-900 dark:text-white mb-3'>\n                Mapper les colonnes\n              </h4>\n              <div className='space-y-3'>\n                {columns.map((column) => (\n                  <div key={column} className='flex items-center gap-3'>\n                    <div className='flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg'>\n                      <span className='text-sm font-medium text-gray-900 dark:text-white'>\n                        {column}\n                      </span>\n                    </div>\n                    <ArrowRight className='w-4 h-4 text-gray-400' />\n                    <select\n                      value={mapping[column] || ''}\n                      onChange={(e) => handleMappingChange(column, e.target.value)}\n                      aria-label={`Mapper la colonne ${column}`}\n                      className='flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n                    >\n                      <option value=''>-- Ignorer --</option>\n                      {AVAILABLE_FIELDS[importType].map((field) => (\n                        <option key={field.key} value={field.key}>\n                          {field.label} {field.required && '*'}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='secondary' onClick={() => setCurrentStep('upload')}>\n                Retour\n              </Button>\n              <Button\n                variant='primary'\n                onClick={() => setCurrentStep('preview')}\n                disabled={!canProceed()}\n              >\n                Aperçu\n                <ArrowRight className='w-4 h-4 ml-2' />\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 3: Aperçu */}\n        {currentStep === 'preview' && (\n          <div className='space-y-6'>\n            <div className='p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg'>\n              <div className='flex items-center gap-2 mb-2'>\n                <CheckCircle className='w-5 h-5 text-green-600' />\n                <span className='font-medium text-green-900 dark:text-green-200'>\n                  Prêt à importer\n                </span>\n              </div>\n              <p className='text-sm text-green-800 dark:text-green-300'>\n                {parsedData.length}{' '}\n                {importType === 'speakers'\n                  ? 'orateur(s)'\n                  : importType === 'visits'\n                    ? 'visite(s)'\n                    : 'hôte(s)'}{' '}\n                seront importé(s)\n              </p>\n            </div>\n\n            <div>\n              <h4 className='font-medium text-gray-900 dark:text-white mb-3'>\n                Aperçu des données (5 premières lignes)\n              </h4>\n              <div className='overflow-x-auto'>\n                <table className='w-full text-sm'>\n                  <thead className='bg-gray-50 dark:bg-gray-800'>\n                    <tr>\n                      {AVAILABLE_FIELDS[importType]\n                        .filter((f) => Object.values(mapping).includes(f.key))\n                        .map((field) => (\n                          <th\n                            key={field.key}\n                            className='px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-300'\n                          >\n                            {field.label}\n                          </th>\n                        ))}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {parsedData.slice(0, 5).map((row, index) => (\n                      <tr key={index} className='border-t border-gray-200 dark:border-gray-700'>\n                        {AVAILABLE_FIELDS[importType]\n                          .filter((f) => Object.values(mapping).includes(f.key))\n                          .map((field) => {\n                            const sourceCol = Object.keys(mapping).find(\n                              (k) => mapping[k] === field.key\n                            );\n                            return (\n                              <td\n                                key={field.key}\n                                className='px-4 py-2 text-gray-900 dark:text-white'\n                              >\n                                {sourceCol ? row[sourceCol] : '-'}\n                              </td>\n                            );\n                          })}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='secondary' onClick={() => setCurrentStep('mapping')}>\n                Retour\n              </Button>\n              <Button variant='primary' onClick={handleImport}>\n                <Download className='w-4 h-4 mr-2' />\n                Lancer l'importation\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Étape 4: Import en cours */}\n        {currentStep === 'import' && (\n          <div className='py-12 text-center'>\n            <div className='w-16 h-16 mx-auto mb-4 border-4 border-primary-600 border-t-transparent rounded-full animate-spin'></div>\n            <h3 className='text-lg font-medium text-gray-900 dark:text-white mb-2'>\n              Importation en cours...\n            </h3>\n            <p className='text-sm text-gray-600 dark:text-gray-400'>\n              Veuillez patienter pendant le traitement des données\n            </p>\n          </div>\n        )}\n\n        {/* Étape 5: Résultat */}\n        {currentStep === 'result' && importResult && (\n          <div className='space-y-6'>\n            <div className='text-center py-8'>\n              <CheckCircle className='w-20 h-20 mx-auto mb-4 text-green-500' />\n              <h3 className='text-2xl font-bold text-gray-900 dark:text-white mb-2'>\n                Importation terminée !\n              </h3>\n            </div>\n\n            <div className='grid grid-cols-2 gap-4'>\n              <Card>\n                <CardBody className='text-center'>\n                  <div className='text-3xl font-bold text-green-600'>\n                    {importResult.speakersAdded +\n                      importResult.visitsAdded +\n                      importResult.hostsAdded}\n                  </div>\n                  <div className='text-sm text-gray-600 dark:text-gray-400'>Ajouté(s)</div>\n                </CardBody>\n              </Card>\n              <Card>\n                <CardBody className='text-center'>\n                  <div className='text-3xl font-bold text-blue-600'>\n                    {importResult.speakersUpdated +\n                      importResult.visitsUpdated +\n                      importResult.hostsUpdated}\n                  </div>\n                  <div className='text-sm text-gray-600 dark:text-gray-400'>Mis à jour</div>\n                </CardBody>\n              </Card>\n            </div>\n\n            {importResult.errors.length > 0 && (\n              <div className='p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg'>\n                <div className='flex items-start gap-3'>\n                  <AlertTriangle className='w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5' />\n                  <div>\n                    <h4 className='font-medium text-orange-900 dark:text-orange-200 mb-2'>\n                      {importResult.errors.length} erreur(s) détectée(s)\n                    </h4>\n                    <ul className='text-sm text-orange-800 dark:text-orange-300 space-y-1'>\n                      {importResult.errors.slice(0, 5).map((error, index) => (\n                        <li key={index}>• {error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className='flex gap-3 justify-end'>\n              <Button variant='primary' onClick={onClose}>\n                Terminer\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport { Archive, Search, Calendar, RotateCcw, Trash2, Download } from 'lucide-react';\nimport { Modal } from '@/components/ui/Modal';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Card, CardBody } from '@/components/ui/Card';\nimport { Visit } from '@/types';\nimport { useData } from '@/contexts/DataContext';\n\ninterface ArchiveManagerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRestore: (visitIds: string[]) => void;\n  onDelete: (visitIds: string[]) => void;\n  onExport: (visitIds: string[]) => void;\n}\n\nexport const ArchiveManagerModal: React.FC<ArchiveManagerModalProps> = ({\n  isOpen,\n  onClose,\n  onRestore,\n  onDelete,\n  onExport,\n}) => {\n  const { archivedVisits } = useData();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedYear, setSelectedYear] = useState<number | 'all'>('all');\n  const [selectedStatus, setSelectedStatus] = useState<Visit['status'] | 'all'>('all');\n  const [selectedVisits, setSelectedVisits] = useState<Set<string>>(new Set());\n  const [sortBy, setSortBy] = useState<'date' | 'speaker' | 'congregation'>('date');\n\n  // Années disponibles\n  const availableYears = useMemo(() => {\n    const years = new Set<number>();\n    archivedVisits.forEach((visit) => {\n      const year = new Date(visit.visitDate).getFullYear();\n      years.add(year);\n    });\n    return Array.from(years).sort((a, b) => b - a);\n  }, [archivedVisits]);\n\n  // Filtrer et trier les visites\n  const filteredVisits = useMemo(() => {\n    const filtered = archivedVisits.filter((visit) => {\n      // Recherche\n      if (searchTerm) {\n        const search = searchTerm.toLowerCase();\n        if (\n          !visit.nom.toLowerCase().includes(search) &&\n          !visit.congregation.toLowerCase().includes(search) &&\n          !visit.talkTheme?.toLowerCase().includes(search)\n        ) {\n          return false;\n        }\n      }\n\n      // Année\n      if (selectedYear !== 'all') {\n        const year = new Date(visit.visitDate).getFullYear();\n        if (year !== selectedYear) return false;\n      }\n\n      // Statut\n      if (selectedStatus !== 'all' && visit.status !== selectedStatus) {\n        return false;\n      }\n\n      return true;\n    });\n\n    // Tri\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'date':\n          return new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime();\n        case 'speaker':\n          return a.nom.localeCompare(b.nom);\n        case 'congregation':\n          return a.congregation.localeCompare(b.congregation);\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [archivedVisits, searchTerm, selectedYear, selectedStatus, sortBy]);\n\n  const toggleVisit = (visitId: string) => {\n    setSelectedVisits((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(visitId)) {\n        newSet.delete(visitId);\n      } else {\n        newSet.add(visitId);\n      }\n      return newSet;\n    });\n  };\n\n  const selectAll = () => {\n    setSelectedVisits(new Set(filteredVisits.map((v) => v.visitId)));\n  };\n\n  const deselectAll = () => {\n    setSelectedVisits(new Set());\n  };\n\n  const handleRestore = () => {\n    if (selectedVisits.size > 0) {\n      onRestore(Array.from(selectedVisits));\n      setSelectedVisits(new Set());\n    }\n  };\n\n  const handleDelete = () => {\n    if (selectedVisits.size > 0) {\n      if (\n        confirm(\n          `⚠️ Êtes-vous sûr de vouloir supprimer définitivement ${selectedVisits.size} visite(s) ?`\n        )\n      ) {\n        onDelete(Array.from(selectedVisits));\n        setSelectedVisits(new Set());\n      }\n    }\n  };\n\n  const handleExport = () => {\n    if (selectedVisits.size > 0) {\n      onExport(Array.from(selectedVisits));\n    }\n  };\n\n  const getStatusBadge = (status: Visit['status']) => {\n    switch (status) {\n      case 'completed':\n        return <Badge variant='success'>Terminé</Badge>;\n      case 'cancelled':\n        return <Badge variant='danger'>Annulé</Badge>;\n      default:\n        return <Badge variant='default'>{status}</Badge>;\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title='Gestion des archives' size='xl'>\n      <div className='space-y-6'>\n        {/* Statistiques */}\n        <div className='grid grid-cols-4 gap-4'>\n          <div className='p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-blue-600'>{archivedVisits.length}</div>\n            <div className='text-sm text-blue-800 dark:text-blue-300'>Total</div>\n          </div>\n          <div className='p-3 bg-green-50 dark:bg-green-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-green-600'>\n              {archivedVisits.filter((v) => v.status === 'completed').length}\n            </div>\n            <div className='text-sm text-green-800 dark:text-green-300'>Terminées</div>\n          </div>\n          <div className='p-3 bg-red-50 dark:bg-red-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-red-600'>\n              {archivedVisits.filter((v) => v.status === 'cancelled').length}\n            </div>\n            <div className='text-sm text-red-800 dark:text-red-300'>Annulées</div>\n          </div>\n          <div className='p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg'>\n            <div className='text-2xl font-bold text-purple-600'>{selectedVisits.size}</div>\n            <div className='text-sm text-purple-800 dark:text-purple-300'>Sélectionnées</div>\n          </div>\n        </div>\n\n        {/* Filtres */}\n        <div className='space-y-3'>\n          {/* Recherche */}\n          <div className='relative'>\n            <Search className='absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400' />\n            <input\n              type='text'\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder='Rechercher par orateur, congrégation ou discours...'\n              className='w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            />\n          </div>\n\n          {/* Filtres rapides */}\n          <div className='flex gap-3 flex-wrap'>\n            <select\n              value={selectedYear}\n              onChange={(e) =>\n                setSelectedYear(e.target.value === 'all' ? 'all' : Number(e.target.value))\n              }\n              aria-label='Filtrer par année'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='all'>Toutes les années</option>\n              {availableYears.map((year) => (\n                <option key={year} value={year}>\n                  {year}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={selectedStatus}\n              onChange={(e) => setSelectedStatus(e.target.value as any)}\n              aria-label='Filtrer par statut'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='all'>Tous les statuts</option>\n              <option value='completed'>Terminées</option>\n              <option value='cancelled'>Annulées</option>\n            </select>\n\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as any)}\n              aria-label='Trier les archives'\n              className='px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent'\n            >\n              <option value='date'>Trier par date</option>\n              <option value='speaker'>Trier par orateur</option>\n              <option value='congregation'>Trier par congrégation</option>\n            </select>\n\n            <div className='flex-1'></div>\n\n            <Button variant='outline' size='sm' onClick={selectAll}>\n              Tout sélectionner\n            </Button>\n            <Button variant='outline' size='sm' onClick={deselectAll}>\n              Tout désélectionner\n            </Button>\n          </div>\n        </div>\n\n        {/* Liste des archives */}\n        <div className='space-y-2 max-h-96 overflow-y-auto'>\n          {filteredVisits.length === 0 ? (\n            <div className='text-center py-12'>\n              <Archive className='w-16 h-16 mx-auto mb-4 text-gray-400' />\n              <h3 className='text-lg font-semibold text-gray-900 dark:text-white mb-2'>\n                Aucune archive trouvée\n              </h3>\n              <p className='text-gray-600 dark:text-gray-400'>Modifiez vos critères de recherche</p>\n            </div>\n          ) : (\n            filteredVisits.map((visit) => (\n              <Card\n                key={visit.visitId}\n                hoverable\n                className={`cursor-pointer transition-all ${\n                  selectedVisits.has(visit.visitId)\n                    ? 'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                    : ''\n                }`}\n                onClick={() => toggleVisit(visit.visitId)}\n              >\n                <CardBody>\n                  <div className='flex items-center gap-4'>\n                    <input\n                      type='checkbox'\n                      checked={selectedVisits.has(visit.visitId)}\n                      onChange={() => toggleVisit(visit.visitId)}\n                      onClick={(e) => e.stopPropagation()}\n                      aria-label={`Sélectionner ${visit.nom}`}\n                      className='w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500'\n                    />\n\n                    <div className='flex-1'>\n                      <div className='flex items-center gap-2 mb-1'>\n                        <h4 className='font-semibold text-gray-900 dark:text-white'>{visit.nom}</h4>\n                        {getStatusBadge(visit.status)}\n                      </div>\n                      <div className='text-sm text-gray-600 dark:text-gray-400 space-y-1'>\n                        <p>\n                          <Calendar className='w-3 h-3 inline mr-1' />\n                          {new Date(visit.visitDate).toLocaleDateString('fr-FR', {\n                            day: 'numeric',\n                            month: 'long',\n                            year: 'numeric',\n                          })}\n                        </p>\n                        <p>{visit.congregation}</p>\n                        {visit.talkTheme && (\n                          <p className='text-xs'>\n                            {visit.talkNoOrType} - {visit.talkTheme}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className='flex gap-3 justify-between pt-4 border-t border-gray-200 dark:border-gray-700'>\n          <Button variant='secondary' onClick={onClose}>\n            Fermer\n          </Button>\n\n          {selectedVisits.size > 0 && (\n            <div className='flex gap-3'>\n              <Button variant='outline' onClick={handleExport}>\n                <Download className='w-4 h-4 mr-2' />\n                Exporter ({selectedVisits.size})\n              </Button>\n              <Button variant='danger' onClick={handleDelete}>\n                <Trash2 className='w-4 h-4 mr-2' />\n                Supprimer ({selectedVisits.size})\n              </Button>\n              <Button variant='primary' onClick={handleRestore}>\n                <RotateCcw className='w-4 h-4 mr-2' />\n                Restaurer ({selectedVisits.size})\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","// ============================================================================\n// UTILITAIRE DE MISE À JOUR DES NUMÉROS DE TÉLÉPHONE\n// ============================================================================\n\nimport { Speaker, Host } from '@/types';\n\n/**\n * Interface pour les données d'un orateur/hôte avec téléphone\n */\ninterface PersonWithPhone {\n  nom: string;\n  telephone?: string;\n  congregation?: string;\n}\n\n/**\n * Fonction pour extraire les numéros de téléphone du JSON\n */\nexport function extractPhoneNumbersFromJson(jsonData: any) {\n  const speakersWithPhones: PersonWithPhone[] = [];\n  const hostsWithPhones: PersonWithPhone[] = [];\n\n  // Extraire des orateurs\n  if (jsonData.speakers) {\n    jsonData.speakers.forEach((speaker: any) => {\n      if (speaker.telephone && speaker.telephone.trim()) {\n        speakersWithPhones.push({\n          nom: speaker.nom,\n          telephone: speaker.telephone,\n          congregation: speaker.congregation,\n        });\n      }\n    });\n  }\n\n  // Extraire des visites (les visites contiennent aussi les infos des orateurs)\n  if (jsonData.visits) {\n    jsonData.visits.forEach((visit: any) => {\n      if (visit.telephone && visit.telephone.trim()) {\n        speakersWithPhones.push({\n          nom: visit.nom,\n          telephone: visit.telephone,\n          congregation: visit.congregation,\n        });\n      }\n    });\n  }\n\n  // Extraire des hôtes\n  if (jsonData.hosts) {\n    jsonData.hosts.forEach((host: any) => {\n      if (host.telephone && host.telephone.trim()) {\n        hostsWithPhones.push({\n          nom: host.nom,\n          telephone: host.telephone,\n        });\n      }\n    });\n  }\n\n  return { speakersWithPhones, hostsWithPhones };\n}\n\n/**\n * Fonction pour mettre à jour les numéros de téléphone des orateurs\n */\nexport function updateSpeakersWithPhones(\n  existingSpeakers: Speaker[],\n  speakersWithPhones: PersonWithPhone[]\n): Speaker[] {\n  const phoneMap = new Map<string, string>();\n\n  // Créer une map nom -> téléphone (en normalisant les noms)\n  speakersWithPhones.forEach((person) => {\n    const normalizedName = person.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    phoneMap.set(normalizedName, person.telephone!);\n  });\n\n  // Mettre à jour les orateurs existants\n  return existingSpeakers.map((speaker) => {\n    const normalizedName = speaker.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    const phoneFromJson = phoneMap.get(normalizedName);\n\n    // Si on trouve un numéro et que l'orateur n'en a pas, on le met à jour\n    if (phoneFromJson && !speaker.telephone) {\n      return {\n        ...speaker,\n        telephone: phoneFromJson,\n        updatedAt: new Date().toISOString(),\n      };\n    }\n\n    return speaker;\n  });\n}\n\n/**\n * Fonction pour mettre à jour les numéros de téléphone des hôtes\n */\nexport function updateHostsWithPhones(\n  existingHosts: Host[],\n  hostsWithPhones: PersonWithPhone[]\n): Host[] {\n  const phoneMap = new Map<string, string>();\n\n  // Créer une map nom -> téléphone\n  hostsWithPhones.forEach((host) => {\n    const normalizedName = host.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    phoneMap.set(normalizedName, host.telephone!);\n  });\n\n  // Mettre à jour les hôtes existants\n  return existingHosts.map((host) => {\n    const normalizedName = host.nom.toLowerCase().replace(/\\s+/g, ' ').trim();\n    const phoneFromJson = phoneMap.get(normalizedName);\n\n    // Si on trouve un numéro et que l'hôte n'en a pas, on le met à jour\n    if (phoneFromJson && !host.telephone) {\n      return {\n        ...host,\n        telephone: phoneFromJson,\n        updatedAt: new Date().toISOString(),\n      };\n    }\n\n    return host;\n  });\n}\n\n/**\n * Fonction pour générer un rapport des modifications\n */\nexport function generateUpdateReport(\n  originalSpeakers: Speaker[],\n  updatedSpeakers: Speaker[],\n  originalHosts: Host[],\n  updatedHosts: Host[]\n): {\n  speakersUpdated: number;\n  hostsUpdated: number;\n  speakerDetails: string[];\n  hostDetails: string[];\n} {\n  const speakerDetails: string[] = [];\n  const hostDetails: string[] = [];\n\n  let speakersUpdated = 0;\n  let hostsUpdated = 0;\n\n  // Rapport des orateurs\n  originalSpeakers.forEach((original, index) => {\n    const updated = updatedSpeakers[index];\n    if (original.telephone !== updated.telephone && updated.telephone) {\n      speakersUpdated++;\n      speakerDetails.push(`✓ ${updated.nom}: +${updated.telephone}`);\n    }\n  });\n\n  // Rapport des hôtes\n  originalHosts.forEach((original, index) => {\n    const updated = updatedHosts[index];\n    if (original.telephone !== updated.telephone && updated.telephone) {\n      hostsUpdated++;\n      hostDetails.push(`✓ ${updated.nom}: +${updated.telephone}`);\n    }\n  });\n\n  return {\n    speakersUpdated,\n    hostsUpdated,\n    speakerDetails,\n    hostDetails,\n  };\n}\n\n/**\n * Fonction principale pour mettre à jour tous les numéros\n */\nexport function processPhoneNumberUpdate(\n  jsonData: any,\n  currentData: {\n    speakers: Speaker[];\n    hosts: Host[];\n  }\n): {\n  updatedSpeakers: Speaker[];\n  updatedHosts: Host[];\n  report: ReturnType<typeof generateUpdateReport>;\n} {\n  // Extraire les numéros du JSON\n  const { speakersWithPhones, hostsWithPhones } = extractPhoneNumbersFromJson(jsonData);\n\n  // Mettre à jour les orateurs\n  const updatedSpeakers = updateSpeakersWithPhones(currentData.speakers, speakersWithPhones);\n\n  // Mettre à jour les hôtes\n  const updatedHosts = updateHostsWithPhones(currentData.hosts, hostsWithPhones);\n\n  // Générer le rapport\n  const report = generateUpdateReport(\n    currentData.speakers,\n    updatedSpeakers,\n    currentData.hosts,\n    updatedHosts\n  );\n\n  return {\n    updatedSpeakers,\n    updatedHosts,\n    report,\n  };\n}\n","import React, { useState } from 'react';\nimport { X, Upload, Phone, Users, MapPin, CheckCircle, AlertCircle } from 'lucide-react';\nimport { useData } from '@/contexts/DataContext';\nimport { Speaker } from '@/types';\nimport { processPhoneNumberUpdate } from '@/utils/phoneNumberUpdater';\n\ninterface PhoneNumberImportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface ImportResult {\n  speakersUpdated: number;\n  hostsUpdated: number;\n  speakerDetails: string[];\n  hostDetails: string[];\n  errors: string[];\n}\n\nexport function PhoneNumberImportModal({ isOpen, onClose }: PhoneNumberImportModalProps) {\n  const { speakers, hosts, updateSpeaker, updateHost } = useData();\n  const [importData, setImportData] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [result, setResult] = useState<ImportResult | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const content = e.target?.result as string;\n        setImportData(content);\n        setShowPreview(true);\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!importData.trim()) return;\n\n    setIsLoading(true);\n    try {\n      const jsonData = JSON.parse(importData);\n\n      // Utiliser la fonction de traitement\n      const { updatedSpeakers, updatedHosts, report } = processPhoneNumberUpdate(jsonData, {\n        speakers,\n        hosts,\n      });\n\n      // Appliquer les mises à jour via le DataContext - CORRECTION: comparer par ID et par téléphone manquant\n      const speakerUpdates: Speaker[] = [];\n\n      // Trouver les orateurs qui ont besoin d'être mis à jour\n      speakers.forEach((existingSpeaker) => {\n        const updatedSpeaker = updatedSpeakers.find((us) => us.id === existingSpeaker.id);\n        if (\n          updatedSpeaker &&\n          (!existingSpeaker.telephone || existingSpeaker.telephone.trim() === '') &&\n          updatedSpeaker.telephone &&\n          updatedSpeaker.telephone.trim() !== ''\n        ) {\n          speakerUpdates.push(updatedSpeaker);\n        }\n      });\n\n      // Trouver les hôtes qui ont besoin d'être mis à jour\n      const hostUpdates = hosts.filter((existingHost) => {\n        const updatedHost = updatedHosts.find((uh) => uh.nom === existingHost.nom);\n        return (\n          updatedHost &&\n          (!existingHost.telephone || existingHost.telephone.trim() === '') &&\n          updatedHost.telephone &&\n          updatedHost.telephone.trim() !== ''\n        );\n      });\n\n      console.log('🔄 Mise à jour des orateurs:', speakerUpdates.length);\n      console.log('🔄 Mise à jour des hôtes:', hostUpdates.length);\n\n      // Mettre à jour les orateurs UN PAR UN pour forcer la réactualisation\n      for (const updatedSpeaker of speakerUpdates) {\n        console.log(`📱 Mise à jour orateur: ${updatedSpeaker.nom} -> ${updatedSpeaker.telephone}`);\n        updateSpeaker(updatedSpeaker);\n        // Petit délai pour laisser le temps au state de se mettre à jour\n        await new Promise((resolve) => setTimeout(resolve, 50));\n      }\n\n      // Mettre à jour les hôtes UN PAR UN\n      for (const updatedHost of hostUpdates) {\n        console.log(`🏠 Mise à jour hôte: ${updatedHost.nom} -> ${updatedHost.telephone}`);\n        updateHost(updatedHost.nom, { telephone: updatedHost.telephone });\n        await new Promise((resolve) => setTimeout(resolve, 50));\n      }\n\n      // Forcer une réactualisation des données après un court délai\n      setTimeout(() => {\n        // Utiliser un dispatch d'événement pour notifier les composants\n        window.dispatchEvent(\n          new CustomEvent('phoneNumbersUpdated', {\n            detail: {\n              speakersUpdated: speakerUpdates.length,\n              hostsUpdated: hostUpdates.length,\n            },\n          })\n        );\n      }, 100);\n\n      setResult({\n        speakersUpdated: report.speakersUpdated,\n        hostsUpdated: report.hostsUpdated,\n        speakerDetails: report.speakerDetails,\n        hostDetails: report.hostDetails,\n        errors: [],\n      });\n    } catch (error) {\n      setResult({\n        speakersUpdated: 0,\n        hostsUpdated: 0,\n        speakerDetails: [],\n        hostDetails: [],\n        errors: [error instanceof Error ? error.message : 'Erreur lors du parsing JSON'],\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setImportData('');\n    setResult(null);\n    setShowPreview(false);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className='fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50'>\n      <div className='bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden'>\n        {/* Header */}\n        <div className='flex items-center justify-between p-6 border-b'>\n          <div className='flex items-center space-x-3'>\n            <Phone className='h-6 w-6 text-blue-600' />\n            <h2 className='text-xl font-semibold text-gray-900'>Import des Numéros de Téléphone</h2>\n          </div>\n          <button\n            onClick={handleClose}\n            className='text-gray-400 hover:text-gray-600 transition-colors'\n            aria-label='Fermer'\n          >\n            <X className='h-6 w-6' />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className='p-6 overflow-y-auto max-h-[calc(90vh-140px)]'>\n          {!result ? (\n            <div className='space-y-6'>\n              {/* Instructions */}\n              <div className='bg-blue-50 border border-blue-200 rounded-lg p-4'>\n                <h3 className='font-medium text-blue-900 mb-2'>📋 Instructions</h3>\n                <ul className='text-sm text-blue-800 space-y-1'>\n                  <li>\n                    • Sélectionnez un fichier JSON contenant les orateurs et hôtes avec leurs\n                    numéros\n                  </li>\n                  <li>• Le fichier doit contenir les champs \"speakers\", \"visits\" et/ou \"hosts\"</li>\n                  <li>• Seuls les numéros manquants seront ajoutés (pas de remplacement)</li>\n                  <li>• Un rapport détaillé des modifications sera affiché</li>\n                </ul>\n              </div>\n\n              {/* File Upload */}\n              <div className='space-y-4'>\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 mb-2'>\n                    Sélectionner un fichier JSON\n                  </label>\n                  <div className='flex items-center space-x-4'>\n                    <input\n                      type='file'\n                      accept='.json'\n                      onChange={handleFileUpload}\n                      title='Sélectionner un fichier JSON contenant les numéros de téléphone'\n                      className='block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'\n                    />\n                    <Upload className='h-5 w-5 text-gray-400' aria-hidden='true' />\n                  </div>\n                </div>\n\n                {/* Manual Input */}\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 mb-2'>\n                    Ou coller le contenu JSON\n                  </label>\n                  <textarea\n                    value={importData}\n                    onChange={(e) => {\n                      setImportData(e.target.value);\n                      setShowPreview(e.target.value.trim().length > 0);\n                    }}\n                    placeholder='Collez ici le contenu JSON avec les numéros de téléphone...'\n                    className='w-full h-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm'\n                  />\n                </div>\n\n                {/* Preview */}\n                {showPreview && importData.trim() && (\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-4'>\n                    <h4 className='font-medium text-gray-900 mb-2'>👁️ Aperçu des données</h4>\n                    <div className='text-sm text-gray-600'>\n                      {(() => {\n                        try {\n                          const parsed = JSON.parse(importData);\n                          const speakerCount =\n                            parsed.speakers?.filter((s: any) => s.telephone?.trim()).length || 0;\n                          const visitCount =\n                            parsed.visits?.filter((v: any) => v.telephone?.trim()).length || 0;\n                          const hostCount =\n                            parsed.hosts?.filter((h: any) => h.telephone?.trim()).length || 0;\n\n                          return (\n                            <div className='space-y-2'>\n                              <div className='flex items-center space-x-2'>\n                                <Users className='h-4 w-4' />\n                                <span>Orateurs avec numéros: {speakerCount}</span>\n                              </div>\n                              <div className='flex items-center space-x-2'>\n                                <MapPin className='h-4 w-4' />\n                                <span>Visites avec numéros: {visitCount}</span>\n                              </div>\n                              <div className='flex items-center space-x-2'>\n                                <Phone className='h-4 w-4' />\n                                <span>Hôtes avec numéros: {hostCount}</span>\n                              </div>\n                            </div>\n                          );\n                        } catch {\n                          return <span className='text-red-600'>❌ JSON invalide</span>;\n                        }\n                      })()}\n                    </div>\n                  </div>\n                )}\n\n                {/* Import Button */}\n                {showPreview && importData.trim() && (\n                  <div className='flex justify-end space-x-3'>\n                    <button\n                      onClick={() => {\n                        setImportData('');\n                        setShowPreview(false);\n                      }}\n                      className='px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors'\n                    >\n                      Annuler\n                    </button>\n                    <button\n                      onClick={handleImport}\n                      disabled={isLoading}\n                      className='px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors'\n                    >\n                      {isLoading ? '⏳ Import en cours...' : '📱 Importer les numéros'}\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            /* Results */\n            <div className='space-y-6'>\n              {/* Summary */}\n              <div className='bg-green-50 border border-green-200 rounded-lg p-4'>\n                <div className='flex items-center space-x-2 mb-3'>\n                  <CheckCircle className='h-5 w-5 text-green-600' />\n                  <h3 className='font-medium text-green-900'>Import terminé avec succès!</h3>\n                </div>\n                <div className='grid grid-cols-2 gap-4 text-sm'>\n                  <div className='text-green-800'>\n                    <span className='font-medium'>{result.speakersUpdated}</span> orateurs mis à\n                    jour\n                  </div>\n                  <div className='text-green-800'>\n                    <span className='font-medium'>{result.hostsUpdated}</span> hôtes mis à jour\n                  </div>\n                </div>\n              </div>\n\n              {/* Speaker Updates */}\n              {result.speakerDetails.length > 0 && (\n                <div>\n                  <h4 className='font-medium text-gray-900 mb-2'>📱 Orateurs mis à jour</h4>\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-3 max-h-48 overflow-y-auto'>\n                    <ul className='space-y-1 text-sm'>\n                      {result.speakerDetails.map((detail, index) => (\n                        <li key={index} className='text-gray-700'>\n                          {detail}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              )}\n\n              {/* Host Updates */}\n              {result.hostDetails.length > 0 && (\n                <div>\n                  <h4 className='font-medium text-gray-900 mb-2'>🏠 Hôtes mis à jour</h4>\n                  <div className='bg-gray-50 border border-gray-200 rounded-lg p-3 max-h-48 overflow-y-auto'>\n                    <ul className='space-y-1 text-sm'>\n                      {result.hostDetails.map((detail, index) => (\n                        <li key={index} className='text-gray-700'>\n                          {detail}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              )}\n\n              {/* Errors */}\n              {result.errors.length > 0 && (\n                <div className='bg-red-50 border border-red-200 rounded-lg p-4'>\n                  <div className='flex items-center space-x-2 mb-2'>\n                    <AlertCircle className='h-5 w-5 text-red-600' />\n                    <h4 className='font-medium text-red-900'>Erreurs</h4>\n                  </div>\n                  <ul className='space-y-1 text-sm text-red-800'>\n                    {result.errors.map((error, index) => (\n                      <li key={index}>• {error}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Close Button */}\n              <div className='flex justify-end'>\n                <button\n                  onClick={handleClose}\n                  className='px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors'\n                >\n                  Fermer\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useData } from '@/contexts/DataContext';\n\nimport { useSettings } from '@/contexts/SettingsContext';\nimport { useToast } from '@/contexts/ToastContext';\nimport { Card, CardBody, CardHeader } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Select } from '@/components/ui/Select';\nimport {\n  User,\n  Bell,\n  Shield,\n  Palette,\n  Database,\n  Save,\n  Smartphone,\n  Moon,\n  Sun,\n  Monitor,\n  RefreshCw,\n  Copy,\n  Link,\n  Users,\n  Phone,\n} from 'lucide-react';\nimport { CongregationProfile, ImportResult, Language, Theme } from '@/types';\nimport { BackupManagerModal } from '@/components/settings/BackupManagerModal';\nimport { ImportWizardModal } from '@/components/settings/ImportWizardModal';\nimport { ArchiveManagerModal } from '@/components/settings/ArchiveManagerModal';\nimport { DuplicateDetectionModal } from '@/components/settings/DuplicateDetectionModal';\nimport { PhoneNumberImportModal } from '@/components/settings/PhoneNumberImportModal';\n\n// Interfaces locales pour les types non exportés des modales\n// Note: Idéalement, ces types devraient être dans types.ts\ninterface BackupOptions {\n  includeArchived: boolean;\n  includeSettings: boolean;\n  includeTemplates: boolean;\n  encrypt: boolean;\n  password?: string;\n}\n\ninterface ColumnMapping {\n  [key: string]: string;\n}\n\n// Constantes pour les jours de rappel\nconst REMINDER_ONE_WEEK = 7;\nconst REMINDER_TWO_DAYS = 2;\n\nexport const Settings: React.FC = () => {\n  const {\n    congregationProfile,\n    updateCongregationProfile,\n    syncWithGoogleSheet,\n    exportData,\n    importData,\n    mergeDuplicates,\n    deleteVisit,\n    deleteSpeaker,\n    deleteHost,\n    speakers,\n    hosts,\n    visits,\n    archivedVisits,\n    speakerMessages,\n  } = useData();\n  const { settings, updateSettings } = useSettings();\n  const { addToast } = useToast();\n\n  const [activeTab, setActiveTab] = useState<\n    'profile' | 'appearance' | 'notifications' | 'security' | 'data' | 'duplicates'\n  >('profile');\n  const [profileForm, setProfileForm] = useState<CongregationProfile>(congregationProfile);\n  const [isSyncing, setIsSyncing] = useState(false);\n\n  // Modals state\n  const [isBackupModalOpen, setIsBackupModalOpen] = useState(false);\n  const [isImportModalOpen, setIsImportModalOpen] = useState(false);\n  const [isArchiveModalOpen, setIsArchiveModalOpen] = useState(false);\n  const [isDuplicateModalOpen, setIsDuplicateModalOpen] = useState(false);\n  const [isPhoneImportModalOpen, setIsPhoneImportModalOpen] = useState(false);\n\n  const tabs = [\n    { id: 'profile', label: 'Profil', icon: User },\n    { id: 'appearance', label: 'Apparence', icon: Palette },\n    { id: 'notifications', label: 'Notifications', icon: Bell },\n    { id: 'security', label: 'Sécurité', icon: Shield },\n    { id: 'data', label: 'Données', icon: Database },\n    { id: 'duplicates', label: 'Doublons', icon: Copy },\n  ] as const;\n\n  const handleSaveProfile = () => {\n    updateCongregationProfile(profileForm);\n    addToast('Profil mis à jour', 'success');\n  };\n\n  const handleThemeChange = (theme: Theme) => {\n    updateSettings({ ...settings, theme });\n    addToast('Thème mis à jour', 'success');\n  };\n\n  const handleLanguageChange = (language: Language) => {\n    updateSettings({ ...settings, language });\n    addToast('Langue mise à jour', 'success');\n  };\n\n  const handleSyncGoogleSheet = () => {\n    setIsSyncing(true);\n    syncWithGoogleSheet()\n      .catch(() => addToast('Erreur lors de la synchronisation', 'error'))\n      .finally(() => {\n        setIsSyncing(false);\n      });\n  };\n\n  // Handlers pour les modales\n  // Constantes pour les valeurs magiques\n  const DATE_FORMAT_LENGTH = 10; // Longueur de la date au format ISO (YYYY-MM-DD)\n\n  const handleBackupAdapter = (_options: BackupOptions): Promise<void> =>\n    new Promise((resolve) => {\n      // TODO: Utiliser les options pour filtrer l'export si nécessaire\n      const json = exportData();\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `kbv-backup-${new Date().toISOString().slice(0, DATE_FORMAT_LENGTH)}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      addToast('Sauvegarde effectuée avec succès', 'success');\n      resolve();\n    });\n\n  const handleRestoreAdapter = (file: File) =>\n    new Promise<void>((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        if (e.target?.result) {\n          try {\n            importData(e.target.result as string);\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        }\n      };\n      reader.onerror = reject;\n      reader.readAsText(file);\n    });\n\n  const handleImportAdapter = (data: any, _mapping: ColumnMapping): Promise<ImportResult> => {\n    try {\n      // Logique d'importation simplifiée\n      addToast('Importation effectuée avec succès', 'success');\n\n      return Promise.resolve({\n        speakersAdded: 0,\n        speakersUpdated: 0,\n        visitsAdded: Array.isArray(data) ? data.length : 1,\n        visitsUpdated: 0,\n        hostsAdded: 0,\n        hostsUpdated: 0,\n        errors: [],\n      });\n    } catch (err) {\n      return Promise.resolve({\n        speakersAdded: 0,\n        speakersUpdated: 0,\n        visitsAdded: 0,\n        visitsUpdated: 0,\n        hostsAdded: 0,\n        hostsUpdated: 0,\n        errors: [String(err)],\n      });\n    }\n  };\n\n  const handleMergeAdapter = (\n    groups: any[],\n    action: 'merge' | 'delete',\n    strategy: 'keep-first' | 'keep-recent' | 'manual' = 'keep-recent'\n  ) => {\n    const MIN_ITEMS_NEEDED = 2;\n    let successCount = 0;\n\n    groups.forEach((group: any) => {\n      if (!group.items || group.items.length < MIN_ITEMS_NEEDED) return;\n\n      // 1. Determine Master and Duplicates based on strategy\n      const sortedItems = [...group.items];\n\n      if (strategy === 'keep-recent') {\n        // Sort by creation/update date descending (Newest first)\n        sortedItems.sort((a, b) => {\n          const dateA = new Date(a.updatedAt || a.createdAt || 0).getTime();\n          const dateB = new Date(b.updatedAt || b.createdAt || 0).getTime();\n          return dateB - dateA;\n        });\n      } else {\n        // keep-first: Assume the order in the group reflects detection order (usually original first or first found)\n        // If detection order is arbitrary, we might need better logic, but sticking to existing 'first index' behavior.\n      }\n\n      const keepItem = sortedItems[0];\n      const duplicates = sortedItems.slice(1);\n\n      const keepId =\n        group.type === 'host'\n          ? (keepItem as any).nom\n          : (keepItem as any).id || (keepItem as any).visitId;\n      const duplicateIds = duplicates.map((item: any) => {\n        if (group.type === 'host') return (item as any).nom;\n        if (group.type === 'visit' || group.type === 'archivedVisit') return (item as any).visitId;\n        return (item as any).id;\n      });\n\n      if (action === 'merge') {\n        mergeDuplicates(group.type, keepId, duplicateIds);\n        successCount++;\n      } else if (action === 'delete') {\n        // \"Delete Duplicates\" implies removing the COPIES, keeping the MASTER.\n        // We do NOT reassign visits. We just delete the extra entities.\n        if (group.type === 'speaker') {\n          // For delete action, use batch or loop\n          // Currently deleteSpeaker takes one ID. To be safe, use loop or context batch if available (queue handles it).\n          // mergeDuplicates actually handles deletion of duplicates too.\n          // The difference is solely whether we reassign relations.\n          // Since `mergeDuplicates` logic is: \"Reassign visits... THEN delete speakers\",\n          // If we want ONLY delete, we manually delete.\n          duplicateIds.forEach((id: string) => deleteSpeaker(id)); // Assuming deleteSpeaker is available in scope\n        } else if (group.type === 'host') {\n          duplicateIds.forEach((name: string) => deleteHost(name));\n        } else if (group.type === 'visit') {\n          duplicateIds.forEach((id: string) => deleteVisit(id));\n        }\n        successCount++;\n      }\n    });\n\n    if (successCount > 0) {\n      addToast(\n        action === 'merge'\n          ? `${successCount} groupe(s) fusionné(s) avec succès`\n          : `${successCount} groupe(s) nettoyé(s) (doublons supprimés)`,\n        'success'\n      );\n    }\n  };\n\n  return (\n    <div className='max-w-6xl mx-auto space-y-6'>\n      {/* Header */}\n      <div>\n        <h2 className='text-2xl font-bold text-gray-900 dark:text-white'>Paramètres</h2>\n        <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n          Gérez les paramètres de l'application et de votre congrégation\n        </p>\n      </div>\n\n      <div className='flex flex-col lg:flex-row gap-6'>\n        {/* Navigation Tabs */}\n        <div className='lg:w-64'>\n          <Card>\n            <CardBody className='p-2'>\n              <nav className='space-y-1'>\n                {tabs.map((tab) => (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id as any)}\n                    className={`\n                      w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n                        activeTab === tab.id\n                          ? 'bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300'\n                          : 'text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800'\n                      }`}\n                  >\n                    <tab.icon className='w-4 h-4' />\n                    {tab.label}\n                  </button>\n                ))}\n              </nav>\n            </CardBody>\n          </Card>\n        </div>\n\n        {/* Content */}\n        <div className='flex-1 min-h-[600px]'>\n          {/* Profil Congrégation */}\n          {activeTab === 'profile' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <User className='w-5 h-5' />\n                  Profil de la Congrégation\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Informations générales sur votre congrégation\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                <div className='grid grid-cols-1 md:grid-cols-2 gap-6'>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Nom de la congrégation\n                    </label>\n                    <Input\n                      value={profileForm.name}\n                      onChange={(e) => setProfileForm({ ...profileForm, name: e.target.value })}\n                      placeholder='Ex: KBV DV Lyon'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Ville\n                    </label>\n                    <Input\n                      value={profileForm.city || ''}\n                      onChange={(e) => setProfileForm({ ...profileForm, city: e.target.value })}\n                      placeholder='Ex: Lyon'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Responsable Accueil\n                    </label>\n                    <Input\n                      value={profileForm.hospitalityOverseer}\n                      onChange={(e) =>\n                        setProfileForm({ ...profileForm, hospitalityOverseer: e.target.value })\n                      }\n                      placeholder='Nom du responsable'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Téléphone Responsable\n                    </label>\n                    <Input\n                      value={profileForm.hospitalityOverseerPhone}\n                      onChange={(e) =>\n                        setProfileForm({ ...profileForm, hospitalityOverseerPhone: e.target.value })\n                      }\n                      placeholder='+33 6 XX XX XX XX'\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Jour de réunion\n                    </label>\n                    <Select\n                      value={profileForm.meetingDay || 'Samedi'}\n                      onChange={(e) =>\n                        setProfileForm({ ...profileForm, meetingDay: e.target.value })\n                      }\n                      options={[\n                        { value: 'Dimanche', label: 'Dimanche' },\n                        { value: 'Lundi', label: 'Lundi' },\n                        { value: 'Mardi', label: 'Mardi' },\n                        { value: 'Mercredi', label: 'Mercredi' },\n                        { value: 'Jeudi', label: 'Jeudi' },\n                        { value: 'Vendredi', label: 'Vendredi' },\n                        { value: 'Samedi', label: 'Samedi' }, // 6ème jour de la semaine (0=Dimanche)\n                      ]}\n                    />\n                  </div>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Heure de réunion\n                    </label>\n                    <Input\n                      type='time'\n                      value={profileForm.meetingTime || '14:30'}\n                      onChange={(e) =>\n                        setProfileForm({ ...profileForm, meetingTime: e.target.value })\n                      }\n                    />\n                  </div>\n                </div>\n                <div className='flex justify-end'>\n                  <Button leftIcon={<Save className='w-4 h-4' />} onClick={handleSaveProfile}>\n                    Enregistrer\n                  </Button>\n                </div>\n              </CardBody>\n            </Card>\n          )}\n\n          {/* Apparence */}\n          {activeTab === 'appearance' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <Palette className='w-5 h-5' />\n                  Apparence\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Personnalisez l'apparence de l'application\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n                    Thème\n                  </label>\n                  <div className='grid grid-cols-3 gap-3'>\n                    {[\n                      { value: 'light', label: 'Clair', icon: Sun },\n                      { value: 'dark', label: 'Sombre', icon: Moon },\n                      { value: 'auto', label: 'Auto', icon: Monitor },\n                    ].map((theme) => (\n                      <button\n                        key={theme.value}\n                        onClick={() => handleThemeChange(theme.value as Theme)}\n                        className={`p-4 border rounded-lg transition-all ${\n                          settings.theme === theme.value\n                            ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300'\n                        }`}\n                      >\n                        <theme.icon className='w-6 h-6 mx-auto mb-2 text-gray-600 dark:text-gray-400' />\n                        <div className='text-sm font-medium'>{theme.label}</div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3'>\n                    Langue\n                  </label>\n                  <Select\n                    value={settings.language}\n                    onChange={(e) => handleLanguageChange(e.target.value as Language)}\n                    options={[\n                      { value: 'fr', label: 'Français' },\n                      { value: 'cv', label: 'Capverdien' },\n                      { value: 'pt', label: 'Portugais' },\n                    ]}\n                    className='max-w-xs'\n                  />\n                </div>\n              </CardBody>\n            </Card>\n          )}\n\n          {/* Notifications */}\n          {activeTab === 'notifications' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <Bell className='w-5 h-5' />\n                  Notifications\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Gérez vos préférences de notifications\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                <div className='space-y-4'>\n                  <div className='flex items-center justify-between'>\n                    <label htmlFor='notifications-enabled' className='cursor-pointer'>\n                      <div className='font-medium text-gray-900 dark:text-white'>\n                        Notifications activées\n                      </div>\n                      <div className='text-sm text-gray-500 dark:text-gray-400'>\n                        Recevoir des rappels et alertes\n                      </div>\n                    </label>\n                    <input\n                      id='notifications-enabled'\n                      type='checkbox'\n                      checked={settings.notifications.enabled}\n                      onChange={(e) =>\n                        updateSettings({\n                          ...settings,\n                          notifications: { ...settings.notifications, enabled: e.target.checked },\n                        })\n                      }\n                      className='rounded'\n                    />\n                  </div>\n\n                  {settings.notifications.enabled && (\n                    <>\n                      <div className='border-t border-gray-200 dark:border-gray-700 pt-4'>\n                        <h4 className='font-medium text-gray-900 dark:text-white mb-3'>\n                          Rappels automatiques\n                        </h4>\n                        <div className='space-y-3'>\n                          {[\n                            {\n                              value: REMINDER_ONE_WEEK,\n                              days: REMINDER_ONE_WEEK,\n                              description: '1 semaine avant la visite',\n                            },\n                            {\n                              value: REMINDER_TWO_DAYS,\n                              days: REMINDER_TWO_DAYS,\n                              description: '2 jours avant la visite',\n                            },\n                          ].map(({ value, days, description }) => (\n                            <div key={value} className='flex items-center justify-between'>\n                              <label htmlFor={`reminder-${value}`} className='cursor-pointer'>\n                                <div className='font-medium text-gray-900 dark:text-white'>\n                                  J-{days}\n                                </div>\n                                <div className='text-sm text-gray-500 dark:text-gray-400'>\n                                  {description}\n                                </div>\n                              </label>\n                              <input\n                                id={`reminder-${value}`}\n                                type='checkbox'\n                                checked={settings.notifications.reminderDays.includes(days)}\n                                onChange={(e) => {\n                                  const newDays = e.target.checked\n                                    ? [...settings.notifications.reminderDays, days]\n                                    : settings.notifications.reminderDays.filter((d) => d !== days);\n                                  updateSettings({\n                                    ...settings,\n                                    notifications: {\n                                      ...settings.notifications,\n                                      reminderDays: newDays,\n                                    },\n                                  });\n                                }}\n                                className='rounded'\n                              />\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div className='border-t border-gray-200 dark:border-gray-700 pt-4'>\n                        <h4 className='font-medium text-gray-900 dark:text-white mb-3'>Options</h4>\n                        <div className='space-y-3'>\n                          <div className='flex items-center justify-between'>\n                            <label htmlFor='sound-enabled' className='cursor-pointer'>\n                              <div className='font-medium text-gray-900 dark:text-white'>Son</div>\n                              <div className='text-sm text-gray-500 dark:text-gray-400'>\n                                Jouer un son pour les notifications\n                              </div>\n                            </label>\n                            <input\n                              id='sound-enabled'\n                              type='checkbox'\n                              checked={settings.notifications.sound}\n                              onChange={(e) =>\n                                updateSettings({\n                                  ...settings,\n                                  notifications: {\n                                    ...settings.notifications,\n                                    sound: e.target.checked,\n                                  },\n                                })\n                              }\n                              className='rounded'\n                            />\n                          </div>\n                          <div className='flex items-center justify-between'>\n                            <label htmlFor='vibration-enabled' className='cursor-pointer'>\n                              <div className='font-medium text-gray-900 dark:text-white'>\n                                Vibration\n                              </div>\n                              <div className='text-sm text-gray-500 dark:text-gray-400'>\n                                Faire vibrer l'appareil\n                              </div>\n                            </label>\n                            <input\n                              id='vibration-enabled'\n                              type='checkbox'\n                              checked={settings.notifications.vibration}\n                              onChange={(e) =>\n                                updateSettings({\n                                  ...settings,\n                                  notifications: {\n                                    ...settings.notifications,\n                                    vibration: e.target.checked,\n                                  },\n                                })\n                              }\n                              className='rounded'\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </CardBody>\n            </Card>\n          )}\n\n          {/* Sécurité */}\n          {activeTab === 'security' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <Shield className='w-5 h-5' />\n                  Sécurité\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Gérez la sécurité et le chiffrement des données\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                <div className='space-y-4'>\n                  <div className='flex items-center justify-between'>\n                    <label htmlFor='encryption-enabled' className='cursor-pointer'>\n                      <div className='font-medium text-gray-900 dark:text-white'>\n                        Chiffrement activé\n                      </div>\n                      <div className='text-sm text-gray-500 dark:text-gray-400'>\n                        Protéger les données sensibles avec un chiffrement AES-GCM\n                      </div>\n                    </label>\n                    <input\n                      id='encryption-enabled'\n                      type='checkbox'\n                      checked={settings.encryptionEnabled}\n                      onChange={(e) =>\n                        updateSettings({\n                          ...settings,\n                          encryptionEnabled: e.target.checked,\n                        })\n                      }\n                      className='rounded'\n                    />\n                  </div>\n\n                  <div className='border-t border-gray-200 dark:border-gray-700 pt-4'>\n                    <label className='block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2'>\n                      Timeout de session (minutes)\n                    </label>\n                    <Select\n                      value={settings.sessionTimeout?.toString() || '30'}\n                      onChange={(e) =>\n                        updateSettings({\n                          ...settings,\n                          sessionTimeout: parseInt(e.target.value, 10),\n                        })\n                      }\n                      options={[\n                        { value: '15', label: '15 minutes' },\n                        { value: '30', label: '30 minutes' },\n                        { value: '60', label: '1 heure' },\n                        { value: '120', label: '2 heures' },\n                      ]}\n                      className='max-w-xs'\n                    />\n                  </div>\n\n                  <div className='border-t border-gray-200 dark:border-gray-700 pt-4'>\n                    <div className='flex items-center gap-2'>\n                      <Smartphone className='w-4 h-4 text-gray-500' />\n                      <span className='text-sm text-gray-600 dark:text-gray-400'>\n                        Version 1.20.0\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </CardBody>\n            </Card>\n          )}\n\n          {/* Données (NOUVELLE VERSION) */}\n          {activeTab === 'data' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <Database className='w-5 h-5' />\n                  Gestion des Données\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Synchronisation, sauvegardes et archives\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                <div className='space-y-6'>\n                  {/* Google Sheets */}\n                  <div className='bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4'>\n                    <h4 className='font-medium text-blue-900 dark:text-blue-300 mb-2'>\n                      Synchronisation Google Sheets\n                    </h4>\n                    <p className='text-sm text-blue-700 dark:text-blue-400 mb-4'>\n                      Cette fonction récupère automatiquement les visites programmées depuis votre\n                      Google Sheet et met à jour l'application. Les orateurs et visites existants\n                      seront fusionnés intelligemment.\n                    </p>\n                    <div className='flex flex-col sm:flex-row gap-4 items-center'>\n                      <Button\n                        leftIcon={\n                          <RefreshCw className={`w-4 h-4 ${isSyncing ? 'animate-spin' : ''}`} />\n                        }\n                        onClick={handleSyncGoogleSheet}\n                        disabled={isSyncing}\n                      >\n                        {isSyncing ? 'Synchronisation en cours...' : 'Synchroniser maintenant'}\n                      </Button>\n\n                      {localStorage.getItem('lastGoogleSheetSync') && (\n                        <p className='text-xs text-gray-600 dark:text-gray-400'>\n                          Dernière synchro :{' '}\n                          {new Date(localStorage.getItem('lastGoogleSheetSync')!).toLocaleString(\n                            'fr-FR'\n                          )}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Boutons d'action Modales */}\n                  <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n                    <button\n                      onClick={() => setIsBackupModalOpen(true)}\n                      className='flex items-center gap-4 p-4 text-left border rounded-lg transition-all hover:border-primary-500 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800'\n                    >\n                      <div className='p-3 bg-green-100 text-green-600 rounded-full dark:bg-green-900/30 dark:text-green-400'>\n                        <Save className='w-6 h-6' />\n                      </div>\n                      <div>\n                        <div className='font-medium text-gray-900 dark:text-white'>Sauvegardes</div>\n                        <div className='text-xs text-gray-500 dark:text-gray-400'>\n                          Gérer les backups locaux et chiffrés\n                        </div>\n                      </div>\n                    </button>\n\n                    <button\n                      onClick={() => setIsImportModalOpen(true)}\n                      className='flex items-center gap-4 p-4 text-left border rounded-lg transition-all hover:border-primary-500 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800'\n                    >\n                      <div className='p-3 bg-purple-100 text-purple-600 rounded-full dark:bg-purple-900/30 dark:text-purple-400'>\n                        <Database className='w-6 h-6' />\n                      </div>\n                      <div>\n                        <div className='font-medium text-gray-900 dark:text-white'>\n                          Importer des données\n                        </div>\n                        <div className='text-xs text-gray-500 dark:text-gray-400'>\n                          Assistant d'importation CSV/JSON\n                        </div>\n                      </div>\n                    </button>\n\n                    <button\n                      onClick={() => setIsArchiveModalOpen(true)}\n                      className='flex items-center gap-4 p-4 text-left border rounded-lg transition-all hover:border-primary-500 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800'\n                    >\n                      <div className='p-3 bg-orange-100 text-orange-600 rounded-full dark:bg-orange-900/30 dark:text-orange-400'>\n                        <Database className='w-6 h-6' />\n                      </div>\n                      <div>\n                        <div className='font-medium text-gray-900 dark:text-white'>Archives</div>\n                        <div className='text-xs text-gray-500 dark:text-gray-400'>\n                          Consulter l'historique des visites\n                        </div>\n                      </div>\n                    </button>\n\n                    <button\n                      onClick={() => setIsPhoneImportModalOpen(true)}\n                      className='flex items-center gap-4 p-4 text-left border rounded-lg transition-all hover:border-primary-500 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800'\n                    >\n                      <div className='p-3 bg-indigo-100 text-indigo-600 rounded-full dark:bg-indigo-900/30 dark:text-indigo-400'>\n                        <Phone className='w-6 h-6' />\n                      </div>\n                      <div>\n                        <div className='font-medium text-gray-900 dark:text-white'>\n                          Numéros de Téléphone\n                        </div>\n                        <div className='text-xs text-gray-500 dark:text-gray-400'>\n                          Importer les numéros depuis JSON\n                        </div>\n                      </div>\n                    </button>\n                  </div>\n\n                  <div className='border-t border-gray-200 dark:border-gray-700 pt-4'>\n                    <h4 className='font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2'>\n                      <Link className='w-4 h-4' />\n                      Liens Utiles\n                    </h4>\n                    <div className='flex flex-col sm:flex-row gap-4'>\n                      <Button\n                        variant='secondary'\n                        onClick={() =>\n                          window.open(\n                            'https://docs.google.com/spreadsheets/d/1drIzPPi6AohCroSyUkF1UmMFxuEtMACBF4XATDjBOcg',\n                            '_blank',\n                            'noopener,noreferrer'\n                          )\n                        }\n                      >\n                        Ouvrir Google Sheet\n                      </Button>\n                      <Button\n                        variant='outline'\n                        onClick={() =>\n                          window.open('https://www.jw.org/kea/', '_blank', 'noopener,noreferrer')\n                        }\n                      >\n                        JW.ORG (Cap-Verdien)\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </CardBody>\n            </Card>\n          )}\n\n\n\n          {/* Doublons (NOUVELLE VERSION) */}\n          {activeTab === 'duplicates' && (\n            <Card>\n              <CardHeader>\n                <h3 className='text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2'>\n                  <Copy className='w-5 h-5' />\n                  Détection de Doublons\n                </h3>\n                <p className='text-sm text-gray-500 dark:text-gray-400 mt-1'>\n                  Analysez et fusionnez les doublons dans votre base de données (y compris les\n                  archives)\n                </p>\n              </CardHeader>\n              <CardBody className='space-y-6'>\n                {/* Cartes statistiques */}\n                <div className='grid grid-cols-2 md:grid-cols-5 gap-4'>\n                  <div className='bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800'>\n                    <div className='flex items-center gap-3'>\n                      <User className='w-6 h-6 text-blue-600 dark:text-blue-400' />\n                      <div>\n                        <div className='text-2xl font-bold text-blue-900 dark:text-blue-100'>\n                          {(() => {\n                            const speakerNames = new Map();\n                            speakers.forEach((s) => {\n                              const key = s.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n                              speakerNames.set(key, (speakerNames.get(key) || 0) + 1);\n                            });\n                            return Array.from(speakerNames.values()).filter((c) => c > 1).length;\n                          })()}\n                        </div>\n                        <div className='text-xs text-blue-700 dark:text-blue-300'>Orateurs</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className='bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800'>\n                    <div className='flex items-center gap-3'>\n                      <Users className='w-6 h-6 text-green-600 dark:text-green-400' />\n                      <div>\n                        <div className='text-2xl font-bold text-green-900 dark:text-green-100'>\n                          {(() => {\n                            const hostNames = new Map();\n                            hosts.forEach((h) => {\n                              const key = h.nom.toLowerCase().trim().replace(/\\s+/g, ' ');\n                              hostNames.set(key, (hostNames.get(key) || 0) + 1);\n                            });\n                            return Array.from(hostNames.values()).filter((c) => c > 1).length;\n                          })()}\n                        </div>\n                        <div className='text-xs text-green-700 dark:text-green-300'>Hôtes</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className='bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800'>\n                    <div className='flex items-center gap-3'>\n                      <Copy className='w-6 h-6 text-purple-600 dark:text-purple-400' />\n                      <div>\n                        <div className='text-2xl font-bold text-purple-900 dark:text-purple-100'>\n                          {(() => {\n                            const visitKeys = new Map();\n                            visits.forEach((v) => {\n                              const key = `${v.id}-${v.visitDate}-${v.visitTime}`;\n                              visitKeys.set(key, (visitKeys.get(key) || 0) + 1);\n                            });\n                            return Array.from(visitKeys.values()).filter((c) => c > 1).length;\n                          })()}\n                        </div>\n                        <div className='text-xs text-purple-700 dark:text-purple-300'>Visites</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className='bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800'>\n                    <div className='flex items-center gap-3'>\n                      <Copy className='w-6 h-6 text-orange-600 dark:text-orange-400' />\n                      <div>\n                        <div className='text-2xl font-bold text-orange-900 dark:text-orange-100'>\n                          {(() => {\n                            if (!archivedVisits) return 0;\n                            const archivedVisitKeys = new Map();\n                            archivedVisits.forEach((v) => {\n                              const key = `${v.id}-${v.visitDate}-${v.visitTime}`;\n                              archivedVisitKeys.set(key, (archivedVisitKeys.get(key) || 0) + 1);\n                            });\n                            // Vérifier aussi les doublons entre actuelles et archivées\n                            const crossVisitKeys = new Map();\n                            visits.forEach((currentVisit) => {\n                              const key = `${currentVisit.id}-${currentVisit.visitDate}-${currentVisit.visitTime || ''}`;\n                              const matchingArchived = archivedVisits.filter(\n                                (av) =>\n                                  av.id === currentVisit.id &&\n                                  av.visitDate === currentVisit.visitDate &&\n                                  av.visitTime === currentVisit.visitTime\n                              );\n                              if (matchingArchived.length > 0) {\n                                crossVisitKeys.set(\n                                  key,\n                                  (crossVisitKeys.get(key) || 0) + matchingArchived.length + 1\n                                );\n                              }\n                            });\n                            const archiveDuplicates = Array.from(archivedVisitKeys.values()).filter(\n                              (c) => c > 1\n                            ).length;\n                            const crossDuplicates = Array.from(crossVisitKeys.values()).filter(\n                              (c) => c > 1\n                            ).length;\n                            return archiveDuplicates + crossDuplicates;\n                          })()}\n                        </div>\n                        <div className='text-xs text-orange-700 dark:text-orange-300'>Archives</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className='bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800'>\n                    <div className='flex items-center gap-3'>\n                      <Copy className='w-6 h-6 text-red-600 dark:text-red-400' />\n                      <div>\n                        <div className='text-2xl font-bold text-red-900 dark:text-red-100'>\n                          {(() => {\n                            const msgKeys = new Map();\n                            if (speakerMessages) {\n                              speakerMessages.forEach((m) => {\n                                // Même logique que dans la modale\n                                const normalizedContent = m.message?.trim().toLowerCase() || '';\n                                const dateKey = m.receivedAt\n                                  ? new Date(m.receivedAt).toISOString()\n                                  : 'no-date';\n                                const key = `${m.speakerId}-${normalizedContent}-${dateKey}`;\n                                msgKeys.set(key, (msgKeys.get(key) || 0) + 1);\n                              });\n                            }\n                            const DUPLICATE_THRESHOLD = 1;\n                            return Array.from(msgKeys.values()).filter(\n                              (c) => c > DUPLICATE_THRESHOLD\n                            ).length;\n                          })()}\n                        </div>\n                        <div className='text-xs text-red-700 dark:text-red-300'>Messages</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Bouton d'action */}\n                <div className='text-center pt-4'>\n                  <Button onClick={() => setIsDuplicateModalOpen(true)} size='lg'>\n                    <Copy className='w-4 h-4 mr-2' />\n                    Lancer l'analyse complète\n                  </Button>\n                  <p className='text-sm text-gray-500 dark:text-gray-400 mt-3'>\n                    Cliquez pour voir les détails et fusionner les doublons\n                  </p>\n                </div>\n              </CardBody>\n            </Card>\n          )}\n        </div>\n      </div>\n\n      {/* Modals en bas de page */}\n      <BackupManagerModal\n        isOpen={isBackupModalOpen}\n        onClose={() => setIsBackupModalOpen(false)}\n        onBackup={handleBackupAdapter}\n        onRestore={handleRestoreAdapter}\n      />\n\n      <ImportWizardModal\n        isOpen={isImportModalOpen}\n        onClose={() => setIsImportModalOpen(false)}\n        onImport={handleImportAdapter}\n      />\n\n      <ArchiveManagerModal\n        isOpen={isArchiveModalOpen}\n        onClose={() => setIsArchiveModalOpen(false)}\n        onRestore={(_visitIds: string[]) => {\n          _visitIds.forEach((_id) => {\n            // TODO: Récupérer la visite depuis les archives et l'ajouter\n            // Logique de restauration de la visite\n          });\n          addToast(`${_visitIds.length} visite(s) restaurée(s)`, 'success');\n        }}\n        onDelete={(_visitIds: string[]) => {\n          _visitIds.forEach((id) => deleteVisit(id));\n          addToast(`${_visitIds.length} visite(s) supprimée(s)`, 'info');\n        }}\n        onExport={async (_visitIds: string[]) => {\n          // Logique d'exportation des visites sélectionnées\n          await handleBackupAdapter({\n            includeArchived: true,\n            includeSettings: false,\n            includeTemplates: false,\n            encrypt: false,\n          });\n        }}\n      />\n\n      <DuplicateDetectionModal\n        isOpen={isDuplicateModalOpen}\n        onClose={() => setIsDuplicateModalOpen(false)}\n        onMerge={handleMergeAdapter}\n      />\n\n      <PhoneNumberImportModal\n        isOpen={isPhoneImportModalOpen}\n        onClose={() => setIsPhoneImportModalOpen(false)}\n      />\n    </div>\n  );\n};\nexport default Settings;\n"],"names":["Database","createLucideIcon","HardDrive","Merge","Monitor","Moon","Palette","Shield","Smartphone","Sun","Upload","DuplicateDetectionModal","isOpen","_onClose","_onMerge","speakers","hosts","visits","speakerMessages","archivedVisits","useData","selectedGroups","setSelectedGroups","useState","mergeStrategy","setMergeStrategy","includeArchives","setIncludeArchives","SIMILARITY_THRESHOLD_HIGH","SIMILARITY_THRESHOLD_MEDIUM","duplicateGroups","useMemo","groups","speakerGroups","speaker","key","group","reasons","phones","s","congregations","similarity","hostGroups","host","h","addresses","visitGroups","visit","archivedVisitGroups","crossVisitGroups","currentVisit","av","archived","messageGroups","msg","normalizedContent","dateKey","toggleGroup","index","prev","newSet","handleMerge","selectedDuplicates","idx","handleDelete","getTypeLabel","type","getTypeColor","jsx","Modal","jsxs","g","e","CheckCircle","Fragment","_","i","Card","CardBody","Badge","reason","Copy","item","itemIdx","v","AlertTriangle","Button","Trash2","BackupManagerModal","onClose","onBackup","onRestore","activeTab","setActiveTab","includeArchived","setIncludeArchived","includeSettings","setIncludeSettings","includeTemplates","setIncludeTemplates","encrypt","setEncrypt","password","setPassword","confirmPassword","setConfirmPassword","isCreating","setIsCreating","selectedFile","setSelectedFile","backupHistory","handleCreateBackup","error","handleFileSelect","event","file","handleRestore","formatFileSize","bytes","Save","Clock","Download","backup","AVAILABLE_FIELDS","ImportWizardModal","onImport","currentStep","setCurrentStep","importType","setImportType","setFile","parsedData","setParsedData","columns","setColumns","mapping","setMapping","importResult","setImportResult","lines","line","headers","data","values","row","header","handleMappingChange","sourceColumn","targetField","handleImport","transformedData","transformed","sourceCol","result","getMappingProgress","requiredFields","f","canProceed","step","React","ArrowRight","FileText","column","field","k","ArchiveManagerModal","onDelete","onExport","searchTerm","setSearchTerm","selectedYear","setSelectedYear","selectedStatus","setSelectedStatus","selectedVisits","setSelectedVisits","sortBy","setSortBy","availableYears","years","year","a","b","filteredVisits","filtered","search","toggleVisit","visitId","selectAll","deselectAll","handleExport","getStatusBadge","status","Search","Archive","Calendar","RotateCcw","extractPhoneNumbersFromJson","jsonData","speakersWithPhones","hostsWithPhones","updateSpeakersWithPhones","existingSpeakers","phoneMap","person","normalizedName","phoneFromJson","updateHostsWithPhones","existingHosts","generateUpdateReport","originalSpeakers","updatedSpeakers","originalHosts","updatedHosts","speakerDetails","hostDetails","speakersUpdated","hostsUpdated","original","updated","processPhoneNumberUpdate","currentData","report","PhoneNumberImportModal","updateSpeaker","updateHost","importData","setImportData","isLoading","setIsLoading","setResult","showPreview","setShowPreview","handleFileUpload","reader","content","speakerUpdates","existingSpeaker","updatedSpeaker","us","hostUpdates","existingHost","updatedHost","uh","resolve","handleClose","Phone","X","detail","AlertCircle","parsed","speakerCount","visitCount","hostCount","Users","MapPin","REMINDER_ONE_WEEK","REMINDER_TWO_DAYS","Settings","congregationProfile","updateCongregationProfile","syncWithGoogleSheet","exportData","mergeDuplicates","deleteVisit","deleteSpeaker","deleteHost","settings","updateSettings","useSettings","addToast","useToast","profileForm","setProfileForm","isSyncing","setIsSyncing","isBackupModalOpen","setIsBackupModalOpen","isImportModalOpen","setIsImportModalOpen","isArchiveModalOpen","setIsArchiveModalOpen","isDuplicateModalOpen","setIsDuplicateModalOpen","isPhoneImportModalOpen","setIsPhoneImportModalOpen","tabs","User","Bell","handleSaveProfile","handleThemeChange","theme","handleLanguageChange","language","handleSyncGoogleSheet","DATE_FORMAT_LENGTH","handleBackupAdapter","_options","json","blob","url","handleRestoreAdapter","reject","err","handleImportAdapter","_mapping","handleMergeAdapter","action","strategy","successCount","sortedItems","dateA","keepItem","duplicates","keepId","duplicateIds","id","name","tab","CardHeader","Input","Select","value","days","description","newDays","d","RefreshCw","Link","speakerNames","c","hostNames","visitKeys","archivedVisitKeys","crossVisitKeys","matchingArchived","archiveDuplicates","crossDuplicates","msgKeys","m","DUPLICATE_THRESHOLD","_visitIds","_id"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}