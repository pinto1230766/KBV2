import{c as A,j as e,B as T,P as Ne,C as xe,l as we,g as ie,H as me,X as Ie,r as Ce,u as De,b as Re,s as Le,n as qe,f as oe,k as le,F as Fe}from"./index-D_fRgLDA.js";import{r as R}from"./charts-Cazb4rp-.js";import{S as He,L as ze,u as Ve}from"./useVisitNotifications-DfTlSiAs.js";import{T as be,I as Z}from"./Input-D9N5IR8Y.js";import{f as de,p as ue}from"./utils-FTT-aY8U.js";import{C as $e,F as Oe,S as Be}from"./FeedbackFormModal-CnaHTc7G.js";import{M as ae,U as We,P as _e,B as Ge}from"./Badge-SUWuRPpc.js";import{C as Ue,M as Xe,S as Ze}from"./MessageGeneratorModal-DAzL5aGB.js";import{r as Ye}from"./react-vendor-B9D_A6Vq.js";const Je=A("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Ct=A("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const Ke=A("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const Ee=A("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const Qe=A("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const et=A("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);const ye=A("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);const Et=A("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Me=A("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const fe=A("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const Se=A("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const tt=A("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const rt=A("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const st=A("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);const at=A("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);const Te=A("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const nt=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),je=["Transport","Hébergement","Repas","Matériel","Autre"],ot=({onSubmit:t,onCancel:u,initialData:r,currency:g="€"})=>{const[c,o]=R.useState(r?.description||""),[a,p]=R.useState(r?.amount?.toString()||""),[k,i]=R.useState(r?.date||new Date().toISOString().split("T")[0]),[f,S]=R.useState(r?.category||je[0]),U=j=>{j.preventDefault(),!(!c||!a||!k)&&t({description:c,amount:parseFloat(a),date:k,category:f})};return e.jsxs("form",{onSubmit:U,className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description *"}),e.jsx("input",{type:"text",value:c,onChange:j=>o(j.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",placeholder:"Ex: Billet de train...",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Catégorie"}),e.jsx("select",{value:f,onChange:j=>S(j.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",title:"Catégorie de la dépense",children:je.map(j=>e.jsx("option",{value:j,children:j},j))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Montant (",g,") *"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a,onChange:j=>p(j.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",required:!0,title:"Montant de la dépense",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:k,onChange:j=>i(j.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",required:!0,title:"Date de la dépense"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(T,{variant:"ghost",onClick:u,type:"button",children:"Annuler"}),e.jsx(T,{variant:"primary",type:"submit",leftIcon:e.jsx(He,{className:"w-4 h-4"}),children:"Enregistrer"})]})]})},lt=({expenses:t=[],onAdd:u,onEdit:r,onDelete:g,currency:c="€",readOnly:o=!1})=>{const a=R.useMemo(()=>t.reduce((p,k)=>p+k.amount,0),[t]);return t.length===0&&o?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Aucune dépense enregistrée."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total des dépenses"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[a.toFixed(2)," ",c]})]}),!o&&e.jsx(T,{onClick:u,variant:"primary",leftIcon:e.jsx(Ne,{className:"w-4 h-4"}),children:"Ajouter une dépense"})]}),e.jsx("div",{className:"space-y-2",children:t.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[e.jsx(et,{className:"w-10 h-10 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucune dépense pour le moment"}),!o&&e.jsx(T,{onClick:u,variant:"ghost",className:"mt-2 text-primary-600",children:"Commencer à ajouter"})]}):t.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:p.description}),p.category&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[e.jsx(st,{className:"w-3 h-3 mr-1"}),p.category]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),de(new Date(p.date),"dd MMMM yyyy",{locale:we})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[p.amount.toFixed(2)," ",c]}),!o&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>r(p),className:"p-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Modifier",children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(p.id),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Supprimer",children:e.jsx(be,{className:"w-4 h-4"})})]})]})]},p.id))})]})},Ae=R.memo(lt);Ae.displayName="ExpenseList";const it=({itinerary:t,onUpdate:u,readOnly:r=!1})=>{const g=(o,a)=>{u({...t,[o]:a})},c=o=>{const a=encodeURIComponent(t.meetingPoint||"");if(!a)return;const p=o==="waze"?`https://waze.com/ul?q=${a}&navigate=yes`:`https://www.google.com/maps/search/?api=1&query=${a}`;window.open(p,"_blank")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-4",children:[{mode:"car",icon:$e,label:"Voiture"},{mode:"train",icon:at,label:"Train"},{mode:"plane",icon:tt,label:"Avion"}].map(({mode:o,icon:a,label:p})=>e.jsxs("button",{type:"button",onClick:()=>g("transportMode",o),className:`flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.transportMode===o?"border-primary bg-primary/5 text-primary":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-500"}`,disabled:r,children:[e.jsx(a,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:p})]},o))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Z,{label:"Distance (km)",type:"number",value:t.distance?.toString()||"",onChange:o=>g("distance",o.target.value?parseFloat(o.target.value):void 0),disabled:r,leftIcon:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(Z,{label:"Durée estimée",placeholder:"ex: 1h 30m",value:t.duration?.toString()||"",onChange:o=>g("duration",o.target.value),disabled:r,leftIcon:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{label:"Point de rendez-vous / Adresse",value:t.meetingPoint||"",onChange:o=>g("meetingPoint",o.target.value),disabled:r,leftIcon:e.jsx(ae,{className:"w-4 h-4"})}),t.meetingPoint&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",className:"flex-1",onClick:()=>c("google"),leftIcon:e.jsx(Me,{className:"w-4 h-4"}),children:"Google Maps"}),e.jsx(T,{variant:"outline",className:"flex-1",onClick:()=>c("waze"),leftIcon:e.jsx(fe,{className:"w-4 h-4"}),children:"Waze"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes de voyage"}),e.jsx("textarea",{value:t.notes||"",onChange:o=>g("notes",o.target.value),disabled:r,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-primary focus:border-primary p-3 min-h-[100px]",placeholder:"Informations supplémentaires..."})]})]})},ve=t=>t?t.slice(0,16):"",dt=({accommodation:t,onUpdate:u,readOnly:r=!1,hosts:g=[]})=>{const c=(a,p)=>{u({...t,[a]:p})},o=()=>{const a=encodeURIComponent(t.address||t.name||"");a&&window.open(`https://www.google.com/maps/search/?api=1&query=${a}`,"_blank")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-4",children:[{type:"host",icon:me,label:"Chez l'habitant"},{type:"hotel",icon:Ke,label:"Hôtel"}].map(({type:a,icon:p,label:k})=>e.jsxs("button",{onClick:()=>!r&&c("type",a),className:`flex-1 flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.type===a?"border-primary bg-primary/5 text-primary":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-500"}`,disabled:r,children:[e.jsx(p,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:k})]},a))}),e.jsxs("div",{className:"space-y-4",children:[t.type==="hotel"?e.jsx(Z,{label:"Nom de l'hôtel",value:t.name||"",onChange:a=>c("name",a.target.value),disabled:r,placeholder:"Ex: Hôtel de la Gare"}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nom de l'hôte"}),e.jsxs("select",{value:t.name||"",onChange:a=>{const p=g.find(k=>k.nom===a.target.value);u({...t,name:a.target.value,address:p?.address||t.address||""})},disabled:r,title:"Sélectionner un hôte",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Sélectionner un hôte..."}),g.map(a=>e.jsx("option",{value:a.nom,children:a.nom},a.nom))]})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Z,{label:"Adresse",value:t.address||"",onChange:a=>c("address",a.target.value),disabled:r,leftIcon:e.jsx(ae,{className:"w-4 h-4"})})}),t.address&&e.jsx(T,{variant:"outline",className:"mb-[2px]",onClick:o,leftIcon:e.jsx(ae,{className:"w-4 h-4"}),children:"Voir"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Z,{label:"Arrivée (Check-in)",type:"datetime-local",value:ve(t.checkIn),onChange:a=>c("checkIn",a.target.value),disabled:r}),e.jsx(Z,{label:"Départ (Check-out)",type:"datetime-local",value:ve(t.checkOut),onChange:a=>c("checkOut",a.target.value),disabled:r})]}),t.type==="hotel"&&e.jsx(Z,{label:"Référence réservation",value:t.bookingReference||"",onChange:a=>c("bookingReference",a.target.value),disabled:r,leftIcon:e.jsx(ze,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes / Instructions"}),e.jsx("textarea",{value:t.notes||"",onChange:a=>c("notes",a.target.value),disabled:r,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-primary focus:border-primary p-3 min-h-[100px]",placeholder:"Codes d'accès, petit-déjeuner, etc."})]})]})]})},ct=({items:t=[],onUpdate:u})=>{const[r,g]=R.useState(""),[c,o]=R.useState(!1),a=i=>{const f=t.map(S=>S.id===i?{...S,isCompleted:!S.isCompleted}:S);u(f)},p=i=>{const f=t.filter(S=>S.id!==i);u(f)},k=i=>{if(i?.preventDefault(),!r.trim())return;const f={id:Ce(),label:r.trim(),isCompleted:!1};u([...t,f]),g(""),o(!1)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Liste des tâches (",t.filter(i=>i.isCompleted).length,"/",t.length,")"]}),e.jsxs(T,{size:"sm",variant:"ghost",onClick:()=>o(!c),className:"text-primary hover:text-primary/80 p-0 h-auto",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),c&&e.jsxs("form",{onSubmit:k,className:"flex gap-2 items-center mb-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx(Z,{autoFocus:!0,value:r,onChange:i=>g(i.target.value),placeholder:"Nouvelle tâche...",className:"flex-1 h-9 text-sm"}),e.jsx(T,{type:"submit",size:"sm",disabled:!r.trim(),children:"Ajouter"}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(!1),leftIcon:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:t.length===0&&!c?e.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Aucune tâche pour le moment"}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>o(!0),children:"Commencer une liste"})]}):t.map(i=>e.jsxs("div",{className:`flex items-center group p-2 rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50 ${i.isCompleted?"opacity-75":""}`,children:[e.jsx("button",{onClick:()=>a(i.id),className:`flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center mr-3 transition-colors ${i.isCompleted?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:i.isCompleted&&e.jsx(Ue,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:`flex-1 text-sm transition-all ${i.isCompleted?"text-gray-400 line-through":"text-gray-700 dark:text-gray-200"}`,children:i.label}),e.jsx("button",{onClick:()=>p(i.id),className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-500 transition-opacity",title:"Supprimer",children:e.jsx(be,{className:"w-4 h-4"})})]},i.id))})]})},mt=({logistics:t={},onUpdate:u,readOnly:r=!1,hosts:g=[]})=>{const[c,o]=R.useState("itinerary"),a=f=>{u({...t,itinerary:f})},p=f=>{u({...t,accommodation:f})},k=f=>{u({...t,checklist:f})},i=[{id:"itinerary",label:"Trajet",icon:Me},{id:"accommodation",label:"Hébergement",icon:me},{id:"checklist",label:"Tâches",icon:Ee}];return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:i.map(({id:f,label:S,icon:U})=>e.jsxs("button",{onClick:()=>o(f),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${c===f?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(U,{className:"w-4 h-4"}),S]},f))}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-[400px]",children:[c==="itinerary"&&e.jsx(it,{itinerary:t.itinerary||{transportMode:"car"},onUpdate:a,readOnly:r}),c==="accommodation"&&e.jsx(dt,{accommodation:t.accommodation||{type:"host",name:""},onUpdate:p,readOnly:r,hosts:g}),c==="checklist"&&e.jsx(ct,{items:t.checklist||[],onUpdate:k})]})]})};var ce={exports:{}},gt=ce.exports,ke;function pt(){return ke||(ke=1,(function(t,u){(function(r,g){t.exports=g(Ye())})(typeof self<"u"?self:gt,function(r){return(function(){var g={155:function(n){n.exports=r}},c={};function o(n){var l=c[n];if(l!==void 0)return l.exports;var m=c[n]={exports:{}};return g[n](m,m.exports,o),m.exports}o.d=function(n,l){for(var m in l)o.o(l,m)&&!o.o(n,m)&&Object.defineProperty(n,m,{enumerable:!0,get:l[m]})},o.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},o.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var a={};o.r(a),o.d(a,{useReactToPrint:function(){return ge}});var p=o(155);const k="printWindow";function i({level:n="error",messages:l,suppressErrors:m=!1}){m||(n==="error"?console.error(l):n==="warning"?console.warn(l):console.debug(l))}function f(n,l){if(l||!n){const m=document.getElementById(k);m&&document.body.removeChild(m)}}function S(n){return n instanceof Error?n:new Error("Unknown Error")}function U(n,l){const{documentTitle:m,onAfterPrint:v,onPrintError:L,preserveAfterPrint:q,print:z,suppressErrors:F}=l;setTimeout(()=>{var E,P;if(n.contentWindow){let s=function(){v?.(),f(q)};if(n.contentWindow.focus(),z)z(n).then(s).catch(M=>{L?L("print",S(M)):i({messages:["An error was thrown by the specified `print` function"],suppressErrors:F})});else{if(n.contentWindow.print){const M=(P=(E=n.contentDocument)===null||E===void 0?void 0:E.title)!==null&&P!==void 0?P:"",w=n.ownerDocument.title;m&&(n.ownerDocument.title=m,n.contentDocument&&(n.contentDocument.title=m)),n.contentWindow.print(),m&&(n.ownerDocument.title=w,n.contentDocument&&(n.contentDocument.title=M))}else i({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:F});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(M=>{var w,H;return((H=(w=navigator.userAgent)!==null&&w!==void 0?w:navigator.vendor)!==null&&H!==void 0?H:"opera"in window&&window.opera).match(M)})?setTimeout(s,500):s()}}else i({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:F})},500)}function j(n){const l=[],m=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,null);let v=m.nextNode();for(;v;)l.push(v),v=m.nextNode();return l}function B(n,l,m){const v=j(n),L=j(l);if(v.length===L.length)for(let q=0;q<v.length;q++){const z=v[q],F=L[q],E=z.shadowRoot;if(E!==null){const P=F.attachShadow({mode:E.mode});P.innerHTML=E.innerHTML,B(E,P,m)}}else i({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",n,l],suppressErrors:m})}const b=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function V(n,l,m,v){var L,q,z,F,E;const{contentNode:P,clonedContentNode:s,clonedImgNodes:M,clonedVideoNodes:w,numResourcesToLoad:H,originalCanvasNodes:re}=m,{bodyClass:pe,fonts:se,ignoreGlobalStyles:ne,pageStyle:Y,nonce:_,suppressErrors:K,copyShadowRoots:he}=v;n.onload=null;const h=(L=n.contentDocument)!==null&&L!==void 0?L:(q=n.contentWindow)===null||q===void 0?void 0:q.document;if(h){const C=h.body.appendChild(s);he&&B(P,C,!!K),se&&(!((z=n.contentDocument)===null||z===void 0)&&z.fonts&&(!((F=n.contentWindow)===null||F===void 0)&&F.FontFace)?se.forEach(x=>{const d=new FontFace(x.family,x.source,{weight:x.weight,style:x.style});n.contentDocument.fonts.add(d),d.loaded.then(()=>{l(d)}).catch(I=>{l(d,["Failed loading the font:",d,"Load error:",S(I)])})}):(se.forEach(x=>{l(x)}),i({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:K})));const Q=Y??b,W=h.createElement("style");_&&(W.setAttribute("nonce",_),h.head.setAttribute("nonce",_)),W.appendChild(h.createTextNode(Q)),h.head.appendChild(W),pe&&h.body.classList.add(...pe.split(" "));const ee=h.querySelectorAll("canvas");for(let x=0;x<re.length;++x){const d=re[x],I=ee[x];if(I===void 0){i({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",d],suppressErrors:K});continue}const y=I.getContext("2d");y&&y.drawImage(d,0,0)}for(let x=0;x<M.length;x++){const d=M[x],I=d.getAttribute("src");if(I){const y=new Image;y.onload=()=>{l(d)},y.onerror=(N,D,G,O,X)=>{l(d,["Error loading <img>",d,"Error",X])},y.src=I}else l(d,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',d])}for(let x=0;x<w.length;x++){const d=w[x];d.preload="auto";const I=d.getAttribute("poster");if(I){const y=new Image;y.onload=()=>{l(d)},y.onerror=(N,D,G,O,X)=>{l(d,["Error loading video poster",I,"for video",d,"Error:",X])},y.src=I}else d.readyState>=2?l(d):d.src?(d.onloadeddata=()=>{l(d)},d.onerror=(y,N,D,G,O)=>{l(d,["Error loading video",d,"Error",O])},d.onstalled=()=>{l(d,["Loading video stalled, skipping",d])}):l(d,["Error loading video, `src` is empty",d])}const te="select",$=P.querySelectorAll(te),J=h.querySelectorAll(te);for(let x=0;x<$.length;x++)J[x].value=$[x].value;if(!ne){const x=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let d=0,I=x.length;d<I;++d){const y=x[d];if(y.tagName.toLowerCase()==="style"){const N=h.createElement(y.tagName),D=y.sheet;if(D){let G="";try{const O=D.cssRules.length;for(let X=0;X<O;++X)typeof D.cssRules[X].cssText=="string"&&(G+=`${D.cssRules[X].cssText}\r
`)}catch(O){i({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",y,`Original error: ${S(O).message}`],level:"warning"})}N.setAttribute("id",`react-to-print-${d}`),_&&N.setAttribute("nonce",_),N.appendChild(h.createTextNode(G)),h.head.appendChild(N)}}else if(y.getAttribute("href"))if(y.hasAttribute("disabled"))i({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",y],level:"warning"}),l(y);else{const N=h.createElement(y.tagName);for(let D=0,G=y.attributes.length;D<G;++D){const O=y.attributes[D];O&&N.setAttribute(O.nodeName,(E=O.nodeValue)!==null&&E!==void 0?E:"")}N.onload=()=>{l(N)},N.onerror=(D,G,O,X,Pe)=>{l(N,["Failed to load",N,"Error:",Pe])},_&&N.setAttribute("nonce",_),h.head.appendChild(N)}else i({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",y],level:"warning"}),l(y)}}}H===0&&U(n,v)}function ge({bodyClass:n,contentRef:l,copyShadowRoots:m,documentTitle:v,fonts:L,ignoreGlobalStyles:q,nonce:z,onAfterPrint:F,onBeforePrint:E,onPrintError:P,pageStyle:s,preserveAfterPrint:M,print:w,printIframeProps:H,suppressErrors:re}){return(0,p.useCallback)(se=>{function ne(){const Y={bodyClass:n,contentRef:l,copyShadowRoots:m,documentTitle:v,fonts:L,ignoreGlobalStyles:q,nonce:z,onAfterPrint:F,onPrintError:P,pageStyle:s,preserveAfterPrint:M,print:w,suppressErrors:re},_=(function(h){const C=document.createElement("iframe");return C.width=`${document.documentElement.clientWidth}px`,C.height=`${document.documentElement.clientHeight}px`,C.style.position="absolute",C.style.top=`-${document.documentElement.clientHeight+100}px`,C.style.left=`-${document.documentElement.clientWidth+100}px`,C.id=k,C.srcdoc="<!DOCTYPE html>",h&&(h.allow&&(C.allow=h.allow),h.referrerPolicy!==void 0&&(C.referrerPolicy=h.referrerPolicy),h.sandbox!==void 0&&(C.sandbox=h.sandbox)),C})(H),K=(function(h,C){const{contentRef:Q,fonts:W,ignoreGlobalStyles:ee,suppressErrors:te}=C,$=(function({contentRef:N,optionalContent:D,suppressErrors:G}){return D&&typeof D=="function"?(N&&i({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),D()):N?N.current:void i({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:G})})({contentRef:Q,optionalContent:h,suppressErrors:te});if(!$)return;const J=$.cloneNode(!0),x=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),d=J.querySelectorAll("img"),I=J.querySelectorAll("video"),y=W?W.length:0;return{contentNode:$,clonedContentNode:J,clonedImgNodes:d,clonedVideoNodes:I,numResourcesToLoad:(ee?0:x.length)+d.length+I.length+y,originalCanvasNodes:$.querySelectorAll("canvas")}})(se,Y);if(!K)return void i({messages:["There is nothing to print"],suppressErrors:re});const he=(function(h,C,Q){const{suppressErrors:W}=h,ee=[],te=[];return function($,J){ee.includes($)?i({level:"debug",messages:["Tried to mark a resource that has already been handled",$],suppressErrors:W}):(J?(i({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...J],suppressErrors:W}),te.push($)):ee.push($),ee.length+te.length===C&&U(Q,h))}})(Y,K.numResourcesToLoad,_);(function(h,C,Q,W){h.onload=()=>{V(h,C,Q,W)},document.body.appendChild(h)})(_,he,K,Y)}f(M,!0),E?E().then(()=>{ne()}).catch(Y=>{P?.("onBeforePrint",S(Y))}):ne()},[n,l,m,v,L,q,z,F,E,P,s,M,w,re])}return a})()})})(ce)),ce.exports}var ht=pt();const ut=({visit:t,speaker:u,host:r})=>{const g=R.useRef(null),c=ht.useReactToPrint({content:()=>g.current,documentTitle:`Feuille_de_route_${t.nom}_${t.visitDate}`}),o=a=>{try{return de(ue(a),"EEEE d MMMM yyyy",{locale:we})}catch{return a}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end no-print",children:e.jsx(T,{onClick:c,leftIcon:e.jsx(rt,{className:"w-4 h-4"}),children:"Imprimer la feuille de route"})}),e.jsxs("div",{ref:g,className:"bg-white p-8 max-w-[210mm] mx-auto min-h-[297mm] shadow-sm print:shadow-none print:w-full print:max-w-none",children:[e.jsxs("div",{className:"border-b-2 border-gray-800 pb-6 mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wider mb-2 text-gray-900",children:"Feuille de Route"}),e.jsx("p",{className:"text-xl text-gray-600",children:t.congregation}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-lg",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-lg",children:o(t.visitDate)}),e.jsx("span",{className:"text-gray-400 mx-2",children:"|"}),e.jsx("span",{className:"font-semibold",children:t.visitTime})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 print:grid-cols-2 print:gap-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black",children:[e.jsx(We,{className:"w-5 h-5"})," Orateur & Discours"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200",children:[e.jsx("div",{className:"font-semibold text-lg mb-1",children:t.nom}),e.jsx("div",{className:"text-gray-600 mb-2",children:u?.email||"Email non renseigné"}),e.jsx("div",{className:"text-gray-600 mb-4",children:u?.telephone||"Tel non renseigné"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Discours"}),e.jsxs("div",{className:"font-medium",children:["N°",t.talkNoOrType||"Non défini"]}),t.talkTheme&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:t.talkTheme})]})]})]}),t.meals&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black",children:[e.jsx(ye,{className:"w-5 h-5"})," Repas"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200",children:e.jsx("div",{className:"text-gray-700",children:t.meals})})]}),(r||t.logistics?.accommodation?.name)&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black",children:[e.jsx(ye,{className:"w-5 h-5"})," Hébergement"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200",children:[r&&t.logistics?.accommodation?.type!=="hotel"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-lg mb-1",children:r.nom}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsx("span",{children:r.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(_e,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:r.telephone})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:r.notes&&e.jsxs("p",{className:"italic",children:['"',r.notes,'"']})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-lg mb-1",children:t.logistics?.accommodation?.name}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsx("span",{children:t.logistics?.accommodation?.address||"Adresse non renseignée"})]}),t.logistics?.accommodation?.bookingReference&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Référence:"})," ",t.logistics.accommodation.bookingReference]}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:t.logistics?.accommodation?.notes&&e.jsxs("p",{className:"italic",children:['"',t.logistics.accommodation.notes,'"']})})]}),t.logistics?.accommodation&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-sm grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Check-in"}),e.jsx("span",{className:"font-medium",children:t.logistics.accommodation.checkIn?de(ue(t.logistics.accommodation.checkIn),"dd/MM HH:mm"):"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Check-out"}),e.jsx("span",{className:"font-medium",children:t.logistics.accommodation.checkOut?de(ue(t.logistics.accommodation.checkOut),"dd/MM HH:mm"):"-"})]})]})]})]}),t.logistics?.itinerary&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black",children:[e.jsx(Te,{className:"w-5 h-5"})," Trajet"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Mode"}),e.jsx("div",{className:"font-medium capitalize",children:t.logistics.itinerary.transportMode})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Durée estimée"}),e.jsx("div",{className:"font-medium",children:t.logistics.itinerary.duration||"-"})]})]}),t.logistics.itinerary.meetingPoint&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Point de RDV"}),e.jsx("div",{className:"font-medium",children:t.logistics.itinerary.meetingPoint})]})]})]}),t.logistics?.checklist&&t.logistics.checklist.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-bold uppercase border-b border-gray-300 pb-2 flex items-center gap-2 text-primary-700 print:text-black",children:[e.jsx(Ee,{className:"w-5 h-5"})," À ne pas oublier"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg print:bg-transparent print:border print:border-gray-200",children:e.jsxs("ul",{className:"space-y-2",children:[t.logistics.checklist.filter(a=>!a.isCompleted).map(a=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-black rounded-sm print:block"}),e.jsx("span",{children:a.label})]},a.id)),t.logistics.checklist.every(a=>a.isCompleted)&&e.jsx("li",{className:"text-green-600 italic",children:"Toutes les tâches logistiques sont complétées."})]})})]})]}),e.jsx("div",{className:"mt-16 text-center text-sm text-gray-400 border-t pt-8 print:mt-auto print:absolute print:bottom-8 print:left-0 print:right-0",children:e.jsxs("p",{children:["Généré par KBV2 Manager - ",new Date().toLocaleDateString()]})})]})]})},Mt=({isOpen:t,onClose:u,visit:r,action:g})=>{const{updateVisit:c,deleteVisit:o,completeVisit:a,speakers:p,hosts:k}=De(),{addToast:i}=Re(),{confirm:f}=Le(),{scheduleVisitReminder:S,cancelVisitReminder:U}=Ve(),[j,B]=R.useState(!1),[b,V]=R.useState({}),[ge,n]=R.useState(!1),[l,m]=R.useState(void 0),[v,L]=R.useState({isOpen:!1,type:"confirmation"});if(R.useEffect(()=>{r&&V(r)},[r]),!r)return null;const q=async()=>{if(b){B(!0);try{await U(r.visitId),await c({...r,...b}),await S({...r,...b}),i("Visite mise à jour","success"),u()}catch{i("Erreur lors de la mise à jour","error")}finally{B(!1)}}},z=async()=>{if(await f({title:"Supprimer la visite",message:"Voulez-vous vraiment supprimer cette visite ?",confirmText:"Supprimer",confirmVariant:"danger"})){B(!0);try{await U(r.visitId),await o(r.visitId),i("Visite supprimée","success"),u()}catch{i("Erreur lors de la suppression","error")}finally{B(!1)}}},F=async s=>{B(!0);try{s==="completed"?(await a(r),i("Visite terminée et archivée","success")):(await c({...r,status:s}),i("Statut mis à jour","success")),u()}catch{i("Erreur lors de la mise à jour","error")}finally{B(!1)}},E=()=>{let s="Détails de la visite";const M=`Programmé pour le ${new Date(r.visitDate).toLocaleDateString()}`;let w=xe,H="from-blue-600 to-indigo-600";switch(g){case"edit":s="Modifier la visite",w=Se;break;case"delete":s="Supprimer la visite",w=be,H="from-red-600 to-red-500";break;case"status":s="Changer le statut",w=le,H="from-green-600 to-emerald-600";break;case"message":s="Envoyer un message",w=Ze,H="from-violet-600 to-purple-600";break;case"logistics":s="Logistique",w=Te,H="from-blue-600 to-cyan-600";break;case"expenses":s="Dépenses",w=Qe,H="from-emerald-600 to-teal-600";break}return e.jsxs("div",{className:oe("bg-gradient-to-r p-6 text-white relative overflow-hidden shrink-0",H),children:[e.jsx(w,{className:"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10 rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tighter mb-1",children:s}),e.jsx("p",{className:"opacity-90 text-sm font-medium",children:M}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-lg",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider opacity-80",children:"Orateur"}),e.jsx("span",{className:"font-bold text-sm",children:r.nom})]}),e.jsx(Ge,{className:"bg-white/20 text-white border-none backdrop-blur-md",children:r.congregation})]})]})]})},P=()=>{switch(g){case"edit":return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Date"}),e.jsx("input",{type:"date",value:b.visitDate,onChange:s=>V({...b,visitDate:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Heure"}),e.jsx("input",{type:"time",value:b.visitTime,onChange:s=>V({...b,visitTime:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Discours"}),e.jsxs("div",{className:"grid grid-cols-[1fr,2fr] gap-4",children:[e.jsx("input",{placeholder:"N°",value:b.talkNoOrType||"",onChange:s=>V({...b,talkNoOrType:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{placeholder:"Thème...",value:b.talkTheme||"",onChange:s=>V({...b,talkTheme:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Type"}),e.jsxs("select",{value:b.locationType,onChange:s=>V({...b,locationType:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"physical",children:"Présentiel"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"streaming",children:"Streaming"})]})]}),b.locationType==="physical"&&!b.congregation?.includes("Lyon")&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Hôte"}),e.jsxs("select",{value:b.host,onChange:s=>V({...b,host:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"-- Sélectionner --"}),e.jsx("option",{value:"Hôtel",children:"Hôtel"}),e.jsx("option",{value:"Pas besoin",children:"Pas besoin"}),k.map(s=>e.jsx("option",{value:s.nom,children:s.nom},s.nom))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest pl-1",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:s=>V({...b,notes:s.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-none rounded-xl font-medium focus:ring-2 focus:ring-indigo-500 min-h-[100px]",placeholder:"Notes privées..."})]})]});case"status":return e.jsx("div",{className:"p-6 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:[{id:"pending",label:"En attente",icon:ie,color:"text-orange-500",bg:"bg-orange-50 hover:bg-orange-100",border:"border-orange-200"},{id:"confirmed",label:"Confirmé",icon:le,color:"text-green-500",bg:"bg-green-50 hover:bg-green-100",border:"border-green-200"},{id:"completed",label:"Terminé",icon:le,color:"text-blue-500",bg:"bg-blue-50 hover:bg-blue-100",border:"border-blue-200"},{id:"cancelled",label:"Annulé",icon:nt,color:"text-red-500",bg:"bg-red-50 hover:bg-red-100",border:"border-red-200"}].map(s=>e.jsxs("button",{onClick:()=>F(s.id),className:oe("flex items-center p-4 rounded-xl border text-left transition-all",s.bg,s.border,r.status===s.id?"ring-2 ring-offset-2 ring-indigo-500":""),children:[e.jsx("div",{className:oe("p-2 rounded-full bg-white mr-4",s.color),children:e.jsx(s.icon,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:oe("font-bold text-sm",s.color.replace("text-","text-")),children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:r.status===s.id?"Statut actuel":"Cliquez pour changer"})]})]},s.id))})});case"delete":return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-in zoom-in duration-300",children:e.jsx(Je,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-2",children:"Êtes-vous sûr ?"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-8 max-w-sm mx-auto",children:["Cette action supprimera définitivement la visite de ",e.jsx("strong",{children:r.nom})," du ",new Date(r.visitDate).toLocaleDateString(),"."]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(T,{variant:"ghost",onClick:u,children:"Annuler"}),e.jsx(T,{variant:"danger",onClick:z,isLoading:j,children:"Oui, Supprimer"})]})]});case"message":return e.jsx("div",{className:"p-6 grid grid-cols-2 gap-4",children:[{type:"confirmation",label:"Confirmation",icon:le},{type:"preparation",label:"Préparation",icon:Fe},{type:"reminder-7",label:"Rappel J-7",icon:ie},{type:"reminder-2",label:"Rappel J-2",icon:ie},{type:"thanks",label:"Remerciements",icon:Be},{type:"host_request",label:"Demande Accueil",icon:me}].map(s=>e.jsxs("button",{onClick:()=>L({isOpen:!0,type:s.type}),className:"flex flex-col items-center justify-center gap-3 p-6 rounded-2xl bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all border border-transparent hover:border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-gray-700 text-indigo-500 flex items-center justify-center shadow-sm",children:e.jsx(s.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-300",children:s.label})]},s.type))});case"logistics":return r.congregation?.includes("Lyon")?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(me,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-lg font-bold",children:"Orateur Local"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Aucune logistique nécessaire."})]}):e.jsxs("div",{className:"p-6",children:[e.jsx(mt,{logistics:b.logistics||{},onUpdate:s=>V({...b,logistics:s}),readOnly:j,hosts:k}),e.jsxs("div",{className:"mt-6 border-t pt-6 bg-gray-50 dark:bg-gray-800/50 -mx-6 -mb-6 p-6",children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500 mb-4",children:"Feuille de route"}),e.jsx(ut,{visit:{...r,...b},speaker:p.find(s=>s.id===r.id),host:k.find(s=>s.nom===b.host)})]})]});case"expenses":return e.jsx("div",{className:"p-6",children:ge||l?e.jsx(ot,{initialData:l,onSubmit:async s=>{B(!0);const M=[...b.expenses||[],{...s,id:Ce()}];await c({...r,expenses:M}),V({...b,expenses:M}),n(!1),m(void 0),B(!1)},onCancel:()=>{n(!1),m(void 0)}}):e.jsx(Ae,{expenses:b.expenses||[],onAdd:()=>n(!0),onEdit:m,onDelete:()=>{},readOnly:j})});default:return null}};return g==="feedback"?e.jsx(Oe,{isOpen:t,onClose:u,visit:r,onSubmit:()=>{}}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{isOpen:t,onClose:u,title:"",size:["logistics","message"].includes(g)?"xl":"md",padding:"none",hideCloseButton:!0,className:"overflow-hidden",children:e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-900 flex flex-col",children:[E(),e.jsx("div",{className:"flex-1",children:P()}),(g==="edit"||g==="logistics")&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-3 shrink-0",children:[e.jsx(T,{variant:"ghost",onClick:u,disabled:j,children:"Annuler"}),e.jsx(T,{onClick:q,isLoading:j,className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-none shadow-lg shadow-blue-200 dark:shadow-none",children:"Enregistrer"})]}),g==="message"&&e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 flex justify-end shrink-0",children:e.jsx(T,{variant:"ghost",onClick:u,children:"Fermer"})})]})}),v.isOpen&&e.jsx(Xe,{isOpen:v.isOpen,onClose:()=>L({...v,isOpen:!1}),speaker:p.find(s=>s.id===r.id),visit:r,initialType:v.type})]})};export{Ct as A,Qe as C,et as E,Et as L,Se as P,Te as T,Mt as V,nt as X,ht as l};
//# sourceMappingURL=VisitActionModal-DTjKOCMk.js.map
