import{c as G,j as e,k as D,M as T,B as b,f as P,g as $,u as O,a as F,q as B,H as z,P as L,U as V}from"./index-BZdsEwY1.js";import{r as i}from"./charts-CCOFnOOy.js";import{S,P as q}from"./star-C-Wji6MC.js";import{T as U}from"./trash-2-Dvv6Z4GN.js";import{I as N,P as _,M as K}from"./Input-Q56iw-Sl.js";import{S as Q}from"./save-CKMJnOTl.js";import"./react-vendor-B9D_A6Vq.js";import"./utils-BQuD9tR2.js";const Z=G("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),J=[{id:"content",label:"Contenu du discours",icon:"üìñ"},{id:"delivery",label:"Pr√©sentation",icon:"üé§"},{id:"punctuality",label:"Ponctualit√©",icon:"‚è∞"},{id:"interaction",label:"Interaction",icon:"ü§ù"},{id:"preparation",label:"Pr√©paration",icon:"üìù"}],W=["Volume de la voix","Rythme de parole","Contact visuel","Gestion du temps","Utilisation des √âcritures","Applications pratiques","Interaction avec l'auditoire","Clart√© de l'expression"],X=({isOpen:m,onClose:d,visit:a,onSubmit:r})=>{const[x,g]=i.useState(0),[s,c]=i.useState(0),[u,n]=i.useState(0),[h,C]=i.useState(""),[p,M]=i.useState([]),[y,A]=i.useState(!1),[v,w]=i.useState({}),j=(t,l)=>{l==="speaker"?g(t):l==="host"?c(t):n(t)},R=(t,l)=>{w(o=>({...o,[t]:l}))},H=t=>{M(l=>l.includes(t)?l.filter(o=>o!==t):[...l,t])},E=()=>{const t={id:`feedback-${Date.now()}`,visitId:a.visitId,speakerRating:x,hostRating:s||void 0,organizationRating:u||void 0,comments:h,areasForImprovement:p.length>0?p:void 0,isPrivate:y,submittedBy:"Coordinateur",submittedAt:new Date().toISOString()};r(t),d()},f=({rating:t,onRate:l,label:o})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:o}),e.jsxs("div",{className:"flex gap-2",children:[[1,2,3,4,5].map(k=>e.jsx("button",{type:"button",onClick:()=>l(k),"aria-label":`Noter ${k} √©toile${k>1?"s":""}`,className:"focus:outline-none transition-transform hover:scale-110",children:e.jsx(S,{className:`w-8 h-8 ${k<=t?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`})},k)),t>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400 self-center",children:[t,"/5"]})]})]}),I=()=>{const t=[x,s,u].filter(l=>l>0);return t.length===0?0:(t.reduce((l,o)=>l+o,0)/t.length).toFixed(1)};return e.jsx(D,{isOpen:m,onClose:d,title:"√âvaluation de la visite",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:a.nom}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(a.visitDate).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),a.talkTheme&&e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2",children:[e.jsx("strong",{children:"Discours :"})," ",a.talkNoOrType," - ",a.talkTheme]})]}),x>0&&e.jsx("div",{className:"flex items-center justify-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-yellow-600",children:I()}),e.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Note globale"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(S,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"√âvaluation de l'orateur"})]}),e.jsx(f,{rating:x,onRate:t=>j(t,"speaker"),label:"Note g√©n√©rale de l'orateur *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"√âvaluation d√©taill√©e (optionnel)"}),J.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.label})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(l=>e.jsx("button",{type:"button",onClick:()=>R(t.id,l),"aria-label":`${t.label}: ${l} √©toile${l>1?"s":""}`,className:"focus:outline-none",children:e.jsx(S,{className:`w-5 h-5 ${l<=(v[t.id]||0)?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`})},l))})]},t.id))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Axes d'am√©lioration sugg√©r√©s (optionnel)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:W.map(t=>e.jsx("button",{type:"button",onClick:()=>H(t),className:`p-2 text-sm rounded-lg border-2 transition-all ${p.includes(t)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(Z,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"√âvaluation de l'accueil"})]}),e.jsx(f,{rating:s,onRate:t=>j(t,"host"),label:"Qualit√© de l'accueil (optionnel)"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"√âvaluation de l'organisation"})]}),e.jsx(f,{rating:u,onRate:t=>j(t,"organization"),label:"Organisation g√©n√©rale (optionnel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Commentaires d√©taill√©s"}),e.jsx("textarea",{value:h,onChange:t=>C(t.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Partagez vos impressions, points forts, suggestions d'am√©lioration..."})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:t=>A(t.target.checked),className:"mt-1 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"√âvaluation confidentielle"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Cette √©valuation sera visible uniquement par les coordinateurs et ne sera pas partag√©e avec l'orateur"})]})]})}),x>0&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:"R√©sum√© de l'√©valuation"})]}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ Note orateur : ",x,"/5"]}),s>0&&e.jsxs("p",{children:["‚Ä¢ Note accueil : ",s,"/5"]}),u>0&&e.jsxs("p",{children:["‚Ä¢ Note organisation : ",u,"/5"]}),p.length>0&&e.jsxs("p",{children:["‚Ä¢ ",p.length," axe(s) d'am√©lioration sugg√©r√©(s)"]}),h&&e.jsx("p",{children:"‚Ä¢ Commentaires ajout√©s"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(b,{variant:"secondary",onClick:d,children:"Annuler"}),e.jsxs(b,{variant:"primary",onClick:E,disabled:x===0,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Enregistrer l'√©valuation"]})]})]})})},Y=({speakers:m,onEdit:d,onDelete:a})=>m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-lg font-medium",children:"Aucun orateur"}),e.jsx("p",{className:"text-sm mt-2",children:"Ajoutez votre premier orateur pour commencer"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(r=>e.jsx(P,{hoverable:!0,children:e.jsx($,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.nom}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.congregation}),r.talkHistory&&r.talkHistory.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsxs("span",{children:[r.talkHistory.length," discours"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(r),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Modifier",children:e.jsx(q,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>a(r.id),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Supprimer",children:e.jsx(U,{className:"w-4 h-4 text-red-600"})})]})]})})},r.id))}),ee=({isOpen:m,onClose:d,speaker:a})=>{const{addSpeaker:r,updateSpeaker:x}=O(),{addToast:g}=F(),[s,c]=i.useState({nom:"",congregation:"",gender:"male"});i.useEffect(()=>{c(a?{nom:a.nom,congregation:a.congregation,gender:a.gender||"male"}:{nom:"",congregation:"",gender:"male"})},[a,m]);const u=async n=>{n.preventDefault();try{a?(await x({...a,...s}),g("Orateur modifi√©","success")):(await r({id:B(),...s,talkHistory:[]}),g("Orateur ajout√©","success")),d()}catch{g("Erreur lors de la sauvegarde","error")}};return e.jsx(D,{isOpen:m,onClose:d,size:"md",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"Modifier l'orateur":"Ajouter un orateur"}),e.jsx(N,{label:"Nom",value:s.nom,onChange:n=>c({...s,nom:n.target.value}),required:!0}),e.jsx(N,{label:"Congr√©gation",value:s.congregation,onChange:n=>c({...s,congregation:n.target.value}),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Genre"}),e.jsxs("select",{value:s.gender,onChange:n=>c({...s,gender:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",title:"Genre",children:[e.jsx("option",{value:"male",children:"Homme"}),e.jsx("option",{value:"female",children:"Femme"}),e.jsx("option",{value:"couple",children:"Couple"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(b,{type:"button",variant:"ghost",onClick:d,children:"Annuler"}),e.jsx(b,{type:"submit",children:a?"Modifier":"Ajouter"})]})]})})},te=({hosts:m,onEdit:d,onDelete:a})=>m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-lg font-medium",children:"Aucun contact d'accueil"}),e.jsx("p",{className:"text-sm mt-2",children:"Ajoutez votre premier contact pour commencer"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(r=>e.jsx(P,{hoverable:!0,children:e.jsx($,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),r.nom]}),r.telephone&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 flex items-center gap-2",children:[e.jsx(_,{className:"w-3 h-3"}),r.telephone]}),r.address&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-start gap-2",children:[e.jsx(K,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:r.address})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(r),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Modifier",children:e.jsx(q,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>a(r.nom),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Supprimer",children:e.jsx(U,{className:"w-4 h-4 text-red-600"})})]})]})})},r.nom))}),ae=({isOpen:m,onClose:d,host:a})=>{const{addHost:r,updateHost:x}=O(),{addToast:g}=F(),[s,c]=i.useState({nom:"",telephone:"",address:"",gender:"male"});i.useEffect(()=>{c(a?{nom:a.nom,telephone:a.telephone||"",address:a.address||"",gender:a.gender||"male"}:{nom:"",telephone:"",address:"",gender:"male"})},[a,m]);const u=async n=>{n.preventDefault();try{a?(await x(a.nom,s),g("Contact modifi√©","success")):(await r({...s,nom:s.nom,gender:s.gender}),g("Contact ajout√©","success")),d()}catch{g("Erreur lors de la sauvegarde","error")}};return e.jsx(D,{isOpen:m,onClose:d,size:"md",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"Modifier le contact":"Ajouter un contact"}),e.jsx(N,{label:"Nom",value:s.nom,onChange:n=>c({...s,nom:n.target.value}),required:!0}),e.jsx(N,{label:"T√©l√©phone",type:"tel",value:s.telephone,onChange:n=>c({...s,telephone:n.target.value})}),e.jsx(N,{label:"Adresse",value:s.address,onChange:n=>c({...s,address:n.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Genre"}),e.jsxs("select",{value:s.gender,onChange:n=>c({...s,gender:n.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",title:"Genre",children:[e.jsx("option",{value:"male",children:"Homme"}),e.jsx("option",{value:"female",children:"Femme"}),e.jsx("option",{value:"couple",children:"Couple"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(b,{type:"button",variant:"ghost",onClick:d,children:"Annuler"}),e.jsx(b,{type:"submit",children:a?"Modifier":"Ajouter"})]})]})})},me=()=>{const{speakers:m,deleteSpeaker:d,hosts:a,deleteHost:r}=O(),{addToast:x}=F(),[g,s]=i.useState("speakers"),[c,u]=i.useState(!1),[n,h]=i.useState(void 0),[C,p]=i.useState(!1),[M,y]=i.useState(void 0),[A,v]=i.useState(!1),[w,j]=i.useState(null),R=o=>{h(o),u(!0)},H=async o=>{window.confirm("√ätes-vous s√ªr de vouloir supprimer cet orateur ?")&&(d(o),x("Orateur supprim√©","success"))},E=()=>{u(!1),h(void 0)},f=o=>{y(o),p(!0)},I=async o=>{window.confirm("√ätes-vous s√ªr de vouloir supprimer ce contact ?")&&(r(o),x("Contact supprim√©","success"))},t=()=>{p(!1),y(void 0)},l=o=>{j(o),v(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(b,{leftIcon:e.jsx(L,{className:"w-4 h-4"}),onClick:()=>{g==="speakers"?(h(void 0),u(!0)):(y(void 0),p(!0))},children:g==="speakers"?"Ajouter un orateur":"Ajouter un contact"})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>s("speakers"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
              ${g==="speakers"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
            `,children:[e.jsx(V,{className:"w-4 h-4"}),"Orateurs"]}),e.jsxs("button",{onClick:()=>s("hosts"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
              ${g==="hosts"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
            `,children:[e.jsx(z,{className:"w-4 h-4"}),"Contacts d'accueil"]})]})}),e.jsx("div",{className:"min-h-[400px]",children:g==="speakers"?e.jsx(Y,{speakers:m,onEdit:R,onDelete:H,onFeedback:l}):e.jsx(te,{hosts:a,onEdit:f,onDelete:I})}),e.jsx(ee,{isOpen:c,onClose:E,speaker:n}),e.jsx(ae,{isOpen:C,onClose:t,host:M}),w&&e.jsx(X,{isOpen:A,onClose:()=>{v(!1),j(null)},visit:w,onSubmit:o=>{console.log("Feedback submitted:",o),x("√âvaluation enregistr√©e","success"),v(!1)}})]})};export{me as Speakers};
//# sourceMappingURL=Speakers-BrSFetHF.js.map
