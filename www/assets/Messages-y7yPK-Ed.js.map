{"version":3,"file":"Messages-y7yPK-Ed.js","sources":["../../node_modules/lucide-react/dist/esm/icons/mail.js","../../src/components/messages/MessageThread.tsx","../../src/components/messages/HostRequestModal.tsx","../../src/pages/Messages.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","import React from 'react';\r\nimport { Speaker, Visit } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Card, CardBody } from '@/components/ui/Card';\r\nimport { CommunicationProgress } from '@/components/messages/CommunicationProgress';\r\nimport { Phone, Mail, MessageSquare, Calendar, MapPin, User, Clock } from 'lucide-react';\r\nimport { getTalkTitle } from '@/data/talkTitles';\r\n\r\ninterface MessageThreadProps {\r\n  speaker: Speaker;\r\n  visits: Visit[];\r\n  onAction: (action: string, visit?: Visit) => void;\r\n}\r\n\r\nexport const MessageThread: React.FC<MessageThreadProps> = ({ speaker, visits, onAction }) => {\r\n  // Trier les visites par date d√©croissante\r\n  const sortedVisits = [...visits].sort((a, b) => new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime());\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-50 dark:bg-gray-900\">\r\n      {/* Header */}\r\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between shadow-sm\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-lg\">\r\n            {speaker.nom.charAt(0)}\r\n          </div>\r\n          <div>\r\n            <h2 className=\"font-bold text-gray-900 dark:text-white\">{speaker.nom}</h2>\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">{speaker.congregation}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          {speaker.telephone && (\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => window.open(`tel:${speaker.telephone}`)}>\r\n              <Phone className=\"w-4 h-4\" />\r\n            </Button>\r\n          )}\r\n          {speaker.email && (\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => window.open(`mailto:${speaker.email}`)}>\r\n              <Mail className=\"w-4 h-4\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\r\n        {sortedVisits.length > 0 ? (\r\n          sortedVisits.map((visit) => (\r\n            <div key={visit.id} className=\"space-y-2\">\r\n              <div className=\"flex items-center gap-2 text-xs text-gray-400 font-medium uppercase tracking-wider justify-center my-4\">\r\n                <span className=\"bg-gray-200 dark:bg-gray-700 h-px w-12\"></span>\r\n                {format(new Date(visit.visitDate), 'd MMMM yyyy', { locale: fr })}\r\n                <span className=\"bg-gray-200 dark:bg-gray-700 h-px w-12\"></span>\r\n              </div>\r\n\r\n              <Card>\r\n                <CardBody className=\"p-4\">\r\n                  <div className=\"flex justify-between items-start mb-4\">\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                        Discours n¬∞{visit.talkNoOrType}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {visit.talkTheme || getTalkTitle(visit.talkNoOrType)}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`\r\n                      px-2 py-1 rounded-full text-xs font-medium\r\n                      ${visit.status === 'confirmed' ? 'bg-green-100 text-green-800' : \r\n                        visit.status === 'pending' ? 'bg-orange-100 text-orange-800' : \r\n                        'bg-gray-100 text-gray-800'}\r\n                    `}>\r\n                      {visit.status === 'confirmed' ? 'Confirm√©' : \r\n                       visit.status === 'pending' ? 'En attente' : visit.status}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm text-gray-600 dark:text-gray-300\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Clock className=\"w-4 h-4 text-gray-400\" />\r\n                      {visit.visitTime}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <MapPin className=\"w-4 h-4 text-gray-400\" />\r\n                      {visit.locationType === 'physical' ? 'Salle du Royaume' : 'Zoom'}\r\n                    </div>\r\n                    {visit.host && (\r\n                      <div className=\"flex items-center gap-2 col-span-2\">\r\n                        <User className=\"w-4 h-4 text-gray-400\" />\r\n                        H√©berg√© par {visit.host}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Barre de progression communication */}\r\n                  <div className=\"mb-4\">\r\n                    <CommunicationProgress visit={visit} showLabels={true} size=\"md\" />\r\n                  </div>\r\n\r\n                  <div className=\"flex flex-wrap gap-2 pt-4 border-t border-gray-100 dark:border-gray-700\">\r\n                    <Button \r\n                      size=\"sm\" \r\n                      variant=\"primary\" \r\n                      leftIcon={<MessageSquare className=\"w-4 h-4\" />}\r\n                      onClick={() => onAction('whatsapp', visit)}\r\n                    >\r\n                      G√©n√©rer un message\r\n                    </Button>\r\n                    {visit.status === 'pending' && (\r\n                      <Button \r\n                        size=\"sm\" \r\n                        variant=\"primary\"\r\n                        onClick={() => onAction('confirm', visit)}\r\n                      >\r\n                        Confirmer\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\r\n            <Calendar className=\"w-12 h-12 mx-auto mb-3 opacity-20\" />\r\n            <p>Aucune visite programm√©e avec cet orateur</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Modal } from '@/components/ui/Modal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { Visit } from '@/types';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { useSettings } from '@/contexts/SettingsContext';\r\nimport { useToast } from '@/contexts/ToastContext';\r\nimport { generateHostRequestMessage } from '@/utils/messageGenerator';\r\nimport { Send, Copy, Check } from 'lucide-react';\r\nimport { formatFullDate } from '@/utils/formatters';\r\nimport { getTalkTitle } from '@/data/talkTitles';\r\n\r\ninterface HostRequestModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  visitsNeedingHost: Visit[];\r\n}\r\n\r\nexport const HostRequestModal: React.FC<HostRequestModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  visitsNeedingHost\r\n}) => {\r\n  const { congregationProfile } = useData();\r\n  const { settings } = useSettings();\r\n  const { addToast } = useToast();\r\n  \r\n  const [selectedVisits, setSelectedVisits] = useState<Set<string>>(\r\n    new Set(visitsNeedingHost.map(v => v.visitId))\r\n  );\r\n  const [message, setMessage] = useState('');\r\n\r\n  // G√©n√©rer le message quand les visites s√©lectionn√©es changent\r\n  React.useEffect(() => {\r\n    if (selectedVisits.size > 0) {\r\n      generateMessage();\r\n    }\r\n  }, [selectedVisits]);\r\n\r\n  const generateMessage = () => {\r\n    const visits = visitsNeedingHost.filter(v => selectedVisits.has(v.visitId));\r\n    const generated = generateHostRequestMessage(\r\n      visits,\r\n      congregationProfile,\r\n      settings.language\r\n    );\r\n    setMessage(generated);\r\n  };\r\n\r\n  const toggleVisit = (visitId: string) => {\r\n    const newSelected = new Set(selectedVisits);\r\n    if (newSelected.has(visitId)) {\r\n      newSelected.delete(visitId);\r\n    } else {\r\n      newSelected.add(visitId);\r\n    }\r\n    setSelectedVisits(newSelected);\r\n  };\r\n\r\n  const toggleAll = () => {\r\n    if (selectedVisits.size === visitsNeedingHost.length) {\r\n      setSelectedVisits(new Set());\r\n    } else {\r\n      setSelectedVisits(new Set(visitsNeedingHost.map(v => v.visitId)));\r\n    }\r\n  };\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(message);\r\n      addToast('Message copi√© dans le presse-papier', 'success');\r\n    } catch (error) {\r\n      addToast('Erreur lors de la copie', 'error');\r\n    }\r\n  };\r\n\r\n  const handleSendWhatsApp = () => {\r\n    const encodedMessage = encodeURIComponent(message);\r\n    // Envoyer au groupe KBV Lyon (vous pouvez configurer le num√©ro de groupe)\r\n    window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Demande d'accueil group√©e\"\r\n      size=\"lg\"\r\n      footer={\r\n        <>\r\n          <Button variant=\"ghost\" onClick={onClose}>\r\n            Annuler\r\n          </Button>\r\n          <Button \r\n            variant=\"secondary\" \r\n            onClick={handleCopy} \r\n            leftIcon={<Copy className=\"w-4 h-4\" />}\r\n            disabled={selectedVisits.size === 0}\r\n          >\r\n            Copier\r\n          </Button>\r\n          <Button \r\n            onClick={handleSendWhatsApp} \r\n            leftIcon={<Send className=\"w-4 h-4\" />}\r\n            disabled={selectedVisits.size === 0}\r\n          >\r\n            Envoyer (WhatsApp)\r\n          </Button>\r\n        </>\r\n      }\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Header avec compteur */}\r\n        <div className=\"flex items-center justify-between p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-orange-900 dark:text-orange-300\">\r\n              {visitsNeedingHost.length} visite{visitsNeedingHost.length > 1 ? 's' : ''} sans contact d'accueil\r\n            </h3>\r\n            <p className=\"text-sm text-orange-700 dark:text-orange-400 mt-1\">\r\n              S√©lectionnez les visites pour lesquelles demander un contact\r\n            </p>\r\n          </div>\r\n          <Badge variant=\"warning\" size=\"md\">\r\n            {selectedVisits.size} s√©lectionn√©e{selectedVisits.size > 1 ? 's' : ''}\r\n          </Badge>\r\n        </div>\r\n\r\n        {/* Liste des visites avec checkboxes */}\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h4 className=\"font-medium text-gray-900 dark:text-white\">Visites</h4>\r\n            <button\r\n              onClick={toggleAll}\r\n              className=\"text-sm text-primary-600 dark:text-primary-400 hover:underline\"\r\n            >\r\n              {selectedVisits.size === visitsNeedingHost.length ? 'Tout d√©s√©lectionner' : 'Tout s√©lectionner'}\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"max-h-64 overflow-y-auto space-y-2 border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\r\n            {visitsNeedingHost.map((visit) => (\r\n              <label\r\n                key={visit.visitId}\r\n                className=\"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors\"\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedVisits.has(visit.visitId)}\r\n                  onChange={() => toggleVisit(visit.visitId)}\r\n                  className=\"mt-1 w-4 h-4 text-primary-600 rounded focus:ring-primary-500\"\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {visit.nom}\r\n                    </p>\r\n                    <Badge variant=\"default\" size=\"sm\">\r\n                      {formatFullDate(visit.visitDate, settings.language)}\r\n                    </Badge>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    {visit.congregation} ‚Ä¢ {visit.visitTime}\r\n                  </p>\r\n                  {(visit.talkTheme || getTalkTitle(visit.talkNoOrType)) && (\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n                      N¬∞{visit.talkNoOrType} - {visit.talkTheme || getTalkTitle(visit.talkNoOrType)}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Aper√ßu du message */}\r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">\r\n            Aper√ßu du message\r\n          </h4>\r\n          <div className=\"relative\">\r\n            <textarea\r\n              className=\"w-full h-64 p-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none font-mono text-sm\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              placeholder={selectedVisits.size === 0 ? \"S√©lectionnez au moins une visite pour g√©n√©rer le message...\" : \"G√©n√©ration du message...\"}\r\n              disabled={selectedVisits.size === 0}\r\n            />\r\n            {selectedVisits.size > 0 && (\r\n              <div className=\"absolute top-2 right-2\">\r\n                <Badge variant=\"success\" size=\"sm\">\r\n                  <Check className=\"w-3 h-3 mr-1\" />\r\n                  Message pr√™t\r\n                </Badge>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            üí° Vous pouvez modifier le message avant de l'envoyer\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from 'react';\r\nimport { useData } from '@/contexts/DataContext';\r\nimport { usePlatformContext } from '@/contexts/PlatformContext';\r\nimport { MessageThread } from '@/components/messages/MessageThread';\r\nimport { MessageGeneratorModal } from '@/components/messages/MessageGeneratorModal';\r\nimport { HostRequestModal } from '@/components/messages/HostRequestModal';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { Input } from '@/components/ui/Input';\r\nimport { Badge } from '@/components/ui/Badge';\r\nimport { cn } from '@/utils/cn';\r\nimport {\r\n  MessageSquare,\r\n  Search,\r\n  Plus,\r\n  CheckCircle,\r\n  Clock,\r\n  AlertCircle,\r\n  Users\r\n} from 'lucide-react';\r\nimport { Speaker, Visit } from '@/types';\r\n\r\nexport const Messages: React.FC = () => {\r\n  const { visits, speakers, updateVisit, refreshData } = useData();\r\n  const { isPhoneS25Ultra } = usePlatformContext();\r\n  \r\n  // Mettre √† jour les titres manquants au chargement\r\n  React.useEffect(() => {\r\n    if (refreshData) {\r\n      refreshData();\r\n    }\r\n  }, []);\r\n  const [selectedSpeaker, setSelectedSpeaker] = useState<Speaker | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isGeneratorModalOpen, setIsGeneratorModalOpen] = useState(false);\r\n  const [isHostRequestModalOpen, setIsHostRequestModalOpen] = useState(false);\r\n  const [generatorVisit, setGeneratorVisit] = useState<Visit | null>(null);\r\n  const [filter, setFilter] = useState<'all' | 'unread' | 'pending'>('all');\r\n\r\n  // Generate conversations from visits (sans doublons)\r\n  const conversations = useMemo(() => {\r\n    const convos: { speaker: Speaker; visits: Visit[] }[] = [];\r\n    const seenSpeakers = new Set<string>();\r\n\r\n    // Group visits by speaker (√©viter les doublons)\r\n    speakers.forEach(speaker => {\r\n      // Utiliser l'ID comme cl√© unique\r\n      if (!seenSpeakers.has(speaker.id)) {\r\n        seenSpeakers.add(speaker.id);\r\n        const speakerVisits = visits.filter(visit => visit.id === speaker.id);\r\n        if (speakerVisits.length > 0) {\r\n          convos.push({ speaker, visits: speakerVisits });\r\n        }\r\n      }\r\n    });\r\n\r\n    return convos;\r\n  }, [visits, speakers]);\r\n\r\n  // Filtered conversations\r\n  const filteredConversations = useMemo(() => conversations.filter(convo => {\r\n      const matchesSearch =\r\n        convo.speaker.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        convo.speaker.congregation.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n      const matchesFilter = \r\n        filter === 'all' || \r\n        (filter === 'pending' && convo.visits.some(v => v.status === 'pending'));\r\n\r\n      return matchesSearch && matchesFilter;\r\n    }), [conversations, searchTerm, filter]);\r\n\r\n  const stats = useMemo(() => {\r\n    const total = conversations.length;\r\n    const pending = visits.filter(v => v.status === 'pending').length;\r\n    const needingHost = visits.filter(v => \r\n      !v.host || v.host === '√Ä d√©finir' || v.host === ''\r\n    ).length;\r\n\r\n    return { total, pending, needingHost };\r\n  }, [conversations, visits]);\r\n\r\n  const getStatusIcon = (visit: Visit) => {\r\n    switch (visit.status) {\r\n      case 'pending':\r\n        return <Clock className=\"w-4 h-4 text-orange-500\" />;\r\n      case 'confirmed':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      default:\r\n        return <AlertCircle className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleMessageAction = (action: string, visit?: Visit) => {\r\n    if (action === 'whatsapp' || action === 'email') {\r\n      if (visit && selectedSpeaker) {\r\n        setGeneratorVisit(visit);\r\n        setIsGeneratorModalOpen(true);\r\n      }\r\n    } else if (action === 'confirm' && visit) {\r\n      // Confirmer la visite\r\n      const updatedVisit: Visit = {\r\n        ...visit,\r\n        status: 'confirmed',\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      updateVisit(updatedVisit);\r\n    } else if (action === 'host_request' && visit) {\r\n      setGeneratorVisit(visit);\r\n      setIsHostRequestModalOpen(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"min-h-[calc(100vh-12rem)] flex flex-col\",\r\n      isPhoneS25Ultra && \"s25-ultra-optimized\"\r\n    )}>\r\n      {/* Header */}\r\n      <div className={cn(\r\n        \"flex justify-end gap-3 mb-6\",\r\n        isPhoneS25Ultra && \"flex-col gap-2\"\r\n      )}>\r\n        {/* Bouton demande d'accueil - conditionnel */}\r\n        {stats.needingHost > 0 && (\r\n          <Button\r\n            variant=\"secondary\"\r\n            className=\"bg-orange-100 text-orange-700 hover:bg-orange-200 dark:bg-orange-900/30 dark:text-orange-300 dark:hover:bg-orange-900/50\"\r\n            leftIcon={<Users className=\"w-4 h-4\" />}\r\n            onClick={() => setIsHostRequestModalOpen(true)}\r\n          >\r\n            Demande d'accueil ({stats.needingHost})\r\n          </Button>\r\n        )}\r\n        <Button\r\n          variant=\"secondary\"\r\n          leftIcon={<Plus className=\"w-4 h-4\" />}\r\n          onClick={() => setIsGeneratorModalOpen(true)}\r\n        >\r\n          Nouveau message\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className={cn(\r\n        \"grid gap-4 mb-6\",\r\n        isPhoneS25Ultra ? \"grid-cols-1\" : \"grid-cols-3\"\r\n      )}>\r\n        <div className={cn(\r\n          \"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\",\r\n          isPhoneS25Ultra && \"s25-card\"\r\n        )}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <MessageSquare className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n            <div>\r\n              <div className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{stats.total}</div>\r\n              <div className=\"text-xs text-blue-700 dark:text-blue-300\">Orateurs</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={cn(\r\n          \"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800\",\r\n          isPhoneS25Ultra && \"s25-card\"\r\n        )}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <Clock className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\r\n            <div>\r\n              <div className=\"text-lg font-semibold text-orange-900 dark:text-orange-100\">{stats.pending}</div>\r\n              <div className=\"text-xs text-orange-700 dark:text-orange-300\">En attente</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={cn(\r\n          \"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800\",\r\n          isPhoneS25Ultra && \"s25-card\"\r\n        )}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <CheckCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n            <div>\r\n              <div className=\"text-lg font-semibold text-green-900 dark:text-green-100\">{visits.filter(v => v.status === 'confirmed').length}</div>\r\n              <div className=\"text-xs text-green-700 dark:text-green-300\">Confirm√©es</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className={cn(\r\n        \"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6\",\r\n        isPhoneS25Ultra && \"p-3\"\r\n      )}>\r\n        <div className=\"flex flex-col sm:flex-row gap-4 w-full sm:w-auto\">\r\n          <Input\r\n            placeholder=\"Rechercher un orateur...\"\r\n            leftIcon={<Search className=\"w-4 h-4\" />}\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"min-w-64\"\r\n          />\r\n\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => setFilter('all')}\r\n              className={`px-3 py-2 text-sm rounded-lg transition-colors ${\r\n                filter === 'all'\r\n                  ? 'bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300'\r\n                  : 'text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700'\r\n              }`}\r\n            >\r\n              Tous\r\n            </button>\r\n            <button\r\n              onClick={() => setFilter('pending')}\r\n              className={`px-3 py-2 text-sm rounded-lg transition-colors ${\r\n                filter === 'pending'\r\n                  ? 'bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300'\r\n                  : 'text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700'\r\n              }`}\r\n            >\r\n              En attente ({stats.pending})\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content - Split View */}\r\n      <div className={cn(\r\n        \"flex-1 flex gap-6 min-h-0\",\r\n        isPhoneS25Ultra && \"flex-col gap-4\"\r\n      )}>\r\n        {/* Conversations List */}\r\n        <div className={cn(\r\n          \"w-full lg:w-96 flex flex-col bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\",\r\n          isPhoneS25Ultra && \"w-full min-h-0 flex-1\"\r\n        )}>\r\n          <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\r\n            <h3 className=\"font-semibold text-gray-900 dark:text-white\">Orateurs</h3>\r\n          </div>\r\n\r\n          <div className=\"flex-1 overflow-y-auto\">\r\n            {filteredConversations.length > 0 ? (\r\n              <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                {filteredConversations.map(({ speaker, visits: speakerVisits }) => (\r\n                  <div\r\n                    key={speaker.id}\r\n                    onClick={() => setSelectedSpeaker(speaker)}\r\n                    className={`p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${\r\n                      selectedSpeaker?.id === speaker.id\r\n                        ? 'bg-primary-50 dark:bg-primary-900/20 border-r-2 border-primary-500'\r\n                        : ''\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-start gap-3 flex-1 min-w-0\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold flex-shrink-0\">\r\n                          {speaker.nom.charAt(0).toUpperCase()}\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <h4 className=\"font-medium text-gray-900 dark:text-white truncate\">\r\n                              {speaker.nom}\r\n                            </h4>\r\n                            {speakerVisits.some(v => v.status === 'pending') && (\r\n                              <Badge variant=\"danger\" className=\"text-xs px-1.5 py-0.5\">\r\n                                !\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n\r\n                          <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1 truncate\">\r\n                            {speaker.congregation}\r\n                          </p>\r\n\r\n                          <div className=\"flex items-center gap-2 text-xs text-gray-400 dark:text-gray-500\">\r\n                            <span>{speakerVisits.length} visite{speakerVisits.length > 1 ? 's' : ''}</span>\r\n                            <span>‚Ä¢</span>\r\n                            <span>{speakerVisits.filter(v => v.status === 'pending').length} en attente</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col items-end gap-1 flex-shrink-0\">\r\n                        {speakerVisits.some(v => getStatusIcon(v))}\r\n                        <span className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                          {speaker.telephone || speaker.email ? 'Contact√©' : 'Sans contact'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\r\n                <MessageSquare className=\"w-12 h-12 mb-4 opacity-20\" />\r\n                <p className=\"text-center\">\r\n                  {searchTerm ? 'Aucun orateur trouv√©' : 'Aucun orateur'}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Message Thread */}\r\n        <div className={cn(\r\n          \"flex-1 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\",\r\n          isPhoneS25Ultra && \"w-full\"\r\n        )}>\r\n          {selectedSpeaker ? (\r\n            <MessageThread \r\n              speaker={selectedSpeaker}\r\n              visits={visits.filter(v => v.nom === selectedSpeaker.nom)}\r\n              onAction={handleMessageAction}\r\n            />\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400\">\r\n              <MessageSquare className=\"w-16 h-16 mb-4 opacity-20\" />\r\n              <h3 className=\"text-lg font-medium mb-2\">S√©lectionnez un orateur</h3>\r\n              <p className=\"text-center max-w-md\">\r\n                Choisissez un orateur dans la liste pour voir les d√©tails et envoyer des messages.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Message Generator Modal */}\r\n      {isGeneratorModalOpen && selectedSpeaker && generatorVisit && (\r\n        <MessageGeneratorModal\r\n          isOpen={isGeneratorModalOpen}\r\n          onClose={() => {\r\n            setIsGeneratorModalOpen(false);\r\n            setGeneratorVisit(null);\r\n          }}\r\n          speaker={selectedSpeaker}\r\n          visit={generatorVisit}\r\n        />\r\n      )}\r\n      \r\n      {/* Fallback modal when no specific visit is selected */}\r\n      {isGeneratorModalOpen && !generatorVisit && (\r\n        <MessageGeneratorModal\r\n          isOpen={isGeneratorModalOpen}\r\n          onClose={() => {\r\n            setIsGeneratorModalOpen(false);\r\n            setGeneratorVisit(null);\r\n          }}\r\n          speaker={selectedSpeaker || speakers[0]}\r\n          visit={visits[0]}\r\n        />\r\n      )}\r\n\r\n      {/* Host Request Modal */}\r\n      <HostRequestModal\r\n        isOpen={isHostRequestModalOpen}\r\n        onClose={() => setIsHostRequestModalOpen(false)}\r\n        visitsNeedingHost={visits.filter(v => \r\n          !v.host || v.host === '√Ä d√©finir' || v.host === ''\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":["Mail","createLucideIcon","MessageThread","speaker","visits","onAction","sortedVisits","a","b","jsxs","jsx","Button","Phone","visit","format","fr","Card","CardBody","getTalkTitle","Clock","MapPin","User","CommunicationProgress","MessageSquare","Calendar","HostRequestModal","isOpen","onClose","visitsNeedingHost","congregationProfile","useData","settings","useSettings","addToast","useToast","selectedVisits","setSelectedVisits","useState","v","message","setMessage","React","generateMessage","generated","generateHostRequestMessage","toggleVisit","visitId","newSelected","toggleAll","handleCopy","handleSendWhatsApp","encodedMessage","Modal","Fragment","Copy","Send","Badge","formatFullDate","e","Check","Messages","speakers","updateVisit","refreshData","isPhoneS25Ultra","usePlatformContext","selectedSpeaker","setSelectedSpeaker","searchTerm","setSearchTerm","isGeneratorModalOpen","setIsGeneratorModalOpen","isHostRequestModalOpen","setIsHostRequestModalOpen","generatorVisit","setGeneratorVisit","filter","setFilter","conversations","useMemo","convos","seenSpeakers","speakerVisits","filteredConversations","convo","matchesSearch","matchesFilter","stats","total","pending","needingHost","getStatusIcon","CheckCircle","AlertCircle","handleMessageAction","action","updatedVisit","cn","Users","Plus","Input","Search","MessageGeneratorModal"],"mappings":"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","x_google_ignoreList":[0]}