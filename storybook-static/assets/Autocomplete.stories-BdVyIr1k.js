import{r as t,j as a}from"./iframe-BdHU-FLj.js";import{X as R}from"./x-BC62ssot.js";import{c as I}from"./createLucideIcon-ClzONTEY.js";import"./preload-helper-PPVm8Dsz.js";const z=I("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),u=({options:l,value:n,onChange:x,placeholder:O="Rechercher...",className:S="",required:N=!1,disabled:f=!1,allowCustomValue:q=!1,maxOptions:V=10})=>{const[s,o]=t.useState(!1),[i,c]=t.useState(""),[A,d]=t.useState(null),[j,p]=t.useState(-1),h=t.useRef(null),w=t.useRef(null);t.useEffect(()=>{if(n){const e=l.find(r=>r.value===n);e&&(d(e),c(e.label))}else d(null),c("")},[n,l]);const m=l.filter(e=>e.label.toLowerCase().includes(i.toLowerCase())||e.subtitle&&e.subtitle.toLowerCase().includes(i.toLowerCase())).slice(0,V);t.useEffect(()=>{s&&p(-1)},[m,s]);const D=e=>{const r=e.target.value;c(r),o(!0),q&&(l.find(L=>L.label.toLowerCase()===r.toLowerCase())||(d(null),x?.(r)))},k=e=>{d(e),c(e.label),o(!1),x?.(e.value)},E=()=>{d(null),c(""),o(!1),x?.(""),h.current?.focus()},T=e=>{e.key==="Escape"?(o(!1),p(-1)):e.key==="ArrowDown"&&!s?(o(!0),p(0)):e.key==="ArrowDown"&&s?(e.preventDefault(),p(r=>r<m.length-1?r+1:r)):e.key==="ArrowUp"&&s?(e.preventDefault(),p(r=>r>0?r-1:-1)):e.key==="Enter"&&s&&j>=0&&(e.preventDefault(),k(m[j]))};return t.useEffect(()=>{const e=r=>{h.current&&!h.current.contains(r.target)&&w.current&&!w.current.contains(r.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),a.jsxs("div",{className:`relative ${S}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:h,type:"text",value:i,onChange:D,onFocus:()=>o(!0),onKeyDown:T,placeholder:O,className:"w-full px-3 py-2 pr-20 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",required:N,disabled:f}),(i||A)&&!f&&a.jsx("button",{type:"button",onClick:E,className:"absolute inset-y-0 right-8 flex items-center pr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Effacer la sélection",title:"Effacer",children:a.jsx(R,{className:"w-4 h-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",disabled:f,"aria-label":s?"Fermer la liste":"Ouvrir la liste",title:s?"Fermer":"Ouvrir",children:a.jsx(z,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`,"aria-hidden":"true"})})]}),s&&!f&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto",children:m.length>0?a.jsx("ul",{ref:w,className:"py-1",children:m.map(e=>a.jsxs("li",{onClick:()=>k(e),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),e.subtitle&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.subtitle})]},e.value))}):a.jsx("div",{className:"px-3 py-4 text-center text-gray-500 dark:text-gray-400",children:i?"Aucun résultat trouvé":"Tapez pour rechercher..."})})]})};u.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"AutocompleteOption"}],raw:"AutocompleteOption[]"},description:""},value:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Rechercher...'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},allowCustomValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},maxOptions:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}}}};const U={title:"UI/Autocomplete",component:u,parameters:{layout:"centered"},tags:["autodocs"]},C=[{value:"1",label:"Option 1"},{value:"2",label:"Option 2"},{value:"3",label:"Option 3"},{value:"4",label:"Option 4"},{value:"5",label:"Option 5"}],F=[{value:"john",label:"John Doe"},{value:"jane",label:"Jane Smith"},{value:"bob",label:"Bob Johnson"},{value:"alice",label:"Alice Williams"}],v={render:()=>{const[l,n]=t.useState("");return a.jsx("div",{className:"w-80",children:a.jsx(u,{options:C,value:l,onChange:n,placeholder:"Sélectionnez une option"})})}},g={render:()=>{const[l,n]=t.useState("");return a.jsx("div",{className:"w-80",children:a.jsx(u,{options:F,value:l,onChange:n,placeholder:"Rechercher un orateur",label:"Orateur"})})}},b={render:()=>{const[l,n]=t.useState("");return a.jsx("div",{className:"w-80",children:a.jsx(u,{options:C,value:l,onChange:n,placeholder:"Champ requis",required:!0,label:"Selection obligatoire"})})}},y={render:()=>a.jsx("div",{className:"w-80",children:a.jsx(u,{options:C,value:"1",onChange:()=>{},disabled:!0,label:"Champ désactivé"})})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <div className="w-80">\r
        <Autocomplete options={sampleOptions} value={value} onChange={setValue} placeholder="Sélectionnez une option" />\r
      </div>;
  }
}`,...v.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <div className="w-80">\r
        <Autocomplete options={sampleSpeakers} value={value} onChange={setValue} placeholder="Rechercher un orateur" label="Orateur" />\r
      </div>;
  }
}`,...g.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <div className="w-80">\r
        <Autocomplete options={sampleOptions} value={value} onChange={setValue} placeholder="Champ requis" required label="Selection obligatoire" />\r
      </div>;
  }
}`,...b.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: () => {
    return <div className="w-80">\r
        <Autocomplete options={sampleOptions} value="1" onChange={() => {}} disabled label="Champ désactivé" />\r
      </div>;
  }
}`,...y.parameters?.docs?.source}}};const $=["Default","WithLabel","Required","Disabled"];export{v as Default,y as Disabled,b as Required,g as WithLabel,$ as __namedExportsOrder,U as default};
